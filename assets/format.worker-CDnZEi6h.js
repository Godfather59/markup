(function(){"use strict";function c(n){try{const s=JSON.parse(n);return JSON.stringify(s,null,2)}catch(s){throw new Error("Invalid JSON: "+s.message)}}function f(n){try{let s=n;s=s.replace(/>\s*</g,"><");let e=0;const r=[],i=s.split(/(<[^>]+>)/g);for(let a=0;a<i.length;a++){const t=i[a];if(!(!t||t.trim()===""))if(t.startsWith("<"))t.startsWith("</")?(e=Math.max(0,e-1),r.push("  ".repeat(e)+t)):t.endsWith("/>")||t.match(/<\w+[^>]*\/>/)?r.push("  ".repeat(e)+t):t.startsWith("<?")?r.push(t):t.startsWith("<!")?r.push("  ".repeat(e)+t):(r.push("  ".repeat(e)+t),e++);else{const o=t.trim();o&&r.push("  ".repeat(e)+o)}}return r.join(`
`)}catch(s){throw new Error("Invalid XML: "+s.message)}}self.onmessage=n=>{const{type:s,content:e,language:r,id:i}=n.data;if(s==="format")try{let a=e;r==="json"?a=c(e):r==="xml"&&(a=f(e)),self.postMessage({type:"success",content:a,language:r,id:i})}catch(a){self.postMessage({type:"error",error:a.message,id:i})}}})();
