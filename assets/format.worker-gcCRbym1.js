(function(){"use strict";function f(a){try{const t=JSON.parse(a);return JSON.stringify(t,null,2)}catch(t){throw new Error("Invalid JSON: "+t.message)}}function h(a){try{if(new DOMParser().parseFromString(a,"text/xml").querySelector("parsererror"))throw new Error("Invalid XML");let o=a;o=o.replace(/>\s*</g,"><");let r=0;const s=[],l=o.split(/(<[^>]+>)/g);for(let c=0;c<l.length;c++){const e=l[c];if(!(!e||e.trim()===""))if(e.startsWith("<"))e.startsWith("</")?(r=Math.max(0,r-1),s.push("  ".repeat(r)+e)):e.endsWith("/>")||e.match(/<\w+[^>]*\/>/)?s.push("  ".repeat(r)+e):e.startsWith("<?")?s.push(e):e.startsWith("<!")?s.push("  ".repeat(r)+e):(s.push("  ".repeat(r)+e),r++);else{const p=e.trim();p&&s.push("  ".repeat(r)+p)}}return s.join(`
`)}catch(t){throw new Error("Invalid XML: "+t.message)}}self.onmessage=a=>{const{type:t,content:n,language:i,id:o}=a.data;if(t==="format")try{let r=n;i==="json"?r=f(n):i==="xml"&&(r=h(n)),self.postMessage({type:"success",content:r,language:i,id:o})}catch(r){self.postMessage({type:"error",error:r.message,id:o})}}})();
