(function(){"use strict";function u(n,s=2){try{const t=JSON.parse(n);return JSON.stringify(t,null,s)}catch(t){throw new Error("Invalid JSON: "+t.message)}}function h(n,s="  "){try{if(new DOMParser().parseFromString(n,"text/xml").querySelector("parsererror"))throw new Error("Invalid XML");let o=n;o=o.replace(/>\s*</g,"><");let e=0;const a=[],p=o.split(/(<[^>]+>)/g);for(let c=0;c<p.length;c++){const r=p[c];if(!(!r||r.trim()===""))if(r.startsWith("<"))r.startsWith("</")?(e=Math.max(0,e-1),a.push(s.repeat(e)+r)):r.endsWith("/>")||r.match(/<\w+[^>]*\/>/)?a.push(s.repeat(e)+r):r.startsWith("<?")?a.push(r):r.startsWith("<!")?a.push(s.repeat(e)+r):(a.push(s.repeat(e)+r),e++);else{const f=r.trim();f&&a.push(s.repeat(e)+f)}}return a.join(`
`)}catch(t){throw new Error("Invalid XML: "+t.message)}}self.onmessage=n=>{const{type:s,content:t,language:l,indent:i,id:o}=n.data;if(s==="format")try{let e=t;l==="json"?e=u(t,i==="tab"?"	":i===4?4:2):l==="xml"&&(e=h(t,i==="tab"?"	":i===4?"    ":"  ")),self.postMessage({type:"success",content:e,language:l,id:o})}catch(e){self.postMessage({type:"error",error:e.message,id:o})}}})();
