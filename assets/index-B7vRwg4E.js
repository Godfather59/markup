const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Bax6huS3.js","assets/index-CYDUsY1D.js","assets/index-xuTWpXBg.js","assets/SearchWidget-Cw6TJjHu.js","assets/x-B_uw4SnE.js","assets/KeyboardShortcutsModal-DX7o-4R-.js","assets/SettingsPanel-D5NtXRiW.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function PC(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var gd={exports:{}},fa={};var P1;function $C(){if(P1)return fa;P1=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,a){var o=null;if(a!==void 0&&(o=""+a),s.key!==void 0&&(o=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:l,type:i,key:o,ref:s!==void 0?s:null,props:a}}return fa.Fragment=t,fa.jsx=e,fa.jsxs=e,fa}var $1;function KC(){return $1||($1=1,gd.exports=$C()),gd.exports}var F=KC(),yd={exports:{}},wt={};var K1;function IC(){if(K1)return wt;K1=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function S(A){return A===null||typeof A!="object"?null:(A=b&&A[b]||A["@@iterator"],typeof A=="function"?A:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,C={};function M(A,z,I){this.props=A,this.context=z,this.refs=C,this.updater=I||O}M.prototype.isReactComponent={},M.prototype.setState=function(A,z){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,z,"setState")},M.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function H(){}H.prototype=M.prototype;function q(A,z,I){this.props=A,this.context=z,this.refs=C,this.updater=I||O}var P=q.prototype=new H;P.constructor=q,w(P,M.prototype),P.isPureReactComponent=!0;var Q=Array.isArray;function G(){}var V={H:null,A:null,T:null,S:null},ut=Object.prototype.hasOwnProperty;function nt(A,z,I){var lt=I.ref;return{$$typeof:l,type:A,key:z,ref:lt!==void 0?lt:null,props:I}}function gt(A,z){return nt(A.type,z,A.props)}function ft(A){return typeof A=="object"&&A!==null&&A.$$typeof===l}function et(A){var z={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(I){return z[I]})}var pt=/\/+/g;function mt(A,z){return typeof A=="object"&&A!==null&&A.key!=null?et(""+A.key):z.toString(36)}function St(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(G,G):(A.status="pending",A.then(function(z){A.status==="pending"&&(A.status="fulfilled",A.value=z)},function(z){A.status==="pending"&&(A.status="rejected",A.reason=z)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function B(A,z,I,lt,yt){var Ot=typeof A;(Ot==="undefined"||Ot==="boolean")&&(A=null);var Nt=!1;if(A===null)Nt=!0;else switch(Ot){case"bigint":case"string":case"number":Nt=!0;break;case"object":switch(A.$$typeof){case l:case t:Nt=!0;break;case p:return Nt=A._init,B(Nt(A._payload),z,I,lt,yt)}}if(Nt)return yt=yt(A),Nt=lt===""?"."+mt(A,0):lt,Q(yt)?(I="",Nt!=null&&(I=Nt.replace(pt,"$&/")+"/"),B(yt,z,I,"",function(Un){return Un})):yt!=null&&(ft(yt)&&(yt=gt(yt,I+(yt.key==null||A&&A.key===yt.key?"":(""+yt.key).replace(pt,"$&/")+"/")+Nt)),z.push(yt)),1;Nt=0;var Ae=lt===""?".":lt+":";if(Q(A))for(var le=0;le<A.length;le++)lt=A[le],Ot=Ae+mt(lt,le),Nt+=B(lt,z,I,Ot,yt);else if(le=S(A),typeof le=="function")for(A=le.call(A),le=0;!(lt=A.next()).done;)lt=lt.value,Ot=Ae+mt(lt,le++),Nt+=B(lt,z,I,Ot,yt);else if(Ot==="object"){if(typeof A.then=="function")return B(St(A),z,I,lt,yt);throw z=String(A),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return Nt}function K(A,z,I){if(A==null)return A;var lt=[],yt=0;return B(A,lt,"","",function(Ot){return z.call(I,Ot,yt++)}),lt}function tt(A){if(A._status===-1){var z=A._result;z=z(),z.then(function(I){(A._status===0||A._status===-1)&&(A._status=1,A._result=I)},function(I){(A._status===0||A._status===-1)&&(A._status=2,A._result=I)}),A._status===-1&&(A._status=0,A._result=z)}if(A._status===1)return A._result.default;throw A._result}var at=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},vt={map:K,forEach:function(A,z,I){K(A,function(){z.apply(this,arguments)},I)},count:function(A){var z=0;return K(A,function(){z++}),z},toArray:function(A){return K(A,function(z){return z})||[]},only:function(A){if(!ft(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return wt.Activity=y,wt.Children=vt,wt.Component=M,wt.Fragment=e,wt.Profiler=s,wt.PureComponent=q,wt.StrictMode=i,wt.Suspense=h,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,wt.__COMPILER_RUNTIME={__proto__:null,c:function(A){return V.H.useMemoCache(A)}},wt.cache=function(A){return function(){return A.apply(null,arguments)}},wt.cacheSignal=function(){return null},wt.cloneElement=function(A,z,I){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var lt=w({},A.props),yt=A.key;if(z!=null)for(Ot in z.key!==void 0&&(yt=""+z.key),z)!ut.call(z,Ot)||Ot==="key"||Ot==="__self"||Ot==="__source"||Ot==="ref"&&z.ref===void 0||(lt[Ot]=z[Ot]);var Ot=arguments.length-2;if(Ot===1)lt.children=I;else if(1<Ot){for(var Nt=Array(Ot),Ae=0;Ae<Ot;Ae++)Nt[Ae]=arguments[Ae+2];lt.children=Nt}return nt(A.type,yt,lt)},wt.createContext=function(A){return A={$$typeof:o,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:a,_context:A},A},wt.createElement=function(A,z,I){var lt,yt={},Ot=null;if(z!=null)for(lt in z.key!==void 0&&(Ot=""+z.key),z)ut.call(z,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(yt[lt]=z[lt]);var Nt=arguments.length-2;if(Nt===1)yt.children=I;else if(1<Nt){for(var Ae=Array(Nt),le=0;le<Nt;le++)Ae[le]=arguments[le+2];yt.children=Ae}if(A&&A.defaultProps)for(lt in Nt=A.defaultProps,Nt)yt[lt]===void 0&&(yt[lt]=Nt[lt]);return nt(A,Ot,yt)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(A){return{$$typeof:c,render:A}},wt.isValidElement=ft,wt.lazy=function(A){return{$$typeof:p,_payload:{_status:-1,_result:A},_init:tt}},wt.memo=function(A,z){return{$$typeof:d,type:A,compare:z===void 0?null:z}},wt.startTransition=function(A){var z=V.T,I={};V.T=I;try{var lt=A(),yt=V.S;yt!==null&&yt(I,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(G,at)}catch(Ot){at(Ot)}finally{z!==null&&I.types!==null&&(z.types=I.types),V.T=z}},wt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},wt.use=function(A){return V.H.use(A)},wt.useActionState=function(A,z,I){return V.H.useActionState(A,z,I)},wt.useCallback=function(A,z){return V.H.useCallback(A,z)},wt.useContext=function(A){return V.H.useContext(A)},wt.useDebugValue=function(){},wt.useDeferredValue=function(A,z){return V.H.useDeferredValue(A,z)},wt.useEffect=function(A,z){return V.H.useEffect(A,z)},wt.useEffectEvent=function(A){return V.H.useEffectEvent(A)},wt.useId=function(){return V.H.useId()},wt.useImperativeHandle=function(A,z,I){return V.H.useImperativeHandle(A,z,I)},wt.useInsertionEffect=function(A,z){return V.H.useInsertionEffect(A,z)},wt.useLayoutEffect=function(A,z){return V.H.useLayoutEffect(A,z)},wt.useMemo=function(A,z){return V.H.useMemo(A,z)},wt.useOptimistic=function(A,z){return V.H.useOptimistic(A,z)},wt.useReducer=function(A,z,I){return V.H.useReducer(A,z,I)},wt.useRef=function(A){return V.H.useRef(A)},wt.useState=function(A){return V.H.useState(A)},wt.useSyncExternalStore=function(A,z,I){return V.H.useSyncExternalStore(A,z,I)},wt.useTransition=function(){return V.H.useTransition()},wt.version="19.2.3",wt}var I1;function sp(){return I1||(I1=1,yd.exports=IC()),yd.exports}var $=sp();const Fe=PC($);var bd={exports:{}},ha={},vd={exports:{}},Sd={};var Z1;function ZC(){return Z1||(Z1=1,(function(l){function t(B,K){var tt=B.length;B.push(K);t:for(;0<tt;){var at=tt-1>>>1,vt=B[at];if(0<s(vt,K))B[at]=K,B[tt]=vt,tt=at;else break t}}function e(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var K=B[0],tt=B.pop();if(tt!==K){B[0]=tt;t:for(var at=0,vt=B.length,A=vt>>>1;at<A;){var z=2*(at+1)-1,I=B[z],lt=z+1,yt=B[lt];if(0>s(I,tt))lt<vt&&0>s(yt,I)?(B[at]=yt,B[lt]=tt,at=lt):(B[at]=I,B[z]=tt,at=z);else if(lt<vt&&0>s(yt,tt))B[at]=yt,B[lt]=tt,at=lt;else break t}}return K}function s(B,K){var tt=B.sortIndex-K.sortIndex;return tt!==0?tt:B.id-K.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;l.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();l.unstable_now=function(){return o.now()-c}}var h=[],d=[],p=1,y=null,b=3,S=!1,O=!1,w=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function P(B){for(var K=e(d);K!==null;){if(K.callback===null)i(d);else if(K.startTime<=B)i(d),K.sortIndex=K.expirationTime,t(h,K);else break;K=e(d)}}function Q(B){if(w=!1,P(B),!O)if(e(h)!==null)O=!0,G||(G=!0,et());else{var K=e(d);K!==null&&St(Q,K.startTime-B)}}var G=!1,V=-1,ut=5,nt=-1;function gt(){return C?!0:!(l.unstable_now()-nt<ut)}function ft(){if(C=!1,G){var B=l.unstable_now();nt=B;var K=!0;try{t:{O=!1,w&&(w=!1,H(V),V=-1),S=!0;var tt=b;try{e:{for(P(B),y=e(h);y!==null&&!(y.expirationTime>B&&gt());){var at=y.callback;if(typeof at=="function"){y.callback=null,b=y.priorityLevel;var vt=at(y.expirationTime<=B);if(B=l.unstable_now(),typeof vt=="function"){y.callback=vt,P(B),K=!0;break e}y===e(h)&&i(h),P(B)}else i(h);y=e(h)}if(y!==null)K=!0;else{var A=e(d);A!==null&&St(Q,A.startTime-B),K=!1}}break t}finally{y=null,b=tt,S=!1}K=void 0}}finally{K?et():G=!1}}}var et;if(typeof q=="function")et=function(){q(ft)};else if(typeof MessageChannel<"u"){var pt=new MessageChannel,mt=pt.port2;pt.port1.onmessage=ft,et=function(){mt.postMessage(null)}}else et=function(){M(ft,0)};function St(B,K){V=M(function(){B(l.unstable_now())},K)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(B){B.callback=null},l.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ut=0<B?Math.floor(1e3/B):5},l.unstable_getCurrentPriorityLevel=function(){return b},l.unstable_next=function(B){switch(b){case 1:case 2:case 3:var K=3;break;default:K=b}var tt=b;b=K;try{return B()}finally{b=tt}},l.unstable_requestPaint=function(){C=!0},l.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var tt=b;b=B;try{return K()}finally{b=tt}},l.unstable_scheduleCallback=function(B,K,tt){var at=l.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?at+tt:at):tt=at,B){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=tt+vt,B={id:p++,callback:K,priorityLevel:B,startTime:tt,expirationTime:vt,sortIndex:-1},tt>at?(B.sortIndex=tt,t(d,B),e(h)===null&&B===e(d)&&(w?(H(V),V=-1):w=!0,St(Q,tt-at))):(B.sortIndex=vt,t(h,B),O||S||(O=!0,G||(G=!0,et()))),B},l.unstable_shouldYield=gt,l.unstable_wrapCallback=function(B){var K=b;return function(){var tt=b;b=K;try{return B.apply(this,arguments)}finally{b=tt}}}})(Sd)),Sd}var F1;function FC(){return F1||(F1=1,vd.exports=ZC()),vd.exports}var xd={exports:{}},He={};var J1;function JC(){if(J1)return He;J1=1;var l=sp();function t(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(h,d,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:h,containerInfo:d,implementation:p}}var o=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return He.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,He.createPortal=function(h,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(h,d,null,p)},He.flushSync=function(h){var d=o.T,p=i.p;try{if(o.T=null,i.p=2,h)return h()}finally{o.T=d,i.p=p,i.d.f()}},He.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(h,d))},He.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},He.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var p=d.as,y=c(p,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,S=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:S}):p==="script"&&i.d.X(h,{crossOrigin:y,integrity:b,fetchPriority:S,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},He.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);i.d.M(h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(h)},He.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,y=c(p,d.crossOrigin);i.d.L(h,p,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},He.preloadModule=function(h,d){if(typeof h=="string")if(d){var p=c(d.as,d.crossOrigin);i.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(h)},He.requestFormReset=function(h){i.d.r(h)},He.unstable_batchedUpdates=function(h,d){return h(d)},He.useFormState=function(h,d,p){return o.H.useFormState(h,d,p)},He.useFormStatus=function(){return o.H.useHostTransitionStatus()},He.version="19.2.3",He}var tb;function tk(){if(tb)return xd.exports;tb=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),xd.exports=JC(),xd.exports}var eb;function ek(){if(eb)return ha;eb=1;var l=FC(),t=sp(),e=tk();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)r+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function a(n){var r=n,u=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(u=r.return),n=r.return;while(n)}return r.tag===3?u:null}function o(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function c(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function h(n){if(a(n)!==n)throw Error(i(188))}function d(n){var r=n.alternate;if(!r){if(r=a(n),r===null)throw Error(i(188));return r!==n?null:n}for(var u=n,f=r;;){var m=u.return;if(m===null)break;var g=m.alternate;if(g===null){if(f=m.return,f!==null){u=f;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===u)return h(m),n;if(g===f)return h(m),r;g=g.sibling}throw Error(i(188))}if(u.return!==f.return)u=m,f=g;else{for(var v=!1,x=m.child;x;){if(x===u){v=!0,u=m,f=g;break}if(x===f){v=!0,f=m,u=g;break}x=x.sibling}if(!v){for(x=g.child;x;){if(x===u){v=!0,u=g,f=m;break}if(x===f){v=!0,f=g,u=m;break}x=x.sibling}if(!v)throw Error(i(189))}}if(u.alternate!==f)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?n:r}function p(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=p(n),r!==null)return r;n=n.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),q=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),ut=Symbol.for("react.lazy"),nt=Symbol.for("react.activity"),gt=Symbol.for("react.memo_cache_sentinel"),ft=Symbol.iterator;function et(n){return n===null||typeof n!="object"?null:(n=ft&&n[ft]||n["@@iterator"],typeof n=="function"?n:null)}var pt=Symbol.for("react.client.reference");function mt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===pt?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case w:return"Fragment";case M:return"Profiler";case C:return"StrictMode";case Q:return"Suspense";case G:return"SuspenseList";case nt:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case q:return n.displayName||"Context";case H:return(n._context.displayName||"Context")+".Consumer";case P:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case V:return r=n.displayName||null,r!==null?r:mt(n.type)||"Memo";case ut:r=n._payload,n=n._init;try{return mt(n(r))}catch{}}return null}var St=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},at=[],vt=-1;function A(n){return{current:n}}function z(n){0>vt||(n.current=at[vt],at[vt]=null,vt--)}function I(n,r){vt++,at[vt]=n.current,n.current=r}var lt=A(null),yt=A(null),Ot=A(null),Nt=A(null);function Ae(n,r){switch(I(Ot,r),I(yt,n),I(lt,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?g1(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=g1(r),n=y1(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}z(lt),I(lt,n)}function le(){z(lt),z(yt),z(Ot)}function Un(n){n.memoizedState!==null&&I(Nt,n);var r=lt.current,u=y1(r,n.type);r!==u&&(I(yt,n),I(lt,u))}function ls(n){yt.current===n&&(z(lt),z(yt)),Nt.current===n&&(z(Nt),aa._currentValue=tt)}var cn,co;function fn(n){if(cn===void 0)try{throw Error()}catch(u){var r=u.stack.trim().match(/\n( *(at )?)/);cn=r&&r[1]||"",co=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cn+n+co}var pr=!1;function gr(n,r){if(!n||pr)return"";pr=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(_){var N=_}Reflect.construct(n,[],Y)}else{try{Y.call()}catch(_){N=_}n.call(Y.prototype)}}else{try{throw Error()}catch(_){N=_}(Y=n())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(_){if(_&&N&&typeof _.stack=="string")return[_.stack,N.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=f.DetermineComponentFrameRoot(),v=g[0],x=g[1];if(v&&x){var k=v.split(`
`),R=x.split(`
`);for(m=f=0;f<k.length&&!k[f].includes("DetermineComponentFrameRoot");)f++;for(;m<R.length&&!R[m].includes("DetermineComponentFrameRoot");)m++;if(f===k.length||m===R.length)for(f=k.length-1,m=R.length-1;1<=f&&0<=m&&k[f]!==R[m];)m--;for(;1<=f&&0<=m;f--,m--)if(k[f]!==R[m]){if(f!==1||m!==1)do if(f--,m--,0>m||k[f]!==R[m]){var U=`
`+k[f].replace(" at new "," at ");return n.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",n.displayName)),U}while(1<=f&&0<=m);break}}}finally{pr=!1,Error.prepareStackTrace=u}return(u=n?n.displayName||n.name:"")?fn(u):""}function Jc(n,r){switch(n.tag){case 26:case 27:case 5:return fn(n.type);case 16:return fn("Lazy");case 13:return n.child!==r&&r!==null?fn("Suspense Fallback"):fn("Suspense");case 19:return fn("SuspenseList");case 0:case 15:return gr(n.type,!1);case 11:return gr(n.type.render,!1);case 1:return gr(n.type,!0);case 31:return fn("Activity");default:return""}}function fo(n){try{var r="",u=null;do r+=Jc(n,u),u=n,n=n.return;while(n);return r}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Ml=Object.prototype.hasOwnProperty,yr=l.unstable_scheduleCallback,br=l.unstable_cancelCallback,tf=l.unstable_shouldYield,ef=l.unstable_requestPaint,X=l.unstable_now,it=l.unstable_getCurrentPriorityLevel,_t=l.unstable_ImmediatePriority,Ht=l.unstable_UserBlockingPriority,Te=l.unstable_NormalPriority,nf=l.unstable_LowPriority,Ip=l.unstable_IdlePriority,E2=l.log,D2=l.unstable_setDisableYieldValue,vr=null,li=null;function jn(n){if(typeof E2=="function"&&D2(n),li&&typeof li.setStrictMode=="function")try{li.setStrictMode(vr,n)}catch{}}var si=Math.clz32?Math.clz32:N2,R2=Math.log,B2=Math.LN2;function N2(n){return n>>>=0,n===0?32:31-(R2(n)/B2|0)|0}var ho=256,mo=262144,po=4194304;function El(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function go(n,r,u){var f=n.pendingLanes;if(f===0)return 0;var m=0,g=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var x=f&134217727;return x!==0?(f=x&~g,f!==0?m=El(f):(v&=x,v!==0?m=El(v):u||(u=x&~n,u!==0&&(m=El(u))))):(x=f&~g,x!==0?m=El(x):v!==0?m=El(v):u||(u=f&~n,u!==0&&(m=El(u)))),m===0?0:r!==0&&r!==m&&(r&g)===0&&(g=m&-m,u=r&-r,g>=u||g===32&&(u&4194048)!==0)?r:m}function Sr(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function z2(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zp(){var n=po;return po<<=1,(po&62914560)===0&&(po=4194304),n}function lf(n){for(var r=[],u=0;31>u;u++)r.push(n);return r}function xr(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function L2(n,r,u,f,m,g){var v=n.pendingLanes;n.pendingLanes=u,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=u,n.entangledLanes&=u,n.errorRecoveryDisabledLanes&=u,n.shellSuspendCounter=0;var x=n.entanglements,k=n.expirationTimes,R=n.hiddenUpdates;for(u=v&~u;0<u;){var U=31-si(u),Y=1<<U;x[U]=0,k[U]=-1;var N=R[U];if(N!==null)for(R[U]=null,U=0;U<N.length;U++){var _=N[U];_!==null&&(_.lane&=-536870913)}u&=~Y}f!==0&&Fp(n,f,0),g!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=g&~(v&~r))}function Fp(n,r,u){n.pendingLanes|=r,n.suspendedLanes&=~r;var f=31-si(r);n.entangledLanes|=r,n.entanglements[f]=n.entanglements[f]|1073741824|u&261930}function Jp(n,r){var u=n.entangledLanes|=r;for(n=n.entanglements;u;){var f=31-si(u),m=1<<f;m&r|n[f]&r&&(n[f]|=r),u&=~m}}function tg(n,r){var u=r&-r;return u=(u&42)!==0?1:sf(u),(u&(n.suspendedLanes|r))!==0?0:u}function sf(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function rf(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function eg(){var n=K.p;return n!==0?n:(n=window.event,n===void 0?32:U1(n.type))}function ig(n,r){var u=K.p;try{return K.p=n,r()}finally{K.p=u}}var Wn=Math.random().toString(36).slice(2),Me="__reactFiber$"+Wn,Qe="__reactProps$"+Wn,ss="__reactContainer$"+Wn,af="__reactEvents$"+Wn,_2="__reactListeners$"+Wn,H2="__reactHandles$"+Wn,ng="__reactResources$"+Wn,Or="__reactMarker$"+Wn;function of(n){delete n[Me],delete n[Qe],delete n[af],delete n[_2],delete n[H2]}function rs(n){var r=n[Me];if(r)return r;for(var u=n.parentNode;u;){if(r=u[ss]||u[Me]){if(u=r.alternate,r.child!==null||u!==null&&u.child!==null)for(n=C1(n);n!==null;){if(u=n[Me])return u;n=C1(n)}return r}n=u,u=n.parentNode}return null}function as(n){if(n=n[Me]||n[ss]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function wr(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function os(n){var r=n[ng];return r||(r=n[ng]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function xe(n){n[Or]=!0}var lg=new Set,sg={};function Dl(n,r){us(n,r),us(n+"Capture",r)}function us(n,r){for(sg[n]=r,n=0;n<r.length;n++)lg.add(r[n])}var q2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rg={},ag={};function V2(n){return Ml.call(ag,n)?!0:Ml.call(rg,n)?!1:q2.test(n)?ag[n]=!0:(rg[n]=!0,!1)}function yo(n,r,u){if(V2(r))if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+u)}}function bo(n,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+u)}}function hn(n,r,u,f){if(f===null)n.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(u);return}n.setAttributeNS(r,u,""+f)}}function yi(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function og(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function U2(n,r,u){var f=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var m=f.get,g=f.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return m.call(this)},set:function(v){u=""+v,g.call(this,v)}}),Object.defineProperty(n,r,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function uf(n){if(!n._valueTracker){var r=og(n)?"checked":"value";n._valueTracker=U2(n,r,""+n[r])}}function ug(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var u=r.getValue(),f="";return n&&(f=og(n)?n.checked?"true":"false":n.value),n=f,n!==u?(r.setValue(n),!0):!1}function vo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var j2=/[\n"\\]/g;function bi(n){return n.replace(j2,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function cf(n,r,u,f,m,g,v,x){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),r!=null?v==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+yi(r)):n.value!==""+yi(r)&&(n.value=""+yi(r)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),r!=null?ff(n,v,yi(r)):u!=null?ff(n,v,yi(u)):f!=null&&n.removeAttribute("value"),m==null&&g!=null&&(n.defaultChecked=!!g),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.name=""+yi(x):n.removeAttribute("name")}function cg(n,r,u,f,m,g,v,x){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),r!=null||u!=null){if(!(g!=="submit"&&g!=="reset"||r!=null)){uf(n);return}u=u!=null?""+yi(u):"",r=r!=null?""+yi(r):u,x||r===n.value||(n.value=r),n.defaultValue=r}f=f??m,f=typeof f!="function"&&typeof f!="symbol"&&!!f,n.checked=x?n.checked:!!f,n.defaultChecked=!!f,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),uf(n)}function ff(n,r,u){r==="number"&&vo(n.ownerDocument)===n||n.defaultValue===""+u||(n.defaultValue=""+u)}function cs(n,r,u,f){if(n=n.options,r){r={};for(var m=0;m<u.length;m++)r["$"+u[m]]=!0;for(u=0;u<n.length;u++)m=r.hasOwnProperty("$"+n[u].value),n[u].selected!==m&&(n[u].selected=m),m&&f&&(n[u].defaultSelected=!0)}else{for(u=""+yi(u),r=null,m=0;m<n.length;m++){if(n[m].value===u){n[m].selected=!0,f&&(n[m].defaultSelected=!0);return}r!==null||n[m].disabled||(r=n[m])}r!==null&&(r.selected=!0)}}function fg(n,r,u){if(r!=null&&(r=""+yi(r),r!==n.value&&(n.value=r),u==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=u!=null?""+yi(u):""}function hg(n,r,u,f){if(r==null){if(f!=null){if(u!=null)throw Error(i(92));if(St(f)){if(1<f.length)throw Error(i(93));f=f[0]}u=f}u==null&&(u=""),r=u}u=yi(r),n.defaultValue=u,f=n.textContent,f===u&&f!==""&&f!==null&&(n.value=f),uf(n)}function fs(n,r){if(r){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=r;return}}n.textContent=r}var W2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dg(n,r,u){var f=r.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":f?n.setProperty(r,u):typeof u!="number"||u===0||W2.has(r)?r==="float"?n.cssFloat=u:n[r]=(""+u).trim():n[r]=u+"px"}function mg(n,r,u){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?n.setProperty(f,""):f==="float"?n.cssFloat="":n[f]="");for(var m in r)f=r[m],r.hasOwnProperty(m)&&u[m]!==f&&dg(n,m,f)}else for(var g in r)r.hasOwnProperty(g)&&dg(n,g,r[g])}function hf(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),X2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function So(n){return X2.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function dn(){}var df=null;function mf(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var hs=null,ds=null;function pg(n){var r=as(n);if(r&&(n=r.stateNode)){var u=n[Qe]||null;t:switch(n=r.stateNode,r.type){case"input":if(cf(n,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),r=u.name,u.type==="radio"&&r!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+bi(""+r)+'"][type="radio"]'),r=0;r<u.length;r++){var f=u[r];if(f!==n&&f.form===n.form){var m=f[Qe]||null;if(!m)throw Error(i(90));cf(f,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<u.length;r++)f=u[r],f.form===n.form&&ug(f)}break t;case"textarea":fg(n,u.value,u.defaultValue);break t;case"select":r=u.value,r!=null&&cs(n,!!u.multiple,r,!1)}}}var pf=!1;function gg(n,r,u){if(pf)return n(r,u);pf=!0;try{var f=n(r);return f}finally{if(pf=!1,(hs!==null||ds!==null)&&(au(),hs&&(r=hs,n=ds,ds=hs=null,pg(r),n)))for(r=0;r<n.length;r++)pg(n[r])}}function Cr(n,r){var u=n.stateNode;if(u===null)return null;var f=u[Qe]||null;if(f===null)return null;u=f[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break t;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(i(231,r,typeof u));return u}var mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gf=!1;if(mn)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){gf=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{gf=!1}var Yn=null,yf=null,xo=null;function yg(){if(xo)return xo;var n,r=yf,u=r.length,f,m="value"in Yn?Yn.value:Yn.textContent,g=m.length;for(n=0;n<u&&r[n]===m[n];n++);var v=u-n;for(f=1;f<=v&&r[u-f]===m[g-f];f++);return xo=m.slice(n,1<f?1-f:void 0)}function Oo(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function wo(){return!0}function bg(){return!1}function Ge(n){function r(u,f,m,g,v){this._reactName=u,this._targetInst=m,this.type=f,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(u=n[x],this[x]=u?u(g):g[x]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?wo:bg,this.isPropagationStopped=bg,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=wo)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=wo)},persist:function(){},isPersistent:wo}),r}var Rl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Co=Ge(Rl),Ar=y({},Rl,{view:0,detail:0}),Q2=Ge(Ar),bf,vf,Tr,ko=y({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Tr&&(Tr&&n.type==="mousemove"?(bf=n.screenX-Tr.screenX,vf=n.screenY-Tr.screenY):vf=bf=0,Tr=n),bf)},movementY:function(n){return"movementY"in n?n.movementY:vf}}),vg=Ge(ko),G2=y({},ko,{dataTransfer:0}),P2=Ge(G2),$2=y({},Ar,{relatedTarget:0}),Sf=Ge($2),K2=y({},Rl,{animationName:0,elapsedTime:0,pseudoElement:0}),I2=Ge(K2),Z2=y({},Rl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),F2=Ge(Z2),J2=y({},Rl,{data:0}),Sg=Ge(J2),tw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ew={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nw(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=iw[n])?!!r[n]:!1}function xf(){return nw}var lw=y({},Ar,{key:function(n){if(n.key){var r=tw[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Oo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ew[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xf,charCode:function(n){return n.type==="keypress"?Oo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Oo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sw=Ge(lw),rw=y({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xg=Ge(rw),aw=y({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xf}),ow=Ge(aw),uw=y({},Rl,{propertyName:0,elapsedTime:0,pseudoElement:0}),cw=Ge(uw),fw=y({},ko,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),hw=Ge(fw),dw=y({},Rl,{newState:0,oldState:0}),mw=Ge(dw),pw=[9,13,27,32],Of=mn&&"CompositionEvent"in window,Mr=null;mn&&"documentMode"in document&&(Mr=document.documentMode);var gw=mn&&"TextEvent"in window&&!Mr,Og=mn&&(!Of||Mr&&8<Mr&&11>=Mr),wg=" ",Cg=!1;function kg(n,r){switch(n){case"keyup":return pw.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ag(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ms=!1;function yw(n,r){switch(n){case"compositionend":return Ag(r);case"keypress":return r.which!==32?null:(Cg=!0,wg);case"textInput":return n=r.data,n===wg&&Cg?null:n;default:return null}}function bw(n,r){if(ms)return n==="compositionend"||!Of&&kg(n,r)?(n=yg(),xo=yf=Yn=null,ms=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Og&&r.locale!=="ko"?null:r.data;default:return null}}var vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tg(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!vw[n.type]:r==="textarea"}function Mg(n,r,u,f){hs?ds?ds.push(f):ds=[f]:hs=f,r=mu(r,"onChange"),0<r.length&&(u=new Co("onChange","change",null,u,f),n.push({event:u,listeners:r}))}var Er=null,Dr=null;function Sw(n){c1(n,0)}function Ao(n){var r=wr(n);if(ug(r))return n}function Eg(n,r){if(n==="change")return r}var Dg=!1;if(mn){var wf;if(mn){var Cf="oninput"in document;if(!Cf){var Rg=document.createElement("div");Rg.setAttribute("oninput","return;"),Cf=typeof Rg.oninput=="function"}wf=Cf}else wf=!1;Dg=wf&&(!document.documentMode||9<document.documentMode)}function Bg(){Er&&(Er.detachEvent("onpropertychange",Ng),Dr=Er=null)}function Ng(n){if(n.propertyName==="value"&&Ao(Dr)){var r=[];Mg(r,Dr,n,mf(n)),gg(Sw,r)}}function xw(n,r,u){n==="focusin"?(Bg(),Er=r,Dr=u,Er.attachEvent("onpropertychange",Ng)):n==="focusout"&&Bg()}function Ow(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ao(Dr)}function ww(n,r){if(n==="click")return Ao(r)}function Cw(n,r){if(n==="input"||n==="change")return Ao(r)}function kw(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var ri=typeof Object.is=="function"?Object.is:kw;function Rr(n,r){if(ri(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var u=Object.keys(n),f=Object.keys(r);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var m=u[f];if(!Ml.call(r,m)||!ri(n[m],r[m]))return!1}return!0}function zg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Lg(n,r){var u=zg(n);n=0;for(var f;u;){if(u.nodeType===3){if(f=n+u.textContent.length,n<=r&&f>=r)return{node:u,offset:r-n};n=f}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=zg(u)}}function _g(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?_g(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Hg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=vo(n.document);r instanceof n.HTMLIFrameElement;){try{var u=typeof r.contentWindow.location.href=="string"}catch{u=!1}if(u)n=r.contentWindow;else break;r=vo(n.document)}return r}function kf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var Aw=mn&&"documentMode"in document&&11>=document.documentMode,ps=null,Af=null,Br=null,Tf=!1;function qg(n,r,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Tf||ps==null||ps!==vo(f)||(f=ps,"selectionStart"in f&&kf(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Br&&Rr(Br,f)||(Br=f,f=mu(Af,"onSelect"),0<f.length&&(r=new Co("onSelect","select",null,r,u),n.push({event:r,listeners:f}),r.target=ps)))}function Bl(n,r){var u={};return u[n.toLowerCase()]=r.toLowerCase(),u["Webkit"+n]="webkit"+r,u["Moz"+n]="moz"+r,u}var gs={animationend:Bl("Animation","AnimationEnd"),animationiteration:Bl("Animation","AnimationIteration"),animationstart:Bl("Animation","AnimationStart"),transitionrun:Bl("Transition","TransitionRun"),transitionstart:Bl("Transition","TransitionStart"),transitioncancel:Bl("Transition","TransitionCancel"),transitionend:Bl("Transition","TransitionEnd")},Mf={},Vg={};mn&&(Vg=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Nl(n){if(Mf[n])return Mf[n];if(!gs[n])return n;var r=gs[n],u;for(u in r)if(r.hasOwnProperty(u)&&u in Vg)return Mf[n]=r[u];return n}var Ug=Nl("animationend"),jg=Nl("animationiteration"),Wg=Nl("animationstart"),Tw=Nl("transitionrun"),Mw=Nl("transitionstart"),Ew=Nl("transitioncancel"),Yg=Nl("transitionend"),Xg=new Map,Ef="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ef.push("scrollEnd");function Li(n,r){Xg.set(n,r),Dl(r,[n])}var To=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},vi=[],ys=0,Df=0;function Mo(){for(var n=ys,r=Df=ys=0;r<n;){var u=vi[r];vi[r++]=null;var f=vi[r];vi[r++]=null;var m=vi[r];vi[r++]=null;var g=vi[r];if(vi[r++]=null,f!==null&&m!==null){var v=f.pending;v===null?m.next=m:(m.next=v.next,v.next=m),f.pending=m}g!==0&&Qg(u,m,g)}}function Eo(n,r,u,f){vi[ys++]=n,vi[ys++]=r,vi[ys++]=u,vi[ys++]=f,Df|=f,n.lanes|=f,n=n.alternate,n!==null&&(n.lanes|=f)}function Rf(n,r,u,f){return Eo(n,r,u,f),Do(n)}function zl(n,r){return Eo(n,null,null,r),Do(n)}function Qg(n,r,u){n.lanes|=u;var f=n.alternate;f!==null&&(f.lanes|=u);for(var m=!1,g=n.return;g!==null;)g.childLanes|=u,f=g.alternate,f!==null&&(f.childLanes|=u),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(m=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,m&&r!==null&&(m=31-si(u),n=g.hiddenUpdates,f=n[m],f===null?n[m]=[r]:f.push(r),r.lane=u|536870912),g):null}function Do(n){if(50<ta)throw ta=0,Uh=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var bs={};function Dw(n,r,u,f){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(n,r,u,f){return new Dw(n,r,u,f)}function Bf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function pn(n,r){var u=n.alternate;return u===null?(u=ai(n.tag,r,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=r,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&65011712,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,r=n.dependencies,u.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u.refCleanup=n.refCleanup,u}function Gg(n,r){n.flags&=65011714;var u=n.alternate;return u===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=u.childLanes,n.lanes=u.lanes,n.child=u.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,n.type=u.type,r=u.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Ro(n,r,u,f,m,g){var v=0;if(f=n,typeof n=="function")Bf(n)&&(v=1);else if(typeof n=="string")v=LC(n,u,lt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case nt:return n=ai(31,u,r,m),n.elementType=nt,n.lanes=g,n;case w:return Ll(u.children,m,g,r);case C:v=8,m|=24;break;case M:return n=ai(12,u,r,m|2),n.elementType=M,n.lanes=g,n;case Q:return n=ai(13,u,r,m),n.elementType=Q,n.lanes=g,n;case G:return n=ai(19,u,r,m),n.elementType=G,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case q:v=10;break t;case H:v=9;break t;case P:v=11;break t;case V:v=14;break t;case ut:v=16,f=null;break t}v=29,u=Error(i(130,n===null?"null":typeof n,"")),f=null}return r=ai(v,u,r,m),r.elementType=n,r.type=f,r.lanes=g,r}function Ll(n,r,u,f){return n=ai(7,n,f,r),n.lanes=u,n}function Nf(n,r,u){return n=ai(6,n,null,r),n.lanes=u,n}function Pg(n){var r=ai(18,null,null,0);return r.stateNode=n,r}function zf(n,r,u){return r=ai(4,n.children!==null?n.children:[],n.key,r),r.lanes=u,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var $g=new WeakMap;function Si(n,r){if(typeof n=="object"&&n!==null){var u=$g.get(n);return u!==void 0?u:(r={value:n,source:r,stack:fo(r)},$g.set(n,r),r)}return{value:n,source:r,stack:fo(r)}}var vs=[],Ss=0,Bo=null,Nr=0,xi=[],Oi=0,Xn=null,Qi=1,Gi="";function gn(n,r){vs[Ss++]=Nr,vs[Ss++]=Bo,Bo=n,Nr=r}function Kg(n,r,u){xi[Oi++]=Qi,xi[Oi++]=Gi,xi[Oi++]=Xn,Xn=n;var f=Qi;n=Gi;var m=32-si(f)-1;f&=~(1<<m),u+=1;var g=32-si(r)+m;if(30<g){var v=m-m%5;g=(f&(1<<v)-1).toString(32),f>>=v,m-=v,Qi=1<<32-si(r)+m|u<<m|f,Gi=g+n}else Qi=1<<g|u<<m|f,Gi=n}function Lf(n){n.return!==null&&(gn(n,1),Kg(n,1,0))}function _f(n){for(;n===Bo;)Bo=vs[--Ss],vs[Ss]=null,Nr=vs[--Ss],vs[Ss]=null;for(;n===Xn;)Xn=xi[--Oi],xi[Oi]=null,Gi=xi[--Oi],xi[Oi]=null,Qi=xi[--Oi],xi[Oi]=null}function Ig(n,r){xi[Oi++]=Qi,xi[Oi++]=Gi,xi[Oi++]=Xn,Qi=r.id,Gi=r.overflow,Xn=n}var Ee=null,Jt=null,zt=!1,Qn=null,wi=!1,Hf=Error(i(519));function Gn(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zr(Si(r,n)),Hf}function Zg(n){var r=n.stateNode,u=n.type,f=n.memoizedProps;switch(r[Me]=n,r[Qe]=f,u){case"dialog":Et("cancel",r),Et("close",r);break;case"iframe":case"object":case"embed":Et("load",r);break;case"video":case"audio":for(u=0;u<ia.length;u++)Et(ia[u],r);break;case"source":Et("error",r);break;case"img":case"image":case"link":Et("error",r),Et("load",r);break;case"details":Et("toggle",r);break;case"input":Et("invalid",r),cg(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Et("invalid",r);break;case"textarea":Et("invalid",r),hg(r,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||r.textContent===""+u||f.suppressHydrationWarning===!0||m1(r.textContent,u)?(f.popover!=null&&(Et("beforetoggle",r),Et("toggle",r)),f.onScroll!=null&&Et("scroll",r),f.onScrollEnd!=null&&Et("scrollend",r),f.onClick!=null&&(r.onclick=dn),r=!0):r=!1,r||Gn(n,!0)}function Fg(n){for(Ee=n.return;Ee;)switch(Ee.tag){case 5:case 31:case 13:wi=!1;return;case 27:case 3:wi=!0;return;default:Ee=Ee.return}}function xs(n){if(n!==Ee)return!1;if(!zt)return Fg(n),zt=!0,!1;var r=n.tag,u;if((u=r!==3&&r!==27)&&((u=r===5)&&(u=n.type,u=!(u!=="form"&&u!=="button")||ed(n.type,n.memoizedProps)),u=!u),u&&Jt&&Gn(n),Fg(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Jt=w1(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Jt=w1(n)}else r===27?(r=Jt,rl(n.type)?(n=rd,rd=null,Jt=n):Jt=r):Jt=Ee?ki(n.stateNode.nextSibling):null;return!0}function _l(){Jt=Ee=null,zt=!1}function qf(){var n=Qn;return n!==null&&(Ie===null?Ie=n:Ie.push.apply(Ie,n),Qn=null),n}function zr(n){Qn===null?Qn=[n]:Qn.push(n)}var Vf=A(null),Hl=null,yn=null;function Pn(n,r,u){I(Vf,r._currentValue),r._currentValue=u}function bn(n){n._currentValue=Vf.current,z(Vf)}function Uf(n,r,u){for(;n!==null;){var f=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),n===u)break;n=n.return}}function jf(n,r,u,f){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var g=m.dependencies;if(g!==null){var v=m.child;g=g.firstContext;t:for(;g!==null;){var x=g;g=m;for(var k=0;k<r.length;k++)if(x.context===r[k]){g.lanes|=u,x=g.alternate,x!==null&&(x.lanes|=u),Uf(g.return,u,n),f||(v=null);break t}g=x.next}}else if(m.tag===18){if(v=m.return,v===null)throw Error(i(341));v.lanes|=u,g=v.alternate,g!==null&&(g.lanes|=u),Uf(v,u,n),v=null}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===n){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}}function Os(n,r,u,f){n=null;for(var m=r,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var v=m.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var x=m.type;ri(m.pendingProps.value,v.value)||(n!==null?n.push(x):n=[x])}}else if(m===Nt.current){if(v=m.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(aa):n=[aa])}m=m.return}n!==null&&jf(r,n,u,f),r.flags|=262144}function No(n){for(n=n.firstContext;n!==null;){if(!ri(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ql(n){Hl=n,yn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function De(n){return Jg(Hl,n)}function zo(n,r){return Hl===null&&ql(n),Jg(n,r)}function Jg(n,r){var u=r._currentValue;if(r={context:r,memoizedValue:u,next:null},yn===null){if(n===null)throw Error(i(308));yn=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else yn=yn.next=r;return u}var Rw=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(u,f){n.push(f)}};this.abort=function(){r.aborted=!0,n.forEach(function(u){return u()})}},Bw=l.unstable_scheduleCallback,Nw=l.unstable_NormalPriority,fe={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wf(){return{controller:new Rw,data:new Map,refCount:0}}function Lr(n){n.refCount--,n.refCount===0&&Bw(Nw,function(){n.controller.abort()})}var _r=null,Yf=0,ws=0,Cs=null;function zw(n,r){if(_r===null){var u=_r=[];Yf=0,ws=Gh(),Cs={status:"pending",value:void 0,then:function(f){u.push(f)}}}return Yf++,r.then(t0,t0),r}function t0(){if(--Yf===0&&_r!==null){Cs!==null&&(Cs.status="fulfilled");var n=_r;_r=null,ws=0,Cs=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Lw(n,r){var u=[],f={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return n.then(function(){f.status="fulfilled",f.value=r;for(var m=0;m<u.length;m++)(0,u[m])(r)},function(m){for(f.status="rejected",f.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),f}var e0=B.S;B.S=function(n,r){qy=X(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&zw(n,r),e0!==null&&e0(n,r)};var Vl=A(null);function Xf(){var n=Vl.current;return n!==null?n:$t.pooledCache}function Lo(n,r){r===null?I(Vl,Vl.current):I(Vl,r.pool)}function i0(){var n=Xf();return n===null?null:{parent:fe._currentValue,pool:n}}var ks=Error(i(460)),Qf=Error(i(474)),_o=Error(i(542)),Ho={then:function(){}};function n0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function l0(n,r,u){switch(u=n[u],u===void 0?n.push(r):u!==r&&(r.then(dn,dn),r=u),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,r0(n),n;default:if(typeof r.status=="string")r.then(dn,dn);else{if(n=$t,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(f){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=f}},function(f){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,r0(n),n}throw jl=r,ks}}function Ul(n){try{var r=n._init;return r(n._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(jl=u,ks):u}}var jl=null;function s0(){if(jl===null)throw Error(i(459));var n=jl;return jl=null,n}function r0(n){if(n===ks||n===_o)throw Error(i(483))}var As=null,Hr=0;function qo(n){var r=Hr;return Hr+=1,As===null&&(As=[]),l0(As,n,r)}function qr(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Vo(n,r){throw r.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function a0(n){function r(E,T){if(n){var D=E.deletions;D===null?(E.deletions=[T],E.flags|=16):D.push(T)}}function u(E,T){if(!n)return null;for(;T!==null;)r(E,T),T=T.sibling;return null}function f(E){for(var T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function m(E,T){return E=pn(E,T),E.index=0,E.sibling=null,E}function g(E,T,D){return E.index=D,n?(D=E.alternate,D!==null?(D=D.index,D<T?(E.flags|=67108866,T):D):(E.flags|=67108866,T)):(E.flags|=1048576,T)}function v(E){return n&&E.alternate===null&&(E.flags|=67108866),E}function x(E,T,D,j){return T===null||T.tag!==6?(T=Nf(D,E.mode,j),T.return=E,T):(T=m(T,D),T.return=E,T)}function k(E,T,D,j){var dt=D.type;return dt===w?U(E,T,D.props.children,j,D.key):T!==null&&(T.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===ut&&Ul(dt)===T.type)?(T=m(T,D.props),qr(T,D),T.return=E,T):(T=Ro(D.type,D.key,D.props,null,E.mode,j),qr(T,D),T.return=E,T)}function R(E,T,D,j){return T===null||T.tag!==4||T.stateNode.containerInfo!==D.containerInfo||T.stateNode.implementation!==D.implementation?(T=zf(D,E.mode,j),T.return=E,T):(T=m(T,D.children||[]),T.return=E,T)}function U(E,T,D,j,dt){return T===null||T.tag!==7?(T=Ll(D,E.mode,j,dt),T.return=E,T):(T=m(T,D),T.return=E,T)}function Y(E,T,D){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Nf(""+T,E.mode,D),T.return=E,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case S:return D=Ro(T.type,T.key,T.props,null,E.mode,D),qr(D,T),D.return=E,D;case O:return T=zf(T,E.mode,D),T.return=E,T;case ut:return T=Ul(T),Y(E,T,D)}if(St(T)||et(T))return T=Ll(T,E.mode,D,null),T.return=E,T;if(typeof T.then=="function")return Y(E,qo(T),D);if(T.$$typeof===q)return Y(E,zo(E,T),D);Vo(E,T)}return null}function N(E,T,D,j){var dt=T!==null?T.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return dt!==null?null:x(E,T,""+D,j);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case S:return D.key===dt?k(E,T,D,j):null;case O:return D.key===dt?R(E,T,D,j):null;case ut:return D=Ul(D),N(E,T,D,j)}if(St(D)||et(D))return dt!==null?null:U(E,T,D,j,null);if(typeof D.then=="function")return N(E,T,qo(D),j);if(D.$$typeof===q)return N(E,T,zo(E,D),j);Vo(E,D)}return null}function _(E,T,D,j,dt){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return E=E.get(D)||null,x(T,E,""+j,dt);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case S:return E=E.get(j.key===null?D:j.key)||null,k(T,E,j,dt);case O:return E=E.get(j.key===null?D:j.key)||null,R(T,E,j,dt);case ut:return j=Ul(j),_(E,T,D,j,dt)}if(St(j)||et(j))return E=E.get(D)||null,U(T,E,j,dt,null);if(typeof j.then=="function")return _(E,T,D,qo(j),dt);if(j.$$typeof===q)return _(E,T,D,zo(T,j),dt);Vo(T,j)}return null}function ot(E,T,D,j){for(var dt=null,Vt=null,ct=T,At=T=0,Rt=null;ct!==null&&At<D.length;At++){ct.index>At?(Rt=ct,ct=null):Rt=ct.sibling;var Ut=N(E,ct,D[At],j);if(Ut===null){ct===null&&(ct=Rt);break}n&&ct&&Ut.alternate===null&&r(E,ct),T=g(Ut,T,At),Vt===null?dt=Ut:Vt.sibling=Ut,Vt=Ut,ct=Rt}if(At===D.length)return u(E,ct),zt&&gn(E,At),dt;if(ct===null){for(;At<D.length;At++)ct=Y(E,D[At],j),ct!==null&&(T=g(ct,T,At),Vt===null?dt=ct:Vt.sibling=ct,Vt=ct);return zt&&gn(E,At),dt}for(ct=f(ct);At<D.length;At++)Rt=_(ct,E,At,D[At],j),Rt!==null&&(n&&Rt.alternate!==null&&ct.delete(Rt.key===null?At:Rt.key),T=g(Rt,T,At),Vt===null?dt=Rt:Vt.sibling=Rt,Vt=Rt);return n&&ct.forEach(function(fl){return r(E,fl)}),zt&&gn(E,At),dt}function bt(E,T,D,j){if(D==null)throw Error(i(151));for(var dt=null,Vt=null,ct=T,At=T=0,Rt=null,Ut=D.next();ct!==null&&!Ut.done;At++,Ut=D.next()){ct.index>At?(Rt=ct,ct=null):Rt=ct.sibling;var fl=N(E,ct,Ut.value,j);if(fl===null){ct===null&&(ct=Rt);break}n&&ct&&fl.alternate===null&&r(E,ct),T=g(fl,T,At),Vt===null?dt=fl:Vt.sibling=fl,Vt=fl,ct=Rt}if(Ut.done)return u(E,ct),zt&&gn(E,At),dt;if(ct===null){for(;!Ut.done;At++,Ut=D.next())Ut=Y(E,Ut.value,j),Ut!==null&&(T=g(Ut,T,At),Vt===null?dt=Ut:Vt.sibling=Ut,Vt=Ut);return zt&&gn(E,At),dt}for(ct=f(ct);!Ut.done;At++,Ut=D.next())Ut=_(ct,E,At,Ut.value,j),Ut!==null&&(n&&Ut.alternate!==null&&ct.delete(Ut.key===null?At:Ut.key),T=g(Ut,T,At),Vt===null?dt=Ut:Vt.sibling=Ut,Vt=Ut);return n&&ct.forEach(function(GC){return r(E,GC)}),zt&&gn(E,At),dt}function Gt(E,T,D,j){if(typeof D=="object"&&D!==null&&D.type===w&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case S:t:{for(var dt=D.key;T!==null;){if(T.key===dt){if(dt=D.type,dt===w){if(T.tag===7){u(E,T.sibling),j=m(T,D.props.children),j.return=E,E=j;break t}}else if(T.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===ut&&Ul(dt)===T.type){u(E,T.sibling),j=m(T,D.props),qr(j,D),j.return=E,E=j;break t}u(E,T);break}else r(E,T);T=T.sibling}D.type===w?(j=Ll(D.props.children,E.mode,j,D.key),j.return=E,E=j):(j=Ro(D.type,D.key,D.props,null,E.mode,j),qr(j,D),j.return=E,E=j)}return v(E);case O:t:{for(dt=D.key;T!==null;){if(T.key===dt)if(T.tag===4&&T.stateNode.containerInfo===D.containerInfo&&T.stateNode.implementation===D.implementation){u(E,T.sibling),j=m(T,D.children||[]),j.return=E,E=j;break t}else{u(E,T);break}else r(E,T);T=T.sibling}j=zf(D,E.mode,j),j.return=E,E=j}return v(E);case ut:return D=Ul(D),Gt(E,T,D,j)}if(St(D))return ot(E,T,D,j);if(et(D)){if(dt=et(D),typeof dt!="function")throw Error(i(150));return D=dt.call(D),bt(E,T,D,j)}if(typeof D.then=="function")return Gt(E,T,qo(D),j);if(D.$$typeof===q)return Gt(E,T,zo(E,D),j);Vo(E,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,T!==null&&T.tag===6?(u(E,T.sibling),j=m(T,D),j.return=E,E=j):(u(E,T),j=Nf(D,E.mode,j),j.return=E,E=j),v(E)):u(E,T)}return function(E,T,D,j){try{Hr=0;var dt=Gt(E,T,D,j);return As=null,dt}catch(ct){if(ct===ks||ct===_o)throw ct;var Vt=ai(29,ct,null,E.mode);return Vt.lanes=j,Vt.return=E,Vt}}}var Wl=a0(!0),o0=a0(!1),$n=!1;function Gf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Kn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function In(n,r,u){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(jt&2)!==0){var m=f.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),f.pending=r,r=Do(n),Qg(n,null,u),r}return Eo(n,f,r,u),Do(n)}function Vr(n,r,u){if(r=r.updateQueue,r!==null&&(r=r.shared,(u&4194048)!==0)){var f=r.lanes;f&=n.pendingLanes,u|=f,r.lanes=u,Jp(n,u)}}function $f(n,r){var u=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var m=null,g=null;if(u=u.firstBaseUpdate,u!==null){do{var v={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};g===null?m=g=v:g=g.next=v,u=u.next}while(u!==null);g===null?m=g=r:g=g.next=r}else m=g=r;u={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:f.shared,callbacks:f.callbacks},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=r:n.next=r,u.lastBaseUpdate=r}var Kf=!1;function Ur(){if(Kf){var n=Cs;if(n!==null)throw n}}function jr(n,r,u,f){Kf=!1;var m=n.updateQueue;$n=!1;var g=m.firstBaseUpdate,v=m.lastBaseUpdate,x=m.shared.pending;if(x!==null){m.shared.pending=null;var k=x,R=k.next;k.next=null,v===null?g=R:v.next=R,v=k;var U=n.alternate;U!==null&&(U=U.updateQueue,x=U.lastBaseUpdate,x!==v&&(x===null?U.firstBaseUpdate=R:x.next=R,U.lastBaseUpdate=k))}if(g!==null){var Y=m.baseState;v=0,U=R=k=null,x=g;do{var N=x.lane&-536870913,_=N!==x.lane;if(_?(Dt&N)===N:(f&N)===N){N!==0&&N===ws&&(Kf=!0),U!==null&&(U=U.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});t:{var ot=n,bt=x;N=r;var Gt=u;switch(bt.tag){case 1:if(ot=bt.payload,typeof ot=="function"){Y=ot.call(Gt,Y,N);break t}Y=ot;break t;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=bt.payload,N=typeof ot=="function"?ot.call(Gt,Y,N):ot,N==null)break t;Y=y({},Y,N);break t;case 2:$n=!0}}N=x.callback,N!==null&&(n.flags|=64,_&&(n.flags|=8192),_=m.callbacks,_===null?m.callbacks=[N]:_.push(N))}else _={lane:N,tag:x.tag,payload:x.payload,callback:x.callback,next:null},U===null?(R=U=_,k=Y):U=U.next=_,v|=N;if(x=x.next,x===null){if(x=m.shared.pending,x===null)break;_=x,x=_.next,_.next=null,m.lastBaseUpdate=_,m.shared.pending=null}}while(!0);U===null&&(k=Y),m.baseState=k,m.firstBaseUpdate=R,m.lastBaseUpdate=U,g===null&&(m.shared.lanes=0),el|=v,n.lanes=v,n.memoizedState=Y}}function u0(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function c0(n,r){var u=n.callbacks;if(u!==null)for(n.callbacks=null,n=0;n<u.length;n++)u0(u[n],r)}var Ts=A(null),Uo=A(0);function f0(n,r){n=Tn,I(Uo,n),I(Ts,r),Tn=n|r.baseLanes}function If(){I(Uo,Tn),I(Ts,Ts.current)}function Zf(){Tn=Uo.current,z(Ts),z(Uo)}var oi=A(null),Ci=null;function Zn(n){var r=n.alternate;I(ae,ae.current&1),I(oi,n),Ci===null&&(r===null||Ts.current!==null||r.memoizedState!==null)&&(Ci=n)}function Ff(n){I(ae,ae.current),I(oi,n),Ci===null&&(Ci=n)}function h0(n){n.tag===22?(I(ae,ae.current),I(oi,n),Ci===null&&(Ci=n)):Fn()}function Fn(){I(ae,ae.current),I(oi,oi.current)}function ui(n){z(oi),Ci===n&&(Ci=null),z(ae)}var ae=A(0);function jo(n){for(var r=n;r!==null;){if(r.tag===13){var u=r.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||ld(u)||sd(u)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var vn=0,kt=null,Xt=null,he=null,Wo=!1,Ms=!1,Yl=!1,Yo=0,Wr=0,Es=null,_w=0;function se(){throw Error(i(321))}function Jf(n,r){if(r===null)return!1;for(var u=0;u<r.length&&u<n.length;u++)if(!ri(n[u],r[u]))return!1;return!0}function th(n,r,u,f,m,g){return vn=g,kt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,B.H=n===null||n.memoizedState===null?K0:ph,Yl=!1,g=u(f,m),Yl=!1,Ms&&(g=m0(r,u,f,m)),d0(n),g}function d0(n){B.H=Qr;var r=Xt!==null&&Xt.next!==null;if(vn=0,he=Xt=kt=null,Wo=!1,Wr=0,Es=null,r)throw Error(i(300));n===null||de||(n=n.dependencies,n!==null&&No(n)&&(de=!0))}function m0(n,r,u,f){kt=n;var m=0;do{if(Ms&&(Es=null),Wr=0,Ms=!1,25<=m)throw Error(i(301));if(m+=1,he=Xt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}B.H=I0,g=r(u,f)}while(Ms);return g}function Hw(){var n=B.H,r=n.useState()[0];return r=typeof r.then=="function"?Yr(r):r,n=n.useState()[0],(Xt!==null?Xt.memoizedState:null)!==n&&(kt.flags|=1024),r}function eh(){var n=Yo!==0;return Yo=0,n}function ih(n,r,u){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~u}function nh(n){if(Wo){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Wo=!1}vn=0,he=Xt=kt=null,Ms=!1,Wr=Yo=0,Es=null}function je(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?kt.memoizedState=he=n:he=he.next=n,he}function oe(){if(Xt===null){var n=kt.alternate;n=n!==null?n.memoizedState:null}else n=Xt.next;var r=he===null?kt.memoizedState:he.next;if(r!==null)he=r,Xt=n;else{if(n===null)throw kt.alternate===null?Error(i(467)):Error(i(310));Xt=n,n={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},he===null?kt.memoizedState=he=n:he=he.next=n}return he}function Xo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yr(n){var r=Wr;return Wr+=1,Es===null&&(Es=[]),n=l0(Es,n,r),r=kt,(he===null?r.memoizedState:he.next)===null&&(r=r.alternate,B.H=r===null||r.memoizedState===null?K0:ph),n}function Qo(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Yr(n);if(n.$$typeof===q)return De(n)}throw Error(i(438,String(n)))}function lh(n){var r=null,u=kt.updateQueue;if(u!==null&&(r=u.memoCache),r==null){var f=kt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),u===null&&(u=Xo(),kt.updateQueue=u),u.memoCache=r,u=r.data[r.index],u===void 0)for(u=r.data[r.index]=Array(n),f=0;f<n;f++)u[f]=gt;return r.index++,u}function Sn(n,r){return typeof r=="function"?r(n):r}function Go(n){var r=oe();return sh(r,Xt,n)}function sh(n,r,u){var f=n.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=u;var m=n.baseQueue,g=f.pending;if(g!==null){if(m!==null){var v=m.next;m.next=g.next,g.next=v}r.baseQueue=m=g,f.pending=null}if(g=n.baseState,m===null)n.memoizedState=g;else{r=m.next;var x=v=null,k=null,R=r,U=!1;do{var Y=R.lane&-536870913;if(Y!==R.lane?(Dt&Y)===Y:(vn&Y)===Y){var N=R.revertLane;if(N===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),Y===ws&&(U=!0);else if((vn&N)===N){R=R.next,N===ws&&(U=!0);continue}else Y={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},k===null?(x=k=Y,v=g):k=k.next=Y,kt.lanes|=N,el|=N;Y=R.action,Yl&&u(g,Y),g=R.hasEagerState?R.eagerState:u(g,Y)}else N={lane:Y,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},k===null?(x=k=N,v=g):k=k.next=N,kt.lanes|=Y,el|=Y;R=R.next}while(R!==null&&R!==r);if(k===null?v=g:k.next=x,!ri(g,n.memoizedState)&&(de=!0,U&&(u=Cs,u!==null)))throw u;n.memoizedState=g,n.baseState=v,n.baseQueue=k,f.lastRenderedState=g}return m===null&&(f.lanes=0),[n.memoizedState,f.dispatch]}function rh(n){var r=oe(),u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=n;var f=u.dispatch,m=u.pending,g=r.memoizedState;if(m!==null){u.pending=null;var v=m=m.next;do g=n(g,v.action),v=v.next;while(v!==m);ri(g,r.memoizedState)||(de=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),u.lastRenderedState=g}return[g,f]}function p0(n,r,u){var f=kt,m=oe(),g=zt;if(g){if(u===void 0)throw Error(i(407));u=u()}else u=r();var v=!ri((Xt||m).memoizedState,u);if(v&&(m.memoizedState=u,de=!0),m=m.queue,uh(b0.bind(null,f,m,n),[n]),m.getSnapshot!==r||v||he!==null&&he.memoizedState.tag&1){if(f.flags|=2048,Ds(9,{destroy:void 0},y0.bind(null,f,m,u,r),null),$t===null)throw Error(i(349));g||(vn&127)!==0||g0(f,r,u)}return u}function g0(n,r,u){n.flags|=16384,n={getSnapshot:r,value:u},r=kt.updateQueue,r===null?(r=Xo(),kt.updateQueue=r,r.stores=[n]):(u=r.stores,u===null?r.stores=[n]:u.push(n))}function y0(n,r,u,f){r.value=u,r.getSnapshot=f,v0(r)&&S0(n)}function b0(n,r,u){return u(function(){v0(r)&&S0(n)})}function v0(n){var r=n.getSnapshot;n=n.value;try{var u=r();return!ri(n,u)}catch{return!0}}function S0(n){var r=zl(n,2);r!==null&&Ze(r,n,2)}function ah(n){var r=je();if(typeof n=="function"){var u=n;if(n=u(),Yl){jn(!0);try{u()}finally{jn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:n},r}function x0(n,r,u,f){return n.baseState=u,sh(n,Xt,typeof f=="function"?f:Sn)}function qw(n,r,u,f,m){if(Ko(n))throw Error(i(485));if(n=r.action,n!==null){var g={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){g.listeners.push(v)}};B.T!==null?u(!0):g.isTransition=!1,f(g),u=r.pending,u===null?(g.next=r.pending=g,O0(r,g)):(g.next=u.next,r.pending=u.next=g)}}function O0(n,r){var u=r.action,f=r.payload,m=n.state;if(r.isTransition){var g=B.T,v={};B.T=v;try{var x=u(m,f),k=B.S;k!==null&&k(v,x),w0(n,r,x)}catch(R){oh(n,r,R)}finally{g!==null&&v.types!==null&&(g.types=v.types),B.T=g}}else try{g=u(m,f),w0(n,r,g)}catch(R){oh(n,r,R)}}function w0(n,r,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){C0(n,r,f)},function(f){return oh(n,r,f)}):C0(n,r,u)}function C0(n,r,u){r.status="fulfilled",r.value=u,k0(r),n.state=u,r=n.pending,r!==null&&(u=r.next,u===r?n.pending=null:(u=u.next,r.next=u,O0(n,u)))}function oh(n,r,u){var f=n.pending;if(n.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=u,k0(r),r=r.next;while(r!==f)}n.action=null}function k0(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function A0(n,r){return r}function T0(n,r){if(zt){var u=$t.formState;if(u!==null){t:{var f=kt;if(zt){if(Jt){e:{for(var m=Jt,g=wi;m.nodeType!==8;){if(!g){m=null;break e}if(m=ki(m.nextSibling),m===null){m=null;break e}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){Jt=ki(m.nextSibling),f=m.data==="F!";break t}}Gn(f)}f=!1}f&&(r=u[0])}}return u=je(),u.memoizedState=u.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A0,lastRenderedState:r},u.queue=f,u=G0.bind(null,kt,f),f.dispatch=u,f=ah(!1),g=mh.bind(null,kt,!1,f.queue),f=je(),m={state:r,dispatch:null,action:n,pending:null},f.queue=m,u=qw.bind(null,kt,m,g,u),m.dispatch=u,f.memoizedState=n,[r,u,!1]}function M0(n){var r=oe();return E0(r,Xt,n)}function E0(n,r,u){if(r=sh(n,r,A0)[0],n=Go(Sn)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=Yr(r)}catch(v){throw v===ks?_o:v}else f=r;r=oe();var m=r.queue,g=m.dispatch;return u!==r.memoizedState&&(kt.flags|=2048,Ds(9,{destroy:void 0},Vw.bind(null,m,u),null)),[f,g,n]}function Vw(n,r){n.action=r}function D0(n){var r=oe(),u=Xt;if(u!==null)return E0(r,u,n);oe(),r=r.memoizedState,u=oe();var f=u.queue.dispatch;return u.memoizedState=n,[r,f,!1]}function Ds(n,r,u,f){return n={tag:n,create:u,deps:f,inst:r,next:null},r=kt.updateQueue,r===null&&(r=Xo(),kt.updateQueue=r),u=r.lastEffect,u===null?r.lastEffect=n.next=n:(f=u.next,u.next=n,n.next=f,r.lastEffect=n),n}function R0(){return oe().memoizedState}function Po(n,r,u,f){var m=je();kt.flags|=n,m.memoizedState=Ds(1|r,{destroy:void 0},u,f===void 0?null:f)}function $o(n,r,u,f){var m=oe();f=f===void 0?null:f;var g=m.memoizedState.inst;Xt!==null&&f!==null&&Jf(f,Xt.memoizedState.deps)?m.memoizedState=Ds(r,g,u,f):(kt.flags|=n,m.memoizedState=Ds(1|r,g,u,f))}function B0(n,r){Po(8390656,8,n,r)}function uh(n,r){$o(2048,8,n,r)}function Uw(n){kt.flags|=4;var r=kt.updateQueue;if(r===null)r=Xo(),kt.updateQueue=r,r.events=[n];else{var u=r.events;u===null?r.events=[n]:u.push(n)}}function N0(n){var r=oe().memoizedState;return Uw({ref:r,nextImpl:n}),function(){if((jt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function z0(n,r){return $o(4,2,n,r)}function L0(n,r){return $o(4,4,n,r)}function _0(n,r){if(typeof r=="function"){n=n();var u=r(n);return function(){typeof u=="function"?u():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function H0(n,r,u){u=u!=null?u.concat([n]):null,$o(4,4,_0.bind(null,r,n),u)}function ch(){}function q0(n,r){var u=oe();r=r===void 0?null:r;var f=u.memoizedState;return r!==null&&Jf(r,f[1])?f[0]:(u.memoizedState=[n,r],n)}function V0(n,r){var u=oe();r=r===void 0?null:r;var f=u.memoizedState;if(r!==null&&Jf(r,f[1]))return f[0];if(f=n(),Yl){jn(!0);try{n()}finally{jn(!1)}}return u.memoizedState=[f,r],f}function fh(n,r,u){return u===void 0||(vn&1073741824)!==0&&(Dt&261930)===0?n.memoizedState=r:(n.memoizedState=u,n=Uy(),kt.lanes|=n,el|=n,u)}function U0(n,r,u,f){return ri(u,r)?u:Ts.current!==null?(n=fh(n,u,f),ri(n,r)||(de=!0),n):(vn&42)===0||(vn&1073741824)!==0&&(Dt&261930)===0?(de=!0,n.memoizedState=u):(n=Uy(),kt.lanes|=n,el|=n,r)}function j0(n,r,u,f,m){var g=K.p;K.p=g!==0&&8>g?g:8;var v=B.T,x={};B.T=x,mh(n,!1,r,u);try{var k=m(),R=B.S;if(R!==null&&R(x,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var U=Lw(k,f);Xr(n,r,U,hi(n))}else Xr(n,r,f,hi(n))}catch(Y){Xr(n,r,{then:function(){},status:"rejected",reason:Y},hi())}finally{K.p=g,v!==null&&x.types!==null&&(v.types=x.types),B.T=v}}function jw(){}function hh(n,r,u,f){if(n.tag!==5)throw Error(i(476));var m=W0(n).queue;j0(n,m,r,tt,u===null?jw:function(){return Y0(n),u(f)})}function W0(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:tt,baseState:tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:tt},next:null};var u={};return r.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:u},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Y0(n){var r=W0(n);r.next===null&&(r=n.alternate.memoizedState),Xr(n,r.next.queue,{},hi())}function dh(){return De(aa)}function X0(){return oe().memoizedState}function Q0(){return oe().memoizedState}function Ww(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var u=hi();n=Kn(u);var f=In(r,n,u);f!==null&&(Ze(f,r,u),Vr(f,r,u)),r={cache:Wf()},n.payload=r;return}r=r.return}}function Yw(n,r,u){var f=hi();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ko(n)?P0(r,u):(u=Rf(n,r,u,f),u!==null&&(Ze(u,n,f),$0(u,r,f)))}function G0(n,r,u){var f=hi();Xr(n,r,u,f)}function Xr(n,r,u,f){var m={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ko(n))P0(r,m);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var v=r.lastRenderedState,x=g(v,u);if(m.hasEagerState=!0,m.eagerState=x,ri(x,v))return Eo(n,r,m,0),$t===null&&Mo(),!1}catch{}if(u=Rf(n,r,m,f),u!==null)return Ze(u,n,f),$0(u,r,f),!0}return!1}function mh(n,r,u,f){if(f={lane:2,revertLane:Gh(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Ko(n)){if(r)throw Error(i(479))}else r=Rf(n,u,f,2),r!==null&&Ze(r,n,2)}function Ko(n){var r=n.alternate;return n===kt||r!==null&&r===kt}function P0(n,r){Ms=Wo=!0;var u=n.pending;u===null?r.next=r:(r.next=u.next,u.next=r),n.pending=r}function $0(n,r,u){if((u&4194048)!==0){var f=r.lanes;f&=n.pendingLanes,u|=f,r.lanes=u,Jp(n,u)}}var Qr={readContext:De,use:Qo,useCallback:se,useContext:se,useEffect:se,useImperativeHandle:se,useLayoutEffect:se,useInsertionEffect:se,useMemo:se,useReducer:se,useRef:se,useState:se,useDebugValue:se,useDeferredValue:se,useTransition:se,useSyncExternalStore:se,useId:se,useHostTransitionStatus:se,useFormState:se,useActionState:se,useOptimistic:se,useMemoCache:se,useCacheRefresh:se};Qr.useEffectEvent=se;var K0={readContext:De,use:Qo,useCallback:function(n,r){return je().memoizedState=[n,r===void 0?null:r],n},useContext:De,useEffect:B0,useImperativeHandle:function(n,r,u){u=u!=null?u.concat([n]):null,Po(4194308,4,_0.bind(null,r,n),u)},useLayoutEffect:function(n,r){return Po(4194308,4,n,r)},useInsertionEffect:function(n,r){Po(4,2,n,r)},useMemo:function(n,r){var u=je();r=r===void 0?null:r;var f=n();if(Yl){jn(!0);try{n()}finally{jn(!1)}}return u.memoizedState=[f,r],f},useReducer:function(n,r,u){var f=je();if(u!==void 0){var m=u(r);if(Yl){jn(!0);try{u(r)}finally{jn(!1)}}}else m=r;return f.memoizedState=f.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},f.queue=n,n=n.dispatch=Yw.bind(null,kt,n),[f.memoizedState,n]},useRef:function(n){var r=je();return n={current:n},r.memoizedState=n},useState:function(n){n=ah(n);var r=n.queue,u=G0.bind(null,kt,r);return r.dispatch=u,[n.memoizedState,u]},useDebugValue:ch,useDeferredValue:function(n,r){var u=je();return fh(u,n,r)},useTransition:function(){var n=ah(!1);return n=j0.bind(null,kt,n.queue,!0,!1),je().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,u){var f=kt,m=je();if(zt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=r(),$t===null)throw Error(i(349));(Dt&127)!==0||g0(f,r,u)}m.memoizedState=u;var g={value:u,getSnapshot:r};return m.queue=g,B0(b0.bind(null,f,g,n),[n]),f.flags|=2048,Ds(9,{destroy:void 0},y0.bind(null,f,g,u,r),null),u},useId:function(){var n=je(),r=$t.identifierPrefix;if(zt){var u=Gi,f=Qi;u=(f&~(1<<32-si(f)-1)).toString(32)+u,r="_"+r+"R_"+u,u=Yo++,0<u&&(r+="H"+u.toString(32)),r+="_"}else u=_w++,r="_"+r+"r_"+u.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:dh,useFormState:T0,useActionState:T0,useOptimistic:function(n){var r=je();r.memoizedState=r.baseState=n;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=u,r=mh.bind(null,kt,!0,u),u.dispatch=r,[n,r]},useMemoCache:lh,useCacheRefresh:function(){return je().memoizedState=Ww.bind(null,kt)},useEffectEvent:function(n){var r=je(),u={impl:n};return r.memoizedState=u,function(){if((jt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},ph={readContext:De,use:Qo,useCallback:q0,useContext:De,useEffect:uh,useImperativeHandle:H0,useInsertionEffect:z0,useLayoutEffect:L0,useMemo:V0,useReducer:Go,useRef:R0,useState:function(){return Go(Sn)},useDebugValue:ch,useDeferredValue:function(n,r){var u=oe();return U0(u,Xt.memoizedState,n,r)},useTransition:function(){var n=Go(Sn)[0],r=oe().memoizedState;return[typeof n=="boolean"?n:Yr(n),r]},useSyncExternalStore:p0,useId:X0,useHostTransitionStatus:dh,useFormState:M0,useActionState:M0,useOptimistic:function(n,r){var u=oe();return x0(u,Xt,n,r)},useMemoCache:lh,useCacheRefresh:Q0};ph.useEffectEvent=N0;var I0={readContext:De,use:Qo,useCallback:q0,useContext:De,useEffect:uh,useImperativeHandle:H0,useInsertionEffect:z0,useLayoutEffect:L0,useMemo:V0,useReducer:rh,useRef:R0,useState:function(){return rh(Sn)},useDebugValue:ch,useDeferredValue:function(n,r){var u=oe();return Xt===null?fh(u,n,r):U0(u,Xt.memoizedState,n,r)},useTransition:function(){var n=rh(Sn)[0],r=oe().memoizedState;return[typeof n=="boolean"?n:Yr(n),r]},useSyncExternalStore:p0,useId:X0,useHostTransitionStatus:dh,useFormState:D0,useActionState:D0,useOptimistic:function(n,r){var u=oe();return Xt!==null?x0(u,Xt,n,r):(u.baseState=n,[n,u.queue.dispatch])},useMemoCache:lh,useCacheRefresh:Q0};I0.useEffectEvent=N0;function gh(n,r,u,f){r=n.memoizedState,u=u(f,r),u=u==null?r:y({},r,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var yh={enqueueSetState:function(n,r,u){n=n._reactInternals;var f=hi(),m=Kn(f);m.payload=r,u!=null&&(m.callback=u),r=In(n,m,f),r!==null&&(Ze(r,n,f),Vr(r,n,f))},enqueueReplaceState:function(n,r,u){n=n._reactInternals;var f=hi(),m=Kn(f);m.tag=1,m.payload=r,u!=null&&(m.callback=u),r=In(n,m,f),r!==null&&(Ze(r,n,f),Vr(r,n,f))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var u=hi(),f=Kn(u);f.tag=2,r!=null&&(f.callback=r),r=In(n,f,u),r!==null&&(Ze(r,n,u),Vr(r,n,u))}};function Z0(n,r,u,f,m,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,g,v):r.prototype&&r.prototype.isPureReactComponent?!Rr(u,f)||!Rr(m,g):!0}function F0(n,r,u,f){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(u,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(u,f),r.state!==n&&yh.enqueueReplaceState(r,r.state,null)}function Xl(n,r){var u=r;if("ref"in r){u={};for(var f in r)f!=="ref"&&(u[f]=r[f])}if(n=n.defaultProps){u===r&&(u=y({},u));for(var m in n)u[m]===void 0&&(u[m]=n[m])}return u}function J0(n){To(n)}function ty(n){console.error(n)}function ey(n){To(n)}function Io(n,r){try{var u=n.onUncaughtError;u(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function iy(n,r,u){try{var f=n.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function bh(n,r,u){return u=Kn(u),u.tag=3,u.payload={element:null},u.callback=function(){Io(n,r)},u}function ny(n){return n=Kn(n),n.tag=3,n}function ly(n,r,u,f){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var g=f.value;n.payload=function(){return m(g)},n.callback=function(){iy(r,u,f)}}var v=u.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){iy(r,u,f),typeof m!="function"&&(il===null?il=new Set([this]):il.add(this));var x=f.stack;this.componentDidCatch(f.value,{componentStack:x!==null?x:""})})}function Xw(n,r,u,f,m){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=u.alternate,r!==null&&Os(r,u,m,!0),u=oi.current,u!==null){switch(u.tag){case 31:case 13:return Ci===null?ou():u.alternate===null&&re===0&&(re=3),u.flags&=-257,u.flags|=65536,u.lanes=m,f===Ho?u.flags|=16384:(r=u.updateQueue,r===null?u.updateQueue=new Set([f]):r.add(f),Yh(n,f,m)),!1;case 22:return u.flags|=65536,f===Ho?u.flags|=16384:(r=u.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=r):(u=r.retryQueue,u===null?r.retryQueue=new Set([f]):u.add(f)),Yh(n,f,m)),!1}throw Error(i(435,u.tag))}return Yh(n,f,m),ou(),!1}if(zt)return r=oi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,f!==Hf&&(n=Error(i(422),{cause:f}),zr(Si(n,u)))):(f!==Hf&&(r=Error(i(423),{cause:f}),zr(Si(r,u))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,f=Si(f,u),m=bh(n.stateNode,f,m),$f(n,m),re!==4&&(re=2)),!1;var g=Error(i(520),{cause:f});if(g=Si(g,u),Jr===null?Jr=[g]:Jr.push(g),re!==4&&(re=2),r===null)return!0;f=Si(f,u),u=r;do{switch(u.tag){case 3:return u.flags|=65536,n=m&-m,u.lanes|=n,n=bh(u.stateNode,f,n),$f(u,n),!1;case 1:if(r=u.type,g=u.stateNode,(u.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(il===null||!il.has(g))))return u.flags|=65536,m&=-m,u.lanes|=m,m=ny(m),ly(m,n,u,f),$f(u,m),!1}u=u.return}while(u!==null);return!1}var vh=Error(i(461)),de=!1;function Re(n,r,u,f){r.child=n===null?o0(r,null,u,f):Wl(r,n.child,u,f)}function sy(n,r,u,f,m){u=u.render;var g=r.ref;if("ref"in f){var v={};for(var x in f)x!=="ref"&&(v[x]=f[x])}else v=f;return ql(r),f=th(n,r,u,v,g,m),x=eh(),n!==null&&!de?(ih(n,r,m),xn(n,r,m)):(zt&&x&&Lf(r),r.flags|=1,Re(n,r,f,m),r.child)}function ry(n,r,u,f,m){if(n===null){var g=u.type;return typeof g=="function"&&!Bf(g)&&g.defaultProps===void 0&&u.compare===null?(r.tag=15,r.type=g,ay(n,r,g,f,m)):(n=Ro(u.type,null,f,r,r.mode,m),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,!Th(n,m)){var v=g.memoizedProps;if(u=u.compare,u=u!==null?u:Rr,u(v,f)&&n.ref===r.ref)return xn(n,r,m)}return r.flags|=1,n=pn(g,f),n.ref=r.ref,n.return=r,r.child=n}function ay(n,r,u,f,m){if(n!==null){var g=n.memoizedProps;if(Rr(g,f)&&n.ref===r.ref)if(de=!1,r.pendingProps=f=g,Th(n,m))(n.flags&131072)!==0&&(de=!0);else return r.lanes=n.lanes,xn(n,r,m)}return Sh(n,r,u,f,m)}function oy(n,r,u,f){var m=f.children,g=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((r.flags&128)!==0){if(g=g!==null?g.baseLanes|u:u,n!==null){for(f=r.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;f=m&~g}else f=0,r.child=null;return uy(n,r,g,u,f)}if((u&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Lo(r,g!==null?g.cachePool:null),g!==null?f0(r,g):If(),h0(r);else return f=r.lanes=536870912,uy(n,r,g!==null?g.baseLanes|u:u,u,f)}else g!==null?(Lo(r,g.cachePool),f0(r,g),Fn(),r.memoizedState=null):(n!==null&&Lo(r,null),If(),Fn());return Re(n,r,m,u),r.child}function Gr(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function uy(n,r,u,f,m){var g=Xf();return g=g===null?null:{parent:fe._currentValue,pool:g},r.memoizedState={baseLanes:u,cachePool:g},n!==null&&Lo(r,null),If(),h0(r),n!==null&&Os(n,r,f,!0),r.childLanes=m,null}function Zo(n,r){return r=Jo({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function cy(n,r,u){return Wl(r,n.child,null,u),n=Zo(r,r.pendingProps),n.flags|=2,ui(r),r.memoizedState=null,n}function Qw(n,r,u){var f=r.pendingProps,m=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(zt){if(f.mode==="hidden")return n=Zo(r,f),r.lanes=536870912,Gr(null,n);if(Ff(r),(n=Jt)?(n=O1(n,wi),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Xn!==null?{id:Qi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},u=Pg(n),u.return=r,r.child=u,Ee=r,Jt=null)):n=null,n===null)throw Gn(r);return r.lanes=536870912,null}return Zo(r,f)}var g=n.memoizedState;if(g!==null){var v=g.dehydrated;if(Ff(r),m)if(r.flags&256)r.flags&=-257,r=cy(n,r,u);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(de||Os(n,r,u,!1),m=(u&n.childLanes)!==0,de||m){if(f=$t,f!==null&&(v=tg(f,u),v!==0&&v!==g.retryLane))throw g.retryLane=v,zl(n,v),Ze(f,n,v),vh;ou(),r=cy(n,r,u)}else n=g.treeContext,Jt=ki(v.nextSibling),Ee=r,zt=!0,Qn=null,wi=!1,n!==null&&Ig(r,n),r=Zo(r,f),r.flags|=4096;return r}return n=pn(n.child,{mode:f.mode,children:f.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Fo(n,r){var u=r.ref;if(u===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(n===null||n.ref!==u)&&(r.flags|=4194816)}}function Sh(n,r,u,f,m){return ql(r),u=th(n,r,u,f,void 0,m),f=eh(),n!==null&&!de?(ih(n,r,m),xn(n,r,m)):(zt&&f&&Lf(r),r.flags|=1,Re(n,r,u,m),r.child)}function fy(n,r,u,f,m,g){return ql(r),r.updateQueue=null,u=m0(r,f,u,m),d0(n),f=eh(),n!==null&&!de?(ih(n,r,g),xn(n,r,g)):(zt&&f&&Lf(r),r.flags|=1,Re(n,r,u,g),r.child)}function hy(n,r,u,f,m){if(ql(r),r.stateNode===null){var g=bs,v=u.contextType;typeof v=="object"&&v!==null&&(g=De(v)),g=new u(f,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=yh,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=f,g.state=r.memoizedState,g.refs={},Gf(r),v=u.contextType,g.context=typeof v=="object"&&v!==null?De(v):bs,g.state=r.memoizedState,v=u.getDerivedStateFromProps,typeof v=="function"&&(gh(r,u,v,f),g.state=r.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(v=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),v!==g.state&&yh.enqueueReplaceState(g,g.state,null),jr(r,f,g,m),Ur(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(n===null){g=r.stateNode;var x=r.memoizedProps,k=Xl(u,x);g.props=k;var R=g.context,U=u.contextType;v=bs,typeof U=="object"&&U!==null&&(v=De(U));var Y=u.getDerivedStateFromProps;U=typeof Y=="function"||typeof g.getSnapshotBeforeUpdate=="function",x=r.pendingProps!==x,U||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x||R!==v)&&F0(r,g,f,v),$n=!1;var N=r.memoizedState;g.state=N,jr(r,f,g,m),Ur(),R=r.memoizedState,x||N!==R||$n?(typeof Y=="function"&&(gh(r,u,Y,f),R=r.memoizedState),(k=$n||Z0(r,u,k,f,N,R,v))?(U||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=R),g.props=f,g.state=R,g.context=v,f=k):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{g=r.stateNode,Pf(n,r),v=r.memoizedProps,U=Xl(u,v),g.props=U,Y=r.pendingProps,N=g.context,R=u.contextType,k=bs,typeof R=="object"&&R!==null&&(k=De(R)),x=u.getDerivedStateFromProps,(R=typeof x=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==Y||N!==k)&&F0(r,g,f,k),$n=!1,N=r.memoizedState,g.state=N,jr(r,f,g,m),Ur();var _=r.memoizedState;v!==Y||N!==_||$n||n!==null&&n.dependencies!==null&&No(n.dependencies)?(typeof x=="function"&&(gh(r,u,x,f),_=r.memoizedState),(U=$n||Z0(r,u,U,f,N,_,k)||n!==null&&n.dependencies!==null&&No(n.dependencies))?(R||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(f,_,k),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(f,_,k)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||v===n.memoizedProps&&N===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&N===n.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=_),g.props=f,g.state=_,g.context=k,f=U):(typeof g.componentDidUpdate!="function"||v===n.memoizedProps&&N===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&N===n.memoizedState||(r.flags|=1024),f=!1)}return g=f,Fo(n,r),f=(r.flags&128)!==0,g||f?(g=r.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,n!==null&&f?(r.child=Wl(r,n.child,null,m),r.child=Wl(r,null,u,m)):Re(n,r,u,m),r.memoizedState=g.state,n=r.child):n=xn(n,r,m),n}function dy(n,r,u,f){return _l(),r.flags|=256,Re(n,r,u,f),r.child}var xh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Oh(n){return{baseLanes:n,cachePool:i0()}}function wh(n,r,u){return n=n!==null?n.childLanes&~u:0,r&&(n|=fi),n}function my(n,r,u){var f=r.pendingProps,m=!1,g=(r.flags&128)!==0,v;if((v=g)||(v=n!==null&&n.memoizedState===null?!1:(ae.current&2)!==0),v&&(m=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,n===null){if(zt){if(m?Zn(r):Fn(),(n=Jt)?(n=O1(n,wi),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Xn!==null?{id:Qi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},u=Pg(n),u.return=r,r.child=u,Ee=r,Jt=null)):n=null,n===null)throw Gn(r);return sd(n)?r.lanes=32:r.lanes=536870912,null}var x=f.children;return f=f.fallback,m?(Fn(),m=r.mode,x=Jo({mode:"hidden",children:x},m),f=Ll(f,m,u,null),x.return=r,f.return=r,x.sibling=f,r.child=x,f=r.child,f.memoizedState=Oh(u),f.childLanes=wh(n,v,u),r.memoizedState=xh,Gr(null,f)):(Zn(r),Ch(r,x))}var k=n.memoizedState;if(k!==null&&(x=k.dehydrated,x!==null)){if(g)r.flags&256?(Zn(r),r.flags&=-257,r=kh(n,r,u)):r.memoizedState!==null?(Fn(),r.child=n.child,r.flags|=128,r=null):(Fn(),x=f.fallback,m=r.mode,f=Jo({mode:"visible",children:f.children},m),x=Ll(x,m,u,null),x.flags|=2,f.return=r,x.return=r,f.sibling=x,r.child=f,Wl(r,n.child,null,u),f=r.child,f.memoizedState=Oh(u),f.childLanes=wh(n,v,u),r.memoizedState=xh,r=Gr(null,f));else if(Zn(r),sd(x)){if(v=x.nextSibling&&x.nextSibling.dataset,v)var R=v.dgst;v=R,f=Error(i(419)),f.stack="",f.digest=v,zr({value:f,source:null,stack:null}),r=kh(n,r,u)}else if(de||Os(n,r,u,!1),v=(u&n.childLanes)!==0,de||v){if(v=$t,v!==null&&(f=tg(v,u),f!==0&&f!==k.retryLane))throw k.retryLane=f,zl(n,f),Ze(v,n,f),vh;ld(x)||ou(),r=kh(n,r,u)}else ld(x)?(r.flags|=192,r.child=n.child,r=null):(n=k.treeContext,Jt=ki(x.nextSibling),Ee=r,zt=!0,Qn=null,wi=!1,n!==null&&Ig(r,n),r=Ch(r,f.children),r.flags|=4096);return r}return m?(Fn(),x=f.fallback,m=r.mode,k=n.child,R=k.sibling,f=pn(k,{mode:"hidden",children:f.children}),f.subtreeFlags=k.subtreeFlags&65011712,R!==null?x=pn(R,x):(x=Ll(x,m,u,null),x.flags|=2),x.return=r,f.return=r,f.sibling=x,r.child=f,Gr(null,f),f=r.child,x=n.child.memoizedState,x===null?x=Oh(u):(m=x.cachePool,m!==null?(k=fe._currentValue,m=m.parent!==k?{parent:k,pool:k}:m):m=i0(),x={baseLanes:x.baseLanes|u,cachePool:m}),f.memoizedState=x,f.childLanes=wh(n,v,u),r.memoizedState=xh,Gr(n.child,f)):(Zn(r),u=n.child,n=u.sibling,u=pn(u,{mode:"visible",children:f.children}),u.return=r,u.sibling=null,n!==null&&(v=r.deletions,v===null?(r.deletions=[n],r.flags|=16):v.push(n)),r.child=u,r.memoizedState=null,u)}function Ch(n,r){return r=Jo({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Jo(n,r){return n=ai(22,n,null,r),n.lanes=0,n}function kh(n,r,u){return Wl(r,n.child,null,u),n=Ch(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function py(n,r,u){n.lanes|=r;var f=n.alternate;f!==null&&(f.lanes|=r),Uf(n.return,r,u)}function Ah(n,r,u,f,m,g){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:m,treeForkCount:g}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=m,v.treeForkCount=g)}function gy(n,r,u){var f=r.pendingProps,m=f.revealOrder,g=f.tail;f=f.children;var v=ae.current,x=(v&2)!==0;if(x?(v=v&1|2,r.flags|=128):v&=1,I(ae,v),Re(n,r,f,u),f=zt?Nr:0,!x&&n!==null&&(n.flags&128)!==0)t:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&py(n,u,r);else if(n.tag===19)py(n,u,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break t;for(;n.sibling===null;){if(n.return===null||n.return===r)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(u=r.child,m=null;u!==null;)n=u.alternate,n!==null&&jo(n)===null&&(m=u),u=u.sibling;u=m,u===null?(m=r.child,r.child=null):(m=u.sibling,u.sibling=null),Ah(r,!1,m,u,g,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,m=r.child,r.child=null;m!==null;){if(n=m.alternate,n!==null&&jo(n)===null){r.child=m;break}n=m.sibling,m.sibling=u,u=m,m=n}Ah(r,!0,u,null,g,f);break;case"together":Ah(r,!1,null,null,void 0,f);break;default:r.memoizedState=null}return r.child}function xn(n,r,u){if(n!==null&&(r.dependencies=n.dependencies),el|=r.lanes,(u&r.childLanes)===0)if(n!==null){if(Os(n,r,u,!1),(u&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,u=pn(n,n.pendingProps),r.child=u,u.return=r;n.sibling!==null;)n=n.sibling,u=u.sibling=pn(n,n.pendingProps),u.return=r;u.sibling=null}return r.child}function Th(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&No(n)))}function Gw(n,r,u){switch(r.tag){case 3:Ae(r,r.stateNode.containerInfo),Pn(r,fe,n.memoizedState.cache),_l();break;case 27:case 5:Un(r);break;case 4:Ae(r,r.stateNode.containerInfo);break;case 10:Pn(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Ff(r),null;break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(Zn(r),r.flags|=128,null):(u&r.child.childLanes)!==0?my(n,r,u):(Zn(r),n=xn(n,r,u),n!==null?n.sibling:null);Zn(r);break;case 19:var m=(n.flags&128)!==0;if(f=(u&r.childLanes)!==0,f||(Os(n,r,u,!1),f=(u&r.childLanes)!==0),m){if(f)return gy(n,r,u);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),I(ae,ae.current),f)break;return null;case 22:return r.lanes=0,oy(n,r,u,r.pendingProps);case 24:Pn(r,fe,n.memoizedState.cache)}return xn(n,r,u)}function yy(n,r,u){if(n!==null)if(n.memoizedProps!==r.pendingProps)de=!0;else{if(!Th(n,u)&&(r.flags&128)===0)return de=!1,Gw(n,r,u);de=(n.flags&131072)!==0}else de=!1,zt&&(r.flags&1048576)!==0&&Kg(r,Nr,r.index);switch(r.lanes=0,r.tag){case 16:t:{var f=r.pendingProps;if(n=Ul(r.elementType),r.type=n,typeof n=="function")Bf(n)?(f=Xl(n,f),r.tag=1,r=hy(null,r,n,f,u)):(r.tag=0,r=Sh(null,r,n,f,u));else{if(n!=null){var m=n.$$typeof;if(m===P){r.tag=11,r=sy(null,r,n,f,u);break t}else if(m===V){r.tag=14,r=ry(null,r,n,f,u);break t}}throw r=mt(n)||n,Error(i(306,r,""))}}return r;case 0:return Sh(n,r,r.type,r.pendingProps,u);case 1:return f=r.type,m=Xl(f,r.pendingProps),hy(n,r,f,m,u);case 3:t:{if(Ae(r,r.stateNode.containerInfo),n===null)throw Error(i(387));f=r.pendingProps;var g=r.memoizedState;m=g.element,Pf(n,r),jr(r,f,null,u);var v=r.memoizedState;if(f=v.cache,Pn(r,fe,f),f!==g.cache&&jf(r,[fe],u,!0),Ur(),f=v.element,g.isDehydrated)if(g={element:f,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=dy(n,r,f,u);break t}else if(f!==m){m=Si(Error(i(424)),r),zr(m),r=dy(n,r,f,u);break t}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Jt=ki(n.firstChild),Ee=r,zt=!0,Qn=null,wi=!0,u=o0(r,null,f,u),r.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(_l(),f===m){r=xn(n,r,u);break t}Re(n,r,f,u)}r=r.child}return r;case 26:return Fo(n,r),n===null?(u=M1(r.type,null,r.pendingProps,null))?r.memoizedState=u:zt||(u=r.type,n=r.pendingProps,f=pu(Ot.current).createElement(u),f[Me]=r,f[Qe]=n,Be(f,u,n),xe(f),r.stateNode=f):r.memoizedState=M1(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Un(r),n===null&&zt&&(f=r.stateNode=k1(r.type,r.pendingProps,Ot.current),Ee=r,wi=!0,m=Jt,rl(r.type)?(rd=m,Jt=ki(f.firstChild)):Jt=m),Re(n,r,r.pendingProps.children,u),Fo(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&zt&&((m=f=Jt)&&(f=OC(f,r.type,r.pendingProps,wi),f!==null?(r.stateNode=f,Ee=r,Jt=ki(f.firstChild),wi=!1,m=!0):m=!1),m||Gn(r)),Un(r),m=r.type,g=r.pendingProps,v=n!==null?n.memoizedProps:null,f=g.children,ed(m,g)?f=null:v!==null&&ed(m,v)&&(r.flags|=32),r.memoizedState!==null&&(m=th(n,r,Hw,null,null,u),aa._currentValue=m),Fo(n,r),Re(n,r,f,u),r.child;case 6:return n===null&&zt&&((n=u=Jt)&&(u=wC(u,r.pendingProps,wi),u!==null?(r.stateNode=u,Ee=r,Jt=null,n=!0):n=!1),n||Gn(r)),null;case 13:return my(n,r,u);case 4:return Ae(r,r.stateNode.containerInfo),f=r.pendingProps,n===null?r.child=Wl(r,null,f,u):Re(n,r,f,u),r.child;case 11:return sy(n,r,r.type,r.pendingProps,u);case 7:return Re(n,r,r.pendingProps,u),r.child;case 8:return Re(n,r,r.pendingProps.children,u),r.child;case 12:return Re(n,r,r.pendingProps.children,u),r.child;case 10:return f=r.pendingProps,Pn(r,r.type,f.value),Re(n,r,f.children,u),r.child;case 9:return m=r.type._context,f=r.pendingProps.children,ql(r),m=De(m),f=f(m),r.flags|=1,Re(n,r,f,u),r.child;case 14:return ry(n,r,r.type,r.pendingProps,u);case 15:return ay(n,r,r.type,r.pendingProps,u);case 19:return gy(n,r,u);case 31:return Qw(n,r,u);case 22:return oy(n,r,u,r.pendingProps);case 24:return ql(r),f=De(fe),n===null?(m=Xf(),m===null&&(m=$t,g=Wf(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=u),m=g),r.memoizedState={parent:f,cache:m},Gf(r),Pn(r,fe,m)):((n.lanes&u)!==0&&(Pf(n,r),jr(r,null,null,u),Ur()),m=n.memoizedState,g=r.memoizedState,m.parent!==f?(m={parent:f,cache:f},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),Pn(r,fe,f)):(f=g.cache,Pn(r,fe,f),f!==m.cache&&jf(r,[fe],u,!0))),Re(n,r,r.pendingProps.children,u),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function On(n){n.flags|=4}function Mh(n,r,u,f,m){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(Xy())n.flags|=8192;else throw jl=Ho,Qf}else n.flags&=-16777217}function by(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!N1(r))if(Xy())n.flags|=8192;else throw jl=Ho,Qf}function tu(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Zp():536870912,n.lanes|=r,zs|=r)}function Pr(n,r){if(!zt)switch(n.tailMode){case"hidden":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function te(n){var r=n.alternate!==null&&n.alternate.child===n.child,u=0,f=0;if(r)for(var m=n.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags&65011712,f|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=f,n.childLanes=u,r}function Pw(n,r,u){var f=r.pendingProps;switch(_f(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return te(r),null;case 1:return te(r),null;case 3:return u=r.stateNode,f=null,n!==null&&(f=n.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),bn(fe),le(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(xs(r)?On(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,qf())),te(r),null;case 26:var m=r.type,g=r.memoizedState;return n===null?(On(r),g!==null?(te(r),by(r,g)):(te(r),Mh(r,m,null,f,u))):g?g!==n.memoizedState?(On(r),te(r),by(r,g)):(te(r),r.flags&=-16777217):(n=n.memoizedProps,n!==f&&On(r),te(r),Mh(r,m,n,f,u)),null;case 27:if(ls(r),u=Ot.current,m=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==f&&On(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return te(r),null}n=lt.current,xs(r)?Zg(r):(n=k1(m,f,u),r.stateNode=n,On(r))}return te(r),null;case 5:if(ls(r),m=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==f&&On(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return te(r),null}if(g=lt.current,xs(r))Zg(r);else{var v=pu(Ot.current);switch(g){case 1:g=v.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=v.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=v.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof f.is=="string"?v.createElement("select",{is:f.is}):v.createElement("select"),f.multiple?g.multiple=!0:f.size&&(g.size=f.size);break;default:g=typeof f.is=="string"?v.createElement(m,{is:f.is}):v.createElement(m)}}g[Me]=r,g[Qe]=f;t:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)g.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break t;for(;v.sibling===null;){if(v.return===null||v.return===r)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=g;t:switch(Be(g,m,f),m){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break t;case"img":f=!0;break t;default:f=!1}f&&On(r)}}return te(r),Mh(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,u),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==f&&On(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(i(166));if(n=Ot.current,xs(r)){if(n=r.stateNode,u=r.memoizedProps,f=null,m=Ee,m!==null)switch(m.tag){case 27:case 5:f=m.memoizedProps}n[Me]=r,n=!!(n.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||m1(n.nodeValue,u)),n||Gn(r,!0)}else n=pu(n).createTextNode(f),n[Me]=r,r.stateNode=n}return te(r),null;case 31:if(u=r.memoizedState,n===null||n.memoizedState!==null){if(f=xs(r),u!==null){if(n===null){if(!f)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Me]=r}else _l(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;te(r),n=!1}else u=qf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=u),n=!0;if(!n)return r.flags&256?(ui(r),r):(ui(r),null);if((r.flags&128)!==0)throw Error(i(558))}return te(r),null;case 13:if(f=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=xs(r),f!==null&&f.dehydrated!==null){if(n===null){if(!m)throw Error(i(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Me]=r}else _l(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;te(r),m=!1}else m=qf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(ui(r),r):(ui(r),null)}return ui(r),(r.flags&128)!==0?(r.lanes=u,r):(u=f!==null,n=n!==null&&n.memoizedState!==null,u&&(f=r.child,m=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(m=f.alternate.memoizedState.cachePool.pool),g=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(g=f.memoizedState.cachePool.pool),g!==m&&(f.flags|=2048)),u!==n&&u&&(r.child.flags|=8192),tu(r,r.updateQueue),te(r),null);case 4:return le(),n===null&&Ih(r.stateNode.containerInfo),te(r),null;case 10:return bn(r.type),te(r),null;case 19:if(z(ae),f=r.memoizedState,f===null)return te(r),null;if(m=(r.flags&128)!==0,g=f.rendering,g===null)if(m)Pr(f,!1);else{if(re!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(g=jo(n),g!==null){for(r.flags|=128,Pr(f,!1),n=g.updateQueue,r.updateQueue=n,tu(r,n),r.subtreeFlags=0,n=u,u=r.child;u!==null;)Gg(u,n),u=u.sibling;return I(ae,ae.current&1|2),zt&&gn(r,f.treeForkCount),r.child}n=n.sibling}f.tail!==null&&X()>su&&(r.flags|=128,m=!0,Pr(f,!1),r.lanes=4194304)}else{if(!m)if(n=jo(g),n!==null){if(r.flags|=128,m=!0,n=n.updateQueue,r.updateQueue=n,tu(r,n),Pr(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!zt)return te(r),null}else 2*X()-f.renderingStartTime>su&&u!==536870912&&(r.flags|=128,m=!0,Pr(f,!1),r.lanes=4194304);f.isBackwards?(g.sibling=r.child,r.child=g):(n=f.last,n!==null?n.sibling=g:r.child=g,f.last=g)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=X(),n.sibling=null,u=ae.current,I(ae,m?u&1|2:u&1),zt&&gn(r,f.treeForkCount),n):(te(r),null);case 22:case 23:return ui(r),Zf(),f=r.memoizedState!==null,n!==null?n.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(u&536870912)!==0&&(r.flags&128)===0&&(te(r),r.subtreeFlags&6&&(r.flags|=8192)):te(r),u=r.updateQueue,u!==null&&tu(r,u.retryQueue),u=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==u&&(r.flags|=2048),n!==null&&z(Vl),null;case 24:return u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),bn(fe),te(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function $w(n,r){switch(_f(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return bn(fe),le(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return ls(r),null;case 31:if(r.memoizedState!==null){if(ui(r),r.alternate===null)throw Error(i(340));_l()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(ui(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));_l()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return z(ae),null;case 4:return le(),null;case 10:return bn(r.type),null;case 22:case 23:return ui(r),Zf(),n!==null&&z(Vl),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return bn(fe),null;case 25:return null;default:return null}}function vy(n,r){switch(_f(r),r.tag){case 3:bn(fe),le();break;case 26:case 27:case 5:ls(r);break;case 4:le();break;case 31:r.memoizedState!==null&&ui(r);break;case 13:ui(r);break;case 19:z(ae);break;case 10:bn(r.type);break;case 22:case 23:ui(r),Zf(),n!==null&&z(Vl);break;case 24:bn(fe)}}function $r(n,r){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){f=void 0;var g=u.create,v=u.inst;f=g(),v.destroy=f}u=u.next}while(u!==m)}}catch(x){Yt(r,r.return,x)}}function Jn(n,r,u){try{var f=r.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var g=m.next;f=g;do{if((f.tag&n)===n){var v=f.inst,x=v.destroy;if(x!==void 0){v.destroy=void 0,m=r;var k=u,R=x;try{R()}catch(U){Yt(m,k,U)}}}f=f.next}while(f!==g)}}catch(U){Yt(r,r.return,U)}}function Sy(n){var r=n.updateQueue;if(r!==null){var u=n.stateNode;try{c0(r,u)}catch(f){Yt(n,n.return,f)}}}function xy(n,r,u){u.props=Xl(n.type,n.memoizedProps),u.state=n.memoizedState;try{u.componentWillUnmount()}catch(f){Yt(n,r,f)}}function Kr(n,r){try{var u=n.ref;if(u!==null){switch(n.tag){case 26:case 27:case 5:var f=n.stateNode;break;case 30:f=n.stateNode;break;default:f=n.stateNode}typeof u=="function"?n.refCleanup=u(f):u.current=f}}catch(m){Yt(n,r,m)}}function Pi(n,r){var u=n.ref,f=n.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(m){Yt(n,r,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){Yt(n,r,m)}else u.current=null}function Oy(n){var r=n.type,u=n.memoizedProps,f=n.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break t;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(m){Yt(n,n.return,m)}}function Eh(n,r,u){try{var f=n.stateNode;gC(f,n.type,u,r),f[Qe]=r}catch(m){Yt(n,n.return,m)}}function wy(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&rl(n.type)||n.tag===4}function Dh(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||wy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&rl(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Rh(n,r,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,r?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(n,r):(r=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,r.appendChild(n),u=u._reactRootContainer,u!=null||r.onclick!==null||(r.onclick=dn));else if(f!==4&&(f===27&&rl(n.type)&&(u=n.stateNode,r=null),n=n.child,n!==null))for(Rh(n,r,u),n=n.sibling;n!==null;)Rh(n,r,u),n=n.sibling}function eu(n,r,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,r?u.insertBefore(n,r):u.appendChild(n);else if(f!==4&&(f===27&&rl(n.type)&&(u=n.stateNode),n=n.child,n!==null))for(eu(n,r,u),n=n.sibling;n!==null;)eu(n,r,u),n=n.sibling}function Cy(n){var r=n.stateNode,u=n.memoizedProps;try{for(var f=n.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);Be(r,f,u),r[Me]=n,r[Qe]=u}catch(g){Yt(n,n.return,g)}}var wn=!1,me=!1,Bh=!1,ky=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Kw(n,r){if(n=n.containerInfo,Jh=Ou,n=Hg(n),kf(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else t:{u=(u=n.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var m=f.anchorOffset,g=f.focusNode;f=f.focusOffset;try{u.nodeType,g.nodeType}catch{u=null;break t}var v=0,x=-1,k=-1,R=0,U=0,Y=n,N=null;e:for(;;){for(var _;Y!==u||m!==0&&Y.nodeType!==3||(x=v+m),Y!==g||f!==0&&Y.nodeType!==3||(k=v+f),Y.nodeType===3&&(v+=Y.nodeValue.length),(_=Y.firstChild)!==null;)N=Y,Y=_;for(;;){if(Y===n)break e;if(N===u&&++R===m&&(x=v),N===g&&++U===f&&(k=v),(_=Y.nextSibling)!==null)break;Y=N,N=Y.parentNode}Y=_}u=x===-1||k===-1?null:{start:x,end:k}}else u=null}u=u||{start:0,end:0}}else u=null;for(td={focusedElem:n,selectionRange:u},Ou=!1,Oe=r;Oe!==null;)if(r=Oe,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Oe=n;else for(;Oe!==null;){switch(r=Oe,g=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(u=0;u<n.length;u++)m=n[u],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,u=r,m=g.memoizedProps,g=g.memoizedState,f=u.stateNode;try{var ot=Xl(u.type,m);n=f.getSnapshotBeforeUpdate(ot,g),f.__reactInternalSnapshotBeforeUpdate=n}catch(bt){Yt(u,u.return,bt)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,u=n.nodeType,u===9)nd(n);else if(u===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":nd(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Oe=n;break}Oe=r.return}}function Ay(n,r,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:kn(n,u),f&4&&$r(5,u);break;case 1:if(kn(n,u),f&4)if(n=u.stateNode,r===null)try{n.componentDidMount()}catch(v){Yt(u,u.return,v)}else{var m=Xl(u.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(m,r,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Yt(u,u.return,v)}}f&64&&Sy(u),f&512&&Kr(u,u.return);break;case 3:if(kn(n,u),f&64&&(n=u.updateQueue,n!==null)){if(r=null,u.child!==null)switch(u.child.tag){case 27:case 5:r=u.child.stateNode;break;case 1:r=u.child.stateNode}try{c0(n,r)}catch(v){Yt(u,u.return,v)}}break;case 27:r===null&&f&4&&Cy(u);case 26:case 5:kn(n,u),r===null&&f&4&&Oy(u),f&512&&Kr(u,u.return);break;case 12:kn(n,u);break;case 31:kn(n,u),f&4&&Ey(n,u);break;case 13:kn(n,u),f&4&&Dy(n,u),f&64&&(n=u.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(u=lC.bind(null,u),CC(n,u))));break;case 22:if(f=u.memoizedState!==null||wn,!f){r=r!==null&&r.memoizedState!==null||me,m=wn;var g=me;wn=f,(me=r)&&!g?An(n,u,(u.subtreeFlags&8772)!==0):kn(n,u),wn=m,me=g}break;case 30:break;default:kn(n,u)}}function Ty(n){var r=n.alternate;r!==null&&(n.alternate=null,Ty(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&of(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ee=null,Pe=!1;function Cn(n,r,u){for(u=u.child;u!==null;)My(n,r,u),u=u.sibling}function My(n,r,u){if(li&&typeof li.onCommitFiberUnmount=="function")try{li.onCommitFiberUnmount(vr,u)}catch{}switch(u.tag){case 26:me||Pi(u,r),Cn(n,r,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:me||Pi(u,r);var f=ee,m=Pe;rl(u.type)&&(ee=u.stateNode,Pe=!1),Cn(n,r,u),la(u.stateNode),ee=f,Pe=m;break;case 5:me||Pi(u,r);case 6:if(f=ee,m=Pe,ee=null,Cn(n,r,u),ee=f,Pe=m,ee!==null)if(Pe)try{(ee.nodeType===9?ee.body:ee.nodeName==="HTML"?ee.ownerDocument.body:ee).removeChild(u.stateNode)}catch(g){Yt(u,r,g)}else try{ee.removeChild(u.stateNode)}catch(g){Yt(u,r,g)}break;case 18:ee!==null&&(Pe?(n=ee,S1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,u.stateNode),Ws(n)):S1(ee,u.stateNode));break;case 4:f=ee,m=Pe,ee=u.stateNode.containerInfo,Pe=!0,Cn(n,r,u),ee=f,Pe=m;break;case 0:case 11:case 14:case 15:Jn(2,u,r),me||Jn(4,u,r),Cn(n,r,u);break;case 1:me||(Pi(u,r),f=u.stateNode,typeof f.componentWillUnmount=="function"&&xy(u,r,f)),Cn(n,r,u);break;case 21:Cn(n,r,u);break;case 22:me=(f=me)||u.memoizedState!==null,Cn(n,r,u),me=f;break;default:Cn(n,r,u)}}function Ey(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ws(n)}catch(u){Yt(r,r.return,u)}}}function Dy(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ws(n)}catch(u){Yt(r,r.return,u)}}function Iw(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new ky),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new ky),r;default:throw Error(i(435,n.tag))}}function iu(n,r){var u=Iw(n);r.forEach(function(f){if(!u.has(f)){u.add(f);var m=sC.bind(null,n,f);f.then(m,m)}})}function $e(n,r){var u=r.deletions;if(u!==null)for(var f=0;f<u.length;f++){var m=u[f],g=n,v=r,x=v;t:for(;x!==null;){switch(x.tag){case 27:if(rl(x.type)){ee=x.stateNode,Pe=!1;break t}break;case 5:ee=x.stateNode,Pe=!1;break t;case 3:case 4:ee=x.stateNode.containerInfo,Pe=!0;break t}x=x.return}if(ee===null)throw Error(i(160));My(g,v,m),ee=null,Pe=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Ry(r,n),r=r.sibling}var _i=null;function Ry(n,r){var u=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:$e(r,n),Ke(n),f&4&&(Jn(3,n,n.return),$r(3,n),Jn(5,n,n.return));break;case 1:$e(r,n),Ke(n),f&512&&(me||u===null||Pi(u,u.return)),f&64&&wn&&(n=n.updateQueue,n!==null&&(f=n.callbacks,f!==null&&(u=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var m=_i;if($e(r,n),Ke(n),f&512&&(me||u===null||Pi(u,u.return)),f&4){var g=u!==null?u.memoizedState:null;if(f=n.memoizedState,u===null)if(f===null)if(n.stateNode===null){t:{f=n.type,u=n.memoizedProps,m=m.ownerDocument||m;e:switch(f){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Or]||g[Me]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(f),m.head.insertBefore(g,m.querySelector("head > title"))),Be(g,f,u),g[Me]=n,xe(g),f=g;break t;case"link":var v=R1("link","href",m).get(f+(u.href||""));if(v){for(var x=0;x<v.length;x++)if(g=v[x],g.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&g.getAttribute("rel")===(u.rel==null?null:u.rel)&&g.getAttribute("title")===(u.title==null?null:u.title)&&g.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){v.splice(x,1);break e}}g=m.createElement(f),Be(g,f,u),m.head.appendChild(g);break;case"meta":if(v=R1("meta","content",m).get(f+(u.content||""))){for(x=0;x<v.length;x++)if(g=v[x],g.getAttribute("content")===(u.content==null?null:""+u.content)&&g.getAttribute("name")===(u.name==null?null:u.name)&&g.getAttribute("property")===(u.property==null?null:u.property)&&g.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&g.getAttribute("charset")===(u.charSet==null?null:u.charSet)){v.splice(x,1);break e}}g=m.createElement(f),Be(g,f,u),m.head.appendChild(g);break;default:throw Error(i(468,f))}g[Me]=n,xe(g),f=g}n.stateNode=f}else B1(m,n.type,n.stateNode);else n.stateNode=D1(m,f,n.memoizedProps);else g!==f?(g===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):g.count--,f===null?B1(m,n.type,n.stateNode):D1(m,f,n.memoizedProps)):f===null&&n.stateNode!==null&&Eh(n,n.memoizedProps,u.memoizedProps)}break;case 27:$e(r,n),Ke(n),f&512&&(me||u===null||Pi(u,u.return)),u!==null&&f&4&&Eh(n,n.memoizedProps,u.memoizedProps);break;case 5:if($e(r,n),Ke(n),f&512&&(me||u===null||Pi(u,u.return)),n.flags&32){m=n.stateNode;try{fs(m,"")}catch(ot){Yt(n,n.return,ot)}}f&4&&n.stateNode!=null&&(m=n.memoizedProps,Eh(n,m,u!==null?u.memoizedProps:m)),f&1024&&(Bh=!0);break;case 6:if($e(r,n),Ke(n),f&4){if(n.stateNode===null)throw Error(i(162));f=n.memoizedProps,u=n.stateNode;try{u.nodeValue=f}catch(ot){Yt(n,n.return,ot)}}break;case 3:if(bu=null,m=_i,_i=gu(r.containerInfo),$e(r,n),_i=m,Ke(n),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Ws(r.containerInfo)}catch(ot){Yt(n,n.return,ot)}Bh&&(Bh=!1,By(n));break;case 4:f=_i,_i=gu(n.stateNode.containerInfo),$e(r,n),Ke(n),_i=f;break;case 12:$e(r,n),Ke(n);break;case 31:$e(r,n),Ke(n),f&4&&(f=n.updateQueue,f!==null&&(n.updateQueue=null,iu(n,f)));break;case 13:$e(r,n),Ke(n),n.child.flags&8192&&n.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(lu=X()),f&4&&(f=n.updateQueue,f!==null&&(n.updateQueue=null,iu(n,f)));break;case 22:m=n.memoizedState!==null;var k=u!==null&&u.memoizedState!==null,R=wn,U=me;if(wn=R||m,me=U||k,$e(r,n),me=U,wn=R,Ke(n),f&8192)t:for(r=n.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(u===null||k||wn||me||Ql(n)),u=null,r=n;;){if(r.tag===5||r.tag===26){if(u===null){k=u=r;try{if(g=k.stateNode,m)v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{x=k.stateNode;var Y=k.memoizedProps.style,N=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;x.style.display=N==null||typeof N=="boolean"?"":(""+N).trim()}}catch(ot){Yt(k,k.return,ot)}}}else if(r.tag===6){if(u===null){k=r;try{k.stateNode.nodeValue=m?"":k.memoizedProps}catch(ot){Yt(k,k.return,ot)}}}else if(r.tag===18){if(u===null){k=r;try{var _=k.stateNode;m?x1(_,!0):x1(k.stateNode,!1)}catch(ot){Yt(k,k.return,ot)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break t;for(;r.sibling===null;){if(r.return===null||r.return===n)break t;u===r&&(u=null),r=r.return}u===r&&(u=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=n.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,iu(n,u))));break;case 19:$e(r,n),Ke(n),f&4&&(f=n.updateQueue,f!==null&&(n.updateQueue=null,iu(n,f)));break;case 30:break;case 21:break;default:$e(r,n),Ke(n)}}function Ke(n){var r=n.flags;if(r&2){try{for(var u,f=n.return;f!==null;){if(wy(f)){u=f;break}f=f.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var m=u.stateNode,g=Dh(n);eu(n,g,m);break;case 5:var v=u.stateNode;u.flags&32&&(fs(v,""),u.flags&=-33);var x=Dh(n);eu(n,x,v);break;case 3:case 4:var k=u.stateNode.containerInfo,R=Dh(n);Rh(n,R,k);break;default:throw Error(i(161))}}catch(U){Yt(n,n.return,U)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function By(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;By(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function kn(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Ay(n,r.alternate,r),r=r.sibling}function Ql(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Jn(4,r,r.return),Ql(r);break;case 1:Pi(r,r.return);var u=r.stateNode;typeof u.componentWillUnmount=="function"&&xy(r,r.return,u),Ql(r);break;case 27:la(r.stateNode);case 26:case 5:Pi(r,r.return),Ql(r);break;case 22:r.memoizedState===null&&Ql(r);break;case 30:Ql(r);break;default:Ql(r)}n=n.sibling}}function An(n,r,u){for(u=u&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,m=n,g=r,v=g.flags;switch(g.tag){case 0:case 11:case 15:An(m,g,u),$r(4,g);break;case 1:if(An(m,g,u),f=g,m=f.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(R){Yt(f,f.return,R)}if(f=g,m=f.updateQueue,m!==null){var x=f.stateNode;try{var k=m.shared.hiddenCallbacks;if(k!==null)for(m.shared.hiddenCallbacks=null,m=0;m<k.length;m++)u0(k[m],x)}catch(R){Yt(f,f.return,R)}}u&&v&64&&Sy(g),Kr(g,g.return);break;case 27:Cy(g);case 26:case 5:An(m,g,u),u&&f===null&&v&4&&Oy(g),Kr(g,g.return);break;case 12:An(m,g,u);break;case 31:An(m,g,u),u&&v&4&&Ey(m,g);break;case 13:An(m,g,u),u&&v&4&&Dy(m,g);break;case 22:g.memoizedState===null&&An(m,g,u),Kr(g,g.return);break;case 30:break;default:An(m,g,u)}r=r.sibling}}function Nh(n,r){var u=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==u&&(n!=null&&n.refCount++,u!=null&&Lr(u))}function zh(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Lr(n))}function Hi(n,r,u,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ny(n,r,u,f),r=r.sibling}function Ny(n,r,u,f){var m=r.flags;switch(r.tag){case 0:case 11:case 15:Hi(n,r,u,f),m&2048&&$r(9,r);break;case 1:Hi(n,r,u,f);break;case 3:Hi(n,r,u,f),m&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Lr(n)));break;case 12:if(m&2048){Hi(n,r,u,f),n=r.stateNode;try{var g=r.memoizedProps,v=g.id,x=g.onPostCommit;typeof x=="function"&&x(v,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){Yt(r,r.return,k)}}else Hi(n,r,u,f);break;case 31:Hi(n,r,u,f);break;case 13:Hi(n,r,u,f);break;case 23:break;case 22:g=r.stateNode,v=r.alternate,r.memoizedState!==null?g._visibility&2?Hi(n,r,u,f):Ir(n,r):g._visibility&2?Hi(n,r,u,f):(g._visibility|=2,Rs(n,r,u,f,(r.subtreeFlags&10256)!==0||!1)),m&2048&&Nh(v,r);break;case 24:Hi(n,r,u,f),m&2048&&zh(r.alternate,r);break;default:Hi(n,r,u,f)}}function Rs(n,r,u,f,m){for(m=m&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var g=n,v=r,x=u,k=f,R=v.flags;switch(v.tag){case 0:case 11:case 15:Rs(g,v,x,k,m),$r(8,v);break;case 23:break;case 22:var U=v.stateNode;v.memoizedState!==null?U._visibility&2?Rs(g,v,x,k,m):Ir(g,v):(U._visibility|=2,Rs(g,v,x,k,m)),m&&R&2048&&Nh(v.alternate,v);break;case 24:Rs(g,v,x,k,m),m&&R&2048&&zh(v.alternate,v);break;default:Rs(g,v,x,k,m)}r=r.sibling}}function Ir(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var u=n,f=r,m=f.flags;switch(f.tag){case 22:Ir(u,f),m&2048&&Nh(f.alternate,f);break;case 24:Ir(u,f),m&2048&&zh(f.alternate,f);break;default:Ir(u,f)}r=r.sibling}}var Zr=8192;function Bs(n,r,u){if(n.subtreeFlags&Zr)for(n=n.child;n!==null;)zy(n,r,u),n=n.sibling}function zy(n,r,u){switch(n.tag){case 26:Bs(n,r,u),n.flags&Zr&&n.memoizedState!==null&&_C(u,_i,n.memoizedState,n.memoizedProps);break;case 5:Bs(n,r,u);break;case 3:case 4:var f=_i;_i=gu(n.stateNode.containerInfo),Bs(n,r,u),_i=f;break;case 22:n.memoizedState===null&&(f=n.alternate,f!==null&&f.memoizedState!==null?(f=Zr,Zr=16777216,Bs(n,r,u),Zr=f):Bs(n,r,u));break;default:Bs(n,r,u)}}function Ly(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Fr(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var f=r[u];Oe=f,Hy(f,n)}Ly(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)_y(n),n=n.sibling}function _y(n){switch(n.tag){case 0:case 11:case 15:Fr(n),n.flags&2048&&Jn(9,n,n.return);break;case 3:Fr(n);break;case 12:Fr(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,nu(n)):Fr(n);break;default:Fr(n)}}function nu(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var f=r[u];Oe=f,Hy(f,n)}Ly(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Jn(8,r,r.return),nu(r);break;case 22:u=r.stateNode,u._visibility&2&&(u._visibility&=-3,nu(r));break;default:nu(r)}n=n.sibling}}function Hy(n,r){for(;Oe!==null;){var u=Oe;switch(u.tag){case 0:case 11:case 15:Jn(8,u,r);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Lr(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Oe=f;else t:for(u=n;Oe!==null;){f=Oe;var m=f.sibling,g=f.return;if(Ty(f),f===u){Oe=null;break t}if(m!==null){m.return=g,Oe=m;break t}Oe=g}}}var Zw={getCacheForType:function(n){var r=De(fe),u=r.data.get(n);return u===void 0&&(u=n(),r.data.set(n,u)),u},cacheSignal:function(){return De(fe).controller.signal}},Fw=typeof WeakMap=="function"?WeakMap:Map,jt=0,$t=null,Mt=null,Dt=0,Wt=0,ci=null,tl=!1,Ns=!1,Lh=!1,Tn=0,re=0,el=0,Gl=0,_h=0,fi=0,zs=0,Jr=null,Ie=null,Hh=!1,lu=0,qy=0,su=1/0,ru=null,il=null,ye=0,nl=null,Ls=null,Mn=0,qh=0,Vh=null,Vy=null,ta=0,Uh=null;function hi(){return(jt&2)!==0&&Dt!==0?Dt&-Dt:B.T!==null?Gh():eg()}function Uy(){if(fi===0)if((Dt&536870912)===0||zt){var n=mo;mo<<=1,(mo&3932160)===0&&(mo=262144),fi=n}else fi=536870912;return n=oi.current,n!==null&&(n.flags|=32),fi}function Ze(n,r,u){(n===$t&&(Wt===2||Wt===9)||n.cancelPendingCommit!==null)&&(_s(n,0),ll(n,Dt,fi,!1)),xr(n,u),((jt&2)===0||n!==$t)&&(n===$t&&((jt&2)===0&&(Gl|=u),re===4&&ll(n,Dt,fi,!1)),$i(n))}function jy(n,r,u){if((jt&6)!==0)throw Error(i(327));var f=!u&&(r&127)===0&&(r&n.expiredLanes)===0||Sr(n,r),m=f?eC(n,r):Wh(n,r,!0),g=f;do{if(m===0){Ns&&!f&&ll(n,r,0,!1);break}else{if(u=n.current.alternate,g&&!Jw(u)){m=Wh(n,r,!1),g=!1;continue}if(m===2){if(g=r,n.errorRecoveryDisabledLanes&g)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;t:{var x=n;m=Jr;var k=x.current.memoizedState.isDehydrated;if(k&&(_s(x,v).flags|=256),v=Wh(x,v,!1),v!==2){if(Lh&&!k){x.errorRecoveryDisabledLanes|=g,Gl|=g,m=4;break t}g=Ie,Ie=m,g!==null&&(Ie===null?Ie=g:Ie.push.apply(Ie,g))}m=v}if(g=!1,m!==2)continue}}if(m===1){_s(n,0),ll(n,r,0,!0);break}t:{switch(f=n,g=m,g){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ll(f,r,fi,!tl);break t;case 2:Ie=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(m=lu+300-X(),10<m)){if(ll(f,r,fi,!tl),go(f,0,!0)!==0)break t;Mn=r,f.timeoutHandle=b1(Wy.bind(null,f,u,Ie,ru,Hh,r,fi,Gl,zs,tl,g,"Throttled",-0,0),m);break t}Wy(f,u,Ie,ru,Hh,r,fi,Gl,zs,tl,g,null,-0,0)}}break}while(!0);$i(n)}function Wy(n,r,u,f,m,g,v,x,k,R,U,Y,N,_){if(n.timeoutHandle=-1,Y=r.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:dn},zy(r,g,Y);var ot=(g&62914560)===g?lu-X():(g&4194048)===g?qy-X():0;if(ot=HC(Y,ot),ot!==null){Mn=g,n.cancelPendingCommit=ot(Iy.bind(null,n,r,g,u,f,m,v,x,k,U,Y,null,N,_)),ll(n,g,v,!R);return}}Iy(n,r,g,u,f,m,v,x,k)}function Jw(n){for(var r=n;;){var u=r.tag;if((u===0||u===11||u===15)&&r.flags&16384&&(u=r.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var m=u[f],g=m.getSnapshot;m=m.value;try{if(!ri(g(),m))return!1}catch{return!1}}if(u=r.child,r.subtreeFlags&16384&&u!==null)u.return=r,r=u;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ll(n,r,u,f){r&=~_h,r&=~Gl,n.suspendedLanes|=r,n.pingedLanes&=~r,f&&(n.warmLanes|=r),f=n.expirationTimes;for(var m=r;0<m;){var g=31-si(m),v=1<<g;f[g]=-1,m&=~v}u!==0&&Fp(n,u,r)}function au(){return(jt&6)===0?(ea(0),!1):!0}function jh(){if(Mt!==null){if(Wt===0)var n=Mt.return;else n=Mt,yn=Hl=null,nh(n),As=null,Hr=0,n=Mt;for(;n!==null;)vy(n.alternate,n),n=n.return;Mt=null}}function _s(n,r){var u=n.timeoutHandle;u!==-1&&(n.timeoutHandle=-1,vC(u)),u=n.cancelPendingCommit,u!==null&&(n.cancelPendingCommit=null,u()),Mn=0,jh(),$t=n,Mt=u=pn(n.current,null),Dt=r,Wt=0,ci=null,tl=!1,Ns=Sr(n,r),Lh=!1,zs=fi=_h=Gl=el=re=0,Ie=Jr=null,Hh=!1,(r&8)!==0&&(r|=r&32);var f=n.entangledLanes;if(f!==0)for(n=n.entanglements,f&=r;0<f;){var m=31-si(f),g=1<<m;r|=n[m],f&=~g}return Tn=r,Mo(),u}function Yy(n,r){kt=null,B.H=Qr,r===ks||r===_o?(r=s0(),Wt=3):r===Qf?(r=s0(),Wt=4):Wt=r===vh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ci=r,Mt===null&&(re=1,Io(n,Si(r,n.current)))}function Xy(){var n=oi.current;return n===null?!0:(Dt&4194048)===Dt?Ci===null:(Dt&62914560)===Dt||(Dt&536870912)!==0?n===Ci:!1}function Qy(){var n=B.H;return B.H=Qr,n===null?Qr:n}function Gy(){var n=B.A;return B.A=Zw,n}function ou(){re=4,tl||(Dt&4194048)!==Dt&&oi.current!==null||(Ns=!0),(el&134217727)===0&&(Gl&134217727)===0||$t===null||ll($t,Dt,fi,!1)}function Wh(n,r,u){var f=jt;jt|=2;var m=Qy(),g=Gy();($t!==n||Dt!==r)&&(ru=null,_s(n,r)),r=!1;var v=re;t:do try{if(Wt!==0&&Mt!==null){var x=Mt,k=ci;switch(Wt){case 8:jh(),v=6;break t;case 3:case 2:case 9:case 6:oi.current===null&&(r=!0);var R=Wt;if(Wt=0,ci=null,Hs(n,x,k,R),u&&Ns){v=0;break t}break;default:R=Wt,Wt=0,ci=null,Hs(n,x,k,R)}}tC(),v=re;break}catch(U){Yy(n,U)}while(!0);return r&&n.shellSuspendCounter++,yn=Hl=null,jt=f,B.H=m,B.A=g,Mt===null&&($t=null,Dt=0,Mo()),v}function tC(){for(;Mt!==null;)Py(Mt)}function eC(n,r){var u=jt;jt|=2;var f=Qy(),m=Gy();$t!==n||Dt!==r?(ru=null,su=X()+500,_s(n,r)):Ns=Sr(n,r);t:do try{if(Wt!==0&&Mt!==null){r=Mt;var g=ci;e:switch(Wt){case 1:Wt=0,ci=null,Hs(n,r,g,1);break;case 2:case 9:if(n0(g)){Wt=0,ci=null,$y(r);break}r=function(){Wt!==2&&Wt!==9||$t!==n||(Wt=7),$i(n)},g.then(r,r);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:n0(g)?(Wt=0,ci=null,$y(r)):(Wt=0,ci=null,Hs(n,r,g,7));break;case 5:var v=null;switch(Mt.tag){case 26:v=Mt.memoizedState;case 5:case 27:var x=Mt;if(v?N1(v):x.stateNode.complete){Wt=0,ci=null;var k=x.sibling;if(k!==null)Mt=k;else{var R=x.return;R!==null?(Mt=R,uu(R)):Mt=null}break e}}Wt=0,ci=null,Hs(n,r,g,5);break;case 6:Wt=0,ci=null,Hs(n,r,g,6);break;case 8:jh(),re=6;break t;default:throw Error(i(462))}}iC();break}catch(U){Yy(n,U)}while(!0);return yn=Hl=null,B.H=f,B.A=m,jt=u,Mt!==null?0:($t=null,Dt=0,Mo(),re)}function iC(){for(;Mt!==null&&!tf();)Py(Mt)}function Py(n){var r=yy(n.alternate,n,Tn);n.memoizedProps=n.pendingProps,r===null?uu(n):Mt=r}function $y(n){var r=n,u=r.alternate;switch(r.tag){case 15:case 0:r=fy(u,r,r.pendingProps,r.type,void 0,Dt);break;case 11:r=fy(u,r,r.pendingProps,r.type.render,r.ref,Dt);break;case 5:nh(r);default:vy(u,r),r=Mt=Gg(r,Tn),r=yy(u,r,Tn)}n.memoizedProps=n.pendingProps,r===null?uu(n):Mt=r}function Hs(n,r,u,f){yn=Hl=null,nh(r),As=null,Hr=0;var m=r.return;try{if(Xw(n,m,r,u,Dt)){re=1,Io(n,Si(u,n.current)),Mt=null;return}}catch(g){if(m!==null)throw Mt=m,g;re=1,Io(n,Si(u,n.current)),Mt=null;return}r.flags&32768?(zt||f===1?n=!0:Ns||(Dt&536870912)!==0?n=!1:(tl=n=!0,(f===2||f===9||f===3||f===6)&&(f=oi.current,f!==null&&f.tag===13&&(f.flags|=16384))),Ky(r,n)):uu(r)}function uu(n){var r=n;do{if((r.flags&32768)!==0){Ky(r,tl);return}n=r.return;var u=Pw(r.alternate,r,Tn);if(u!==null){Mt=u;return}if(r=r.sibling,r!==null){Mt=r;return}Mt=r=n}while(r!==null);re===0&&(re=5)}function Ky(n,r){do{var u=$w(n.alternate,n);if(u!==null){u.flags&=32767,Mt=u;return}if(u=n.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!r&&(n=n.sibling,n!==null)){Mt=n;return}Mt=n=u}while(n!==null);re=6,Mt=null}function Iy(n,r,u,f,m,g,v,x,k){n.cancelPendingCommit=null;do cu();while(ye!==0);if((jt&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(g=r.lanes|r.childLanes,g|=Df,L2(n,u,g,v,x,k),n===$t&&(Mt=$t=null,Dt=0),Ls=r,nl=n,Mn=u,qh=g,Vh=m,Vy=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,rC(Te,function(){return e1(),null})):(n.callbackNode=null,n.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=B.T,B.T=null,m=K.p,K.p=2,v=jt,jt|=4;try{Kw(n,r,u)}finally{jt=v,K.p=m,B.T=f}}ye=1,Zy(),Fy(),Jy()}}function Zy(){if(ye===1){ye=0;var n=nl,r=Ls,u=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||u){u=B.T,B.T=null;var f=K.p;K.p=2;var m=jt;jt|=4;try{Ry(r,n);var g=td,v=Hg(n.containerInfo),x=g.focusedElem,k=g.selectionRange;if(v!==x&&x&&x.ownerDocument&&_g(x.ownerDocument.documentElement,x)){if(k!==null&&kf(x)){var R=k.start,U=k.end;if(U===void 0&&(U=R),"selectionStart"in x)x.selectionStart=R,x.selectionEnd=Math.min(U,x.value.length);else{var Y=x.ownerDocument||document,N=Y&&Y.defaultView||window;if(N.getSelection){var _=N.getSelection(),ot=x.textContent.length,bt=Math.min(k.start,ot),Gt=k.end===void 0?bt:Math.min(k.end,ot);!_.extend&&bt>Gt&&(v=Gt,Gt=bt,bt=v);var E=Lg(x,bt),T=Lg(x,Gt);if(E&&T&&(_.rangeCount!==1||_.anchorNode!==E.node||_.anchorOffset!==E.offset||_.focusNode!==T.node||_.focusOffset!==T.offset)){var D=Y.createRange();D.setStart(E.node,E.offset),_.removeAllRanges(),bt>Gt?(_.addRange(D),_.extend(T.node,T.offset)):(D.setEnd(T.node,T.offset),_.addRange(D))}}}}for(Y=[],_=x;_=_.parentNode;)_.nodeType===1&&Y.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<Y.length;x++){var j=Y[x];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}Ou=!!Jh,td=Jh=null}finally{jt=m,K.p=f,B.T=u}}n.current=r,ye=2}}function Fy(){if(ye===2){ye=0;var n=nl,r=Ls,u=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||u){u=B.T,B.T=null;var f=K.p;K.p=2;var m=jt;jt|=4;try{Ay(n,r.alternate,r)}finally{jt=m,K.p=f,B.T=u}}ye=3}}function Jy(){if(ye===4||ye===3){ye=0,ef();var n=nl,r=Ls,u=Mn,f=Vy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ye=5:(ye=0,Ls=nl=null,t1(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(il=null),rf(u),r=r.stateNode,li&&typeof li.onCommitFiberRoot=="function")try{li.onCommitFiberRoot(vr,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=B.T,m=K.p,K.p=2,B.T=null;try{for(var g=n.onRecoverableError,v=0;v<f.length;v++){var x=f[v];g(x.value,{componentStack:x.stack})}}finally{B.T=r,K.p=m}}(Mn&3)!==0&&cu(),$i(n),m=n.pendingLanes,(u&261930)!==0&&(m&42)!==0?n===Uh?ta++:(ta=0,Uh=n):ta=0,ea(0)}}function t1(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Lr(r)))}function cu(){return Zy(),Fy(),Jy(),e1()}function e1(){if(ye!==5)return!1;var n=nl,r=qh;qh=0;var u=rf(Mn),f=B.T,m=K.p;try{K.p=32>u?32:u,B.T=null,u=Vh,Vh=null;var g=nl,v=Mn;if(ye=0,Ls=nl=null,Mn=0,(jt&6)!==0)throw Error(i(331));var x=jt;if(jt|=4,_y(g.current),Ny(g,g.current,v,u),jt=x,ea(0,!1),li&&typeof li.onPostCommitFiberRoot=="function")try{li.onPostCommitFiberRoot(vr,g)}catch{}return!0}finally{K.p=m,B.T=f,t1(n,r)}}function i1(n,r,u){r=Si(u,r),r=bh(n.stateNode,r,2),n=In(n,r,2),n!==null&&(xr(n,2),$i(n))}function Yt(n,r,u){if(n.tag===3)i1(n,n,u);else for(;r!==null;){if(r.tag===3){i1(r,n,u);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(il===null||!il.has(f))){n=Si(u,n),u=ny(2),f=In(r,u,2),f!==null&&(ly(u,f,r,n),xr(f,2),$i(f));break}}r=r.return}}function Yh(n,r,u){var f=n.pingCache;if(f===null){f=n.pingCache=new Fw;var m=new Set;f.set(r,m)}else m=f.get(r),m===void 0&&(m=new Set,f.set(r,m));m.has(u)||(Lh=!0,m.add(u),n=nC.bind(null,n,r,u),r.then(n,n))}function nC(n,r,u){var f=n.pingCache;f!==null&&f.delete(r),n.pingedLanes|=n.suspendedLanes&u,n.warmLanes&=~u,$t===n&&(Dt&u)===u&&(re===4||re===3&&(Dt&62914560)===Dt&&300>X()-lu?(jt&2)===0&&_s(n,0):_h|=u,zs===Dt&&(zs=0)),$i(n)}function n1(n,r){r===0&&(r=Zp()),n=zl(n,r),n!==null&&(xr(n,r),$i(n))}function lC(n){var r=n.memoizedState,u=0;r!==null&&(u=r.retryLane),n1(n,u)}function sC(n,r){var u=0;switch(n.tag){case 31:case 13:var f=n.stateNode,m=n.memoizedState;m!==null&&(u=m.retryLane);break;case 19:f=n.stateNode;break;case 22:f=n.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(r),n1(n,u)}function rC(n,r){return yr(n,r)}var fu=null,qs=null,Xh=!1,hu=!1,Qh=!1,sl=0;function $i(n){n!==qs&&n.next===null&&(qs===null?fu=qs=n:qs=qs.next=n),hu=!0,Xh||(Xh=!0,oC())}function ea(n,r){if(!Qh&&hu){Qh=!0;do for(var u=!1,f=fu;f!==null;){if(n!==0){var m=f.pendingLanes;if(m===0)var g=0;else{var v=f.suspendedLanes,x=f.pingedLanes;g=(1<<31-si(42|n)+1)-1,g&=m&~(v&~x),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(u=!0,a1(f,g))}else g=Dt,g=go(f,f===$t?g:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(g&3)===0||Sr(f,g)||(u=!0,a1(f,g));f=f.next}while(u);Qh=!1}}function aC(){l1()}function l1(){hu=Xh=!1;var n=0;sl!==0&&bC()&&(n=sl);for(var r=X(),u=null,f=fu;f!==null;){var m=f.next,g=s1(f,r);g===0?(f.next=null,u===null?fu=m:u.next=m,m===null&&(qs=u)):(u=f,(n!==0||(g&3)!==0)&&(hu=!0)),f=m}ye!==0&&ye!==5||ea(n),sl!==0&&(sl=0)}function s1(n,r){for(var u=n.suspendedLanes,f=n.pingedLanes,m=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var v=31-si(g),x=1<<v,k=m[v];k===-1?((x&u)===0||(x&f)!==0)&&(m[v]=z2(x,r)):k<=r&&(n.expiredLanes|=x),g&=~x}if(r=$t,u=Dt,u=go(n,n===r?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),f=n.callbackNode,u===0||n===r&&(Wt===2||Wt===9)||n.cancelPendingCommit!==null)return f!==null&&f!==null&&br(f),n.callbackNode=null,n.callbackPriority=0;if((u&3)===0||Sr(n,u)){if(r=u&-u,r===n.callbackPriority)return r;switch(f!==null&&br(f),rf(u)){case 2:case 8:u=Ht;break;case 32:u=Te;break;case 268435456:u=Ip;break;default:u=Te}return f=r1.bind(null,n),u=yr(u,f),n.callbackPriority=r,n.callbackNode=u,r}return f!==null&&f!==null&&br(f),n.callbackPriority=2,n.callbackNode=null,2}function r1(n,r){if(ye!==0&&ye!==5)return n.callbackNode=null,n.callbackPriority=0,null;var u=n.callbackNode;if(cu()&&n.callbackNode!==u)return null;var f=Dt;return f=go(n,n===$t?f:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),f===0?null:(jy(n,f,r),s1(n,X()),n.callbackNode!=null&&n.callbackNode===u?r1.bind(null,n):null)}function a1(n,r){if(cu())return null;jy(n,r,!0)}function oC(){SC(function(){(jt&6)!==0?yr(_t,aC):l1()})}function Gh(){if(sl===0){var n=ws;n===0&&(n=ho,ho<<=1,(ho&261888)===0&&(ho=256)),sl=n}return sl}function o1(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:So(""+n)}function u1(n,r){var u=r.ownerDocument.createElement("input");return u.name=r.name,u.value=r.value,n.id&&u.setAttribute("form",n.id),r.parentNode.insertBefore(u,r),n=new FormData(n),u.parentNode.removeChild(u),n}function uC(n,r,u,f,m){if(r==="submit"&&u&&u.stateNode===m){var g=o1((m[Qe]||null).action),v=f.submitter;v&&(r=(r=v[Qe]||null)?o1(r.formAction):v.getAttribute("formAction"),r!==null&&(g=r,v=null));var x=new Co("action","action",null,f,m);n.push({event:x,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(sl!==0){var k=v?u1(m,v):new FormData(m);hh(u,{pending:!0,data:k,method:m.method,action:g},null,k)}}else typeof g=="function"&&(x.preventDefault(),k=v?u1(m,v):new FormData(m),hh(u,{pending:!0,data:k,method:m.method,action:g},g,k))},currentTarget:m}]})}}for(var Ph=0;Ph<Ef.length;Ph++){var $h=Ef[Ph],cC=$h.toLowerCase(),fC=$h[0].toUpperCase()+$h.slice(1);Li(cC,"on"+fC)}Li(Ug,"onAnimationEnd"),Li(jg,"onAnimationIteration"),Li(Wg,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(Tw,"onTransitionRun"),Li(Mw,"onTransitionStart"),Li(Ew,"onTransitionCancel"),Li(Yg,"onTransitionEnd"),us("onMouseEnter",["mouseout","mouseover"]),us("onMouseLeave",["mouseout","mouseover"]),us("onPointerEnter",["pointerout","pointerover"]),us("onPointerLeave",["pointerout","pointerover"]),Dl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ia));function c1(n,r){r=(r&4)!==0;for(var u=0;u<n.length;u++){var f=n[u],m=f.event;f=f.listeners;t:{var g=void 0;if(r)for(var v=f.length-1;0<=v;v--){var x=f[v],k=x.instance,R=x.currentTarget;if(x=x.listener,k!==g&&m.isPropagationStopped())break t;g=x,m.currentTarget=R;try{g(m)}catch(U){To(U)}m.currentTarget=null,g=k}else for(v=0;v<f.length;v++){if(x=f[v],k=x.instance,R=x.currentTarget,x=x.listener,k!==g&&m.isPropagationStopped())break t;g=x,m.currentTarget=R;try{g(m)}catch(U){To(U)}m.currentTarget=null,g=k}}}}function Et(n,r){var u=r[af];u===void 0&&(u=r[af]=new Set);var f=n+"__bubble";u.has(f)||(f1(r,n,2,!1),u.add(f))}function Kh(n,r,u){var f=0;r&&(f|=4),f1(u,n,f,r)}var du="_reactListening"+Math.random().toString(36).slice(2);function Ih(n){if(!n[du]){n[du]=!0,lg.forEach(function(u){u!=="selectionchange"&&(hC.has(u)||Kh(u,!1,n),Kh(u,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[du]||(r[du]=!0,Kh("selectionchange",!1,r))}}function f1(n,r,u,f){switch(U1(r)){case 2:var m=UC;break;case 8:m=jC;break;default:m=fd}u=m.bind(null,r,u,n),m=void 0,!gf||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),f?m!==void 0?n.addEventListener(r,u,{capture:!0,passive:m}):n.addEventListener(r,u,!0):m!==void 0?n.addEventListener(r,u,{passive:m}):n.addEventListener(r,u,!1)}function Zh(n,r,u,f,m){var g=f;if((r&1)===0&&(r&2)===0&&f!==null)t:for(;;){if(f===null)return;var v=f.tag;if(v===3||v===4){var x=f.stateNode.containerInfo;if(x===m)break;if(v===4)for(v=f.return;v!==null;){var k=v.tag;if((k===3||k===4)&&v.stateNode.containerInfo===m)return;v=v.return}for(;x!==null;){if(v=rs(x),v===null)return;if(k=v.tag,k===5||k===6||k===26||k===27){f=g=v;continue t}x=x.parentNode}}f=f.return}gg(function(){var R=g,U=mf(u),Y=[];t:{var N=Xg.get(n);if(N!==void 0){var _=Co,ot=n;switch(n){case"keypress":if(Oo(u)===0)break t;case"keydown":case"keyup":_=sw;break;case"focusin":ot="focus",_=Sf;break;case"focusout":ot="blur",_=Sf;break;case"beforeblur":case"afterblur":_=Sf;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=vg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=P2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=ow;break;case Ug:case jg:case Wg:_=I2;break;case Yg:_=cw;break;case"scroll":case"scrollend":_=Q2;break;case"wheel":_=hw;break;case"copy":case"cut":case"paste":_=F2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=xg;break;case"toggle":case"beforetoggle":_=mw}var bt=(r&4)!==0,Gt=!bt&&(n==="scroll"||n==="scrollend"),E=bt?N!==null?N+"Capture":null:N;bt=[];for(var T=R,D;T!==null;){var j=T;if(D=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||D===null||E===null||(j=Cr(T,E),j!=null&&bt.push(na(T,j,D))),Gt)break;T=T.return}0<bt.length&&(N=new _(N,ot,null,u,U),Y.push({event:N,listeners:bt}))}}if((r&7)===0){t:{if(N=n==="mouseover"||n==="pointerover",_=n==="mouseout"||n==="pointerout",N&&u!==df&&(ot=u.relatedTarget||u.fromElement)&&(rs(ot)||ot[ss]))break t;if((_||N)&&(N=U.window===U?U:(N=U.ownerDocument)?N.defaultView||N.parentWindow:window,_?(ot=u.relatedTarget||u.toElement,_=R,ot=ot?rs(ot):null,ot!==null&&(Gt=a(ot),bt=ot.tag,ot!==Gt||bt!==5&&bt!==27&&bt!==6)&&(ot=null)):(_=null,ot=R),_!==ot)){if(bt=vg,j="onMouseLeave",E="onMouseEnter",T="mouse",(n==="pointerout"||n==="pointerover")&&(bt=xg,j="onPointerLeave",E="onPointerEnter",T="pointer"),Gt=_==null?N:wr(_),D=ot==null?N:wr(ot),N=new bt(j,T+"leave",_,u,U),N.target=Gt,N.relatedTarget=D,j=null,rs(U)===R&&(bt=new bt(E,T+"enter",ot,u,U),bt.target=D,bt.relatedTarget=Gt,j=bt),Gt=j,_&&ot)e:{for(bt=dC,E=_,T=ot,D=0,j=E;j;j=bt(j))D++;j=0;for(var dt=T;dt;dt=bt(dt))j++;for(;0<D-j;)E=bt(E),D--;for(;0<j-D;)T=bt(T),j--;for(;D--;){if(E===T||T!==null&&E===T.alternate){bt=E;break e}E=bt(E),T=bt(T)}bt=null}else bt=null;_!==null&&h1(Y,N,_,bt,!1),ot!==null&&Gt!==null&&h1(Y,Gt,ot,bt,!0)}}t:{if(N=R?wr(R):window,_=N.nodeName&&N.nodeName.toLowerCase(),_==="select"||_==="input"&&N.type==="file")var Vt=Eg;else if(Tg(N))if(Dg)Vt=Cw;else{Vt=Ow;var ct=xw}else _=N.nodeName,!_||_.toLowerCase()!=="input"||N.type!=="checkbox"&&N.type!=="radio"?R&&hf(R.elementType)&&(Vt=Eg):Vt=ww;if(Vt&&(Vt=Vt(n,R))){Mg(Y,Vt,u,U);break t}ct&&ct(n,N,R),n==="focusout"&&R&&N.type==="number"&&R.memoizedProps.value!=null&&ff(N,"number",N.value)}switch(ct=R?wr(R):window,n){case"focusin":(Tg(ct)||ct.contentEditable==="true")&&(ps=ct,Af=R,Br=null);break;case"focusout":Br=Af=ps=null;break;case"mousedown":Tf=!0;break;case"contextmenu":case"mouseup":case"dragend":Tf=!1,qg(Y,u,U);break;case"selectionchange":if(Aw)break;case"keydown":case"keyup":qg(Y,u,U)}var At;if(Of)t:{switch(n){case"compositionstart":var Rt="onCompositionStart";break t;case"compositionend":Rt="onCompositionEnd";break t;case"compositionupdate":Rt="onCompositionUpdate";break t}Rt=void 0}else ms?kg(n,u)&&(Rt="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(Rt="onCompositionStart");Rt&&(Og&&u.locale!=="ko"&&(ms||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&ms&&(At=yg()):(Yn=U,yf="value"in Yn?Yn.value:Yn.textContent,ms=!0)),ct=mu(R,Rt),0<ct.length&&(Rt=new Sg(Rt,n,null,u,U),Y.push({event:Rt,listeners:ct}),At?Rt.data=At:(At=Ag(u),At!==null&&(Rt.data=At)))),(At=gw?yw(n,u):bw(n,u))&&(Rt=mu(R,"onBeforeInput"),0<Rt.length&&(ct=new Sg("onBeforeInput","beforeinput",null,u,U),Y.push({event:ct,listeners:Rt}),ct.data=At)),uC(Y,n,R,u,U)}c1(Y,r)})}function na(n,r,u){return{instance:n,listener:r,currentTarget:u}}function mu(n,r){for(var u=r+"Capture",f=[];n!==null;){var m=n,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Cr(n,u),m!=null&&f.unshift(na(n,m,g)),m=Cr(n,r),m!=null&&f.push(na(n,m,g))),n.tag===3)return f;n=n.return}return[]}function dC(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function h1(n,r,u,f,m){for(var g=r._reactName,v=[];u!==null&&u!==f;){var x=u,k=x.alternate,R=x.stateNode;if(x=x.tag,k!==null&&k===f)break;x!==5&&x!==26&&x!==27||R===null||(k=R,m?(R=Cr(u,g),R!=null&&v.unshift(na(u,R,k))):m||(R=Cr(u,g),R!=null&&v.push(na(u,R,k)))),u=u.return}v.length!==0&&n.push({event:r,listeners:v})}var mC=/\r\n?/g,pC=/\u0000|\uFFFD/g;function d1(n){return(typeof n=="string"?n:""+n).replace(mC,`
`).replace(pC,"")}function m1(n,r){return r=d1(r),d1(n)===r}function Qt(n,r,u,f,m,g){switch(u){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||fs(n,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&fs(n,""+f);break;case"className":bo(n,"class",f);break;case"tabIndex":bo(n,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":bo(n,u,f);break;case"style":mg(n,f,g);break;case"data":if(r!=="object"){bo(n,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||u!=="href")){n.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){n.removeAttribute(u);break}f=So(""+f),n.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){n.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(u==="formAction"?(r!=="input"&&Qt(n,r,"name",m.name,m,null),Qt(n,r,"formEncType",m.formEncType,m,null),Qt(n,r,"formMethod",m.formMethod,m,null),Qt(n,r,"formTarget",m.formTarget,m,null)):(Qt(n,r,"encType",m.encType,m,null),Qt(n,r,"method",m.method,m,null),Qt(n,r,"target",m.target,m,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){n.removeAttribute(u);break}f=So(""+f),n.setAttribute(u,f);break;case"onClick":f!=null&&(n.onclick=dn);break;case"onScroll":f!=null&&Et("scroll",n);break;case"onScrollEnd":f!=null&&Et("scrollend",n);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(m.children!=null)throw Error(i(60));n.innerHTML=u}}break;case"multiple":n.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":n.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){n.removeAttribute("xlink:href");break}u=So(""+f),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?n.setAttribute(u,""+f):n.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?n.setAttribute(u,""):n.removeAttribute(u);break;case"capture":case"download":f===!0?n.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?n.setAttribute(u,f):n.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?n.setAttribute(u,f):n.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?n.removeAttribute(u):n.setAttribute(u,f);break;case"popover":Et("beforetoggle",n),Et("toggle",n),yo(n,"popover",f);break;case"xlinkActuate":hn(n,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":hn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":hn(n,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":hn(n,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":hn(n,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":hn(n,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":hn(n,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":hn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":hn(n,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":yo(n,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Y2.get(u)||u,yo(n,u,f))}}function Fh(n,r,u,f,m,g){switch(u){case"style":mg(n,f,g);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(m.children!=null)throw Error(i(60));n.innerHTML=u}}break;case"children":typeof f=="string"?fs(n,f):(typeof f=="number"||typeof f=="bigint")&&fs(n,""+f);break;case"onScroll":f!=null&&Et("scroll",n);break;case"onScrollEnd":f!=null&&Et("scrollend",n);break;case"onClick":f!=null&&(n.onclick=dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sg.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),r=u.slice(2,m?u.length-7:void 0),g=n[Qe]||null,g=g!=null?g[u]:null,typeof g=="function"&&n.removeEventListener(r,g,m),typeof f=="function")){typeof g!="function"&&g!==null&&(u in n?n[u]=null:n.hasAttribute(u)&&n.removeAttribute(u)),n.addEventListener(r,f,m);break t}u in n?n[u]=f:f===!0?n.setAttribute(u,""):yo(n,u,f)}}}function Be(n,r,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",n),Et("load",n);var f=!1,m=!1,g;for(g in u)if(u.hasOwnProperty(g)){var v=u[g];if(v!=null)switch(g){case"src":f=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Qt(n,r,g,v,u,null)}}m&&Qt(n,r,"srcSet",u.srcSet,u,null),f&&Qt(n,r,"src",u.src,u,null);return;case"input":Et("invalid",n);var x=g=v=m=null,k=null,R=null;for(f in u)if(u.hasOwnProperty(f)){var U=u[f];if(U!=null)switch(f){case"name":m=U;break;case"type":v=U;break;case"checked":k=U;break;case"defaultChecked":R=U;break;case"value":g=U;break;case"defaultValue":x=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(137,r));break;default:Qt(n,r,f,U,u,null)}}cg(n,g,x,k,R,v,m,!1);return;case"select":Et("invalid",n),f=v=g=null;for(m in u)if(u.hasOwnProperty(m)&&(x=u[m],x!=null))switch(m){case"value":g=x;break;case"defaultValue":v=x;break;case"multiple":f=x;default:Qt(n,r,m,x,u,null)}r=g,u=v,n.multiple=!!f,r!=null?cs(n,!!f,r,!1):u!=null&&cs(n,!!f,u,!0);return;case"textarea":Et("invalid",n),g=m=f=null;for(v in u)if(u.hasOwnProperty(v)&&(x=u[v],x!=null))switch(v){case"value":f=x;break;case"defaultValue":m=x;break;case"children":g=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:Qt(n,r,v,x,u,null)}hg(n,f,m,g);return;case"option":for(k in u)u.hasOwnProperty(k)&&(f=u[k],f!=null)&&(k==="selected"?n.selected=f&&typeof f!="function"&&typeof f!="symbol":Qt(n,r,k,f,u,null));return;case"dialog":Et("beforetoggle",n),Et("toggle",n),Et("cancel",n),Et("close",n);break;case"iframe":case"object":Et("load",n);break;case"video":case"audio":for(f=0;f<ia.length;f++)Et(ia[f],n);break;case"image":Et("error",n),Et("load",n);break;case"details":Et("toggle",n);break;case"embed":case"source":case"link":Et("error",n),Et("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in u)if(u.hasOwnProperty(R)&&(f=u[R],f!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Qt(n,r,R,f,u,null)}return;default:if(hf(r)){for(U in u)u.hasOwnProperty(U)&&(f=u[U],f!==void 0&&Fh(n,r,U,f,u,void 0));return}}for(x in u)u.hasOwnProperty(x)&&(f=u[x],f!=null&&Qt(n,r,x,f,u,null))}function gC(n,r,u,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,v=null,x=null,k=null,R=null,U=null;for(_ in u){var Y=u[_];if(u.hasOwnProperty(_)&&Y!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":k=Y;default:f.hasOwnProperty(_)||Qt(n,r,_,null,f,Y)}}for(var N in f){var _=f[N];if(Y=u[N],f.hasOwnProperty(N)&&(_!=null||Y!=null))switch(N){case"type":g=_;break;case"name":m=_;break;case"checked":R=_;break;case"defaultChecked":U=_;break;case"value":v=_;break;case"defaultValue":x=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(137,r));break;default:_!==Y&&Qt(n,r,N,_,f,Y)}}cf(n,v,x,k,R,U,g,m);return;case"select":_=v=x=N=null;for(g in u)if(k=u[g],u.hasOwnProperty(g)&&k!=null)switch(g){case"value":break;case"multiple":_=k;default:f.hasOwnProperty(g)||Qt(n,r,g,null,f,k)}for(m in f)if(g=f[m],k=u[m],f.hasOwnProperty(m)&&(g!=null||k!=null))switch(m){case"value":N=g;break;case"defaultValue":x=g;break;case"multiple":v=g;default:g!==k&&Qt(n,r,m,g,f,k)}r=x,u=v,f=_,N!=null?cs(n,!!u,N,!1):!!f!=!!u&&(r!=null?cs(n,!!u,r,!0):cs(n,!!u,u?[]:"",!1));return;case"textarea":_=N=null;for(x in u)if(m=u[x],u.hasOwnProperty(x)&&m!=null&&!f.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Qt(n,r,x,null,f,m)}for(v in f)if(m=f[v],g=u[v],f.hasOwnProperty(v)&&(m!=null||g!=null))switch(v){case"value":N=m;break;case"defaultValue":_=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==g&&Qt(n,r,v,m,f,g)}fg(n,N,_);return;case"option":for(var ot in u)N=u[ot],u.hasOwnProperty(ot)&&N!=null&&!f.hasOwnProperty(ot)&&(ot==="selected"?n.selected=!1:Qt(n,r,ot,null,f,N));for(k in f)N=f[k],_=u[k],f.hasOwnProperty(k)&&N!==_&&(N!=null||_!=null)&&(k==="selected"?n.selected=N&&typeof N!="function"&&typeof N!="symbol":Qt(n,r,k,N,f,_));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bt in u)N=u[bt],u.hasOwnProperty(bt)&&N!=null&&!f.hasOwnProperty(bt)&&Qt(n,r,bt,null,f,N);for(R in f)if(N=f[R],_=u[R],f.hasOwnProperty(R)&&N!==_&&(N!=null||_!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(137,r));break;default:Qt(n,r,R,N,f,_)}return;default:if(hf(r)){for(var Gt in u)N=u[Gt],u.hasOwnProperty(Gt)&&N!==void 0&&!f.hasOwnProperty(Gt)&&Fh(n,r,Gt,void 0,f,N);for(U in f)N=f[U],_=u[U],!f.hasOwnProperty(U)||N===_||N===void 0&&_===void 0||Fh(n,r,U,N,f,_);return}}for(var E in u)N=u[E],u.hasOwnProperty(E)&&N!=null&&!f.hasOwnProperty(E)&&Qt(n,r,E,null,f,N);for(Y in f)N=f[Y],_=u[Y],!f.hasOwnProperty(Y)||N===_||N==null&&_==null||Qt(n,r,Y,N,f,_)}function p1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yC(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var m=u[f],g=m.transferSize,v=m.initiatorType,x=m.duration;if(g&&x&&p1(v)){for(v=0,x=m.responseEnd,f+=1;f<u.length;f++){var k=u[f],R=k.startTime;if(R>x)break;var U=k.transferSize,Y=k.initiatorType;U&&p1(Y)&&(k=k.responseEnd,v+=U*(k<x?1:(x-R)/(k-R)))}if(--f,r+=8*(g+v)/(m.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Jh=null,td=null;function pu(n){return n.nodeType===9?n:n.ownerDocument}function g1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function y1(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function ed(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var id=null;function bC(){var n=window.event;return n&&n.type==="popstate"?n===id?!1:(id=n,!0):(id=null,!1)}var b1=typeof setTimeout=="function"?setTimeout:void 0,vC=typeof clearTimeout=="function"?clearTimeout:void 0,v1=typeof Promise=="function"?Promise:void 0,SC=typeof queueMicrotask=="function"?queueMicrotask:typeof v1<"u"?function(n){return v1.resolve(null).then(n).catch(xC)}:b1;function xC(n){setTimeout(function(){throw n})}function rl(n){return n==="head"}function S1(n,r){var u=r,f=0;do{var m=u.nextSibling;if(n.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"||u==="/&"){if(f===0){n.removeChild(m),Ws(r);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")la(n.ownerDocument.documentElement);else if(u==="head"){u=n.ownerDocument.head,la(u);for(var g=u.firstChild;g;){var v=g.nextSibling,x=g.nodeName;g[Or]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&g.rel.toLowerCase()==="stylesheet"||u.removeChild(g),g=v}}else u==="body"&&la(n.ownerDocument.body);u=m}while(u);Ws(r)}function x1(n,r){var u=n;n=0;do{var f=u.nextSibling;if(u.nodeType===1?r?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(r?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(n===0)break;n--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||n++;u=f}while(u)}function nd(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var u=r;switch(r=r.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":nd(u),of(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}n.removeChild(u)}}function OC(n,r,u,f){for(;n.nodeType===1;){var m=u;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(f){if(!n[Or])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=ki(n.nextSibling),n===null)break}return null}function wC(n,r,u){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!u||(n=ki(n.nextSibling),n===null))return null;return n}function O1(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=ki(n.nextSibling),n===null))return null;return n}function ld(n){return n.data==="$?"||n.data==="$~"}function sd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function CC(n,r){var u=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||u.readyState!=="loading")r();else{var f=function(){r(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),n._reactRetry=f}}function ki(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var rd=null;function w1(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"||u==="/&"){if(r===0)return ki(n.nextSibling);r--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||r++}n=n.nextSibling}return null}function C1(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(r===0)return n;r--}else u!=="/$"&&u!=="/&"||r++}n=n.previousSibling}return null}function k1(n,r,u){switch(r=pu(u),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function la(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);of(n)}var Ai=new Map,A1=new Set;function gu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var En=K.d;K.d={f:kC,r:AC,D:TC,C:MC,L:EC,m:DC,X:BC,S:RC,M:NC};function kC(){var n=En.f(),r=au();return n||r}function AC(n){var r=as(n);r!==null&&r.tag===5&&r.type==="form"?Y0(r):En.r(n)}var Vs=typeof document>"u"?null:document;function T1(n,r,u){var f=Vs;if(f&&typeof r=="string"&&r){var m=bi(r);m='link[rel="'+n+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),A1.has(m)||(A1.add(m),n={rel:n,crossOrigin:u,href:r},f.querySelector(m)===null&&(r=f.createElement("link"),Be(r,"link",n),xe(r),f.head.appendChild(r)))}}function TC(n){En.D(n),T1("dns-prefetch",n,null)}function MC(n,r){En.C(n,r),T1("preconnect",n,r)}function EC(n,r,u){En.L(n,r,u);var f=Vs;if(f&&n&&r){var m='link[rel="preload"][as="'+bi(r)+'"]';r==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+bi(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+bi(u.imageSizes)+'"]')):m+='[href="'+bi(n)+'"]';var g=m;switch(r){case"style":g=Us(n);break;case"script":g=js(n)}Ai.has(g)||(n=y({rel:"preload",href:r==="image"&&u&&u.imageSrcSet?void 0:n,as:r},u),Ai.set(g,n),f.querySelector(m)!==null||r==="style"&&f.querySelector(sa(g))||r==="script"&&f.querySelector(ra(g))||(r=f.createElement("link"),Be(r,"link",n),xe(r),f.head.appendChild(r)))}}function DC(n,r){En.m(n,r);var u=Vs;if(u&&n){var f=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+bi(f)+'"][href="'+bi(n)+'"]',g=m;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=js(n)}if(!Ai.has(g)&&(n=y({rel:"modulepreload",href:n},r),Ai.set(g,n),u.querySelector(m)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(ra(g)))return}f=u.createElement("link"),Be(f,"link",n),xe(f),u.head.appendChild(f)}}}function RC(n,r,u){En.S(n,r,u);var f=Vs;if(f&&n){var m=os(f).hoistableStyles,g=Us(n);r=r||"default";var v=m.get(g);if(!v){var x={loading:0,preload:null};if(v=f.querySelector(sa(g)))x.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":r},u),(u=Ai.get(g))&&ad(n,u);var k=v=f.createElement("link");xe(k),Be(k,"link",n),k._p=new Promise(function(R,U){k.onload=R,k.onerror=U}),k.addEventListener("load",function(){x.loading|=1}),k.addEventListener("error",function(){x.loading|=2}),x.loading|=4,yu(v,r,f)}v={type:"stylesheet",instance:v,count:1,state:x},m.set(g,v)}}}function BC(n,r){En.X(n,r);var u=Vs;if(u&&n){var f=os(u).hoistableScripts,m=js(n),g=f.get(m);g||(g=u.querySelector(ra(m)),g||(n=y({src:n,async:!0},r),(r=Ai.get(m))&&od(n,r),g=u.createElement("script"),xe(g),Be(g,"link",n),u.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},f.set(m,g))}}function NC(n,r){En.M(n,r);var u=Vs;if(u&&n){var f=os(u).hoistableScripts,m=js(n),g=f.get(m);g||(g=u.querySelector(ra(m)),g||(n=y({src:n,async:!0,type:"module"},r),(r=Ai.get(m))&&od(n,r),g=u.createElement("script"),xe(g),Be(g,"link",n),u.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},f.set(m,g))}}function M1(n,r,u,f){var m=(m=Ot.current)?gu(m):null;if(!m)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(r=Us(u.href),u=os(m).hoistableStyles,f=u.get(r),f||(f={type:"style",instance:null,count:0,state:null},u.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){n=Us(u.href);var g=os(m).hoistableStyles,v=g.get(n);if(v||(m=m.ownerDocument||m,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,v),(g=m.querySelector(sa(n)))&&!g._p&&(v.instance=g,v.state.loading=5),Ai.has(n)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ai.set(n,u),g||zC(m,n,u,v.state))),r&&f===null)throw Error(i(528,""));return v}if(r&&f!==null)throw Error(i(529,""));return null;case"script":return r=u.async,u=u.src,typeof u=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=js(u),u=os(m).hoistableScripts,f=u.get(r),f||(f={type:"script",instance:null,count:0,state:null},u.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Us(n){return'href="'+bi(n)+'"'}function sa(n){return'link[rel="stylesheet"]['+n+"]"}function E1(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function zC(n,r,u,f){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=n.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),Be(r,"link",u),xe(r),n.head.appendChild(r))}function js(n){return'[src="'+bi(n)+'"]'}function ra(n){return"script[async]"+n}function D1(n,r,u){if(r.count++,r.instance===null)switch(r.type){case"style":var f=n.querySelector('style[data-href~="'+bi(u.href)+'"]');if(f)return r.instance=f,xe(f),f;var m=y({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(n.ownerDocument||n).createElement("style"),xe(f),Be(f,"style",m),yu(f,u.precedence,n),r.instance=f;case"stylesheet":m=Us(u.href);var g=n.querySelector(sa(m));if(g)return r.state.loading|=4,r.instance=g,xe(g),g;f=E1(u),(m=Ai.get(m))&&ad(f,m),g=(n.ownerDocument||n).createElement("link"),xe(g);var v=g;return v._p=new Promise(function(x,k){v.onload=x,v.onerror=k}),Be(g,"link",f),r.state.loading|=4,yu(g,u.precedence,n),r.instance=g;case"script":return g=js(u.src),(m=n.querySelector(ra(g)))?(r.instance=m,xe(m),m):(f=u,(m=Ai.get(g))&&(f=y({},u),od(f,m)),n=n.ownerDocument||n,m=n.createElement("script"),xe(m),Be(m,"link",f),n.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,yu(f,u.precedence,n));return r.instance}function yu(n,r,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=f.length?f[f.length-1]:null,g=m,v=0;v<f.length;v++){var x=f[v];if(x.dataset.precedence===r)g=x;else if(g!==m)break}g?g.parentNode.insertBefore(n,g.nextSibling):(r=u.nodeType===9?u.head:u,r.insertBefore(n,r.firstChild))}function ad(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function od(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var bu=null;function R1(n,r,u){if(bu===null){var f=new Map,m=bu=new Map;m.set(u,f)}else m=bu,f=m.get(u),f||(f=new Map,m.set(u,f));if(f.has(n))return f;for(f.set(n,null),u=u.getElementsByTagName(n),m=0;m<u.length;m++){var g=u[m];if(!(g[Or]||g[Me]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var v=g.getAttribute(r)||"";v=n+v;var x=f.get(v);x?x.push(g):f.set(v,[g])}}return f}function B1(n,r,u){n=n.ownerDocument||n,n.head.insertBefore(u,r==="title"?n.querySelector("head > title"):null)}function LC(n,r,u){if(u===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function N1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function _C(n,r,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var m=Us(f.href),g=r.querySelector(sa(m));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=vu.bind(n),r.then(n,n)),u.state.loading|=4,u.instance=g,xe(g);return}g=r.ownerDocument||r,f=E1(f),(m=Ai.get(m))&&ad(f,m),g=g.createElement("link"),xe(g);var v=g;v._p=new Promise(function(x,k){v.onload=x,v.onerror=k}),Be(g,"link",f),u.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(u,r),(r=u.state.preload)&&(u.state.loading&3)===0&&(n.count++,u=vu.bind(n),r.addEventListener("load",u),r.addEventListener("error",u))}}var ud=0;function HC(n,r){return n.stylesheets&&n.count===0&&xu(n,n.stylesheets),0<n.count||0<n.imgCount?function(u){var f=setTimeout(function(){if(n.stylesheets&&xu(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+r);0<n.imgBytes&&ud===0&&(ud=62500*yC());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&xu(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>ud?50:800)+r);return n.unsuspend=u,function(){n.unsuspend=null,clearTimeout(f),clearTimeout(m)}}:null}function vu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xu(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Su=null;function xu(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Su=new Map,r.forEach(qC,n),Su=null,vu.call(n))}function qC(n,r){if(!(r.state.loading&4)){var u=Su.get(n);if(u)var f=u.get(null);else{u=new Map,Su.set(n,u);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var v=m[g];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(u.set(v.dataset.precedence,v),f=v)}f&&u.set(null,f)}m=r.instance,v=m.getAttribute("data-precedence"),g=u.get(v)||f,g===f&&u.set(null,m),u.set(v,m),this.count++,f=vu.bind(this),m.addEventListener("load",f),m.addEventListener("error",f),g?g.parentNode.insertBefore(m,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),r.state.loading|=4}}var aa={$$typeof:q,Provider:null,Consumer:null,_currentValue:tt,_currentValue2:tt,_threadCount:0};function VC(n,r,u,f,m,g,v,x,k){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lf(0),this.hiddenUpdates=lf(null),this.identifierPrefix=f,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function z1(n,r,u,f,m,g,v,x,k,R,U,Y){return n=new VC(n,r,u,v,k,R,U,Y,x),r=1,g===!0&&(r|=24),g=ai(3,null,null,r),n.current=g,g.stateNode=n,r=Wf(),r.refCount++,n.pooledCache=r,r.refCount++,g.memoizedState={element:f,isDehydrated:u,cache:r},Gf(g),n}function L1(n){return n?(n=bs,n):bs}function _1(n,r,u,f,m,g){m=L1(m),f.context===null?f.context=m:f.pendingContext=m,f=Kn(r),f.payload={element:u},g=g===void 0?null:g,g!==null&&(f.callback=g),u=In(n,f,r),u!==null&&(Ze(u,n,r),Vr(u,n,r))}function H1(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<r?u:r}}function cd(n,r){H1(n,r),(n=n.alternate)&&H1(n,r)}function q1(n){if(n.tag===13||n.tag===31){var r=zl(n,67108864);r!==null&&Ze(r,n,67108864),cd(n,67108864)}}function V1(n){if(n.tag===13||n.tag===31){var r=hi();r=sf(r);var u=zl(n,r);u!==null&&Ze(u,n,r),cd(n,r)}}var Ou=!0;function UC(n,r,u,f){var m=B.T;B.T=null;var g=K.p;try{K.p=2,fd(n,r,u,f)}finally{K.p=g,B.T=m}}function jC(n,r,u,f){var m=B.T;B.T=null;var g=K.p;try{K.p=8,fd(n,r,u,f)}finally{K.p=g,B.T=m}}function fd(n,r,u,f){if(Ou){var m=hd(f);if(m===null)Zh(n,r,f,wu,u),j1(n,f);else if(YC(m,n,r,u,f))f.stopPropagation();else if(j1(n,f),r&4&&-1<WC.indexOf(n)){for(;m!==null;){var g=as(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var v=El(g.pendingLanes);if(v!==0){var x=g;for(x.pendingLanes|=2,x.entangledLanes|=2;v;){var k=1<<31-si(v);x.entanglements[1]|=k,v&=~k}$i(g),(jt&6)===0&&(su=X()+500,ea(0))}}break;case 31:case 13:x=zl(g,2),x!==null&&Ze(x,g,2),au(),cd(g,2)}if(g=hd(f),g===null&&Zh(n,r,f,wu,u),g===m)break;m=g}m!==null&&f.stopPropagation()}else Zh(n,r,f,null,u)}}function hd(n){return n=mf(n),dd(n)}var wu=null;function dd(n){if(wu=null,n=rs(n),n!==null){var r=a(n);if(r===null)n=null;else{var u=r.tag;if(u===13){if(n=o(r),n!==null)return n;n=null}else if(u===31){if(n=c(r),n!==null)return n;n=null}else if(u===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return wu=n,null}function U1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case _t:return 2;case Ht:return 8;case Te:case nf:return 32;case Ip:return 268435456;default:return 32}default:return 32}}var md=!1,al=null,ol=null,ul=null,oa=new Map,ua=new Map,cl=[],WC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function j1(n,r){switch(n){case"focusin":case"focusout":al=null;break;case"dragenter":case"dragleave":ol=null;break;case"mouseover":case"mouseout":ul=null;break;case"pointerover":case"pointerout":oa.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(r.pointerId)}}function ca(n,r,u,f,m,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:u,eventSystemFlags:f,nativeEvent:g,targetContainers:[m]},r!==null&&(r=as(r),r!==null&&q1(r)),n):(n.eventSystemFlags|=f,r=n.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),n)}function YC(n,r,u,f,m){switch(r){case"focusin":return al=ca(al,n,r,u,f,m),!0;case"dragenter":return ol=ca(ol,n,r,u,f,m),!0;case"mouseover":return ul=ca(ul,n,r,u,f,m),!0;case"pointerover":var g=m.pointerId;return oa.set(g,ca(oa.get(g)||null,n,r,u,f,m)),!0;case"gotpointercapture":return g=m.pointerId,ua.set(g,ca(ua.get(g)||null,n,r,u,f,m)),!0}return!1}function W1(n){var r=rs(n.target);if(r!==null){var u=a(r);if(u!==null){if(r=u.tag,r===13){if(r=o(u),r!==null){n.blockedOn=r,ig(n.priority,function(){V1(u)});return}}else if(r===31){if(r=c(u),r!==null){n.blockedOn=r,ig(n.priority,function(){V1(u)});return}}else if(r===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Cu(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var u=hd(n.nativeEvent);if(u===null){u=n.nativeEvent;var f=new u.constructor(u.type,u);df=f,u.target.dispatchEvent(f),df=null}else return r=as(u),r!==null&&q1(r),n.blockedOn=u,!1;r.shift()}return!0}function Y1(n,r,u){Cu(n)&&u.delete(r)}function XC(){md=!1,al!==null&&Cu(al)&&(al=null),ol!==null&&Cu(ol)&&(ol=null),ul!==null&&Cu(ul)&&(ul=null),oa.forEach(Y1),ua.forEach(Y1)}function ku(n,r){n.blockedOn===r&&(n.blockedOn=null,md||(md=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,XC)))}var Au=null;function X1(n){Au!==n&&(Au=n,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Au===n&&(Au=null);for(var r=0;r<n.length;r+=3){var u=n[r],f=n[r+1],m=n[r+2];if(typeof f!="function"){if(dd(f||u)===null)continue;break}var g=as(u);g!==null&&(n.splice(r,3),r-=3,hh(g,{pending:!0,data:m,method:u.method,action:f},f,m))}}))}function Ws(n){function r(k){return ku(k,n)}al!==null&&ku(al,n),ol!==null&&ku(ol,n),ul!==null&&ku(ul,n),oa.forEach(r),ua.forEach(r);for(var u=0;u<cl.length;u++){var f=cl[u];f.blockedOn===n&&(f.blockedOn=null)}for(;0<cl.length&&(u=cl[0],u.blockedOn===null);)W1(u),u.blockedOn===null&&cl.shift();if(u=(n.ownerDocument||n).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var m=u[f],g=u[f+1],v=m[Qe]||null;if(typeof g=="function")v||X1(u);else if(v){var x=null;if(g&&g.hasAttribute("formAction")){if(m=g,v=g[Qe]||null)x=v.formAction;else if(dd(m)!==null)continue}else x=v.action;typeof x=="function"?u[f+1]=x:(u.splice(f,3),f-=3),X1(u)}}}function Q1(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(v){return m=v})},focusReset:"manual",scroll:"manual"})}function r(){m!==null&&(m(),m=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),m!==null&&(m(),m=null)}}}function pd(n){this._internalRoot=n}Tu.prototype.render=pd.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var u=r.current,f=hi();_1(u,f,n,r,null,null)},Tu.prototype.unmount=pd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;_1(n.current,2,null,n,null,null),au(),r[ss]=null}};function Tu(n){this._internalRoot=n}Tu.prototype.unstable_scheduleHydration=function(n){if(n){var r=eg();n={blockedOn:null,target:n,priority:r};for(var u=0;u<cl.length&&r!==0&&r<cl[u].priority;u++);cl.splice(u,0,n),u===0&&W1(n)}};var G1=t.version;if(G1!=="19.2.3")throw Error(i(527,G1,"19.2.3"));K.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=d(r),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var QC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mu.isDisabled&&Mu.supportsFiber)try{vr=Mu.inject(QC),li=Mu}catch{}}return ha.createRoot=function(n,r){if(!s(n))throw Error(i(299));var u=!1,f="",m=J0,g=ty,v=ey;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=z1(n,1,!1,null,null,u,f,null,m,g,v,Q1),n[ss]=r.current,Ih(n),new pd(r)},ha.hydrateRoot=function(n,r,u){if(!s(n))throw Error(i(299));var f=!1,m="",g=J0,v=ty,x=ey,k=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(g=u.onUncaughtError),u.onCaughtError!==void 0&&(v=u.onCaughtError),u.onRecoverableError!==void 0&&(x=u.onRecoverableError),u.formState!==void 0&&(k=u.formState)),r=z1(n,1,!0,r,u??null,f,m,k,g,v,x,Q1),r.context=L1(null),u=r.current,f=hi(),f=sf(f),m=Kn(f),m.callback=null,In(u,m,f),u=f,r.current.lanes=u,xr(r,u),$i(r),n[ss]=r.current,Ih(n),new Tu(r)},ha.version="19.2.3",ha}var ib;function ik(){if(ib)return bd.exports;ib=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),bd.exports=ek(),bd.exports}var nk=ik();const lk="modulepreload",sk=function(l){return"/markup/"+l},nb={},we=function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){let h=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=h(e.map(d=>{if(d=sk(d),d in nb)return;nb[d]=!0;const p=d.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${y}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":lk,p||(b.as="script"),b.crossOrigin="",b.href=d,c&&b.setAttribute("nonce",c),document.head.appendChild(b),p)return new Promise((S,O)=>{b.addEventListener("load",S),b.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})};let rk={data:""},ak=l=>{if(typeof window=="object"){let t=(l?l.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(l||document.head).appendChild(t),t.firstChild}return l||rk},ok=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,uk=/\/\*[^]*?\*\/|  +/g,lb=/\n+/g,ml=(l,t)=>{let e="",i="",s="";for(let a in l){let o=l[a];a[0]=="@"?a[1]=="i"?e=a+" "+o+";":i+=a[1]=="f"?ml(o,a):a+"{"+ml(o,a[1]=="k"?"":t)+"}":typeof o=="object"?i+=ml(o,t?t.replace(/([^,])+/g,c=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,c):c?c+" "+h:h)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=ml.p?ml.p(a,o):a+":"+o+";")}return e+(t&&s?t+"{"+s+"}":s)+i},Dn={},SS=l=>{if(typeof l=="object"){let t="";for(let e in l)t+=e+SS(l[e]);return t}return l},ck=(l,t,e,i,s)=>{let a=SS(l),o=Dn[a]||(Dn[a]=(h=>{let d=0,p=11;for(;d<h.length;)p=101*p+h.charCodeAt(d++)>>>0;return"go"+p})(a));if(!Dn[o]){let h=a!==l?l:(d=>{let p,y,b=[{}];for(;p=ok.exec(d.replace(uk,""));)p[4]?b.shift():p[3]?(y=p[3].replace(lb," ").trim(),b.unshift(b[0][y]=b[0][y]||{})):b[0][p[1]]=p[2].replace(lb," ").trim();return b[0]})(l);Dn[o]=ml(s?{["@keyframes "+o]:h}:h,e?"":"."+o)}let c=e&&Dn.g?Dn.g:null;return e&&(Dn.g=Dn[o]),((h,d,p,y)=>{y?d.data=d.data.replace(y,h):d.data.indexOf(h)===-1&&(d.data=p?h+d.data:d.data+h)})(Dn[o],t,i,c),o},fk=(l,t,e)=>l.reduce((i,s,a)=>{let o=t[a];if(o&&o.call){let c=o(e),h=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=h?"."+h:c&&typeof c=="object"?c.props?"":ml(c,""):c===!1?"":c}return i+s+(o??"")},"");function qc(l){let t=this||{},e=l.call?l(t.p):l;return ck(e.unshift?e.raw?fk(e,[].slice.call(arguments,1),t.p):e.reduce((i,s)=>Object.assign(i,s&&s.call?s(t.p):s),{}):e,ak(t.target),t.g,t.o,t.k)}let xS,lm,sm;qc.bind({g:1});let _n=qc.bind({k:1});function hk(l,t,e,i){ml.p=t,xS=l,lm=e,sm=i}function kl(l,t){let e=this||{};return function(){let i=arguments;function s(a,o){let c=Object.assign({},a),h=c.className||s.className;e.p=Object.assign({theme:lm&&lm()},c),e.o=/ *go\d+/.test(h),c.className=qc.apply(e,i)+(h?" "+h:"");let d=l;return l[0]&&(d=c.as||l,delete c.as),sm&&d[0]&&sm(c),xS(d,c)}return s}}var dk=l=>typeof l=="function",fc=(l,t)=>dk(l)?l(t):l,mk=(()=>{let l=0;return()=>(++l).toString()})(),OS=(()=>{let l;return()=>{if(l===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");l=!t||t.matches}return l}})(),pk=20,rp="default",wS=(l,t)=>{let{toastLimit:e}=l.settings;switch(t.type){case 0:return{...l,toasts:[t.toast,...l.toasts].slice(0,e)};case 1:return{...l,toasts:l.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:i}=t;return wS(l,{type:l.toasts.find(o=>o.id===i.id)?1:0,toast:i});case 3:let{toastId:s}=t;return{...l,toasts:l.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...l,toasts:[]}:{...l,toasts:l.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...l,pausedAt:t.time};case 6:let a=t.time-(l.pausedAt||0);return{...l,pausedAt:void 0,toasts:l.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},Ju=[],CS={toasts:[],pausedAt:void 0,settings:{toastLimit:pk}},nn={},kS=(l,t=rp)=>{nn[t]=wS(nn[t]||CS,l),Ju.forEach(([e,i])=>{e===t&&i(nn[t])})},AS=l=>Object.keys(nn).forEach(t=>kS(l,t)),gk=l=>Object.keys(nn).find(t=>nn[t].toasts.some(e=>e.id===l)),Vc=(l=rp)=>t=>{kS(t,l)},yk={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},bk=(l={},t=rp)=>{let[e,i]=$.useState(nn[t]||CS),s=$.useRef(nn[t]);$.useEffect(()=>(s.current!==nn[t]&&i(nn[t]),Ju.push([t,i]),()=>{let o=Ju.findIndex(([c])=>c===t);o>-1&&Ju.splice(o,1)}),[t]);let a=e.toasts.map(o=>{var c,h,d;return{...l,...l[o.type],...o,removeDelay:o.removeDelay||((c=l[o.type])==null?void 0:c.removeDelay)||l?.removeDelay,duration:o.duration||((h=l[o.type])==null?void 0:h.duration)||l?.duration||yk[o.type],style:{...l.style,...(d=l[o.type])==null?void 0:d.style,...o.style}}});return{...e,toasts:a}},vk=(l,t="blank",e)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:l,pauseDuration:0,...e,id:e?.id||mk()}),Fa=l=>(t,e)=>{let i=vk(t,l,e);return Vc(i.toasterId||gk(i.id))({type:2,toast:i}),i.id},Ct=(l,t)=>Fa("blank")(l,t);Ct.error=Fa("error");Ct.success=Fa("success");Ct.loading=Fa("loading");Ct.custom=Fa("custom");Ct.dismiss=(l,t)=>{let e={type:3,toastId:l};t?Vc(t)(e):AS(e)};Ct.dismissAll=l=>Ct.dismiss(void 0,l);Ct.remove=(l,t)=>{let e={type:4,toastId:l};t?Vc(t)(e):AS(e)};Ct.removeAll=l=>Ct.remove(void 0,l);Ct.promise=(l,t,e)=>{let i=Ct.loading(t.loading,{...e,...e?.loading});return typeof l=="function"&&(l=l()),l.then(s=>{let a=t.success?fc(t.success,s):void 0;return a?Ct.success(a,{id:i,...e,...e?.success}):Ct.dismiss(i),s}).catch(s=>{let a=t.error?fc(t.error,s):void 0;a?Ct.error(a,{id:i,...e,...e?.error}):Ct.dismiss(i)}),l};var Sk=1e3,xk=(l,t="default")=>{let{toasts:e,pausedAt:i}=bk(l,t),s=$.useRef(new Map).current,a=$.useCallback((y,b=Sk)=>{if(s.has(y))return;let S=setTimeout(()=>{s.delete(y),o({type:4,toastId:y})},b);s.set(y,S)},[]);$.useEffect(()=>{if(i)return;let y=Date.now(),b=e.map(S=>{if(S.duration===1/0)return;let O=(S.duration||0)+S.pauseDuration-(y-S.createdAt);if(O<0){S.visible&&Ct.dismiss(S.id);return}return setTimeout(()=>Ct.dismiss(S.id,t),O)});return()=>{b.forEach(S=>S&&clearTimeout(S))}},[e,i,t]);let o=$.useCallback(Vc(t),[t]),c=$.useCallback(()=>{o({type:5,time:Date.now()})},[o]),h=$.useCallback((y,b)=>{o({type:1,toast:{id:y,height:b}})},[o]),d=$.useCallback(()=>{i&&o({type:6,time:Date.now()})},[i,o]),p=$.useCallback((y,b)=>{let{reverseOrder:S=!1,gutter:O=8,defaultPosition:w}=b||{},C=e.filter(q=>(q.position||w)===(y.position||w)&&q.height),M=C.findIndex(q=>q.id===y.id),H=C.filter((q,P)=>P<M&&q.visible).length;return C.filter(q=>q.visible).slice(...S?[H+1]:[0,H]).reduce((q,P)=>q+(P.height||0)+O,0)},[e]);return $.useEffect(()=>{e.forEach(y=>{if(y.dismissed)a(y.id,y.removeDelay);else{let b=s.get(y.id);b&&(clearTimeout(b),s.delete(y.id))}})},[e,a]),{toasts:e,handlers:{updateHeight:h,startPause:c,endPause:d,calculateOffset:p}}},Ok=_n`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,wk=_n`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ck=_n`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,kk=kl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${l=>l.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ok} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${wk} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${l=>l.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Ck} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ak=_n`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Tk=kl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${l=>l.secondary||"#e0e0e0"};
  border-right-color: ${l=>l.primary||"#616161"};
  animation: ${Ak} 1s linear infinite;
`,Mk=_n`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ek=_n`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Dk=kl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${l=>l.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Mk} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ek} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${l=>l.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Rk=kl("div")`
  position: absolute;
`,Bk=kl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Nk=_n`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zk=kl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Nk} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Lk=({toast:l})=>{let{icon:t,type:e,iconTheme:i}=l;return t!==void 0?typeof t=="string"?$.createElement(zk,null,t):t:e==="blank"?null:$.createElement(Bk,null,$.createElement(Tk,{...i}),e!=="loading"&&$.createElement(Rk,null,e==="error"?$.createElement(kk,{...i}):$.createElement(Dk,{...i})))},_k=l=>`
0% {transform: translate3d(0,${l*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Hk=l=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${l*-150}%,-1px) scale(.6); opacity:0;}
`,qk="0%{opacity:0;} 100%{opacity:1;}",Vk="0%{opacity:1;} 100%{opacity:0;}",Uk=kl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,jk=kl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Wk=(l,t)=>{let e=l.includes("top")?1:-1,[i,s]=OS()?[qk,Vk]:[_k(e),Hk(e)];return{animation:t?`${_n(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${_n(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Yk=$.memo(({toast:l,position:t,style:e,children:i})=>{let s=l.height?Wk(l.position||t||"top-center",l.visible):{opacity:0},a=$.createElement(Lk,{toast:l}),o=$.createElement(jk,{...l.ariaProps},fc(l.message,l));return $.createElement(Uk,{className:l.className,style:{...s,...e,...l.style}},typeof i=="function"?i({icon:a,message:o}):$.createElement($.Fragment,null,a,o))});hk($.createElement);var Xk=({id:l,className:t,style:e,onHeightUpdate:i,children:s})=>{let a=$.useCallback(o=>{if(o){let c=()=>{let h=o.getBoundingClientRect().height;i(l,h)};c(),new MutationObserver(c).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[l,i]);return $.createElement("div",{ref:a,className:t,style:e},s)},Qk=(l,t)=>{let e=l.includes("top"),i=e?{top:0}:{bottom:0},s=l.includes("center")?{justifyContent:"center"}:l.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:OS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(e?1:-1)}px)`,...i,...s}},Gk=qc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Eu=16,Pk=({reverseOrder:l,position:t="top-center",toastOptions:e,gutter:i,children:s,toasterId:a,containerStyle:o,containerClassName:c})=>{let{toasts:h,handlers:d}=xk(e,a);return $.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:Eu,left:Eu,right:Eu,bottom:Eu,pointerEvents:"none",...o},className:c,onMouseEnter:d.startPause,onMouseLeave:d.endPause},h.map(p=>{let y=p.position||t,b=d.calculateOffset(p,{reverseOrder:l,gutter:i,defaultPosition:t}),S=Qk(y,b);return $.createElement(Xk,{id:p.id,key:p.id,onHeightUpdate:d.updateHeight,className:p.visible?Gk:"",style:S},p.type==="custom"?fc(p.message,p):s?s(p):$.createElement(Yk,{toast:p,position:y}))}))};const $k=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Kk=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase()),sb=l=>{const t=Kk(l);return t.charAt(0).toUpperCase()+t.slice(1)},TS=(...l)=>l.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim(),Ik=l=>{for(const t in l)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Zk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Fk=$.forwardRef(({color:l="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:o,...c},h)=>$.createElement("svg",{ref:h,...Zk,width:t,height:t,stroke:l,strokeWidth:i?Number(e)*24/Number(t):e,className:TS("lucide",s),...!a&&!Ik(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,p])=>$.createElement(d,p)),...Array.isArray(a)?a:[a]]));const Ni=(l,t)=>{const e=$.forwardRef(({className:i,...s},a)=>$.createElement(Fk,{ref:a,iconNode:t,className:TS(`lucide-${$k(sb(l))}`,`lucide-${l}`,i),...s}));return e.displayName=sb(l),e};const Jk=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],tA=Ni("code-xml",Jk);const eA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],iA=Ni("copy",eA);const nA=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],lA=Ni("download",nA);const sA=[["path",{d:"M21 5H11",key:"us1j55"}],["path",{d:"M21 12H11",key:"wd7e0v"}],["path",{d:"M21 19H11",key:"saa85w"}],["path",{d:"m3 8 4 4-4 4",key:"1a3j6y"}]],rA=Ni("list-indent-increase",sA);const aA=[["path",{d:"M5 12h14",key:"1ays0h"}]],oA=Ni("minus",aA);const uA=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],cA=Ni("moon",uA);const fA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hA=Ni("search",fA);const dA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mA=Ni("settings",dA);const pA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],rb=Ni("sparkles",pA);const gA=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],yA=Ni("sun",gA);const bA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vA=Ni("trash-2",bA);const SA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],xA=Ni("upload",SA),OA=[{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"html",label:"HTML"},{value:"css",label:"CSS"},{value:"yaml",label:"YAML"}],wA=({language:l,onChange:t})=>F.jsxs("div",{className:"flex items-center gap-2",children:[F.jsx(tA,{className:"w-5 h-5 text-slate-400"}),F.jsx("select",{value:l,onChange:e=>t(e.target.value),className:"bg-slate-800 text-slate-200 text-sm px-3 py-1.5 rounded-lg border border-slate-700 hover:border-slate-600 focus:outline-none focus:border-indigo-500 cursor-pointer",title:"Select Language",children:OA.map(e=>F.jsx("option",{value:e.value,children:e.label},e.value))})]}),CA=({indent:l,onChange:t})=>F.jsxs("div",{className:"flex items-center gap-2",children:[F.jsx(rA,{className:"w-4 h-4 text-slate-400"}),F.jsxs("select",{value:l,onChange:e=>t(e.target.value==="tab"?"tab":Number(e.target.value)),className:"bg-slate-800 text-slate-200 text-sm px-3 py-1.5 rounded-lg border border-slate-700 hover:border-slate-600 focus:outline-none focus:border-indigo-500 cursor-pointer",title:"Indentation",children:[F.jsx("option",{value:2,children:"2 Spaces"}),F.jsx("option",{value:4,children:"4 Spaces"}),F.jsx("option",{value:"tab",children:"Tab"})]})]}),kA=({language:l,indent:t,isDarkMode:e,onLanguageChange:i,onIndentChange:s,onFormat:a,onMinify:o,onClear:c,onToggleSearch:h,onCopy:d,onDownload:p,onFileUpload:y,onToggleTheme:b,onOpenSettings:S,isSearchVisible:O,hasContent:w})=>{const C=$.useRef(null),M=H=>{const q=H.target.files?.[0];q&&y(q),C.current&&(C.current.value="")};return F.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-slate-800 transition-colors duration-200",children:[F.jsxs("div",{className:"flex items-center gap-3",children:[F.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:F.jsx(rb,{className:"w-6 h-6 text-white"})}),F.jsxs("div",{children:[F.jsx("h1",{className:"text-xl font-bold text-white dark:text-white text-gray-900",children:"Markup Beautifier"}),F.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-400 text-gray-600",children:"Format JSON & XML with ease"})]})]}),F.jsxs("div",{className:"flex items-center gap-4",children:[F.jsx(wA,{language:l,onChange:i}),F.jsx(CA,{indent:t,onChange:s}),F.jsx("div",{className:"h-6 w-px bg-slate-700"}),F.jsx("input",{ref:C,type:"file",accept:".json,.xml,.txt",onChange:M,className:"hidden"}),F.jsx("button",{onClick:()=>C.current?.click(),className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-800 rounded-lg transition-all",title:"Upload File",children:F.jsx(xA,{className:"w-5 h-5"})}),F.jsx("button",{onClick:d,disabled:!w,className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-800 rounded-lg transition-all disabled:opacity-30 disabled:cursor-not-allowed",title:"Copy to Clipboard",children:F.jsx(iA,{className:"w-5 h-5"})}),F.jsx("button",{onClick:p,disabled:!w,className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-800 rounded-lg transition-all disabled:opacity-30 disabled:cursor-not-allowed",title:"Download File",children:F.jsx(lA,{className:"w-5 h-5"})}),F.jsx("button",{onClick:b,className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-800 rounded-lg transition-all",title:"Toggle Theme",children:e?F.jsx(yA,{className:"w-5 h-5"}):F.jsx(cA,{className:"w-5 h-5"})}),F.jsx("button",{onClick:S,className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-800 rounded-lg transition-all",title:"Settings",children:F.jsx(mA,{className:"w-5 h-5"})}),F.jsx("button",{onClick:h,className:`p-2 rounded-lg transition-all ${O?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200 hover:bg-slate-800"}`,title:"Toggle Search (Ctrl+F)",children:F.jsx(hA,{className:"w-5 h-5"})}),F.jsxs("button",{onClick:a,disabled:!w,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all font-medium disabled:opacity-30 disabled:cursor-not-allowed",title:"Format (Ctrl+B)",children:[F.jsx(rb,{className:"w-4 h-4"}),"Beautify"]}),F.jsxs("button",{onClick:o,disabled:!w,className:"flex items-center gap-2 px-3 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-all font-medium disabled:opacity-30 disabled:cursor-not-allowed",title:"Minify",children:[F.jsx(oA,{className:"w-4 h-4"}),"Minify"]}),F.jsx("button",{onClick:c,className:"p-2 text-slate-400 hover:text-red-400 hover:bg-slate-800 rounded-lg transition-all",title:"Clear",children:F.jsx(vA,{className:"w-5 h-5"})})]})]})};function rm(){return rm=Object.assign?Object.assign.bind():function(l){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(l[i]=e[i])}return l},rm.apply(null,arguments)}function AA(l,t){if(l==null)return{};var e={};for(var i in l)if({}.hasOwnProperty.call(l,i)){if(t.indexOf(i)!==-1)continue;e[i]=l[i]}return e}let am=[],MS=[];(()=>{let l="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=0,e=0;t<l.length;t++)(t%2?MS:am).push(e=e+l[t])})();function TA(l){if(l<768)return!1;for(let t=0,e=am.length;;){let i=t+e>>1;if(l<am[i])e=i;else if(l>=MS[i])t=i+1;else return!0;if(t==e)return!1}}function ab(l){return l>=127462&&l<=127487}const ob=8205;function MA(l,t,e=!0,i=!0){return(e?ES:EA)(l,t,i)}function ES(l,t,e){if(t==l.length)return t;t&&DS(l.charCodeAt(t))&&RS(l.charCodeAt(t-1))&&t--;let i=Od(l,t);for(t+=ub(i);t<l.length;){let s=Od(l,t);if(i==ob||s==ob||e&&TA(s))t+=ub(s),i=s;else if(ab(s)){let a=0,o=t-2;for(;o>=0&&ab(Od(l,o));)a++,o-=2;if(a%2==0)break;t+=2}else break}return t}function EA(l,t,e){for(;t>0;){let i=ES(l,t-2,e);if(i<t)return i;t--}return 0}function Od(l,t){let e=l.charCodeAt(t);if(!RS(e)||t+1==l.length)return e;let i=l.charCodeAt(t+1);return DS(i)?(e-55296<<10)+(i-56320)+65536:e}function DS(l){return l>=56320&&l<57344}function RS(l){return l>=55296&&l<56320}function ub(l){return l<65536?1:2}class qt{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,i){[t,e]=nr(this,t,e);let s=[];return this.decompose(0,t,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(e,this.length,s,1),Ji.from(s,this.length-(e-t)+i.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=nr(this,t,e);let i=[];return this.decompose(t,e,i,0),Ji.from(i,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),i=this.length-this.scanIdentical(t,-1),s=new wa(this),a=new wa(t);for(let o=e,c=e;;){if(s.next(o),a.next(o),o=0,s.lineBreak!=a.lineBreak||s.done!=a.done||s.value!=a.value)return!1;if(c+=s.value.length,s.done||c>=i)return!0}}iter(t=1){return new wa(this,t)}iterRange(t,e=this.length){return new BS(this,t,e)}iterLines(t,e){let i;if(t==null)i=this.iter();else{e==null&&(e=this.lines+1);let s=this.line(t).from;i=this.iterRange(s,Math.max(s,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new NS(i)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?qt.empty:t.length<=32?new ue(t):Ji.from(ue.split(t,[]))}}class ue extends qt{constructor(t,e=DA(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,i,s){for(let a=0;;a++){let o=this.text[a],c=s+o.length;if((e?i:c)>=t)return new RA(s,c,i,o);s=c+1,i++}}decompose(t,e,i,s){let a=t<=0&&e>=this.length?this:new ue(cb(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(s&1){let o=i.pop(),c=tc(a.text,o.text.slice(),0,a.length);if(c.length<=32)i.push(new ue(c,o.length+a.length));else{let h=c.length>>1;i.push(new ue(c.slice(0,h)),new ue(c.slice(h)))}}else i.push(a)}replace(t,e,i){if(!(i instanceof ue))return super.replace(t,e,i);[t,e]=nr(this,t,e);let s=tc(this.text,tc(i.text,cb(this.text,0,t)),e),a=this.length+i.length-(e-t);return s.length<=32?new ue(s,a):Ji.from(ue.split(s,[]),a)}sliceString(t,e=this.length,i=`
`){[t,e]=nr(this,t,e);let s="";for(let a=0,o=0;a<=e&&o<this.text.length;o++){let c=this.text[o],h=a+c.length;a>t&&o&&(s+=i),t<h&&e>a&&(s+=c.slice(Math.max(0,t-a),e-a)),a=h+1}return s}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let i=[],s=-1;for(let a of t)i.push(a),s+=a.length+1,i.length==32&&(e.push(new ue(i,s)),i=[],s=-1);return s>-1&&e.push(new ue(i,s)),e}}class Ji extends qt{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let i of t)this.lines+=i.lines}lineInner(t,e,i,s){for(let a=0;;a++){let o=this.children[a],c=s+o.length,h=i+o.lines-1;if((e?h:c)>=t)return o.lineInner(t,e,i,s);s=c+1,i=h+1}}decompose(t,e,i,s){for(let a=0,o=0;o<=e&&a<this.children.length;a++){let c=this.children[a],h=o+c.length;if(t<=h&&e>=o){let d=s&((o<=t?1:0)|(h>=e?2:0));o>=t&&h<=e&&!d?i.push(c):c.decompose(t-o,e-o,i,d)}o=h+1}}replace(t,e,i){if([t,e]=nr(this,t,e),i.lines<this.lines)for(let s=0,a=0;s<this.children.length;s++){let o=this.children[s],c=a+o.length;if(t>=a&&e<=c){let h=o.replace(t-a,e-a,i),d=this.lines-o.lines+h.lines;if(h.lines<d>>4&&h.lines>d>>6){let p=this.children.slice();return p[s]=h,new Ji(p,this.length-(e-t)+i.length)}return super.replace(a,c,h)}a=c+1}return super.replace(t,e,i)}sliceString(t,e=this.length,i=`
`){[t,e]=nr(this,t,e);let s="";for(let a=0,o=0;a<this.children.length&&o<=e;a++){let c=this.children[a],h=o+c.length;o>t&&a&&(s+=i),t<h&&e>o&&(s+=c.sliceString(t-o,e-o,i)),o=h+1}return s}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof Ji))return 0;let i=0,[s,a,o,c]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;s+=e,a+=e){if(s==o||a==c)return i;let h=this.children[s],d=t.children[a];if(h!=d)return i+h.scanIdentical(d,e);i+=h.length+1}}static from(t,e=t.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let S of t)i+=S.lines;if(i<32){let S=[];for(let O of t)O.flatten(S);return new ue(S,e)}let s=Math.max(32,i>>5),a=s<<1,o=s>>1,c=[],h=0,d=-1,p=[];function y(S){let O;if(S.lines>a&&S instanceof Ji)for(let w of S.children)y(w);else S.lines>o&&(h>o||!h)?(b(),c.push(S)):S instanceof ue&&h&&(O=p[p.length-1])instanceof ue&&S.lines+O.lines<=32?(h+=S.lines,d+=S.length+1,p[p.length-1]=new ue(O.text.concat(S.text),O.length+1+S.length)):(h+S.lines>s&&b(),h+=S.lines,d+=S.length+1,p.push(S))}function b(){h!=0&&(c.push(p.length==1?p[0]:Ji.from(p,d)),d=-1,h=p.length=0)}for(let S of t)y(S);return b(),c.length==1?c[0]:new Ji(c,e)}}qt.empty=new ue([""],0);function DA(l){let t=-1;for(let e of l)t+=e.length+1;return t}function tc(l,t,e=0,i=1e9){for(let s=0,a=0,o=!0;a<l.length&&s<=i;a++){let c=l[a],h=s+c.length;h>=e&&(h>i&&(c=c.slice(0,i-s)),s<e&&(c=c.slice(e-s)),o?(t[t.length-1]+=c,o=!1):t.push(c)),s=h+1}return t}function cb(l,t,e){return tc(l,[""],t,e)}class wa{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof ue?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],a=this.offsets[i],o=a>>1,c=s instanceof ue?s.text.length:s.children.length;if(o==(e>0?c:0)){if(i==0)return this.done=!0,this.value="",this;e>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(e>0?0:1)){if(this.offsets[i]+=e,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(s instanceof ue){let h=s.text[o+(e<0?-1:0)];if(this.offsets[i]+=e,h.length>Math.max(0,t))return this.value=t==0?h:e>0?h.slice(t):h.slice(0,h.length-t),this;t-=h.length}else{let h=s.children[o+(e<0?-1:0)];t>h.length?(t-=h.length,this.offsets[i]+=e):(e<0&&this.offsets[i]--,this.nodes.push(h),this.offsets.push(e>0?1:(h instanceof ue?h.text.length:h.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class BS{constructor(t,e,i){this.value="",this.done=!1,this.cursor=new wa(t,e>i?-1:1),this.pos=e>i?t.length:0,this.from=Math.min(e,i),this.to=Math.max(e,i)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let i=e<0?this.pos-this.from:this.to-this.pos;t>i&&(t=i),i-=t;let{value:s}=this.cursor.next(t);return this.pos+=(s.length+t)*e,this.value=s.length<=i?s:e<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class NS{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:i,value:s}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(qt.prototype[Symbol.iterator]=function(){return this.iter()},wa.prototype[Symbol.iterator]=BS.prototype[Symbol.iterator]=NS.prototype[Symbol.iterator]=function(){return this});class RA{constructor(t,e,i,s){this.from=t,this.to=e,this.number=i,this.text=s}get length(){return this.to-this.from}}function nr(l,t,e){return t=Math.max(0,Math.min(l.length,t)),[t,Math.max(t,Math.min(l.length,e))]}function ve(l,t,e=!0,i=!0){return MA(l,t,e,i)}function BA(l){return l>=56320&&l<57344}function NA(l){return l>=55296&&l<56320}function Je(l,t){let e=l.charCodeAt(t);if(!NA(e)||t+1==l.length)return e;let i=l.charCodeAt(t+1);return BA(i)?(e-55296<<10)+(i-56320)+65536:e}function ap(l){return l<=65535?String.fromCharCode(l):(l-=65536,String.fromCharCode((l>>10)+55296,(l&1023)+56320))}function tn(l){return l<65536?1:2}const om=/\r\n?|\n/;var Le=(function(l){return l[l.Simple=0]="Simple",l[l.TrackDel=1]="TrackDel",l[l.TrackBefore=2]="TrackBefore",l[l.TrackAfter=3]="TrackAfter",l})(Le||(Le={}));class an{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e+1];t+=i<0?this.sections[e]:i}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let e=0,i=0,s=0;e<this.sections.length;){let a=this.sections[e++],o=this.sections[e++];o<0?(t(i,s,a),s+=a):s+=o,i+=a}}iterChangedRanges(t,e=!1){um(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let i=this.sections[e++],s=this.sections[e++];s<0?t.push(i,s):t.push(s,i)}return new an(t)}composeDesc(t){return this.empty?t:t.empty?this:zS(this,t)}mapDesc(t,e=!1){return t.empty?this:cm(this,t,e)}mapPos(t,e=-1,i=Le.Simple){let s=0,a=0;for(let o=0;o<this.sections.length;){let c=this.sections[o++],h=this.sections[o++],d=s+c;if(h<0){if(d>t)return a+(t-s);a+=c}else{if(i!=Le.Simple&&d>=t&&(i==Le.TrackDel&&s<t&&d>t||i==Le.TrackBefore&&s<t||i==Le.TrackAfter&&d>t))return null;if(d>t||d==t&&e<0&&!c)return t==s||e<0?a:a+h;a+=h}s=d}if(t>s)throw new RangeError(`Position ${t} is out of range for changeset of length ${s}`);return a}touchesRange(t,e=t){for(let i=0,s=0;i<this.sections.length&&s<=e;){let a=this.sections[i++],o=this.sections[i++],c=s+a;if(o>=0&&s<=e&&c>=t)return s<t&&c>e?"cover":!0;s=c}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let i=this.sections[e++],s=this.sections[e++];t+=(t?" ":"")+i+(s>=0?":"+s:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(e=>typeof e!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new an(t)}static create(t){return new an(t)}}class be extends an{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return um(this,(e,i,s,a,o)=>t=t.replace(s,s+(i-e),o),!1),t}mapDesc(t,e=!1){return cm(this,t,e,!0)}invert(t){let e=this.sections.slice(),i=[];for(let s=0,a=0;s<e.length;s+=2){let o=e[s],c=e[s+1];if(c>=0){e[s]=c,e[s+1]=o;let h=s>>1;for(;i.length<h;)i.push(qt.empty);i.push(o?t.slice(a,a+o):qt.empty)}a+=o}return new be(e,i)}compose(t){return this.empty?t:t.empty?this:zS(this,t,!0)}map(t,e=!1){return t.empty?this:cm(this,t,e,!0)}iterChanges(t,e=!1){um(this,t,e)}get desc(){return an.create(this.sections)}filter(t){let e=[],i=[],s=[],a=new Da(this);t:for(let o=0,c=0;;){let h=o==t.length?1e9:t[o++];for(;c<h||c==h&&a.len==0;){if(a.done)break t;let p=Math.min(a.len,h-c);qe(s,p,-1);let y=a.ins==-1?-1:a.off==0?a.ins:0;qe(e,p,y),y>0&&gl(i,e,a.text),a.forward(p),c+=p}let d=t[o++];for(;c<d;){if(a.done)break t;let p=Math.min(a.len,d-c);qe(e,p,-1),qe(s,p,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(p),c+=p}}return{changes:new be(e,i),filtered:an.create(s)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e],s=this.sections[e+1];s<0?t.push(i):s==0?t.push([i]):t.push([i].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,i){let s=[],a=[],o=0,c=null;function h(p=!1){if(!p&&!s.length)return;o<e&&qe(s,e-o,-1);let y=new be(s,a);c=c?c.compose(y.map(c)):y,s=[],a=[],o=0}function d(p){if(Array.isArray(p))for(let y of p)d(y);else if(p instanceof be){if(p.length!=e)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${e})`);h(),c=c?c.compose(p.map(c)):p}else{let{from:y,to:b=y,insert:S}=p;if(y>b||y<0||b>e)throw new RangeError(`Invalid change range ${y} to ${b} (in doc of length ${e})`);let O=S?typeof S=="string"?qt.of(S.split(i||om)):S:qt.empty,w=O.length;if(y==b&&w==0)return;y<o&&h(),y>o&&qe(s,y-o,-1),qe(s,b-y,w),gl(a,s,O),o=b}}return d(t),h(!c),c}static empty(t){return new be(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],i=[];for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")e.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((o,c)=>c&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)e.push(a[0],0);else{for(;i.length<s;)i.push(qt.empty);i[s]=qt.of(a.slice(1)),e.push(a[0],i[s].length)}}}return new be(e,i)}static createSet(t,e){return new be(t,e)}}function qe(l,t,e,i=!1){if(t==0&&e<=0)return;let s=l.length-2;s>=0&&e<=0&&e==l[s+1]?l[s]+=t:s>=0&&t==0&&l[s]==0?l[s+1]+=e:i?(l[s]+=t,l[s+1]+=e):l.push(t,e)}function gl(l,t,e){if(e.length==0)return;let i=t.length-2>>1;if(i<l.length)l[l.length-1]=l[l.length-1].append(e);else{for(;l.length<i;)l.push(qt.empty);l.push(e)}}function um(l,t,e){let i=l.inserted;for(let s=0,a=0,o=0;o<l.sections.length;){let c=l.sections[o++],h=l.sections[o++];if(h<0)s+=c,a+=c;else{let d=s,p=a,y=qt.empty;for(;d+=c,p+=h,h&&i&&(y=y.append(i[o-2>>1])),!(e||o==l.sections.length||l.sections[o+1]<0);)c=l.sections[o++],h=l.sections[o++];t(s,d,a,p,y),s=d,a=p}}}function cm(l,t,e,i=!1){let s=[],a=i?[]:null,o=new Da(l),c=new Da(t);for(let h=-1;;){if(o.done&&c.len||c.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&c.ins==-1){let d=Math.min(o.len,c.len);qe(s,d,-1),o.forward(d),c.forward(d)}else if(c.ins>=0&&(o.ins<0||h==o.i||o.off==0&&(c.len<o.len||c.len==o.len&&!e))){let d=c.len;for(qe(s,c.ins,-1);d;){let p=Math.min(o.len,d);o.ins>=0&&h<o.i&&o.len<=p&&(qe(s,0,o.ins),a&&gl(a,s,o.text),h=o.i),o.forward(p),d-=p}c.next()}else if(o.ins>=0){let d=0,p=o.len;for(;p;)if(c.ins==-1){let y=Math.min(p,c.len);d+=y,p-=y,c.forward(y)}else if(c.ins==0&&c.len<p)p-=c.len,c.next();else break;qe(s,d,h<o.i?o.ins:0),a&&h<o.i&&gl(a,s,o.text),h=o.i,o.forward(o.len-p)}else{if(o.done&&c.done)return a?be.createSet(s,a):an.create(s);throw new Error("Mismatched change set lengths")}}}function zS(l,t,e=!1){let i=[],s=e?[]:null,a=new Da(l),o=new Da(t);for(let c=!1;;){if(a.done&&o.done)return s?be.createSet(i,s):an.create(i);if(a.ins==0)qe(i,a.len,0,c),a.next();else if(o.len==0&&!o.done)qe(i,0,o.ins,c),s&&gl(s,i,o.text),o.next();else{if(a.done||o.done)throw new Error("Mismatched change set lengths");{let h=Math.min(a.len2,o.len),d=i.length;if(a.ins==-1){let p=o.ins==-1?-1:o.off?0:o.ins;qe(i,h,p,c),s&&p&&gl(s,i,o.text)}else o.ins==-1?(qe(i,a.off?0:a.len,h,c),s&&gl(s,i,a.textBit(h))):(qe(i,a.off?0:a.len,o.off?0:o.ins,c),s&&!o.off&&gl(s,i,o.text));c=(a.ins>h||o.ins>=0&&o.len>h)&&(c||i.length>d),a.forward2(h),o.forward(h)}}}}class Da{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?qt.empty:t[e]}textBit(t){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length&&!t?qt.empty:e[i].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class Zl{constructor(t,e,i){this.from=t,this.to=e,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let t=this.flags&7;return t==7?null:t}get goalColumn(){let t=this.flags>>6;return t==16777215?void 0:t}map(t,e=-1){let i,s;return this.empty?i=s=t.mapPos(this.from,e):(i=t.mapPos(this.from,1),s=t.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new Zl(i,s,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return W.range(t,e);let i=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return W.range(this.anchor,i)}eq(t,e=!1){return this.anchor==t.anchor&&this.head==t.head&&(!e||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return W.range(t.anchor,t.head)}static create(t,e,i){return new Zl(t,e,i)}}class W{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:W.create(this.ranges.map(i=>i.map(t,e)),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(t.ranges[i],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new W([this.main],0)}addRange(t,e=!0){return W.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let i=this.ranges.slice();return i[e]=t,W.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new W(t.ranges.map(e=>Zl.fromJSON(e)),t.main)}static single(t,e=t){return new W([W.range(t,e)],0)}static create(t,e=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<t.length;s++){let a=t[s];if(a.empty?a.from<=i:a.from<i)return W.normalized(t.slice(),e);i=a.to}return new W(t,e)}static cursor(t,e=0,i,s){return Zl.create(t,t,(e==0?0:e<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(t,e,i,s){let a=(i??16777215)<<6|(s==null?7:Math.min(6,s));return e<t?Zl.create(e,t,48|a):Zl.create(t,e,(e>t?8:0)|a)}static normalized(t,e=0){let i=t[e];t.sort((s,a)=>s.from-a.from),e=t.indexOf(i);for(let s=1;s<t.length;s++){let a=t[s],o=t[s-1];if(a.empty?a.from<=o.to:a.from<o.to){let c=o.from,h=Math.max(a.to,o.to);s<=e&&e--,t.splice(--s,2,a.anchor>a.head?W.range(h,c):W.range(c,h))}}return new W(t,e)}}function LS(l,t){for(let e of l.ranges)if(e.to>t)throw new RangeError("Selection points outside of document")}let op=0;class st{constructor(t,e,i,s,a){this.combine=t,this.compareInput=e,this.compare=i,this.isStatic=s,this.id=op++,this.default=t([]),this.extensions=typeof a=="function"?a(this):a}get reader(){return this}static define(t={}){return new st(t.combine||(e=>e),t.compareInput||((e,i)=>e===i),t.compare||(t.combine?(e,i)=>e===i:up),!!t.static,t.enables)}of(t){return new ec([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new ec(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new ec(t,this,2,e)}from(t,e){return e||(e=i=>i),this.compute([t],i=>e(i.field(t)))}}function up(l,t){return l==t||l.length==t.length&&l.every((e,i)=>e===t[i])}class ec{constructor(t,e,i,s){this.dependencies=t,this.facet=e,this.type=i,this.value=s,this.id=op++}dynamicSlot(t){var e;let i=this.value,s=this.facet.compareInput,a=this.id,o=t[a]>>1,c=this.type==2,h=!1,d=!1,p=[];for(let y of this.dependencies)y=="doc"?h=!0:y=="selection"?d=!0:(((e=t[y.id])!==null&&e!==void 0?e:1)&1)==0&&p.push(t[y.id]);return{create(y){return y.values[o]=i(y),1},update(y,b){if(h&&b.docChanged||d&&(b.docChanged||b.selection)||fm(y,p)){let S=i(y);if(c?!fb(S,y.values[o],s):!s(S,y.values[o]))return y.values[o]=S,1}return 0},reconfigure:(y,b)=>{let S,O=b.config.address[a];if(O!=null){let w=dc(b,O);if(this.dependencies.every(C=>C instanceof st?b.facet(C)===y.facet(C):C instanceof ke?b.field(C,!1)==y.field(C,!1):!0)||(c?fb(S=i(y),w,s):s(S=i(y),w)))return y.values[o]=w,0}else S=i(y);return y.values[o]=S,1}}}}function fb(l,t,e){if(l.length!=t.length)return!1;for(let i=0;i<l.length;i++)if(!e(l[i],t[i]))return!1;return!0}function fm(l,t){let e=!1;for(let i of t)Ca(l,i)&1&&(e=!0);return e}function zA(l,t,e){let i=e.map(h=>l[h.id]),s=e.map(h=>h.type),a=i.filter(h=>!(h&1)),o=l[t.id]>>1;function c(h){let d=[];for(let p=0;p<i.length;p++){let y=dc(h,i[p]);if(s[p]==2)for(let b of y)d.push(b);else d.push(y)}return t.combine(d)}return{create(h){for(let d of i)Ca(h,d);return h.values[o]=c(h),1},update(h,d){if(!fm(h,a))return 0;let p=c(h);return t.compare(p,h.values[o])?0:(h.values[o]=p,1)},reconfigure(h,d){let p=fm(h,i),y=d.config.facets[t.id],b=d.facet(t);if(y&&!p&&up(e,y))return h.values[o]=b,0;let S=c(h);return t.compare(S,b)?(h.values[o]=b,0):(h.values[o]=S,1)}}}const Du=st.define({static:!0});class ke{constructor(t,e,i,s,a){this.id=t,this.createF=e,this.updateF=i,this.compareF=s,this.spec=a,this.provides=void 0}static define(t){let e=new ke(op++,t.create,t.update,t.compare||((i,s)=>i===s),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(Du).find(i=>i.field==this);return(e?.create||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:i=>(i.values[e]=this.create(i),1),update:(i,s)=>{let a=i.values[e],o=this.updateF(a,s);return this.compareF(a,o)?0:(i.values[e]=o,1)},reconfigure:(i,s)=>{let a=i.facet(Du),o=s.facet(Du),c;return(c=a.find(h=>h.field==this))&&c!=o.find(h=>h.field==this)?(i.values[e]=c.create(i),1):s.config.address[this.id]!=null?(i.values[e]=s.field(this),0):(i.values[e]=this.create(i),1)}}}init(t){return[this,Du.of({field:this,create:t})]}get extension(){return this}}const Kl={lowest:4,low:3,default:2,high:1,highest:0};function da(l){return t=>new _S(t,l)}const Al={highest:da(Kl.highest),high:da(Kl.high),default:da(Kl.default),low:da(Kl.low),lowest:da(Kl.lowest)};class _S{constructor(t,e){this.inner=t,this.prec=e}}class Uc{of(t){return new hm(this,t)}reconfigure(t){return Uc.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class hm{constructor(t,e){this.compartment=t,this.inner=e}}class hc{constructor(t,e,i,s,a,o){for(this.base=t,this.compartments=e,this.dynamicSlots=i,this.address=s,this.staticValues=a,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return e==null?t.default:this.staticValues[e>>1]}static resolve(t,e,i){let s=[],a=Object.create(null),o=new Map;for(let b of LA(t,e,o))b instanceof ke?s.push(b):(a[b.facet.id]||(a[b.facet.id]=[])).push(b);let c=Object.create(null),h=[],d=[];for(let b of s)c[b.id]=d.length<<1,d.push(S=>b.slot(S));let p=i?.config.facets;for(let b in a){let S=a[b],O=S[0].facet,w=p&&p[b]||[];if(S.every(C=>C.type==0))if(c[O.id]=h.length<<1|1,up(w,S))h.push(i.facet(O));else{let C=O.combine(S.map(M=>M.value));h.push(i&&O.compare(C,i.facet(O))?i.facet(O):C)}else{for(let C of S)C.type==0?(c[C.id]=h.length<<1|1,h.push(C.value)):(c[C.id]=d.length<<1,d.push(M=>C.dynamicSlot(M)));c[O.id]=d.length<<1,d.push(C=>zA(C,O,S))}}let y=d.map(b=>b(c));return new hc(t,o,y,c,h,a)}}function LA(l,t,e){let i=[[],[],[],[],[]],s=new Map;function a(o,c){let h=s.get(o);if(h!=null){if(h<=c)return;let d=i[h].indexOf(o);d>-1&&i[h].splice(d,1),o instanceof hm&&e.delete(o.compartment)}if(s.set(o,c),Array.isArray(o))for(let d of o)a(d,c);else if(o instanceof hm){if(e.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=t.get(o.compartment)||o.inner;e.set(o.compartment,d),a(d,c)}else if(o instanceof _S)a(o.inner,o.prec);else if(o instanceof ke)i[c].push(o),o.provides&&a(o.provides,c);else if(o instanceof ec)i[c].push(o),o.facet.extensions&&a(o.facet.extensions,Kl.default);else{let d=o.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(d,c)}}return a(l,Kl.default),i.reduce((o,c)=>o.concat(c))}function Ca(l,t){if(t&1)return 2;let e=t>>1,i=l.status[e];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;l.status[e]=4;let s=l.computeSlot(l,l.config.dynamicSlots[e]);return l.status[e]=2|s}function dc(l,t){return t&1?l.config.staticValues[t>>1]:l.values[t>>1]}const HS=st.define(),dm=st.define({combine:l=>l.some(t=>t),static:!0}),qS=st.define({combine:l=>l.length?l[0]:void 0,static:!0}),VS=st.define(),US=st.define(),jS=st.define(),WS=st.define({combine:l=>l.length?l[0]:!1});class on{constructor(t,e){this.type=t,this.value=e}static define(){return new _A}}class _A{of(t){return new on(this,t)}}class HA{constructor(t){this.map=t}of(t){return new xt(this,t)}}class xt{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return e===void 0?void 0:e==this.value?this:new xt(this.type,e)}is(t){return this.type==t}static define(t={}){return new HA(t.map||(e=>e))}static mapEffects(t,e){if(!t.length)return t;let i=[];for(let s of t){let a=s.map(e);a&&i.push(a)}return i}}xt.reconfigure=xt.define();xt.appendConfig=xt.define();class pe{constructor(t,e,i,s,a,o){this.startState=t,this.changes=e,this.selection=i,this.effects=s,this.annotations=a,this.scrollIntoView=o,this._doc=null,this._state=null,i&&LS(i,e.newLength),a.some(c=>c.type==pe.time)||(this.annotations=a.concat(pe.time.of(Date.now())))}static create(t,e,i,s,a,o){return new pe(t,e,i,s,a,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(pe.userEvent);return!!(e&&(e==t||e.length>t.length&&e.slice(0,t.length)==t&&e[t.length]=="."))}}pe.time=on.define();pe.userEvent=on.define();pe.addToHistory=on.define();pe.remote=on.define();function qA(l,t){let e=[];for(let i=0,s=0;;){let a,o;if(i<l.length&&(s==t.length||t[s]>=l[i]))a=l[i++],o=l[i++];else if(s<t.length)a=t[s++],o=t[s++];else return e;!e.length||e[e.length-1]<a?e.push(a,o):e[e.length-1]<o&&(e[e.length-1]=o)}}function YS(l,t,e){var i;let s,a,o;return e?(s=t.changes,a=be.empty(t.changes.length),o=l.changes.compose(t.changes)):(s=t.changes.map(l.changes),a=l.changes.mapDesc(t.changes,!0),o=l.changes.compose(s)),{changes:o,selection:t.selection?t.selection.map(a):(i=l.selection)===null||i===void 0?void 0:i.map(s),effects:xt.mapEffects(l.effects,s).concat(xt.mapEffects(t.effects,a)),annotations:l.annotations.length?l.annotations.concat(t.annotations):t.annotations,scrollIntoView:l.scrollIntoView||t.scrollIntoView}}function mm(l,t,e){let i=t.selection,s=Ks(t.annotations);return t.userEvent&&(s=s.concat(pe.userEvent.of(t.userEvent))),{changes:t.changes instanceof be?t.changes:be.of(t.changes||[],e,l.facet(qS)),selection:i&&(i instanceof W?i:W.single(i.anchor,i.head)),effects:Ks(t.effects),annotations:s,scrollIntoView:!!t.scrollIntoView}}function XS(l,t,e){let i=mm(l,t.length?t[0]:{},l.doc.length);t.length&&t[0].filter===!1&&(e=!1);for(let a=1;a<t.length;a++){t[a].filter===!1&&(e=!1);let o=!!t[a].sequential;i=YS(i,mm(l,t[a],o?i.changes.newLength:l.doc.length),o)}let s=pe.create(l,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return UA(e?VA(s):s)}function VA(l){let t=l.startState,e=!0;for(let s of t.facet(VS)){let a=s(l);if(a===!1){e=!1;break}Array.isArray(a)&&(e=e===!0?a:qA(e,a))}if(e!==!0){let s,a;if(e===!1)a=l.changes.invertedDesc,s=be.empty(t.doc.length);else{let o=l.changes.filter(e);s=o.changes,a=o.filtered.mapDesc(o.changes).invertedDesc}l=pe.create(t,s,l.selection&&l.selection.map(a),xt.mapEffects(l.effects,a),l.annotations,l.scrollIntoView)}let i=t.facet(US);for(let s=i.length-1;s>=0;s--){let a=i[s](l);a instanceof pe?l=a:Array.isArray(a)&&a.length==1&&a[0]instanceof pe?l=a[0]:l=XS(t,Ks(a),!1)}return l}function UA(l){let t=l.startState,e=t.facet(jS),i=l;for(let s=e.length-1;s>=0;s--){let a=e[s](l);a&&Object.keys(a).length&&(i=YS(i,mm(t,a,l.changes.newLength),!0))}return i==l?l:pe.create(t,l.changes,l.selection,i.effects,i.annotations,i.scrollIntoView)}const jA=[];function Ks(l){return l==null?jA:Array.isArray(l)?l:[l]}var ie=(function(l){return l[l.Word=0]="Word",l[l.Space=1]="Space",l[l.Other=2]="Other",l})(ie||(ie={}));const WA=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let pm;try{pm=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function YA(l){if(pm)return pm.test(l);for(let t=0;t<l.length;t++){let e=l[t];if(/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||WA.test(e)))return!0}return!1}function XA(l){return t=>{if(!/\S/.test(t))return ie.Space;if(YA(t))return ie.Word;for(let e=0;e<l.length;e++)if(t.indexOf(l[e])>-1)return ie.Word;return ie.Other}}class Lt{constructor(t,e,i,s,a,o){this.config=t,this.doc=e,this.selection=i,this.values=s,this.status=t.statusTemplate.slice(),this.computeSlot=a,o&&(o._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)Ca(this,c<<1);this.computeSlot=null}field(t,e=!0){let i=this.config.address[t.id];if(i==null){if(e)throw new RangeError("Field is not present in this state");return}return Ca(this,i),dc(this,i)}update(...t){return XS(this,t,!0)}applyTransaction(t){let e=this.config,{base:i,compartments:s}=e;for(let c of t.effects)c.is(Uc.reconfigure)?(e&&(s=new Map,e.compartments.forEach((h,d)=>s.set(d,h)),e=null),s.set(c.value.compartment,c.value.extension)):c.is(xt.reconfigure)?(e=null,i=c.value):c.is(xt.appendConfig)&&(e=null,i=Ks(i).concat(c.value));let a;e?a=t.startState.values.slice():(e=hc.resolve(i,s,this),a=new Lt(e,this.doc,this.selection,e.dynamicSlots.map(()=>null),(h,d)=>d.reconfigure(h,this),null).values);let o=t.startState.facet(dm)?t.newSelection:t.newSelection.asSingle();new Lt(e,t.newDoc,o,a,(c,h)=>h.update(c,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:W.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,i=t(e.ranges[0]),s=this.changes(i.changes),a=[i.range],o=Ks(i.effects);for(let c=1;c<e.ranges.length;c++){let h=t(e.ranges[c]),d=this.changes(h.changes),p=d.map(s);for(let b=0;b<c;b++)a[b]=a[b].map(p);let y=s.mapDesc(d,!0);a.push(h.range.map(y)),s=s.compose(p),o=xt.mapEffects(o,p).concat(xt.mapEffects(Ks(h.effects),y))}return{changes:s,selection:W.create(a,e.mainIndex),effects:o}}changes(t=[]){return t instanceof be?t:be.of(t,this.doc.length,this.facet(Lt.lineSeparator))}toText(t){return qt.of(t.split(this.facet(Lt.lineSeparator)||om))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return e==null?t.default:(Ca(this,e),dc(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let i in t){let s=t[i];s instanceof ke&&this.config.address[s.id]!=null&&(e[i]=s.spec.toJSON(this.field(t[i]),this))}return e}static fromJSON(t,e={},i){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let a in i)if(Object.prototype.hasOwnProperty.call(t,a)){let o=i[a],c=t[a];s.push(o.init(h=>o.spec.fromJSON(c,h)))}}return Lt.create({doc:t.doc,selection:W.fromJSON(t.selection),extensions:e.extensions?s.concat([e.extensions]):s})}static create(t={}){let e=hc.resolve(t.extensions||[],new Map),i=t.doc instanceof qt?t.doc:qt.of((t.doc||"").split(e.staticFacet(Lt.lineSeparator)||om)),s=t.selection?t.selection instanceof W?t.selection:W.single(t.selection.anchor,t.selection.head):W.single(0);return LS(s,i.length),e.staticFacet(dm)||(s=s.asSingle()),new Lt(e,i,s,e.dynamicSlots.map(()=>null),(a,o)=>o.create(a),null)}get tabSize(){return this.facet(Lt.tabSize)}get lineBreak(){return this.facet(Lt.lineSeparator)||`
`}get readOnly(){return this.facet(WS)}phrase(t,...e){for(let i of this.facet(Lt.phrases))if(Object.prototype.hasOwnProperty.call(i,t)){t=i[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let a=+(s||1);return!a||a>e.length?i:e[a-1]})),t}languageDataAt(t,e,i=-1){let s=[];for(let a of this.facet(HS))for(let o of a(this,e,i))Object.prototype.hasOwnProperty.call(o,t)&&s.push(o[t]);return s}charCategorizer(t){let e=this.languageDataAt("wordChars",t);return XA(e.length?e[0]:"")}wordAt(t){let{text:e,from:i,length:s}=this.doc.lineAt(t),a=this.charCategorizer(t),o=t-i,c=t-i;for(;o>0;){let h=ve(e,o,!1);if(a(e.slice(h,o))!=ie.Word)break;o=h}for(;c<s;){let h=ve(e,c);if(a(e.slice(c,h))!=ie.Word)break;c=h}return o==c?null:W.range(o+i,c+i)}}Lt.allowMultipleSelections=dm;Lt.tabSize=st.define({combine:l=>l.length?l[0]:4});Lt.lineSeparator=qS;Lt.readOnly=WS;Lt.phrases=st.define({compare(l,t){let e=Object.keys(l),i=Object.keys(t);return e.length==i.length&&e.every(s=>l[s]==t[s])}});Lt.languageData=HS;Lt.changeFilter=VS;Lt.transactionFilter=US;Lt.transactionExtender=jS;Uc.reconfigure=xt.define();function un(l,t,e={}){let i={};for(let s of l)for(let a of Object.keys(s)){let o=s[a],c=i[a];if(c===void 0)i[a]=o;else if(!(c===o||o===void 0))if(Object.hasOwnProperty.call(e,a))i[a]=e[a](c,o);else throw new Error("Config merge conflict for field "+a)}for(let s in t)i[s]===void 0&&(i[s]=t[s]);return i}class vl{eq(t){return this==t}range(t,e=t){return gm.create(t,e,this)}}vl.prototype.startSide=vl.prototype.endSide=0;vl.prototype.point=!1;vl.prototype.mapMode=Le.TrackDel;function cp(l,t){return l==t||l.constructor==t.constructor&&l.eq(t)}let gm=class QS{constructor(t,e,i){this.from=t,this.to=e,this.value=i}static create(t,e,i){return new QS(t,e,i)}};function ym(l,t){return l.from-t.from||l.value.startSide-t.value.startSide}class fp{constructor(t,e,i,s){this.from=t,this.to=e,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(t,e,i,s=0){let a=i?this.to:this.from;for(let o=s,c=a.length;;){if(o==c)return o;let h=o+c>>1,d=a[h]-t||(i?this.value[h].endSide:this.value[h].startSide)-e;if(h==o)return d>=0?o:c;d>=0?c=h:o=h+1}}between(t,e,i,s){for(let a=this.findIndex(e,-1e9,!0),o=this.findIndex(i,1e9,!1,a);a<o;a++)if(s(this.from[a]+t,this.to[a]+t,this.value[a])===!1)return!1}map(t,e){let i=[],s=[],a=[],o=-1,c=-1;for(let h=0;h<this.value.length;h++){let d=this.value[h],p=this.from[h]+t,y=this.to[h]+t,b,S;if(p==y){let O=e.mapPos(p,d.startSide,d.mapMode);if(O==null||(b=S=O,d.startSide!=d.endSide&&(S=e.mapPos(p,d.endSide),S<b)))continue}else if(b=e.mapPos(p,d.startSide),S=e.mapPos(y,d.endSide),b>S||b==S&&d.startSide>0&&d.endSide<=0)continue;(S-b||d.endSide-d.startSide)<0||(o<0&&(o=b),d.point&&(c=Math.max(c,S-b)),i.push(d),s.push(b-o),a.push(S-o))}return{mapped:i.length?new fp(s,a,i,c):null,pos:o}}}class Bt{constructor(t,e,i,s){this.chunkPos=t,this.chunk=e,this.nextLayer=i,this.maxPoint=s}static create(t,e,i,s){return new Bt(t,e,i,s)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:i=!1,filterFrom:s=0,filterTo:a=this.length}=t,o=t.filter;if(e.length==0&&!o)return this;if(i&&(e=e.slice().sort(ym)),this.isEmpty)return e.length?Bt.of(e):this;let c=new GS(this,null,-1).goto(0),h=0,d=[],p=new Hn;for(;c.value||h<e.length;)if(h<e.length&&(c.from-e[h].from||c.startSide-e[h].value.startSide)>=0){let y=e[h++];p.addInner(y.from,y.to,y.value)||d.push(y)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(h==e.length||this.chunkEnd(c.chunkIndex)<e[h].from)&&(!o||s>this.chunkEnd(c.chunkIndex)||a<this.chunkPos[c.chunkIndex])&&p.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!o||s>c.to||a<c.from||o(c.from,c.to,c.value))&&(p.addInner(c.from,c.to,c.value)||d.push(gm.create(c.from,c.to,c.value))),c.next());return p.finishInner(this.nextLayer.isEmpty&&!d.length?Bt.empty:this.nextLayer.update({add:d,filter:o,filterFrom:s,filterTo:a}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],i=[],s=-1;for(let o=0;o<this.chunk.length;o++){let c=this.chunkPos[o],h=this.chunk[o],d=t.touchesRange(c,c+h.length);if(d===!1)s=Math.max(s,h.maxPoint),e.push(h),i.push(t.mapPos(c));else if(d===!0){let{mapped:p,pos:y}=h.map(c,t);p&&(s=Math.max(s,p.maxPoint),e.push(p),i.push(y))}}let a=this.nextLayer.map(t);return e.length==0?a:new Bt(i,e,a||Bt.empty,s)}between(t,e,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],o=this.chunk[s];if(e>=a&&t<=a+o.length&&o.between(a,t-a,e-a,i)===!1)return}this.nextLayer.between(t,e,i)}}iter(t=0){return Ra.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return Ra.from(t).goto(e)}static compare(t,e,i,s,a=-1){let o=t.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=a),c=e.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=a),h=hb(o,c,i),d=new ma(o,h,a),p=new ma(c,h,a);i.iterGaps((y,b,S)=>db(d,y,p,b,S,s)),i.empty&&i.length==0&&db(d,0,p,0,0,s)}static eq(t,e,i=0,s){s==null&&(s=999999999);let a=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0),o=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0);if(a.length!=o.length)return!1;if(!a.length)return!0;let c=hb(a,o),h=new ma(a,c,0).goto(i),d=new ma(o,c,0).goto(i);for(;;){if(h.to!=d.to||!bm(h.active,d.active)||h.point&&(!d.point||!cp(h.point,d.point)))return!1;if(h.to>s)return!0;h.next(),d.next()}}static spans(t,e,i,s,a=-1){let o=new ma(t,null,a).goto(e),c=e,h=o.openStart;for(;;){let d=Math.min(o.to,i);if(o.point){let p=o.activeForPoint(o.to),y=o.pointFrom<e?p.length+1:o.point.startSide<0?p.length:Math.min(p.length,h);s.point(c,d,o.point,p,y,o.pointRank),h=Math.min(o.openEnd(d),p.length)}else d>c&&(s.span(c,d,o.active,h),h=o.openEnd(d));if(o.to>i)return h+(o.point&&o.to>i?1:0);c=o.to,o.next()}}static of(t,e=!1){let i=new Hn;for(let s of t instanceof gm?[t]:e?QA(t):t)i.add(s.from,s.to,s.value);return i.finish()}static join(t){if(!t.length)return Bt.empty;let e=t[t.length-1];for(let i=t.length-2;i>=0;i--)for(let s=t[i];s!=Bt.empty;s=s.nextLayer)e=new Bt(s.chunkPos,s.chunk,e,Math.max(s.maxPoint,e.maxPoint));return e}}Bt.empty=new Bt([],[],null,-1);function QA(l){if(l.length>1)for(let t=l[0],e=1;e<l.length;e++){let i=l[e];if(ym(t,i)>0)return l.slice().sort(ym);t=i}return l}Bt.empty.nextLayer=Bt.empty;class Hn{finishChunk(t){this.chunks.push(new fp(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,i){this.addInner(t,e,i)||(this.nextLayer||(this.nextLayer=new Hn)).add(t,e,i)}addInner(t,e,i){let s=t-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(t-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=i,this.lastFrom=t,this.lastTo=e,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let i=e.value.length-1;return this.last=e.value[i],this.lastFrom=e.from[i]+t,this.lastTo=e.to[i]+t,!0}finish(){return this.finishInner(Bt.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let e=Bt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function hb(l,t,e){let i=new Map;for(let a of l)for(let o=0;o<a.chunk.length;o++)a.chunk[o].maxPoint<=0&&i.set(a.chunk[o],a.chunkPos[o]);let s=new Set;for(let a of t)for(let o=0;o<a.chunk.length;o++){let c=i.get(a.chunk[o]);c!=null&&(e?e.mapPos(c):c)==a.chunkPos[o]&&!e?.touchesRange(c,c+a.chunk[o].length)&&s.add(a.chunk[o])}return s}class GS{constructor(t,e,i,s=0){this.layer=t,this.skip=e,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<t||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],i=t+e.from[this.rangeIndex];if(this.from=i,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Ra{constructor(t){this.heap=t}static from(t,e=null,i=-1){let s=[];for(let a=0;a<t.length;a++)for(let o=t[a];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&s.push(new GS(o,e,i,a));return s.length==1?s[0]:new Ra(s)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let i of this.heap)i.goto(t,e);for(let i=this.heap.length>>1;i>=0;i--)wd(this.heap,i);return this.next(),this}forward(t,e){for(let i of this.heap)i.forward(t,e);for(let i=this.heap.length>>1;i>=0;i--)wd(this.heap,i);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),wd(this.heap,0)}}}function wd(l,t){for(let e=l[t];;){let i=(t<<1)+1;if(i>=l.length)break;let s=l[i];if(i+1<l.length&&s.compare(l[i+1])>=0&&(s=l[i+1],i++),e.compare(s)<0)break;l[i]=e,l[t]=s,t=i}}class ma{constructor(t,e,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ra.from(t,e,i)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){Ru(this.active,t),Ru(this.activeTo,t),Ru(this.activeRank,t),this.minActive=mb(this.active,this.activeTo)}addActive(t){let e=0,{value:i,to:s,rank:a}=this.cursor;for(;e<this.activeRank.length&&(a-this.activeRank[e]||s-this.activeTo[e])>0;)e++;Bu(this.active,e,i),Bu(this.activeTo,e,s),Bu(this.activeRank,e,a),t&&Bu(t,e,this.cursor.from),this.minActive=mb(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>t){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&Ru(i,s)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(i),this.cursor.next();else if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<t;s--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>t||this.activeTo[i]==t&&this.active[i].endSide>=this.point.endSide)&&e.push(this.active[i]);return e.reverse()}openEnd(t){let e=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>t;i--)e++;return e}}function db(l,t,e,i,s,a){l.goto(t),e.goto(i);let o=i+s,c=i,h=i-t,d=!!a.boundChange;for(let p=!1;;){let y=l.to+h-e.to,b=y||l.endSide-e.endSide,S=b<0?l.to+h:e.to,O=Math.min(S,o);if(l.point||e.point?(l.point&&e.point&&cp(l.point,e.point)&&bm(l.activeForPoint(l.to),e.activeForPoint(e.to))||a.comparePoint(c,O,l.point,e.point),p=!1):(p&&a.boundChange(c),O>c&&!bm(l.active,e.active)&&a.compareRange(c,O,l.active,e.active),d&&O<o&&(y||l.openEnd(S)!=e.openEnd(S))&&(p=!0)),S>o)break;c=S,b<=0&&l.next(),b>=0&&e.next()}}function bm(l,t){if(l.length!=t.length)return!1;for(let e=0;e<l.length;e++)if(l[e]!=t[e]&&!cp(l[e],t[e]))return!1;return!0}function Ru(l,t){for(let e=t,i=l.length-1;e<i;e++)l[e]=l[e+1];l.pop()}function Bu(l,t,e){for(let i=l.length-1;i>=t;i--)l[i+1]=l[i];l[t]=e}function mb(l,t){let e=-1,i=1e9;for(let s=0;s<t.length;s++)(t[s]-i||l[s].endSide-l[e].endSide)<0&&(e=s,i=t[s]);return e}function fr(l,t,e=l.length){let i=0;for(let s=0;s<e&&s<l.length;)l.charCodeAt(s)==9?(i+=t-i%t,s++):(i++,s=ve(l,s));return i}function vm(l,t,e,i){for(let s=0,a=0;;){if(a>=t)return s;if(s==l.length)break;a+=l.charCodeAt(s)==9?e-a%e:1,s=ve(l,s)}return i===!0?-1:l.length}const Sm="",pb=typeof Symbol>"u"?"__"+Sm:Symbol.for(Sm),xm=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),gb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Sl{constructor(t,e){this.rules=[];let{finish:i}=e||{};function s(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function a(o,c,h,d){let p=[],y=/^@(\w+)\b/.exec(o[0]),b=y&&y[1]=="keyframes";if(y&&c==null)return h.push(o[0]+";");for(let S in c){let O=c[S];if(/&/.test(S))a(S.split(/,\s*/).map(w=>o.map(C=>w.replace(/&/,C))).reduce((w,C)=>w.concat(C)),O,h);else if(O&&typeof O=="object"){if(!y)throw new RangeError("The value of a property ("+S+") should be a primitive value.");a(s(S),O,p,b)}else O!=null&&p.push(S.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+O+";")}(p.length||b)&&h.push((i&&!y&&!d?o.map(i):o).join(", ")+" {"+p.join(" ")+"}")}for(let o in t)a(s(o),t[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=gb[pb]||1;return gb[pb]=t+1,Sm+t.toString(36)}static mount(t,e,i){let s=t[xm],a=i&&i.nonce;s?a&&s.setNonce(a):s=new GA(t,a),s.mount(Array.isArray(e)?e:[e],t)}}let yb=new Map;class GA{constructor(t,e){let i=t.ownerDocument||t,s=i.defaultView;if(!t.head&&t.adoptedStyleSheets&&s.CSSStyleSheet){let a=yb.get(i);if(a)return t[xm]=a;this.sheet=new s.CSSStyleSheet,yb.set(i,this)}else this.styleTag=i.createElement("style"),e&&this.styleTag.setAttribute("nonce",e);this.modules=[],t[xm]=this}mount(t,e){let i=this.sheet,s=0,a=0;for(let o=0;o<t.length;o++){let c=t[o],h=this.modules.indexOf(c);if(h<a&&h>-1&&(this.modules.splice(h,1),a--,h=-1),h==-1){if(this.modules.splice(a++,0,c),i)for(let d=0;d<c.rules.length;d++)i.insertRule(c.rules[d],s++)}else{for(;a<h;)s+=this.modules[a++].rules.length;s+=c.rules.length,a++}}if(i)e.adoptedStyleSheets.indexOf(this.sheet)<0&&(e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets]);else{let o="";for(let h=0;h<this.modules.length;h++)o+=this.modules[h].getRules()+`
`;this.styleTag.textContent=o;let c=e.head||e;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}}var xl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ba={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},PA=typeof navigator<"u"&&/Mac/.test(navigator.platform),$A=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ze=0;ze<10;ze++)xl[48+ze]=xl[96+ze]=String(ze);for(var ze=1;ze<=24;ze++)xl[ze+111]="F"+ze;for(var ze=65;ze<=90;ze++)xl[ze]=String.fromCharCode(ze+32),Ba[ze]=String.fromCharCode(ze);for(var Cd in xl)Ba.hasOwnProperty(Cd)||(Ba[Cd]=xl[Cd]);function KA(l){var t=PA&&l.metaKey&&l.shiftKey&&!l.ctrlKey&&!l.altKey||$A&&l.shiftKey&&l.key&&l.key.length==1||l.key=="Unidentified",e=!t&&l.key||(l.shiftKey?Ba:xl)[l.keyCode]||l.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}function Kt(){var l=arguments[0];typeof l=="string"&&(l=document.createElement(l));var t=1,e=arguments[1];if(e&&typeof e=="object"&&e.nodeType==null&&!Array.isArray(e)){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];typeof s=="string"?l.setAttribute(i,s):s!=null&&(l[i]=s)}t++}for(;t<arguments.length;t++)PS(l,arguments[t]);return l}function PS(l,t){if(typeof t=="string")l.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)l.appendChild(t);else if(Array.isArray(t))for(var e=0;e<t.length;e++)PS(l,t[e]);else throw new RangeError("Unsupported child node: "+t)}let We=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Om=typeof document<"u"?document:{documentElement:{style:{}}};const wm=/Edge\/(\d+)/.exec(We.userAgent),$S=/MSIE \d/.test(We.userAgent),Cm=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(We.userAgent),jc=!!($S||Cm||wm),bb=!jc&&/gecko\/(\d+)/i.test(We.userAgent),kd=!jc&&/Chrome\/(\d+)/.exec(We.userAgent),IA="webkitFontSmoothing"in Om.documentElement.style,km=!jc&&/Apple Computer/.test(We.vendor),vb=km&&(/Mobile\/\w+/.test(We.userAgent)||We.maxTouchPoints>2);var rt={mac:vb||/Mac/.test(We.platform),windows:/Win/.test(We.platform),linux:/Linux|X11/.test(We.platform),ie:jc,ie_version:$S?Om.documentMode||6:Cm?+Cm[1]:wm?+wm[1]:0,gecko:bb,gecko_version:bb?+(/Firefox\/(\d+)/.exec(We.userAgent)||[0,0])[1]:0,chrome:!!kd,chrome_version:kd?+kd[1]:0,ios:vb,android:/Android\b/.test(We.userAgent),webkit_version:IA?+(/\bAppleWebKit\/(\d+)/.exec(We.userAgent)||[0,0])[1]:0,safari:km,safari_version:km?+(/\bVersion\/(\d+(\.\d+)?)/.exec(We.userAgent)||[0,0])[1]:0,tabSize:Om.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function hp(l,t){for(let e in l)e=="class"&&t.class?t.class+=" "+l.class:e=="style"&&t.style?t.style+=";"+l.style:t[e]=l[e];return t}const mc=Object.create(null);function dp(l,t,e){if(l==t)return!0;l||(l=mc),t||(t=mc);let i=Object.keys(l),s=Object.keys(t);if(i.length-0!=s.length-0)return!1;for(let a of i)if(a!=e&&(s.indexOf(a)==-1||l[a]!==t[a]))return!1;return!0}function ZA(l,t){for(let e=l.attributes.length-1;e>=0;e--){let i=l.attributes[e].name;t[i]==null&&l.removeAttribute(i)}for(let e in t){let i=t[e];e=="style"?l.style.cssText=i:l.getAttribute(e)!=i&&l.setAttribute(e,i)}}function Sb(l,t,e){let i=!1;if(t)for(let s in t)e&&s in e||(i=!0,s=="style"?l.style.cssText="":l.removeAttribute(s));if(e)for(let s in e)t&&t[s]==e[s]||(i=!0,s=="style"?l.style.cssText=e[s]:l.setAttribute(s,e[s]));return i}function FA(l){let t=Object.create(null);for(let e=0;e<l.attributes.length;e++){let i=l.attributes[e];t[i.name]=i.value}return t}class Wi{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var _e=(function(l){return l[l.Text=0]="Text",l[l.WidgetBefore=1]="WidgetBefore",l[l.WidgetAfter=2]="WidgetAfter",l[l.WidgetRange=3]="WidgetRange",l})(_e||(_e={}));class ht extends vl{constructor(t,e,i,s){super(),this.startSide=t,this.endSide=e,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(t){return new Ja(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),i=!!t.block;return e+=i&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new es(t,e,e,i,t.widget||null,!1)}static replace(t){let e=!!t.block,i,s;if(t.isBlockGap)i=-5e8,s=4e8;else{let{start:a,end:o}=KS(t,e);i=(a?e?-3e8:-1:5e8)-1,s=(o?e?2e8:1:-6e8)+1}return new es(t,i,s,e,t.widget||null,!0)}static line(t){return new to(t)}static set(t,e=!1){return Bt.of(t,e)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ht.none=Bt.empty;class Ja extends ht{constructor(t){let{start:e,end:i}=KS(t);super(e?-1:5e8,i?1:-6e8,null,t),this.tagName=t.tagName||"span",this.attrs=t.class&&t.attributes?hp(t.attributes,{class:t.class}):t.class?{class:t.class}:t.attributes||mc}eq(t){return this==t||t instanceof Ja&&this.tagName==t.tagName&&dp(this.attrs,t.attrs)}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}Ja.prototype.point=!1;class to extends ht{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof to&&this.spec.class==t.spec.class&&dp(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}to.prototype.mapMode=Le.TrackBefore;to.prototype.point=!0;class es extends ht{constructor(t,e,i,s,a,o){super(e,i,a,t),this.block=s,this.isReplace=o,this.mapMode=s?e<=0?Le.TrackBefore:Le.TrackAfter:Le.TrackDel}get type(){return this.startSide!=this.endSide?_e.WidgetRange:this.startSide<=0?_e.WidgetBefore:_e.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof es&&JA(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}es.prototype.point=!0;function KS(l,t=!1){let{inclusiveStart:e,inclusiveEnd:i}=l;return e==null&&(e=l.inclusive),i==null&&(i=l.inclusive),{start:e??t,end:i??t}}function JA(l,t){return l==t||!!(l&&t&&l.compare(t))}function Is(l,t,e,i=0){let s=e.length-1;s>=0&&e[s]+i>=l?e[s]=Math.max(e[s],t):e.push(l,t)}class Na extends vl{constructor(t,e){super(),this.tagName=t,this.attributes=e}eq(t){return t==this||t instanceof Na&&this.tagName==t.tagName&&dp(this.attributes,t.attributes)}static create(t){return new Na(t.tagName,t.attributes||mc)}static set(t,e=!1){return Bt.of(t,e)}}Na.prototype.startSide=Na.prototype.endSide=-1;function za(l){let t;return l.nodeType==11?t=l.getSelection?l:l.ownerDocument:t=l,t.getSelection()}function Am(l,t){return t?l==t||l.contains(t.nodeType!=1?t.parentNode:t):!1}function ic(l,t){if(!t.anchorNode)return!1;try{return Am(l,t.anchorNode)}catch{return!1}}function ka(l){return l.nodeType==3?_a(l,0,l.nodeValue.length).getClientRects():l.nodeType==1?l.getClientRects():[]}function Aa(l,t,e,i){return e?xb(l,t,e,i,-1)||xb(l,t,e,i,1):!1}function Ol(l){for(var t=0;;t++)if(l=l.previousSibling,!l)return t}function pc(l){return l.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(l.nodeName)}function xb(l,t,e,i,s){for(;;){if(l==e&&t==i)return!0;if(t==(s<0?0:qn(l))){if(l.nodeName=="DIV")return!1;let a=l.parentNode;if(!a||a.nodeType!=1)return!1;t=Ol(l)+(s<0?0:1),l=a}else if(l.nodeType==1){if(l=l.childNodes[t+(s<0?-1:0)],l.nodeType==1&&l.contentEditable=="false")return!1;t=s<0?qn(l):0}else return!1}}function qn(l){return l.nodeType==3?l.nodeValue.length:l.childNodes.length}function La(l,t){let e=t?l.left:l.right;return{left:e,right:e,top:l.top,bottom:l.bottom}}function tT(l){let t=l.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:l.innerWidth,top:0,bottom:l.innerHeight}}function IS(l,t){let e=t.width/l.offsetWidth,i=t.height/l.offsetHeight;return(e>.995&&e<1.005||!isFinite(e)||Math.abs(t.width-l.offsetWidth)<1)&&(e=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.height-l.offsetHeight)<1)&&(i=1),{scaleX:e,scaleY:i}}function eT(l,t,e,i,s,a,o,c){let h=l.ownerDocument,d=h.defaultView||window;for(let p=l,y=!1;p&&!y;)if(p.nodeType==1){let b,S=p==h.body,O=1,w=1;if(S)b=tT(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(y=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let H=p.getBoundingClientRect();({scaleX:O,scaleY:w}=IS(p,H)),b={left:H.left,right:H.left+p.clientWidth*O,top:H.top,bottom:H.top+p.clientHeight*w}}let C=0,M=0;if(s=="nearest")t.top<b.top?(M=t.top-(b.top+o),e>0&&t.bottom>b.bottom+M&&(M=t.bottom-b.bottom+o)):t.bottom>b.bottom&&(M=t.bottom-b.bottom+o,e<0&&t.top-M<b.top&&(M=t.top-(b.top+o)));else{let H=t.bottom-t.top,q=b.bottom-b.top;M=(s=="center"&&H<=q?t.top+H/2-q/2:s=="start"||s=="center"&&e<0?t.top-o:t.bottom-q+o)-b.top}if(i=="nearest"?t.left<b.left?(C=t.left-(b.left+a),e>0&&t.right>b.right+C&&(C=t.right-b.right+a)):t.right>b.right&&(C=t.right-b.right+a,e<0&&t.left<b.left+C&&(C=t.left-(b.left+a))):C=(i=="center"?t.left+(t.right-t.left)/2-(b.right-b.left)/2:i=="start"==c?t.left-a:t.right-(b.right-b.left)+a)-b.left,C||M)if(S)d.scrollBy(C,M);else{let H=0,q=0;if(M){let P=p.scrollTop;p.scrollTop+=M/w,q=(p.scrollTop-P)*w}if(C){let P=p.scrollLeft;p.scrollLeft+=C/O,H=(p.scrollLeft-P)*O}t={left:t.left-H,top:t.top-q,right:t.right-H,bottom:t.bottom-q},H&&Math.abs(H-C)<1&&(i="nearest"),q&&Math.abs(q-M)<1&&(s="nearest")}if(S)break;(t.top<b.top||t.bottom>b.bottom||t.left<b.left||t.right>b.right)&&(t={left:Math.max(t.left,b.left),right:Math.min(t.right,b.right),top:Math.max(t.top,b.top),bottom:Math.min(t.bottom,b.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function iT(l){let t=l.ownerDocument,e,i;for(let s=l.parentNode;s&&!(s==t.body||e&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!e&&s.scrollWidth>s.clientWidth&&(e=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:e,y:i}}class nT{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:i}=t;this.set(e,Math.min(t.anchorOffset,e?qn(e):0),i,Math.min(t.focusOffset,i?qn(i):0))}set(t,e,i,s){this.anchorNode=t,this.anchorOffset=e,this.focusNode=i,this.focusOffset=s}}let $l=null;rt.safari&&rt.safari_version>=26&&($l=!1);function ZS(l){if(l.setActive)return l.setActive();if($l)return l.focus($l);let t=[];for(let e=l;e&&(t.push(e,e.scrollTop,e.scrollLeft),e!=e.ownerDocument);e=e.parentNode);if(l.focus($l==null?{get preventScroll(){return $l={preventScroll:!0},!0}}:void 0),!$l){$l=!1;for(let e=0;e<t.length;){let i=t[e++],s=t[e++],a=t[e++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=a&&(i.scrollLeft=a)}}}let Ob;function _a(l,t,e=t){let i=Ob||(Ob=document.createRange());return i.setEnd(l,e),i.setStart(l,t),i}function Zs(l,t,e,i){let s={key:t,code:t,keyCode:e,which:e,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let a=new KeyboardEvent("keydown",s);a.synthetic=!0,l.dispatchEvent(a);let o=new KeyboardEvent("keyup",s);return o.synthetic=!0,l.dispatchEvent(o),a.defaultPrevented||o.defaultPrevented}function lT(l){for(;l;){if(l&&(l.nodeType==9||l.nodeType==11&&l.host))return l;l=l.assignedSlot||l.parentNode}return null}function sT(l,t){let e=t.focusNode,i=t.focusOffset;if(!e||t.anchorNode!=e||t.anchorOffset!=i)return!1;for(i=Math.min(i,qn(e));;)if(i){if(e.nodeType!=1)return!1;let s=e.childNodes[i-1];s.contentEditable=="false"?i--:(e=s,i=qn(e))}else{if(e==l)return!0;i=Ol(e),e=e.parentNode}}function FS(l){return l.scrollTop>Math.max(1,l.scrollHeight-l.clientHeight-4)}function JS(l,t){for(let e=l,i=t;;){if(e.nodeType==3&&i>0)return{node:e,offset:i};if(e.nodeType==1&&i>0){if(e.contentEditable=="false")return null;e=e.childNodes[i-1],i=qn(e)}else if(e.parentNode&&!pc(e))i=Ol(e),e=e.parentNode;else return null}}function tx(l,t){for(let e=l,i=t;;){if(e.nodeType==3&&i<e.nodeValue.length)return{node:e,offset:i};if(e.nodeType==1&&i<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[i],i=0}else if(e.parentNode&&!pc(e))i=Ol(e)+1,e=e.parentNode;else return null}}class Vi{constructor(t,e,i=!0){this.node=t,this.offset=e,this.precise=i}static before(t,e){return new Vi(t.parentNode,Ol(t),e)}static after(t,e){return new Vi(t.parentNode,Ol(t)+1,e)}}var Zt=(function(l){return l[l.LTR=0]="LTR",l[l.RTL=1]="RTL",l})(Zt||(Zt={}));const is=Zt.LTR,mp=Zt.RTL;function ex(l){let t=[];for(let e=0;e<l.length;e++)t.push(1<<+l[e]);return t}const rT=ex("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),aT=ex("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Tm=Object.create(null),Ki=[];for(let l of["()","[]","{}"]){let t=l.charCodeAt(0),e=l.charCodeAt(1);Tm[t]=e,Tm[e]=-t}function ix(l){return l<=247?rT[l]:1424<=l&&l<=1524?2:1536<=l&&l<=1785?aT[l-1536]:1774<=l&&l<=2220?4:8192<=l&&l<=8204?256:64336<=l&&l<=65023?4:1}const oT=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class zn{get dir(){return this.level%2?mp:is}constructor(t,e,i){this.from=t,this.to=e,this.level=i}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,i,s){let a=-1;for(let o=0;o<t.length;o++){let c=t[o];if(c.from<=e&&c.to>=e){if(c.level==i)return o;(a<0||(s!=0?s<0?c.from<e:c.to>e:t[a].level>c.level))&&(a=o)}}if(a<0)throw new RangeError("Index out of range");return a}}function nx(l,t){if(l.length!=t.length)return!1;for(let e=0;e<l.length;e++){let i=l[e],s=t[e];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!nx(i.inner,s.inner))return!1}return!0}const It=[];function uT(l,t,e,i,s){for(let a=0;a<=i.length;a++){let o=a?i[a-1].to:t,c=a<i.length?i[a].from:e,h=a?256:s;for(let d=o,p=h,y=h;d<c;d++){let b=ix(l.charCodeAt(d));b==512?b=p:b==8&&y==4&&(b=16),It[d]=b==4?2:b,b&7&&(y=b),p=b}for(let d=o,p=h,y=h;d<c;d++){let b=It[d];if(b==128)d<c-1&&p==It[d+1]&&p&24?b=It[d]=p:It[d]=256;else if(b==64){let S=d+1;for(;S<c&&It[S]==64;)S++;let O=d&&p==8||S<e&&It[S]==8?y==1?1:8:256;for(let w=d;w<S;w++)It[w]=O;d=S-1}else b==8&&y==1&&(It[d]=1);p=b,b&7&&(y=b)}}}function cT(l,t,e,i,s){let a=s==1?2:1;for(let o=0,c=0,h=0;o<=i.length;o++){let d=o?i[o-1].to:t,p=o<i.length?i[o].from:e;for(let y=d,b,S,O;y<p;y++)if(S=Tm[b=l.charCodeAt(y)])if(S<0){for(let w=c-3;w>=0;w-=3)if(Ki[w+1]==-S){let C=Ki[w+2],M=C&2?s:C&4?C&1?a:s:0;M&&(It[y]=It[Ki[w]]=M),c=w;break}}else{if(Ki.length==189)break;Ki[c++]=y,Ki[c++]=b,Ki[c++]=h}else if((O=It[y])==2||O==1){let w=O==s;h=w?0:1;for(let C=c-3;C>=0;C-=3){let M=Ki[C+2];if(M&2)break;if(w)Ki[C+2]|=2;else{if(M&4)break;Ki[C+2]|=4}}}}}function fT(l,t,e,i){for(let s=0,a=i;s<=e.length;s++){let o=s?e[s-1].to:l,c=s<e.length?e[s].from:t;for(let h=o;h<c;){let d=It[h];if(d==256){let p=h+1;for(;;)if(p==c){if(s==e.length)break;p=e[s++].to,c=s<e.length?e[s].from:t}else if(It[p]==256)p++;else break;let y=a==1,b=(p<t?It[p]:i)==1,S=y==b?y?1:2:i;for(let O=p,w=s,C=w?e[w-1].to:l;O>h;)O==C&&(O=e[--w].from,C=w?e[w-1].to:l),It[--O]=S;h=p}else a=d,h++}}}function Mm(l,t,e,i,s,a,o){let c=i%2?2:1;if(i%2==s%2)for(let h=t,d=0;h<e;){let p=!0,y=!1;if(d==a.length||h<a[d].from){let w=It[h];w!=c&&(p=!1,y=w==16)}let b=!p&&c==1?[]:null,S=p?i:i+1,O=h;t:for(;;)if(d<a.length&&O==a[d].from){if(y)break t;let w=a[d];if(!p)for(let C=w.to,M=d+1;;){if(C==e)break t;if(M<a.length&&a[M].from==C)C=a[M++].to;else{if(It[C]==c)break t;break}}if(d++,b)b.push(w);else{w.from>h&&o.push(new zn(h,w.from,S));let C=w.direction==is!=!(S%2);Em(l,C?i+1:i,s,w.inner,w.from,w.to,o),h=w.to}O=w.to}else{if(O==e||(p?It[O]!=c:It[O]==c))break;O++}b?Mm(l,h,O,i+1,s,b,o):h<O&&o.push(new zn(h,O,S)),h=O}else for(let h=e,d=a.length;h>t;){let p=!0,y=!1;if(!d||h>a[d-1].to){let w=It[h-1];w!=c&&(p=!1,y=w==16)}let b=!p&&c==1?[]:null,S=p?i:i+1,O=h;t:for(;;)if(d&&O==a[d-1].to){if(y)break t;let w=a[--d];if(!p)for(let C=w.from,M=d;;){if(C==t)break t;if(M&&a[M-1].to==C)C=a[--M].from;else{if(It[C-1]==c)break t;break}}if(b)b.push(w);else{w.to<h&&o.push(new zn(w.to,h,S));let C=w.direction==is!=!(S%2);Em(l,C?i+1:i,s,w.inner,w.from,w.to,o),h=w.from}O=w.from}else{if(O==t||(p?It[O-1]!=c:It[O-1]==c))break;O--}b?Mm(l,O,h,i+1,s,b,o):O<h&&o.push(new zn(O,h,S)),h=O}}function Em(l,t,e,i,s,a,o){let c=t%2?2:1;uT(l,s,a,i,c),cT(l,s,a,i,c),fT(s,a,i,c),Mm(l,s,a,t,e,i,o)}function hT(l,t,e){if(!l)return[new zn(0,0,t==mp?1:0)];if(t==is&&!e.length&&!oT.test(l))return lx(l.length);if(e.length)for(;l.length>It.length;)It[It.length]=256;let i=[],s=t==is?0:1;return Em(l,s,s,e,0,l.length,i),i}function lx(l){return[new zn(0,l,0)]}let sx="";function dT(l,t,e,i,s){var a;let o=i.head-l.from,c=zn.find(t,o,(a=i.bidiLevel)!==null&&a!==void 0?a:-1,i.assoc),h=t[c],d=h.side(s,e);if(o==d){let b=c+=s?1:-1;if(b<0||b>=t.length)return null;h=t[c=b],o=h.side(!s,e),d=h.side(s,e)}let p=ve(l.text,o,h.forward(s,e));(p<h.from||p>h.to)&&(p=d),sx=l.text.slice(Math.min(o,p),Math.max(o,p));let y=c==(s?t.length-1:0)?null:t[c+(s?1:-1)];return y&&p==d&&y.level+(s?0:1)<h.level?W.cursor(y.side(!s,e)+l.from,y.forward(s,e)?1:-1,y.level):W.cursor(p+l.from,h.forward(s,e)?-1:1,h.level)}function mT(l,t,e){for(let i=t;i<e;i++){let s=ix(l.charCodeAt(i));if(s==1)return is;if(s==2||s==4)return mp}return is}const rx=st.define(),ax=st.define(),ox=st.define(),ux=st.define(),Dm=st.define(),cx=st.define(),fx=st.define(),pp=st.define(),gp=st.define(),hx=st.define({combine:l=>l.some(t=>t)}),dx=st.define({combine:l=>l.some(t=>t)}),mx=st.define();class Fs{constructor(t,e="nearest",i="nearest",s=5,a=5,o=!1){this.range=t,this.y=e,this.x=i,this.yMargin=s,this.xMargin=a,this.isSnapshot=o}map(t){return t.empty?this:new Fs(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new Fs(W.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Nu=xt.define({map:(l,t)=>l.map(t)}),px=xt.define();function ii(l,t,e){let i=l.facet(ux);i.length?i[0](t):window.onerror&&window.onerror(String(t),e,void 0,void 0,t)||(e?console.error(e+":",t):console.error(t))}const Nn=st.define({combine:l=>l.length?l[0]:!0});let pT=0;const Qs=st.define({combine(l){return l.filter((t,e)=>{for(let i=0;i<e;i++)if(l[i].plugin==t.plugin)return!1;return!0})}});class ce{constructor(t,e,i,s,a){this.id=t,this.create=e,this.domEventHandlers=i,this.domEventObservers=s,this.baseExtensions=a(this),this.extension=this.baseExtensions.concat(Qs.of({plugin:this,arg:void 0}))}of(t){return this.baseExtensions.concat(Qs.of({plugin:this,arg:t}))}static define(t,e){const{eventHandlers:i,eventObservers:s,provide:a,decorations:o}=e||{};return new ce(pT++,t,i,s,c=>{let h=[];return o&&h.push(Ha.of(d=>{let p=d.plugin(c);return p?o(p):ht.none})),a&&h.push(a(c)),h})}static fromClass(t,e){return ce.define((i,s)=>new t(i,s),e)}}class Ad{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(t){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(i){if(ii(e.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(t,this.spec.arg)}catch(e){ii(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(!((e=this.value)===null||e===void 0)&&e.destroy)try{this.value.destroy()}catch(i){ii(t.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const gx=st.define(),yp=st.define(),Ha=st.define(),yx=st.define(),bx=st.define(),eo=st.define(),vx=st.define();function wb(l,t){let e=l.state.facet(vx);if(!e.length)return e;let i=e.map(a=>a instanceof Function?a(l):a),s=[];return Bt.spans(i,t.from,t.to,{point(){},span(a,o,c,h){let d=a-t.from,p=o-t.from,y=s;for(let b=c.length-1;b>=0;b--,h--){let S=c[b].spec.bidiIsolate,O;if(S==null&&(S=mT(t.text,d,p)),h>0&&y.length&&(O=y[y.length-1]).to==d&&O.direction==S)O.to=p,y=O.inner;else{let w={from:d,to:p,direction:S,inner:[]};y.push(w),y=w.inner}}}}),s}const Sx=st.define();function bp(l){let t=0,e=0,i=0,s=0;for(let a of l.state.facet(Sx)){let o=a(l);o&&(o.left!=null&&(t=Math.max(t,o.left)),o.right!=null&&(e=Math.max(e,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(s=Math.max(s,o.bottom)))}return{left:t,right:e,top:i,bottom:s}}const ba=st.define();class Mi{constructor(t,e,i,s){this.fromA=t,this.toA=e,this.fromB=i,this.toB=s}join(t){return new Mi(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,i=this;for(;e>0;e--){let s=t[e-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),t.splice(e-1,1)}}return t.splice(e,0,i),t}static extendWithRanges(t,e){if(e.length==0)return t;let i=[];for(let s=0,a=0,o=0;;){let c=s<t.length?t[s].fromB:1e9,h=a<e.length?e[a]:1e9,d=Math.min(c,h);if(d==1e9)break;let p=d+o,y=d,b=p;for(;;)if(a<e.length&&e[a]<=y){let S=e[a+1];a+=2,y=Math.max(y,S);for(let O=s;O<t.length&&t[O].fromB<=y;O++)o=t[O].toA-t[O].toB;b=Math.max(b,S+o)}else if(s<t.length&&t[s].fromB<=y){let S=t[s++];y=Math.max(y,S.toB),b=Math.max(b,S.toA),o=S.toA-S.toB}else break;i.push(new Mi(p,b,d,y))}return i}}class gc{constructor(t,e,i){this.view=t,this.state=e,this.transactions=i,this.flags=0,this.startState=t.state,this.changes=be.empty(this.startState.doc.length);for(let a of i)this.changes=this.changes.compose(a.changes);let s=[];this.changes.iterChangedRanges((a,o,c,h)=>s.push(new Mi(a,o,c,h))),this.changedRanges=s}static create(t,e,i){return new gc(t,e,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const gT=[];class ge{constructor(t,e,i=0){this.dom=t,this.length=e,this.flags=i,this.parent=null,t.cmTile=this}get breakAfter(){return this.flags&1}get children(){return gT}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(t){if(this.flags|=2,this.flags&4){this.flags&=-5;let e=this.domAttrs;e&&ZA(this.dom,e)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(t){this.dom=t,t.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t,e=this.posAtStart){let i=e;for(let s of this.children){if(s==t)return i;i+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}covers(t){return!0}coordsIn(t,e){return null}domPosFor(t,e){let i=Ol(this.dom),s=this.length?t>0:e>0;return new Vi(this.parent.dom,i+(s?1:0),t==0||t==this.length)}markDirty(t){this.flags&=-3,t&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let t=this;t;t=t.parent)if(t instanceof Yc)return t;return null}static get(t){return t.cmTile}}class Wc extends ge{constructor(t){super(t,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(t){this.children.push(t),t.parent=this}sync(t){if(this.flags&2)return;super.sync(t);let e=this.dom,i=null,s,a=t?.node==e?t:null,o=0;for(let c of this.children){if(c.sync(t),o+=c.length+c.breakAfter,s=i?i.nextSibling:e.firstChild,a&&s!=c.dom&&(a.written=!0),c.dom.parentNode==e)for(;s&&s!=c.dom;)s=Cb(s);else e.insertBefore(c.dom,s);i=c.dom}for(s=i?i.nextSibling:e.firstChild,a&&s&&(a.written=!0);s;)s=Cb(s);this.length=o}}function Cb(l){let t=l.nextSibling;return l.parentNode.removeChild(l),t}class Yc extends Wc{constructor(t,e){super(e),this.view=t}owns(t){for(;t;t=t.parent)if(t==this)return!0;return!1}isBlock(){return!0}nearest(t){for(;;){if(!t)return null;let e=ge.get(t);if(e&&this.owns(e))return e;t=t.parentNode}}blockTiles(t){for(let e=[],i=this,s=0,a=0;;)if(s==i.children.length){if(!e.length)return;i=i.parent,i.breakAfter&&a++,s=e.pop()}else{let o=i.children[s++];if(o instanceof yl)e.push(s),i=o,s=0;else{let c=a+o.length,h=t(o,a);if(h!==void 0)return h;a=c+o.breakAfter}}}resolveBlock(t,e){let i,s=-1,a,o=-1;if(this.blockTiles((c,h)=>{let d=h+c.length;if(t>=h&&t<=d){if(c.isWidget()&&e>=-1&&e<=1){if(c.flags&32)return!0;c.flags&16&&(i=void 0)}(h<t||t==d&&(e<-1?c.length:c.covers(1)))&&(!i||!c.isWidget()&&i.isWidget())&&(i=c,s=t-h),(d>t||t==h&&(e>1?c.length:c.covers(-1)))&&(!a||!c.isWidget()&&a.isWidget())&&(a=c,o=t-h)}}),!i&&!a)throw new Error("No tile at position "+t);return i&&e<0||!a?{tile:i,offset:s}:{tile:a,offset:o}}}class yl extends Wc{constructor(t,e){super(t),this.wrapper=e}isBlock(){return!0}covers(t){return this.children.length?t<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(t,e){let i=new yl(e||document.createElement(t.tagName),t);return e||(i.flags|=4),i}}class lr extends Wc{constructor(t,e){super(t),this.attrs=e}isLine(){return!0}static start(t,e,i){let s=new lr(e||document.createElement("div"),t);return(!e||!i)&&(s.flags|=4),s}get domAttrs(){return this.attrs}resolveInline(t,e,i){let s=null,a=-1,o=null,c=-1;function h(p,y){for(let b=0,S=0;b<p.children.length&&S<=y;b++){let O=p.children[b],w=S+O.length;w>=y&&(O.isComposite()?h(O,y-S):(!o||o.isHidden&&(e>0||i&&bT(o,O)))&&(w>y||O.flags&32)?(o=O,c=y-S):(S<y||O.flags&16&&!O.isHidden)&&(s=O,a=y-S)),S=w}}h(this,t);let d=(e<0?s:o)||s||o;return d?{tile:d,offset:d==s?a:c}:null}coordsIn(t,e){let i=this.resolveInline(t,e,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),e):yT(this)}domIn(t,e){let i=this.resolveInline(t,e);if(i){let{tile:s,offset:a}=i;if(this.dom.contains(s.dom))return s.isText()?new Vi(s.dom,Math.min(s.dom.nodeValue.length,a)):s.domPosFor(a,s.flags&16?1:s.flags&32?-1:e);let o=i.tile.parent,c=!1;for(let h of o.children){if(c)return new Vi(h.dom,0);h==i.tile&&(c=!0)}}return new Vi(this.dom,0)}}function yT(l){let t=l.dom.lastChild;if(!t)return l.dom.getBoundingClientRect();let e=ka(t);return e[e.length-1]||null}function bT(l,t){let e=l.coordsIn(0,1),i=t.coordsIn(0,1);return e&&i&&i.top<e.bottom}class ei extends Wc{constructor(t,e){super(t),this.mark=e}get domAttrs(){return this.mark.attrs}static of(t,e){let i=new ei(e||document.createElement(t.tagName),t);return e||(i.flags|=4),i}}class Fl extends ge{constructor(t,e){super(t,e.length),this.text=e}sync(t){this.flags&2||(super.sync(t),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(t,e){let i=this.dom.nodeValue.length;t>i&&(t=i);let s=t,a=t,o=0;t==0&&e<0||t==i&&e>=0?rt.chrome||rt.gecko||(t?(s--,o=1):a<i&&(a++,o=-1)):e<0?s--:a<i&&a++;let c=_a(this.dom,s,a).getClientRects();if(!c.length)return null;let h=c[(o?o<0:e>=0)?0:c.length-1];return rt.safari&&!o&&h.width==0&&(h=Array.prototype.find.call(c,d=>d.width)||h),o?La(h,o<0):h||null}static of(t,e){let i=new Fl(e||document.createTextNode(t),t);return e||(i.flags|=2),i}}class sr extends ge{constructor(t,e,i,s){super(t,e,s),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(t){return this.flags&48?!1:(this.flags&(t<0?64:128))>0}coordsIn(t,e){return this.coordsInWidget(t,e,!1)}coordsInWidget(t,e,i){let s=this.widget.coordsAt(this.dom,t,e);if(s)return s;if(i)return La(this.dom.getBoundingClientRect(),this.length?t==0:e<=0);{let a=this.dom.getClientRects(),o=null;if(!a.length)return null;let c=this.flags&16?!0:this.flags&32?!1:t>0;for(let h=c?a.length-1:0;o=a[h],!(t>0?h==0:h==a.length-1||o.top<o.bottom);h+=c?-1:1);return La(o,!c)}}get overrideDOMText(){if(!this.length)return qt.empty;let{root:t}=this;if(!t)return qt.empty;let e=this.posAtStart;return t.view.state.doc.slice(e,e+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(t,e,i,s,a){return a||(a=t.toDOM(e),t.editable||(a.contentEditable="false")),new sr(a,i,t,s)}}class yc extends ge{constructor(t){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),super(e,0,t)}get isHidden(){return!1}get overrideDOMText(){return qt.empty}coordsIn(t){return this.dom.getBoundingClientRect()}}class vT{constructor(t){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=t}advance(t,e,i){let{tile:s,index:a,beforeBreak:o,parents:c}=this;for(;t||e>0;)if(s.isComposite())if(o){if(!t)break;i&&i.break(),t--,o=!1}else if(a==s.children.length){if(!t&&!c.length)break;i&&i.leave(s),o=!!s.breakAfter,{tile:s,index:a}=c.pop(),a++}else{let h=s.children[a],d=h.breakAfter;(e>0?h.length<=t:h.length<t)&&(!i||i.skip(h,0,h.length)!==!1||!h.isComposite)?(o=!!d,a++,t-=h.length):(c.push({tile:s,index:a}),s=h,a=0,i&&h.isComposite()&&i.enter(h))}else if(a==s.length)o=!!s.breakAfter,{tile:s,index:a}=c.pop(),a++;else if(t){let h=Math.min(t,s.length-a);i&&i.skip(s,a,a+h),t-=h,a+=h}else break;return this.tile=s,this.index=a,this.beforeBreak=o,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class ST{constructor(t,e,i,s){this.from=t,this.to=e,this.wrapper=i,this.rank=s}}class xT{constructor(t,e,i){this.cache=t,this.root=e,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(t,e,i,s){var a;this.flushBuffer();let o=this.ensureMarks(e,i),c=o.lastChild;if(c&&c.isText()&&!(c.flags&8)){this.cache.reused.set(c,2);let h=o.children[o.children.length-1]=new Fl(c.dom,c.text+t);h.parent=o}else o.append(s||Fl.of(t,(a=this.cache.find(Fl))===null||a===void 0?void 0:a.dom));this.pos+=t.length,this.afterWidget=null}addComposition(t,e){let i=this.curLine;i.dom!=e.line.dom&&(i.setDOM(this.cache.reused.has(e.line)?Td(e.line.dom):e.line.dom),this.cache.reused.set(e.line,2));let s=i;for(let c=e.marks.length-1;c>=0;c--){let h=e.marks[c],d=s.lastChild;if(d instanceof ei&&d.mark.eq(h.mark))d.dom!=h.dom&&d.setDOM(Td(h.dom)),s=d;else{if(this.cache.reused.get(h)){let y=ge.get(h.dom);y&&y.setDOM(Td(h.dom))}let p=ei.of(h.mark,h.dom);s.append(p),s=p}this.cache.reused.set(h,2)}let a=ge.get(t.text);a&&this.cache.reused.set(a,2);let o=new Fl(t.text,t.text.nodeValue);o.flags|=8,s.append(o)}addInlineWidget(t,e,i){let s=this.afterWidget&&t.flags&48&&(this.afterWidget.flags&48)==(t.flags&48);s||this.flushBuffer();let a=this.ensureMarks(e,i);!s&&!(t.flags&16)&&a.append(this.getBuffer(1)),a.append(t),this.pos+=t.length,this.afterWidget=t}addMark(t,e,i){this.flushBuffer(),this.ensureMarks(e,i).append(t),this.pos+=t.length,this.afterWidget=null}addBlockWidget(t){this.getBlockPos().append(t),this.pos+=t.length,this.lastBlock=t,this.endLine()}continueWidget(t){let e=this.afterWidget||this.lastBlock;e.length+=t,this.pos+=t}addLineStart(t,e){var i;t||(t=xx);let s=lr.start(t,e||((i=this.cache.find(lr))===null||i===void 0?void 0:i.dom),!!e);this.getBlockPos().append(this.lastBlock=this.curLine=s)}addLine(t){this.getBlockPos().append(t),this.pos+=t.length,this.lastBlock=t,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(t){this.blockPosCovered()||this.addLineStart(t)}ensureLine(t){this.curLine||this.addLineStart(t)}ensureMarks(t,e){var i;let s=this.curLine;for(let a=t.length-1;a>=0;a--){let o=t[a],c;if(e>0&&(c=s.lastChild)&&c instanceof ei&&c.mark.eq(o))s=c,e--;else{let h=ei.of(o,(i=this.cache.find(ei,d=>d.mark.eq(o)))===null||i===void 0?void 0:i.dom);s.append(h),s=h,e=0}}return s}endLine(){if(this.curLine){this.flushBuffer();let t=this.curLine.lastChild;(!t||!kb(this.curLine,!1)||t.dom.nodeName!="BR"&&t.isWidget()&&!(rt.ios&&kb(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(Md,0,32)||new sr(Md.toDOM(),0,Md,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let t=this.wrappers.length-1;t>=0;t--)this.wrappers[t].to<this.pos&&this.wrappers.splice(t,1);for(let t=this.blockWrappers;t.value&&t.from<=this.pos;t.next())if(t.to>=this.pos){let e=new ST(t.from,t.to,t.value,t.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-e.rank||this.wrappers[i-1].to-e.to)<0;)i--;this.wrappers.splice(i,0,e)}this.wrapperPos=this.pos}getBlockPos(){var t;this.updateBlockWrappers();let e=this.root;for(let i of this.wrappers){let s=e.lastChild;if(i.from<this.pos&&s instanceof yl&&s.wrapper.eq(i.wrapper))e=s;else{let a=yl.of(i.wrapper,(t=this.cache.find(yl,o=>o.wrapper.eq(i.wrapper)))===null||t===void 0?void 0:t.dom);e.append(a),e=a}}return e}blockPosCovered(){let t=this.lastBlock;return t!=null&&!t.breakAfter&&(!t.isWidget()||(t.flags&160)>0)}getBuffer(t){let e=2|(t<0?16:32),i=this.cache.find(yc,void 0,1);return i&&(i.flags=e),i||new yc(e)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class OT{constructor(t){this.skipCount=0,this.text="",this.textOff=0,this.cursor=t.iter()}skip(t){this.textOff+t<=this.text.length?this.textOff+=t:(this.skipCount+=t-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(t){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:o}=this.cursor.next(this.skipCount);if(this.skipCount=0,o)throw new Error("Ran out of text content when drawing inline views");this.text=s;let c=this.textOff=Math.min(t,s.length);return a?null:s.slice(0,c)}let e=Math.min(this.text.length,this.textOff+t),i=this.text.slice(this.textOff,e);return this.textOff=e,i}}const bc=[sr,lr,Fl,ei,yc,yl,Yc];for(let l=0;l<bc.length;l++)bc[l].bucket=l;class wT{constructor(t){this.view=t,this.buckets=bc.map(()=>[]),this.index=bc.map(()=>0),this.reused=new Map}add(t){let e=t.constructor.bucket,i=this.buckets[e];i.length<6?i.push(t):i[this.index[e]=(this.index[e]+1)%6]=t}find(t,e,i=2){let s=t.bucket,a=this.buckets[s],o=this.index[s];for(let c=a.length-1;c>=0;c--){let h=(c+o)%a.length,d=a[h];if((!e||e(d))&&!this.reused.has(d))return a.splice(h,1),h<o&&this.index[s]--,this.reused.set(d,i),d}return null}findWidget(t,e,i){let s=this.buckets[0];if(s.length)for(let a=0,o=0;;a++){if(a==s.length){if(o)return null;o=1,a=0}let c=s[a];if(!this.reused.has(c)&&(o==0?c.widget.compare(t):c.widget.constructor==t.constructor&&t.updateDOM(c.dom,this.view)))return s.splice(a,1),a<this.index[0]&&this.index[0]--,this.reused.set(c,1),c.length=e,c.flags=c.flags&-498|i,c}}reuse(t){return this.reused.set(t,1),t}maybeReuse(t,e=2){if(!this.reused.has(t))return this.reused.set(t,e),t.dom}}class CT{constructor(t,e,i,s,a){this.view=t,this.decorations=s,this.disallowBlockEffectsFor=a,this.openWidget=!1,this.openMarks=0,this.cache=new wT(t),this.text=new OT(t.state.doc),this.builder=new xT(this.cache,new Yc(t,t.contentDOM),Bt.iter(i)),this.cache.reused.set(e,2),this.old=new vT(e),this.reuseWalker={skip:(o,c,h)=>{if(this.cache.add(o),o.isComposite())return!1},enter:o=>this.cache.add(o),leave:()=>{},break:()=>{}}}run(t,e){let i=e&&this.getCompositionContext(e.text);for(let s=0,a=0,o=0;;){let c=o<t.length?t[o++]:null,h=c?c.fromA:this.old.root.length;if(h>s){let d=h-s;this.preserve(d,!o,!c),s=h,a+=d}if(!c)break;this.forward(c.fromA,c.toA),e&&c.fromA<=e.range.fromA&&c.toA>=e.range.toA?(this.emit(a,e.range.fromB),this.builder.addComposition(e,i),this.text.skip(e.range.toB-e.range.fromB),this.emit(e.range.toB,c.toB)):this.emit(a,c.toB),a=c.toB,s=c.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(t,e,i){let s=TT(this.old),a=this.openMarks;this.old.advance(t,i?1:-1,{skip:(o,c,h)=>{if(o.isWidget())if(this.openWidget)this.builder.continueWidget(h-c);else{let d=h>0||c<o.length?sr.of(o.widget,this.view,h-c,o.flags&496,this.cache.maybeReuse(o)):this.cache.reuse(o);d.flags&256?(d.flags&=-2,this.builder.addBlockWidget(d)):(this.builder.ensureLine(null),this.builder.addInlineWidget(d,s,a),a=s.length)}else if(o.isText())this.builder.ensureLine(null),!c&&h==o.length?this.builder.addText(o.text,s,a,this.cache.reuse(o)):(this.cache.add(o),this.builder.addText(o.text.slice(c,h),s,a)),a=s.length;else if(o.isLine())o.flags&=-2,this.cache.reused.set(o,1),this.builder.addLine(o);else if(o instanceof yc)this.cache.add(o);else if(o instanceof ei)this.builder.ensureLine(null),this.builder.addMark(o,s,a),this.cache.reused.set(o,1),a=s.length;else return!1;this.openWidget=!1},enter:o=>{o.isLine()?this.builder.addLineStart(o.attrs,this.cache.maybeReuse(o)):(this.cache.add(o),o instanceof ei&&s.unshift(o.mark)),this.openWidget=!1},leave:o=>{o.isLine()?s.length&&(s.length=a=0):o instanceof ei&&(s.shift(),a=Math.min(a,s.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(t)}emit(t,e){let i=null,s=this.builder,a=0,o=Bt.spans(this.decorations,t,e,{point:(c,h,d,p,y,b)=>{if(d instanceof es){if(this.disallowBlockEffectsFor[b]){if(d.block)throw new RangeError("Block decorations may not be specified via plugins");if(h>this.view.state.doc.lineAt(c).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(a=p.length,y>p.length)s.continueWidget(h-c);else{let S=d.widget||(d.block?rr.block:rr.inline),O=kT(d),w=this.cache.findWidget(S,h-c,O)||sr.of(S,this.view,h-c,O);d.block?(d.startSide>0&&s.addLineStartIfNotCovered(i),s.addBlockWidget(w)):(s.ensureLine(i),s.addInlineWidget(w,p,y))}i=null}else i=AT(i,d);h>c&&this.text.skip(h-c)},span:(c,h,d,p)=>{for(let y=c;y<h;){let b=this.text.next(Math.min(512,h-y));b==null?(s.addLineStartIfNotCovered(i),s.addBreak(),y++):(s.ensureLine(i),s.addText(b,d,p),y+=b.length),i=null}}});s.addLineStartIfNotCovered(i),this.openWidget=o>a,this.openMarks=o}forward(t,e){e-t<=10?this.old.advance(e-t,1,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(e-t-10,-1),this.old.advance(5,1,this.reuseWalker))}getCompositionContext(t){let e=[],i=null;for(let s=t.parentNode;;s=s.parentNode){let a=ge.get(s);if(s==this.view.contentDOM)break;a instanceof ei?e.push(a):a?.isLine()?i=a:s.nodeName=="DIV"&&!i&&s!=this.view.contentDOM?i=new lr(s,xx):e.push(ei.of(new Ja({tagName:s.nodeName.toLowerCase(),attributes:FA(s)}),s))}return{line:i,marks:e}}}function kb(l,t){let e=i=>{for(let s of i.children)if((t?s.isText():s.length)||e(s))return!0;return!1};return e(l)}function kT(l){let t=l.isReplace?(l.startSide<0?64:0)|(l.endSide>0?128:0):l.startSide>0?32:16;return l.block&&(t|=256),t}const xx={class:"cm-line"};function AT(l,t){let e=t.spec.attributes,i=t.spec.class;return!e&&!i||(l||(l={class:"cm-line"}),e&&hp(e,l),i&&(l.class+=" "+i)),l}function TT(l){let t=[];for(let e=l.parents.length;e>1;e--){let i=e==l.parents.length?l.tile:l.parents[e].tile;i instanceof ei&&t.push(i.mark)}return t}function Td(l){let t=ge.get(l);return t&&t.setDOM(l.cloneNode()),l}class rr extends Wi{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}rr.inline=new rr("span");rr.block=new rr("div");const Md=new class extends Wi{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class Ab{constructor(t){this.view=t,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=ht.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new Yc(t,t.contentDOM),this.updateInner([new Mi(0,0,0,t.state.doc.length)],null)}update(t){var e;let i=t.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:p,toA:y})=>y<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((e=this.domChanged)===null||e===void 0)&&e.newSel?s=this.domChanged.newSel.head:!_T(t.changes,this.hasComposition)&&!t.selectionSet&&(s=t.state.selection.main.head));let a=s>-1?ET(this.view,t.changes,s):null;if(this.domChanged=null,this.hasComposition){let{from:p,to:y}=this.hasComposition;i=new Mi(p,y,t.changes.mapPos(p,-1),t.changes.mapPos(y,1)).addToSet(i.slice())}this.hasComposition=a?{from:a.range.fromB,to:a.range.toB}:null,(rt.ie||rt.chrome)&&!a&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,c=this.blockWrappers;this.updateDeco();let h=BT(o,this.decorations,t.changes);h.length&&(i=Mi.extendWithRanges(i,h));let d=zT(c,this.blockWrappers,t.changes);return d.length&&(i=Mi.extendWithRanges(i,d)),a&&!i.some(p=>p.fromA<=a.range.fromA&&p.toA>=a.range.toA)&&(i=a.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,a),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(e||t.length){let o=this.tile,c=new CT(this.view,o,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=c.run(t,e),Rm(o,c.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=rt.chrome||rt.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(a),a&&(a.written||i.selectionRange.focusNode!=a.node||!this.tile.dom.contains(a.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.tile.children)a.isWidget()&&a.widget instanceof Ed&&s.push(a.dom);i.updateGaps(s)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let i of e.effects)i.is(px)&&(this.editContextFormatting=i.value)}updateSelection(t=!1,e=!1){(t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,s=this.view.root.activeElement,a=s==i,o=!a&&!(this.view.state.facet(Nn)||i.tabIndex>-1)&&ic(i,this.view.observer.selectionRange)&&!(s&&i.contains(s));if(!(a||e||o))return;let c=this.forceSelection;this.forceSelection=!1;let h=this.view.state.selection.main,d,p;if(h.empty?p=d=this.inlineDOMNearPos(h.anchor,h.assoc||1):(p=this.inlineDOMNearPos(h.head,h.head==h.from?1:-1),d=this.inlineDOMNearPos(h.anchor,h.anchor==h.from?1:-1)),rt.gecko&&h.empty&&!this.hasComposition&&MT(d)){let b=document.createTextNode("");this.view.observer.ignore(()=>d.node.insertBefore(b,d.node.childNodes[d.offset]||null)),d=p=new Vi(b,0),c=!0}let y=this.view.observer.selectionRange;(c||!y.focusNode||(!Aa(d.node,d.offset,y.anchorNode,y.anchorOffset)||!Aa(p.node,p.offset,y.focusNode,y.focusOffset))&&!this.suppressWidgetCursorChange(y,h))&&(this.view.observer.ignore(()=>{rt.android&&rt.chrome&&i.contains(y.focusNode)&&LT(y.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let b=za(this.view.root);if(b)if(h.empty){if(rt.gecko){let S=DT(d.node,d.offset);if(S&&S!=3){let O=(S==1?JS:tx)(d.node,d.offset);O&&(d=new Vi(O.node,O.offset))}}b.collapse(d.node,d.offset),h.bidiLevel!=null&&b.caretBidiLevel!==void 0&&(b.caretBidiLevel=h.bidiLevel)}else if(b.extend){b.collapse(d.node,d.offset);try{b.extend(p.node,p.offset)}catch{}}else{let S=document.createRange();h.anchor>h.head&&([d,p]=[p,d]),S.setEnd(p.node,p.offset),S.setStart(d.node,d.offset),b.removeAllRanges(),b.addRange(S)}o&&this.view.root.activeElement==i&&(i.blur(),s&&s.focus())}),this.view.observer.setSelectionRange(d,p)),this.impreciseAnchor=d.precise?null:new Vi(y.anchorNode,y.anchorOffset),this.impreciseHead=p.precise?null:new Vi(y.focusNode,y.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&Aa(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,i=za(t.root),{anchorNode:s,anchorOffset:a}=t.observer.selectionRange;if(!i||!e.empty||!e.assoc||!i.modify)return;let o=this.lineAt(e.head,e.assoc);if(!o)return;let c=o.posAtStart;if(e.head==c||e.head==c+o.length)return;let h=this.coordsAt(e.head,-1),d=this.coordsAt(e.head,1);if(!h||!d||h.bottom>d.top)return;let p=this.domAtPos(e.head+e.assoc,e.assoc);i.collapse(p.node,p.offset),i.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let y=t.observer.selectionRange;t.docView.posFromDOM(y.anchorNode,y.anchorOffset)!=e.from&&i.collapse(s,a)}posFromDOM(t,e){let i=this.tile.nearest(t);if(!i)return this.tile.dom.compareDocumentPosition(t)&2?0:this.view.state.doc.length;let s=i.posAtStart;if(i.isComposite()){let a;if(t==i.dom)a=i.dom.childNodes[e];else{let o=qn(t)==0?0:e==0?-1:1;for(;;){let c=t.parentNode;if(c==i.dom)break;o==0&&c.firstChild!=c.lastChild&&(t==c.firstChild?o=-1:o=1),t=c}o<0?a=t:a=t.nextSibling}if(a==i.dom.firstChild)return s;for(;a&&!ge.get(a);)a=a.nextSibling;if(!a)return s+i.length;for(let o=0,c=s;;o++){let h=i.children[o];if(h.dom==a)return c;c+=h.length+h.breakAfter}}else return i.isText()?t==i.dom?s+e:s+(e?i.length:0):s}domAtPos(t,e){let{tile:i,offset:s}=this.tile.resolveBlock(t,e);return i.isWidget()?i.domPosFor(t,e):i.domIn(s,e)}inlineDOMNearPos(t,e){let i,s=-1,a=!1,o,c=-1,h=!1;return this.tile.blockTiles((d,p)=>{if(d.isWidget()){if(d.flags&32&&p>=t)return!0;d.flags&16&&(a=!0)}else{let y=p+d.length;if(p<=t&&(i=d,s=t-p,a=y<t),y>=t&&!o&&(o=d,c=t-p,h=p>t),p>t&&o)return!0}}),!i&&!o?this.domAtPos(t,e):(a&&o?i=null:h&&i&&(o=null),i&&e<0||!o?i.domIn(s,e):o.domIn(c,e))}coordsAt(t,e){let{tile:i,offset:s}=this.tile.resolveBlock(t,e);return i.isWidget()?i.widget instanceof Ed?null:i.coordsInWidget(s,e,!0):i.coordsIn(s,e)}lineAt(t,e){let{tile:i}=this.tile.resolveBlock(t,e);return i.isLine()?i:null}coordsForChar(t){let{tile:e,offset:i}=this.tile.resolveBlock(t,1);if(!e.isLine())return null;function s(a,o){if(a.isComposite())for(let c of a.children){if(c.length>=o){let h=s(c,o);if(h)return h}if(o-=c.length,o<0)break}else if(a.isText()&&o<a.length){let c=ve(a.text,o);if(c==o)return null;let h=_a(a.dom,o,c).getClientRects();for(let d=0;d<h.length;d++){let p=h[d];if(d==h.length-1||p.top<p.bottom&&p.left<p.right)return p}}return null}return s(e,i)}measureVisibleLineHeights(t){let e=[],{from:i,to:s}=t,a=this.view.contentDOM.clientWidth,o=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,h=this.view.textDirection==Zt.LTR,d=0,p=(y,b,S)=>{for(let O=0;O<y.children.length&&!(b>s);O++){let w=y.children[O],C=b+w.length,M=w.dom.getBoundingClientRect(),{height:H}=M;if(S&&!O&&(d+=M.top-S.top),w instanceof yl)C>i&&p(w,b,M);else if(b>=i&&(d>0&&e.push(-d),e.push(H+d),d=0,o)){let q=w.dom.lastChild,P=q?ka(q):[];if(P.length){let Q=P[P.length-1],G=h?Q.right-M.left:M.right-Q.left;G>c&&(c=G,this.minWidth=a,this.minWidthFrom=b,this.minWidthTo=C)}}S&&O==y.children.length-1&&(d+=S.bottom-M.bottom),b=C+w.breakAfter}};return p(this.tile,0,null),e}textDirectionAt(t){let{tile:e}=this.tile.resolveBlock(t,1);return getComputedStyle(e.dom).direction=="rtl"?Zt.RTL:Zt.LTR}measureTextSize(){let t=this.tile.blockTiles(o=>{if(o.isLine()&&o.children.length&&o.length<=20){let c=0,h;for(let d of o.children){if(!d.isText()||/[^ -~]/.test(d.text))return;let p=ka(d.dom);if(p.length!=1)return;c+=p[0].width,h=p[0].height}if(c)return{lineHeight:o.dom.getBoundingClientRect().height,charWidth:c/o.length,textHeight:h}}});if(t)return t;let e=document.createElement("div"),i,s,a;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(e);let o=ka(e.firstChild)[0];i=e.getBoundingClientRect().height,s=o&&o.width?o.width/27:7,a=o&&o.height?o.height:i,e.remove()}),{lineHeight:i,charWidth:s,textHeight:a}}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let i=0,s=0;;s++){let a=s==e.viewports.length?null:e.viewports[s],o=a?a.from-1:this.view.state.doc.length;if(o>i){let c=(e.lineBlockAt(o).bottom-e.lineBlockAt(i).top)/this.view.scaleY;t.push(ht.replace({widget:new Ed(c),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!a)break;i=a.to+1}return ht.set(t)}updateDeco(){let t=1,e=this.view.state.facet(Ha).map(a=>(this.dynamicDecorationMap[t++]=typeof a=="function")?a(this.view):a),i=!1,s=this.view.state.facet(bx).map((a,o)=>{let c=typeof a=="function";return c&&(i=!0),c?a(this.view):a});for(s.length&&(this.dynamicDecorationMap[t++]=i,e.push(Bt.join(s))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;this.blockWrappers=this.view.state.facet(yx).map(a=>typeof a=="function"?a(this.view):a)}scrollIntoView(t){if(t.isSnapshot){let d=this.view.viewState.lineBlockAt(t.range.head);this.view.scrollDOM.scrollTop=d.top-t.yMargin,this.view.scrollDOM.scrollLeft=t.xMargin;return}for(let d of this.view.state.facet(mx))try{if(d(this.view,t.range,t))return!0}catch(p){ii(this.view.state,p,"scroll handler")}let{range:e}=t,i=this.coordsAt(e.head,e.empty?e.assoc:e.head>e.anchor?-1:1),s;if(!i)return;!e.empty&&(s=this.coordsAt(e.anchor,e.anchor>e.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let a=bp(this.view),o={left:i.left-a.left,top:i.top-a.top,right:i.right+a.right,bottom:i.bottom+a.bottom},{offsetWidth:c,offsetHeight:h}=this.view.scrollDOM;eT(this.view.scrollDOM,o,e.head<e.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,c),-c),Math.max(Math.min(t.yMargin,h),-h),this.view.textDirection==Zt.LTR)}lineHasWidget(t){let e=i=>i.isWidget()||i.children.some(e);return e(this.tile.resolveBlock(t,1).tile)}destroy(){Rm(this.tile)}}function Rm(l,t){let e=t?.get(l);if(e!=1){e==null&&l.destroy();for(let i of l.children)Rm(i,t)}}function MT(l){return l.node.nodeType==1&&l.node.firstChild&&(l.offset==0||l.node.childNodes[l.offset-1].contentEditable=="false")&&(l.offset==l.node.childNodes.length||l.node.childNodes[l.offset].contentEditable=="false")}function Ox(l,t){let e=l.observer.selectionRange;if(!e.focusNode)return null;let i=JS(e.focusNode,e.focusOffset),s=tx(e.focusNode,e.focusOffset),a=i||s;if(s&&i&&s.node!=i.node){let c=ge.get(s.node);if(!c||c.isText()&&c.text!=s.node.nodeValue)a=s;else if(l.docView.lastCompositionAfterCursor){let h=ge.get(i.node);!h||h.isText()&&h.text!=i.node.nodeValue||(a=s)}}if(l.docView.lastCompositionAfterCursor=a!=i,!a)return null;let o=t-a.offset;return{from:o,to:o+a.node.nodeValue.length,node:a.node}}function ET(l,t,e){let i=Ox(l,e);if(!i)return null;let{node:s,from:a,to:o}=i,c=s.nodeValue;if(/[\n\r]/.test(c)||l.state.doc.sliceString(i.from,i.to)!=c)return null;let h=t.invertedDesc;return{range:new Mi(h.mapPos(a),h.mapPos(o),a,o),text:s}}function DT(l,t){return l.nodeType!=1?0:(t&&l.childNodes[t-1].contentEditable=="false"?1:0)|(t<l.childNodes.length&&l.childNodes[t].contentEditable=="false"?2:0)}let RT=class{constructor(){this.changes=[]}compareRange(t,e){Is(t,e,this.changes)}comparePoint(t,e){Is(t,e,this.changes)}boundChange(t){Is(t,t,this.changes)}};function BT(l,t,e){let i=new RT;return Bt.compare(l,t,e,i),i.changes}class NT{constructor(){this.changes=[]}compareRange(t,e){Is(t,e,this.changes)}comparePoint(){}boundChange(t){Is(t,t,this.changes)}}function zT(l,t,e){let i=new NT;return Bt.compare(l,t,e,i),i.changes}function LT(l,t){for(let e=l;e&&e!=t;e=e.assignedSlot||e.parentNode)if(e.nodeType==1&&e.contentEditable=="false")return!0;return!1}function _T(l,t){let e=!1;return t&&l.iterChangedRanges((i,s)=>{i<t.to&&s>t.from&&(e=!0)}),e}class Ed extends Wi{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function HT(l,t,e=1){let i=l.charCategorizer(t),s=l.doc.lineAt(t),a=t-s.from;if(s.length==0)return W.cursor(t);a==0?e=1:a==s.length&&(e=-1);let o=a,c=a;e<0?o=ve(s.text,a,!1):c=ve(s.text,a);let h=i(s.text.slice(o,c));for(;o>0;){let d=ve(s.text,o,!1);if(i(s.text.slice(d,o))!=h)break;o=d}for(;c<s.length;){let d=ve(s.text,c);if(i(s.text.slice(c,d))!=h)break;c=d}return W.range(o+s.from,c+s.from)}function qT(l,t,e,i,s){let a=Math.round((i-t.left)*l.defaultCharacterWidth);if(l.lineWrapping&&e.height>l.defaultLineHeight*1.5){let c=l.viewState.heightOracle.textHeight,h=Math.floor((s-e.top-(l.defaultLineHeight-c)*.5)/c);a+=h*l.viewState.heightOracle.lineLength}let o=l.state.sliceDoc(e.from,e.to);return e.from+vm(o,a,l.state.tabSize)}function Bm(l,t,e){let i=l.lineBlockAt(t);if(Array.isArray(i.type)){let s;for(let a of i.type){if(a.from>t)break;if(!(a.to<t)){if(a.from<t&&a.to>t)return a;(!s||a.type==_e.Text&&(s.type!=a.type||(e<0?a.from<t:a.to>t)))&&(s=a)}}return s||i}return i}function VT(l,t,e,i){let s=Bm(l,t.head,t.assoc||-1),a=!i||s.type!=_e.Text||!(l.lineWrapping||s.widgetLineBreaks)?null:l.coordsAtPos(t.assoc<0&&t.head>s.from?t.head-1:t.head);if(a){let o=l.dom.getBoundingClientRect(),c=l.textDirectionAt(s.from),h=l.posAtCoords({x:e==(c==Zt.LTR)?o.right-1:o.left+1,y:(a.top+a.bottom)/2});if(h!=null)return W.cursor(h,e?-1:1)}return W.cursor(e?s.to:s.from,e?-1:1)}function Tb(l,t,e,i){let s=l.state.doc.lineAt(t.head),a=l.bidiSpans(s),o=l.textDirectionAt(s.from);for(let c=t,h=null;;){let d=dT(s,a,o,c,e),p=sx;if(!d){if(s.number==(e?l.state.doc.lines:1))return c;p=`
`,s=l.state.doc.line(s.number+(e?1:-1)),a=l.bidiSpans(s),d=l.visualLineSide(s,!e)}if(h){if(!h(p))return c}else{if(!i)return d;h=i(p)}c=d}}function UT(l,t,e){let i=l.state.charCategorizer(t),s=i(e);return a=>{let o=i(a);return s==ie.Space&&(s=o),s==o}}function jT(l,t,e,i){let s=t.head,a=e?1:-1;if(s==(e?l.state.doc.length:0))return W.cursor(s,t.assoc);let o=t.goalColumn,c,h=l.contentDOM.getBoundingClientRect(),d=l.coordsAtPos(s,t.assoc||-1),p=l.documentTop;if(d)o==null&&(o=d.left-h.left),c=a<0?d.top:d.bottom;else{let S=l.viewState.lineBlockAt(s);o==null&&(o=Math.min(h.right-h.left,l.defaultCharacterWidth*(s-S.from))),c=(a<0?S.top:S.bottom)+p}let y=h.left+o,b=i??l.viewState.heightOracle.textHeight>>1;for(let S=0;;S+=10){let O=c+(b+S)*a,w=Nm(l,{x:y,y:O},!1,a);return W.cursor(w.pos,w.assoc,void 0,o)}}function Ta(l,t,e){for(;;){let i=0;for(let s of l)s.between(t-1,t+1,(a,o,c)=>{if(t>a&&t<o){let h=i||e||(t-a<o-t?-1:1);t=h<0?a:o,i=h}});if(!i)return t}}function wx(l,t){let e=null;for(let i=0;i<t.ranges.length;i++){let s=t.ranges[i],a=null;if(s.empty){let o=Ta(l,s.from,0);o!=s.from&&(a=W.cursor(o,-1))}else{let o=Ta(l,s.from,-1),c=Ta(l,s.to,1);(o!=s.from||c!=s.to)&&(a=W.range(s.from==s.anchor?o:c,s.from==s.head?o:c))}a&&(e||(e=t.ranges.slice()),e[i]=a)}return e?W.create(e,t.mainIndex):t}function Dd(l,t,e){let i=Ta(l.state.facet(eo).map(s=>s(l)),e.from,t.head>e.from?-1:1);return i==e.from?e:W.cursor(i,i<e.from?1:-1)}class en{constructor(t,e){this.pos=t,this.assoc=e}}function Nm(l,t,e,i){let s=l.contentDOM.getBoundingClientRect(),a=s.top+l.viewState.paddingTop,{x:o,y:c}=t,h=c-a,d;for(;;){if(h<0)return new en(0,1);if(h>l.viewState.docHeight)return new en(l.state.doc.length,-1);if(d=l.elementAtHeight(h),i==null)break;if(d.type==_e.Text){let b=l.docView.coordsAt(i<0?d.from:d.to,i);if(b&&(i<0?b.top<=h+a:b.bottom>=h+a))break}let y=l.viewState.heightOracle.textHeight/2;h=i>0?d.bottom+y:d.top-y}if(l.viewport.from>=d.to||l.viewport.to<=d.from){if(e)return null;if(d.type==_e.Text){let y=qT(l,s,d,o,c);return new en(y,y==d.from?1:-1)}}if(d.type!=_e.Text)return h<(d.top+d.bottom)/2?new en(d.from,1):new en(d.to,-1);let p=l.docView.lineAt(d.from,2);return(!p||p.length!=d.length)&&(p=l.docView.lineAt(d.from,-2)),Cx(l,p,d.from,o,c)}function Cx(l,t,e,i,s){let a=-1,o=null,c=1e9,h=1e9,d=s,p=s,y=(b,S)=>{for(let O=0;O<b.length;O++){let w=b[O];if(w.top==w.bottom)continue;let C=w.left>i?w.left-i:w.right<i?i-w.right:0,M=w.top>s?w.top-s:w.bottom<s?s-w.bottom:0;w.top<=p&&w.bottom>=d&&(d=Math.min(w.top,d),p=Math.max(w.bottom,p),M=0),(a<0||(M-h||C-c)<0)&&(a>=0&&h&&c<C&&o.top<=p-2&&o.bottom>=d+2?h=0:(a=S,c=C,h=M,o=w))}};if(t.isText()){for(let S=0;S<t.length;){let O=ve(t.text,S);if(y(_a(t.dom,S,O).getClientRects(),S),!c&&!h)break;S=O}return i>(o.left+o.right)/2==(Mb(l,a+e)==Zt.LTR)?new en(e+ve(t.text,a),-1):new en(e+a,1)}else{if(!t.length)return new en(e,1);for(let w=0;w<t.children.length;w++){let C=t.children[w];if(C.flags&48)continue;let M=(C.dom.nodeType==1?C.dom:_a(C.dom,0,C.length)).getClientRects();if(y(M,w),!c&&!h)break}let b=t.children[a],S=t.posBefore(b,e);return b.isComposite()||b.isText()?Cx(l,b,S,Math.max(o.left,Math.min(o.right,i)),s):i>(o.left+o.right)/2==(Mb(l,a+e)==Zt.LTR)?new en(S+b.length,-1):new en(S,1)}}function Mb(l,t){let e=l.state.doc.lineAt(t);return l.bidiSpans(e)[zn.find(l.bidiSpans(e),t-e.from,-1,1)].dir}const va="";class WT{constructor(t,e){this.points=t,this.view=e,this.text="",this.lineSeparator=e.state.facet(Lt.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=va}readRange(t,e){if(!t)return this;let i=t.parentNode;for(let s=t;;){this.findPointBefore(i,s);let a=this.text.length;this.readNode(s);let o=ge.get(s),c=s.nextSibling;if(c==e){o?.breakAfter&&!c&&i!=this.view.contentDOM&&this.lineBreak();break}let h=ge.get(c);(o&&h?o.breakAfter:(o?o.breakAfter:pc(s))||pc(c)&&(s.nodeName!="BR"||o?.isWidget())&&this.text.length>a)&&!XT(c,e)&&this.lineBreak(),s=c}return this.findPointBefore(i,e),this}readTextNode(t){let e=t.nodeValue;for(let i of this.points)i.node==t&&(i.pos=this.text.length+Math.min(i.offset,e.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,o=1,c;if(this.lineSeparator?(a=e.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(c=s.exec(e))&&(a=c.index,o=c[0].length),this.append(e.slice(i,a<0?e.length:a)),a<0)break;if(this.lineBreak(),o>1)for(let h of this.points)h.node==t&&h.pos>this.text.length&&(h.pos-=o-1);i=a+o}}readNode(t){let e=ge.get(t),i=e&&e.overrideDOMText;if(i!=null){this.findPointInside(t,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let i of this.points)i.node==t&&t.childNodes[i.offset]==e&&(i.pos=this.text.length)}findPointInside(t,e){for(let i of this.points)(t.nodeType==3?i.node==t:t.contains(i.node))&&(i.pos=this.text.length+(YT(t,i.node,i.offset)?e:0))}}function YT(l,t,e){for(;;){if(!t||e<qn(t))return!1;if(t==l)return!0;e=Ol(t)+1,t=t.parentNode}}function XT(l,t){let e;for(;!(l==t||!l);l=l.nextSibling){let i=ge.get(l);if(!i?.isWidget())return!1;i&&(e||(e=[])).push(i)}if(e)for(let i of e){let s=i.overrideDOMText;if(s?.length)return!1}return!0}class Eb{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class QT{constructor(t,e,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:a,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=kx(t.docView.tile,e,i,0))){let c=a||o?[]:PT(t),h=new WT(c,t);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=$T(c,this.bounds.from)}else{let c=t.observer.selectionRange,h=a&&a.node==c.focusNode&&a.offset==c.focusOffset||!Am(t.contentDOM,c.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(c.focusNode,c.focusOffset),d=o&&o.node==c.anchorNode&&o.offset==c.anchorOffset||!Am(t.contentDOM,c.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(c.anchorNode,c.anchorOffset),p=t.viewport;if((rt.ios||rt.chrome)&&t.state.selection.main.empty&&h!=d&&(p.from>0||p.to<t.state.doc.length)){let y=Math.min(h,d),b=Math.max(h,d),S=p.from-y,O=p.to-b;(S==0||S==1||y==0)&&(O==0||O==-1||b==t.state.doc.length)&&(h=0,d=t.state.doc.length)}t.inputState.composing>-1&&t.state.selection.ranges.length>1?this.newSel=t.state.selection.replaceRange(W.range(d,h)):this.newSel=W.single(d,h)}}}function kx(l,t,e,i){if(l.isComposite()){let s=-1,a=-1,o=-1,c=-1;for(let h=0,d=i,p=i;h<l.children.length;h++){let y=l.children[h],b=d+y.length;if(d<t&&b>e)return kx(y,t,e,d);if(b>=t&&s==-1&&(s=h,a=d),d>e&&y.dom.parentNode==l.dom){o=h,c=p;break}p=b,d=b+y.breakAfter}return{from:a,to:c<0?i+l.length:c,startDOM:(s?l.children[s-1].dom.nextSibling:null)||l.dom.firstChild,endDOM:o<l.children.length&&o>=0?l.children[o].dom:null}}else return l.isText()?{from:i,to:i+l.length,startDOM:l.dom,endDOM:l.dom.nextSibling}:null}function Ax(l,t){let e,{newSel:i}=t,s=l.state.selection.main,a=l.inputState.lastKeyTime>Date.now()-100?l.inputState.lastKeyCode:-1;if(t.bounds){let{from:o,to:c}=t.bounds,h=s.from,d=null;(a===8||rt.android&&t.text.length<c-o)&&(h=s.to,d="end");let p=Tx(l.state.doc.sliceString(o,c,va),t.text,h-o,d);p&&(rt.chrome&&a==13&&p.toB==p.from+2&&t.text.slice(p.from,p.toB)==va+va&&p.toB--,e={from:o+p.from,to:o+p.toA,insert:qt.of(t.text.slice(p.from,p.toB).split(va))})}else i&&(!l.hasFocus&&l.state.facet(Nn)||i.main.eq(s))&&(i=null);if(!e&&!i)return!1;if(!e&&t.typeOver&&!s.empty&&i&&i.main.empty?e={from:s.from,to:s.to,insert:l.state.doc.slice(s.from,s.to)}:(rt.mac||rt.android)&&e&&e.from==e.to&&e.from==s.head-1&&/^\. ?$/.test(e.insert.toString())&&l.contentDOM.getAttribute("autocorrect")=="off"?(i&&e.insert.length==2&&(i=W.single(i.main.anchor-1,i.main.head-1)),e={from:e.from,to:e.to,insert:qt.of([e.insert.toString().replace("."," ")])}):e&&e.from>=s.from&&e.to<=s.to&&(e.from!=s.from||e.to!=s.to)&&s.to-s.from-(e.to-e.from)<=4?e={from:s.from,to:s.to,insert:l.state.doc.slice(s.from,e.from).append(e.insert).append(l.state.doc.slice(e.to,s.to))}:l.state.doc.lineAt(s.from).to<s.to&&l.docView.lineHasWidget(s.to)&&l.inputState.insertingTextAt>Date.now()-50?e={from:s.from,to:s.to,insert:l.state.toText(l.inputState.insertingText)}:rt.chrome&&e&&e.from==e.to&&e.from==s.head&&e.insert.toString()==`
 `&&l.lineWrapping&&(i&&(i=W.single(i.main.anchor-1,i.main.head-1)),e={from:s.from,to:s.to,insert:qt.of([" "])}),e)return vp(l,e,i,a);if(i&&!i.main.eq(s)){let o=!1,c="select";return l.inputState.lastSelectionTime>Date.now()-50&&(l.inputState.lastSelectionOrigin=="select"&&(o=!0),c=l.inputState.lastSelectionOrigin,c=="select.pointer"&&(i=wx(l.state.facet(eo).map(h=>h(l)),i))),l.dispatch({selection:i,scrollIntoView:o,userEvent:c}),!0}else return!1}function vp(l,t,e,i=-1){if(rt.ios&&l.inputState.flushIOSKey(t))return!0;let s=l.state.selection.main;if(rt.android&&(t.to==s.to&&(t.from==s.from||t.from==s.from-1&&l.state.sliceDoc(t.from,s.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&Zs(l.contentDOM,"Enter",13)||(t.from==s.from-1&&t.to==s.to&&t.insert.length==0||i==8&&t.insert.length<t.to-t.from&&t.to>s.head)&&Zs(l.contentDOM,"Backspace",8)||t.from==s.from&&t.to==s.to+1&&t.insert.length==0&&Zs(l.contentDOM,"Delete",46)))return!0;let a=t.insert.toString();l.inputState.composing>=0&&l.inputState.composing++;let o,c=()=>o||(o=GT(l,t,e));return l.state.facet(cx).some(h=>h(l,t.from,t.to,a,c))||l.dispatch(c()),!0}function GT(l,t,e){let i,s=l.state,a=s.selection.main,o=-1;if(t.from==t.to&&t.from<a.from||t.from>a.to){let h=t.from<a.from?-1:1,d=h<0?a.from:a.to,p=Ta(s.facet(eo).map(y=>y(l)),d,h);t.from==p&&(o=p)}if(o>-1)i={changes:t,selection:W.cursor(t.from+t.insert.length,-1)};else if(t.from>=a.from&&t.to<=a.to&&t.to-t.from>=(a.to-a.from)/3&&(!e||e.main.empty&&e.main.from==t.from+t.insert.length)&&l.inputState.composing<0){let h=a.from<t.from?s.sliceDoc(a.from,t.from):"",d=a.to>t.to?s.sliceDoc(t.to,a.to):"";i=s.replaceSelection(l.state.toText(h+t.insert.sliceString(0,void 0,l.state.lineBreak)+d))}else{let h=s.changes(t),d=e&&e.main.to<=h.newLength?e.main:void 0;if(s.selection.ranges.length>1&&(l.inputState.composing>=0||l.inputState.compositionPendingChange)&&t.to<=a.to+10&&t.to>=a.to-10){let p=l.state.sliceDoc(t.from,t.to),y,b=e&&Ox(l,e.main.head);if(b){let O=t.insert.length-(t.to-t.from);y={from:b.from,to:b.to-O}}else y=l.state.doc.lineAt(a.head);let S=a.to-t.to;i=s.changeByRange(O=>{if(O.from==a.from&&O.to==a.to)return{changes:h,range:d||O.map(h)};let w=O.to-S,C=w-p.length;if(l.state.sliceDoc(C,w)!=p||w>=y.from&&C<=y.to)return{range:O};let M=s.changes({from:C,to:w,insert:t.insert}),H=O.to-a.to;return{changes:M,range:d?W.range(Math.max(0,d.anchor+H),Math.max(0,d.head+H)):O.map(M)}})}else i={changes:h,selection:d&&s.selection.replaceRange(d)}}let c="input.type";return(l.composing||l.inputState.compositionPendingChange&&l.inputState.compositionEndedAt>Date.now()-50)&&(l.inputState.compositionPendingChange=!1,c+=".compose",l.inputState.compositionFirstChange&&(c+=".start",l.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:c,scrollIntoView:!0})}function Tx(l,t,e,i){let s=Math.min(l.length,t.length),a=0;for(;a<s&&l.charCodeAt(a)==t.charCodeAt(a);)a++;if(a==s&&l.length==t.length)return null;let o=l.length,c=t.length;for(;o>0&&c>0&&l.charCodeAt(o-1)==t.charCodeAt(c-1);)o--,c--;if(i=="end"){let h=Math.max(0,a-Math.min(o,c));e-=o+h-a}if(o<a&&l.length<t.length){let h=e<=a&&e>=o?a-e:0;a-=h,c=a+(c-o),o=a}else if(c<a){let h=e<=a&&e>=c?a-e:0;a-=h,o=a+(o-c),c=a}return{from:a,toA:o,toB:c}}function PT(l){let t=[];if(l.root.activeElement!=l.contentDOM)return t;let{anchorNode:e,anchorOffset:i,focusNode:s,focusOffset:a}=l.observer.selectionRange;return e&&(t.push(new Eb(e,i)),(s!=e||a!=i)&&t.push(new Eb(s,a))),t}function $T(l,t){if(l.length==0)return null;let e=l[0].pos,i=l.length==2?l[1].pos:e;return e>-1&&i>-1?W.single(e+t,i+t):null}class KT{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,rt.safari&&t.contentDOM.addEventListener("input",()=>null),rt.gecko&&cM(t.contentDOM.ownerDocument)}handleEvent(t){!nM(this.view,t)||this.ignoreDuringComposition(t)||t.type=="keydown"&&this.keydown(t)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(t.type,t)):this.runHandlers(t.type,t))}runHandlers(t,e){let i=this.handlers[t];if(i){for(let s of i.observers)s(this.view,e);for(let s of i.handlers){if(e.defaultPrevented)break;if(s(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=IT(t),i=this.handlers,s=this.view.contentDOM;for(let a in e)if(a!="scroll"){let o=!e[a].handlers.length,c=i[a];c&&o!=!c.handlers.length&&(s.removeEventListener(a,this.handleEvent),c=null),c||s.addEventListener(a,this.handleEvent,{passive:o})}for(let a in i)a!="scroll"&&!e[a]&&s.removeEventListener(a,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&t.keyCode!=27&&Ex.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),rt.android&&rt.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return rt.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((e=Mx.find(i=>i.keyCode==t.keyCode))&&!t.ctrlKey||ZT.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=e||t,setTimeout(()=>this.flushIOSKey(),250),!0):(t.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(t){let e=this.pendingIOSKey;return!e||e.key=="Enter"&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString())?!1:(this.pendingIOSKey=void 0,Zs(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!/^key/.test(t.type)||t.synthetic?!1:this.composing>0?!0:rt.safari&&!rt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Db(l,t){return(e,i)=>{try{return t.call(l,i,e)}catch(s){ii(e.state,s)}}}function IT(l){let t=Object.create(null);function e(i){return t[i]||(t[i]={observers:[],handlers:[]})}for(let i of l){let s=i.spec,a=s&&s.plugin.domEventHandlers,o=s&&s.plugin.domEventObservers;if(a)for(let c in a){let h=a[c];h&&e(c).handlers.push(Db(i.value,h))}if(o)for(let c in o){let h=o[c];h&&e(c).observers.push(Db(i.value,h))}}for(let i in ji)e(i).handlers.push(ji[i]);for(let i in Bi)e(i).observers.push(Bi[i]);return t}const Mx=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],ZT="dthko",Ex=[16,17,18,20,91,92,224,225],zu=6;function Lu(l){return Math.max(0,l)*.7+8}function FT(l,t){return Math.max(Math.abs(l.clientX-t.clientX),Math.abs(l.clientY-t.clientY))}class JT{constructor(t,e,i,s){this.view=t,this.startEvent=e,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=iT(t.contentDOM),this.atoms=t.state.facet(eo).map(o=>o(t));let a=t.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Lt.allowMultipleSelections)&&tM(t,e),this.dragging=iM(t,e)&&Bx(e)==1?null:!1}start(t){this.dragging===!1&&this.select(t)}move(t){if(t.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&FT(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let e=0,i=0,s=0,a=0,o=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:a,bottom:c}=this.scrollParents.y.getBoundingClientRect());let h=bp(this.view);t.clientX-h.left<=s+zu?e=-Lu(s-t.clientX):t.clientX+h.right>=o-zu&&(e=Lu(t.clientX-o)),t.clientY-h.top<=a+zu?i=-Lu(a-t.clientY):t.clientY+h.bottom>=c-zu&&(i=Lu(t.clientY-c)),this.setScrollSpeed(e,i)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),this.dragging===!1&&this.select(this.lastEvent)}select(t){let{view:e}=this,i=wx(this.atoms,this.style.get(t,this.extend,this.multiple));(this.mustSelect||!i.eq(e.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function tM(l,t){let e=l.state.facet(rx);return e.length?e[0](t):rt.mac?t.metaKey:t.ctrlKey}function eM(l,t){let e=l.state.facet(ax);return e.length?e[0](t):rt.mac?!t.altKey:!t.ctrlKey}function iM(l,t){let{main:e}=l.state.selection;if(e.empty)return!1;let i=za(l.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let a=0;a<s.length;a++){let o=s[a];if(o.left<=t.clientX&&o.right>=t.clientX&&o.top<=t.clientY&&o.bottom>=t.clientY)return!0}return!1}function nM(l,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target,i;e!=l.contentDOM;e=e.parentNode)if(!e||e.nodeType==11||(i=ge.get(e))&&i.isWidget()&&!i.isHidden&&i.widget.ignoreEvent(t))return!1;return!0}const ji=Object.create(null),Bi=Object.create(null),Dx=rt.ie&&rt.ie_version<15||rt.ios&&rt.webkit_version<604;function lM(l){let t=l.dom.parentNode;if(!t)return;let e=t.appendChild(document.createElement("textarea"));e.style.cssText="position: fixed; left: -10000px; top: 10px",e.focus(),setTimeout(()=>{l.focus(),e.remove(),Rx(l,e.value)},50)}function Xc(l,t,e){for(let i of l.facet(t))e=i(e,l);return e}function Rx(l,t){t=Xc(l.state,pp,t);let{state:e}=l,i,s=1,a=e.toText(t),o=a.lines==e.selection.ranges.length;if(zm!=null&&e.selection.ranges.every(h=>h.empty)&&zm==a.toString()){let h=-1;i=e.changeByRange(d=>{let p=e.doc.lineAt(d.from);if(p.from==h)return{range:d};h=p.from;let y=e.toText((o?a.line(s++).text:t)+e.lineBreak);return{changes:{from:p.from,insert:y},range:W.cursor(d.from+y.length)}})}else o?i=e.changeByRange(h=>{let d=a.line(s++);return{changes:{from:h.from,to:h.to,insert:d.text},range:W.cursor(h.from+d.length)}}):i=e.replaceSelection(a);l.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Bi.scroll=l=>{l.inputState.lastScrollTop=l.scrollDOM.scrollTop,l.inputState.lastScrollLeft=l.scrollDOM.scrollLeft};ji.keydown=(l,t)=>(l.inputState.setSelectionOrigin("select"),t.keyCode==27&&l.inputState.tabFocusMode!=0&&(l.inputState.tabFocusMode=Date.now()+2e3),!1);Bi.touchstart=(l,t)=>{l.inputState.lastTouchTime=Date.now(),l.inputState.setSelectionOrigin("select.pointer")};Bi.touchmove=l=>{l.inputState.setSelectionOrigin("select.pointer")};ji.mousedown=(l,t)=>{if(l.observer.flush(),l.inputState.lastTouchTime>Date.now()-2e3)return!1;let e=null;for(let i of l.state.facet(ox))if(e=i(l,t),e)break;if(!e&&t.button==0&&(e=rM(l,t)),e){let i=!l.hasFocus;l.inputState.startMouseSelection(new JT(l,t,e,i)),i&&l.observer.ignore(()=>{ZS(l.contentDOM);let a=l.root.activeElement;a&&!a.contains(l.contentDOM)&&a.blur()});let s=l.inputState.mouseSelection;if(s)return s.start(t),s.dragging===!1}else l.inputState.setSelectionOrigin("select.pointer");return!1};function Rb(l,t,e,i){if(i==1)return W.cursor(t,e);if(i==2)return HT(l.state,t,e);{let s=l.docView.lineAt(t,e),a=l.state.doc.lineAt(s?s.posAtEnd:t),o=s?s.posAtStart:a.from,c=s?s.posAtEnd:a.to;return c<l.state.doc.length&&c==a.to&&c++,W.range(o,c)}}const sM=rt.ie&&rt.ie_version<=11;let Bb=null,Nb=0,zb=0;function Bx(l){if(!sM)return l.detail;let t=Bb,e=zb;return Bb=l,zb=Date.now(),Nb=!t||e>Date.now()-400&&Math.abs(t.clientX-l.clientX)<2&&Math.abs(t.clientY-l.clientY)<2?(Nb+1)%3:1}function rM(l,t){let e=l.posAndSideAtCoords({x:t.clientX,y:t.clientY},!1),i=Bx(t),s=l.state.selection;return{update(a){a.docChanged&&(e.pos=a.changes.mapPos(e.pos),s=s.map(a.changes))},get(a,o,c){let h=l.posAndSideAtCoords({x:a.clientX,y:a.clientY},!1),d,p=Rb(l,h.pos,h.assoc,i);if(e.pos!=h.pos&&!o){let y=Rb(l,e.pos,e.assoc,i),b=Math.min(y.from,p.from),S=Math.max(y.to,p.to);p=b<p.from?W.range(b,S):W.range(S,b)}return o?s.replaceRange(s.main.extend(p.from,p.to)):c&&i==1&&s.ranges.length>1&&(d=aM(s,h.pos))?d:c?s.addRange(p):W.create([p])}}}function aM(l,t){for(let e=0;e<l.ranges.length;e++){let{from:i,to:s}=l.ranges[e];if(i<=t&&s>=t)return W.create(l.ranges.slice(0,e).concat(l.ranges.slice(e+1)),l.mainIndex==e?0:l.mainIndex-(l.mainIndex>e?1:0))}return null}ji.dragstart=(l,t)=>{let{selection:{main:e}}=l.state;if(t.target.draggable){let s=l.docView.tile.nearest(t.target);if(s&&s.isWidget()){let a=s.posAtStart,o=a+s.length;(a>=e.to||o<=e.from)&&(e=W.range(a,o))}}let{inputState:i}=l;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=e,t.dataTransfer&&(t.dataTransfer.setData("Text",Xc(l.state,gp,l.state.sliceDoc(e.from,e.to))),t.dataTransfer.effectAllowed="copyMove"),!1};ji.dragend=l=>(l.inputState.draggedContent=null,!1);function Lb(l,t,e,i){if(e=Xc(l.state,pp,e),!e)return;let s=l.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:a}=l.inputState,o=i&&a&&eM(l,t)?{from:a.from,to:a.to}:null,c={from:s,insert:e},h=l.state.changes(o?[o,c]:c);l.focus(),l.dispatch({changes:h,selection:{anchor:h.mapPos(s,-1),head:h.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"}),l.inputState.draggedContent=null}ji.drop=(l,t)=>{if(!t.dataTransfer)return!1;if(l.state.readOnly)return!0;let e=t.dataTransfer.files;if(e&&e.length){let i=Array(e.length),s=0,a=()=>{++s==e.length&&Lb(l,t,i.filter(o=>o!=null).join(l.state.lineBreak),!1)};for(let o=0;o<e.length;o++){let c=new FileReader;c.onerror=a,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(i[o]=c.result),a()},c.readAsText(e[o])}return!0}else{let i=t.dataTransfer.getData("Text");if(i)return Lb(l,t,i,!0),!0}return!1};ji.paste=(l,t)=>{if(l.state.readOnly)return!0;l.observer.flush();let e=Dx?null:t.clipboardData;return e?(Rx(l,e.getData("text/plain")||e.getData("text/uri-list")),!0):(lM(l),!1)};function oM(l,t){let e=l.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout(()=>{i.remove(),l.focus()},50)}function uM(l){let t=[],e=[],i=!1;for(let s of l.selection.ranges)s.empty||(t.push(l.sliceDoc(s.from,s.to)),e.push(s));if(!t.length){let s=-1;for(let{from:a}of l.selection.ranges){let o=l.doc.lineAt(a);o.number>s&&(t.push(o.text),e.push({from:o.from,to:Math.min(l.doc.length,o.to+1)})),s=o.number}i=!0}return{text:Xc(l,gp,t.join(l.lineBreak)),ranges:e,linewise:i}}let zm=null;ji.copy=ji.cut=(l,t)=>{let{text:e,ranges:i,linewise:s}=uM(l.state);if(!e&&!s)return!1;zm=s?e:null,t.type=="cut"&&!l.state.readOnly&&l.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let a=Dx?null:t.clipboardData;return a?(a.clearData(),a.setData("text/plain",e),!0):(oM(l,e),!1)};const Nx=on.define();function zx(l,t){let e=[];for(let i of l.facet(fx)){let s=i(l,t);s&&e.push(s)}return e.length?l.update({effects:e,annotations:Nx.of(!0)}):null}function Lx(l){setTimeout(()=>{let t=l.hasFocus;if(t!=l.inputState.notifiedFocused){let e=zx(l.state,t);e?l.dispatch(e):l.update([])}},10)}Bi.focus=l=>{l.inputState.lastFocusTime=Date.now(),!l.scrollDOM.scrollTop&&(l.inputState.lastScrollTop||l.inputState.lastScrollLeft)&&(l.scrollDOM.scrollTop=l.inputState.lastScrollTop,l.scrollDOM.scrollLeft=l.inputState.lastScrollLeft),Lx(l)};Bi.blur=l=>{l.observer.clearSelectionRange(),Lx(l)};Bi.compositionstart=Bi.compositionupdate=l=>{l.observer.editContext||(l.inputState.compositionFirstChange==null&&(l.inputState.compositionFirstChange=!0),l.inputState.composing<0&&(l.inputState.composing=0))};Bi.compositionend=l=>{l.observer.editContext||(l.inputState.composing=-1,l.inputState.compositionEndedAt=Date.now(),l.inputState.compositionPendingKey=!0,l.inputState.compositionPendingChange=l.observer.pendingRecords().length>0,l.inputState.compositionFirstChange=null,rt.chrome&&rt.android?l.observer.flushSoon():l.inputState.compositionPendingChange?Promise.resolve().then(()=>l.observer.flush()):setTimeout(()=>{l.inputState.composing<0&&l.docView.hasComposition&&l.update([])},50))};Bi.contextmenu=l=>{l.inputState.lastContextMenu=Date.now()};ji.beforeinput=(l,t)=>{var e,i;if((t.inputType=="insertText"||t.inputType=="insertCompositionText")&&(l.inputState.insertingText=t.data,l.inputState.insertingTextAt=Date.now()),t.inputType=="insertReplacementText"&&l.observer.editContext){let a=(e=t.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain"),o=t.getTargetRanges();if(a&&o.length){let c=o[0],h=l.posAtDOM(c.startContainer,c.startOffset),d=l.posAtDOM(c.endContainer,c.endOffset);return vp(l,{from:h,to:d,insert:l.state.toText(a)},null),!0}}let s;if(rt.chrome&&rt.android&&(s=Mx.find(a=>a.inputType==t.inputType))&&(l.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let a=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>a+10&&l.hasFocus&&(l.contentDOM.blur(),l.focus())},100)}return rt.ios&&t.inputType=="deleteContentForward"&&l.observer.flushSoon(),rt.safari&&t.inputType=="insertText"&&l.inputState.composing>=0&&setTimeout(()=>Bi.compositionend(l,t),20),!1};const _b=new Set;function cM(l){_b.has(l)||(_b.add(l),l.addEventListener("copy",()=>{}),l.addEventListener("cut",()=>{}))}const Hb=["pre-wrap","normal","pre-line","break-spaces"];let ar=!1;function qb(){ar=!1}class fM{constructor(t){this.lineWrapping=t,this.doc=qt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let i=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((e-t-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return Hb.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let i=0;i<t.length;i++){let s=t[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(e=!0,this.heightSamples[Math.floor(s*10)]=!0)}return e}refresh(t,e,i,s,a,o){let c=Hb.indexOf(t)>-1,h=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=e,this.charWidth=i,this.textHeight=s,this.lineLength=a,h){this.heightSamples={};for(let d=0;d<o.length;d++){let p=o[d];p<0?d++:this.heightSamples[Math.floor(p*10)]=!0}}return h}}class hM{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class qi{constructor(t,e,i,s,a){this.from=t,this.length=e,this.top=i,this.height=s,this._content=a}get type(){return typeof this._content=="number"?_e.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof es?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new qi(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var Ft=(function(l){return l[l.ByPos=0]="ByPos",l[l.ByHeight=1]="ByHeight",l[l.ByPosNoHeight=2]="ByPosNoHeight",l})(Ft||(Ft={}));const nc=.001;class Ye{constructor(t,e,i=2){this.length=t,this.height=e,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>nc&&(ar=!0),this.height=t)}replace(t,e,i){return Ye.of(i)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,i,s){let a=this,o=i.doc;for(let c=s.length-1;c>=0;c--){let{fromA:h,toA:d,fromB:p,toB:y}=s[c],b=a.lineAt(h,Ft.ByPosNoHeight,i.setDoc(e),0,0),S=b.to>=d?b:a.lineAt(d,Ft.ByPosNoHeight,i,0,0);for(y+=S.to-d,d=S.to;c>0&&b.from<=s[c-1].toA;)h=s[c-1].fromA,p=s[c-1].fromB,c--,h<b.from&&(b=a.lineAt(h,Ft.ByPosNoHeight,i,0,0));p+=b.from-h,h=b.from;let O=Sp.build(i.setDoc(o),t,p,y);a=vc(a,a.replace(h,d,O))}return a.updateHeight(i,0)}static empty(){return new pi(0,0,0)}static of(t){if(t.length==1)return t[0];let e=0,i=t.length,s=0,a=0;for(;;)if(e==i)if(s>a*2){let c=t[e-1];c.break?t.splice(--e,1,c.left,null,c.right):t.splice(--e,1,c.left,c.right),i+=1+c.break,s-=c.size}else if(a>s*2){let c=t[i];c.break?t.splice(i,1,c.left,null,c.right):t.splice(i,1,c.left,c.right),i+=2+c.break,a-=c.size}else break;else if(s<a){let c=t[e++];c&&(s+=c.size)}else{let c=t[--i];c&&(a+=c.size)}let o=0;return t[e-1]==null?(o=1,e--):t[e]==null&&(o=1,i++),new mM(Ye.of(t.slice(0,e)),o,Ye.of(t.slice(i)))}}function vc(l,t){return l==t?l:(l.constructor!=t.constructor&&(ar=!0),t)}Ye.prototype.size=1;const dM=ht.replace({});class _x extends Ye{constructor(t,e,i){super(t,e),this.deco=i,this.spaceAbove=0}mainBlock(t,e){return new qi(e,this.length,t+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(t,e,i,s){return this.spaceAbove&&t<i+this.spaceAbove?new qi(s,0,i,this.spaceAbove,dM):this.mainBlock(i,s)}lineAt(t,e,i,s,a){let o=this.mainBlock(s,a);return this.spaceAbove?this.blockAt(0,i,s,a).join(o):o}forEachLine(t,e,i,s,a,o){t<=a+this.length&&e>=a&&o(this.lineAt(0,Ft.ByPos,i,s,a))}setMeasuredHeight(t){let e=t.heights[t.index++];e<0?(this.spaceAbove=-e,e=t.heights[t.index++]):this.spaceAbove=0,this.setHeight(e)}updateHeight(t,e=0,i=!1,s){return s&&s.from<=e&&s.more&&this.setMeasuredHeight(s),this.outdated=!1,this}toString(){return`block(${this.length})`}}class pi extends _x{constructor(t,e,i){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(t,e){return new qi(e,this.length,t+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(t,e,i){let s=i[0];return i.length==1&&(s instanceof pi||s instanceof Ne&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Ne?s=new pi(s.length,this.height,this.spaceAbove):s.height=this.height,this.outdated||(s.outdated=!1),s):Ye.of(i)}updateHeight(t,e=0,i=!1,s){return s&&s.from<=e&&s.more?this.setMeasuredHeight(s):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ne extends Ye{constructor(t){super(t,0)}heightMetrics(t,e){let i=t.doc.lineAt(e).number,s=t.doc.lineAt(e+this.length).number,a=s-i+1,o,c=0;if(t.lineWrapping){let h=Math.min(this.height,t.lineHeight*a);o=h/a,this.length>a+1&&(c=(this.height-h)/(this.length-a-1))}else o=this.height/a;return{firstLine:i,lastLine:s,perLine:o,perChar:c}}blockAt(t,e,i,s){let{firstLine:a,lastLine:o,perLine:c,perChar:h}=this.heightMetrics(e,s);if(e.lineWrapping){let d=s+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-i)/this.height))*this.length)),p=e.doc.lineAt(d),y=c+p.length*h,b=Math.max(i,t-y/2);return new qi(p.from,p.length,b,y,0)}else{let d=Math.max(0,Math.min(o-a,Math.floor((t-i)/c))),{from:p,length:y}=e.doc.line(a+d);return new qi(p,y,i+c*d,c,0)}}lineAt(t,e,i,s,a){if(e==Ft.ByHeight)return this.blockAt(t,i,s,a);if(e==Ft.ByPosNoHeight){let{from:S,to:O}=i.doc.lineAt(t);return new qi(S,O-S,0,0,0)}let{firstLine:o,perLine:c,perChar:h}=this.heightMetrics(i,a),d=i.doc.lineAt(t),p=c+d.length*h,y=d.number-o,b=s+c*y+h*(d.from-a-y);return new qi(d.from,d.length,Math.max(s,Math.min(b,s+this.height-p)),p,0)}forEachLine(t,e,i,s,a,o){t=Math.max(t,a),e=Math.min(e,a+this.length);let{firstLine:c,perLine:h,perChar:d}=this.heightMetrics(i,a);for(let p=t,y=s;p<=e;){let b=i.doc.lineAt(p);if(p==t){let O=b.number-c;y+=h*O+d*(t-a-O)}let S=h+d*b.length;o(new qi(b.from,b.length,y,S,0)),y+=S,p=b.to+1}}replace(t,e,i){let s=this.length-e;if(s>0){let a=i[i.length-1];a instanceof Ne?i[i.length-1]=new Ne(a.length+s):i.push(null,new Ne(s-1))}if(t>0){let a=i[0];a instanceof Ne?i[0]=new Ne(t+a.length):i.unshift(new Ne(t-1),null)}return Ye.of(i)}decomposeLeft(t,e){e.push(new Ne(t-1),null)}decomposeRight(t,e){e.push(null,new Ne(this.length-t-1))}updateHeight(t,e=0,i=!1,s){let a=e+this.length;if(s&&s.from<=e+this.length&&s.more){let o=[],c=Math.max(e,s.from),h=-1;for(s.from>e&&o.push(new Ne(s.from-e-1).updateHeight(t,e));c<=a&&s.more;){let p=t.doc.lineAt(c).length;o.length&&o.push(null);let y=s.heights[s.index++],b=0;y<0&&(b=-y,y=s.heights[s.index++]),h==-1?h=y:Math.abs(y-h)>=nc&&(h=-2);let S=new pi(p,y,b);S.outdated=!1,o.push(S),c+=p+1}c<=a&&o.push(null,new Ne(a-c).updateHeight(t,c));let d=Ye.of(o);return(h<0||Math.abs(d.height-this.height)>=nc||Math.abs(h-this.heightMetrics(t,e).perLine)>=nc)&&(ar=!0),vc(this,d)}else(i||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class mM extends Ye{constructor(t,e,i){super(t.length+e+i.length,t.height+i.height,e|(t.outdated||i.outdated?2:0)),this.left=t,this.right=i,this.size=t.size+i.size}get break(){return this.flags&1}blockAt(t,e,i,s){let a=i+this.left.height;return t<a?this.left.blockAt(t,e,i,s):this.right.blockAt(t,e,a,s+this.left.length+this.break)}lineAt(t,e,i,s,a){let o=s+this.left.height,c=a+this.left.length+this.break,h=e==Ft.ByHeight?t<o:t<c,d=h?this.left.lineAt(t,e,i,s,a):this.right.lineAt(t,e,i,o,c);if(this.break||(h?d.to<c:d.from>c))return d;let p=e==Ft.ByPosNoHeight?Ft.ByPosNoHeight:Ft.ByPos;return h?d.join(this.right.lineAt(c,p,i,o,c)):this.left.lineAt(c,p,i,s,a).join(d)}forEachLine(t,e,i,s,a,o){let c=s+this.left.height,h=a+this.left.length+this.break;if(this.break)t<h&&this.left.forEachLine(t,e,i,s,a,o),e>=h&&this.right.forEachLine(t,e,i,c,h,o);else{let d=this.lineAt(h,Ft.ByPos,i,s,a);t<d.from&&this.left.forEachLine(t,d.from-1,i,s,a,o),d.to>=t&&d.from<=e&&o(d),e>d.to&&this.right.forEachLine(d.to+1,e,i,c,h,o)}}replace(t,e,i){let s=this.left.length+this.break;if(e<s)return this.balanced(this.left.replace(t,e,i),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-s,e-s,i));let a=[];t>0&&this.decomposeLeft(t,a);let o=a.length;for(let c of i)a.push(c);if(t>0&&Vb(a,o-1),e<this.length){let c=a.length;this.decomposeRight(e,a),Vb(a,c)}return Ye.of(a)}decomposeLeft(t,e){let i=this.left.length;if(t<=i)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(i++,t>=i&&e.push(null)),t>i&&this.right.decomposeLeft(t-i,e)}decomposeRight(t,e){let i=this.left.length,s=i+this.break;if(t>=s)return this.right.decomposeRight(t-s,e);t<i&&this.left.decomposeRight(t,e),this.break&&t<s&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?Ye.of(this.break?[t,null,e]:[t,e]):(this.left=vc(this.left,t),this.right=vc(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,i=!1,s){let{left:a,right:o}=this,c=e+a.length+this.break,h=null;return s&&s.from<=e+a.length&&s.more?h=a=a.updateHeight(t,e,i,s):a.updateHeight(t,e,i),s&&s.from<=c+o.length&&s.more?h=o=o.updateHeight(t,c,i,s):o.updateHeight(t,c,i),h?this.balanced(a,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Vb(l,t){let e,i;l[t]==null&&(e=l[t-1])instanceof Ne&&(i=l[t+1])instanceof Ne&&l.splice(t-1,3,new Ne(e.length+1+i.length))}const pM=5;class Sp{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let i=Math.min(e,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof pi?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new pi(i-this.pos,-1,0)),this.writtenTo=i,e>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,i){if(t<e||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,a=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let o=e-t;i.block?this.addBlock(new _x(o,s,i)):(o||a||s>=pM)&&this.addLineDeco(s,a,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new pi(this.pos-t,-1,0)),this.writtenTo=this.pos}blankContent(t,e){let i=new Ne(e-t);return this.oracle.doc.lineAt(t).to==e&&(i.flags|=4),i}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof pi)return t;let e=new pi(0,-1,0);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,t),s.breaks+=e,this.writtenTo=this.pos=this.pos+i}finish(t){let e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(e instanceof pi)&&!this.isCovered?this.nodes.push(new pi(0,-1,0)):(this.writtenTo<this.pos||e==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=t;for(let s of this.nodes)s instanceof pi&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(t,e,i,s){let a=new Sp(i,t);return Bt.spans(e,i,s,a,0),a.finish(i)}}function gM(l,t,e){let i=new yM;return Bt.compare(l,t,e,i,0),i.changes}class yM{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,i,s){(t<e||i&&i.heightRelevant||s&&s.heightRelevant)&&Is(t,e,this.changes,5)}}function bM(l,t){let e=l.getBoundingClientRect(),i=l.ownerDocument,s=i.defaultView||window,a=Math.max(0,e.left),o=Math.min(s.innerWidth,e.right),c=Math.max(0,e.top),h=Math.min(s.innerHeight,e.bottom);for(let d=l.parentNode;d&&d!=i.body;)if(d.nodeType==1){let p=d,y=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&y.overflow!="visible"){let b=p.getBoundingClientRect();a=Math.max(a,b.left),o=Math.min(o,b.right),c=Math.max(c,b.top),h=Math.min(d==l.parentNode?s.innerHeight:h,b.bottom)}d=y.position=="absolute"||y.position=="fixed"?p.offsetParent:p.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:a-e.left,right:Math.max(a,o)-e.left,top:c-(e.top+t),bottom:Math.max(c,h)-(e.top+t)}}function vM(l){let t=l.getBoundingClientRect(),e=l.ownerDocument.defaultView||window;return t.left<e.innerWidth&&t.right>0&&t.top<e.innerHeight&&t.bottom>0}function SM(l,t){let e=l.getBoundingClientRect();return{left:0,right:e.right-e.left,top:t,bottom:e.bottom-(e.top+t)}}class Rd{constructor(t,e,i,s){this.from=t,this.to=e,this.size=i,this.displaySize=s}static same(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++){let s=t[i],a=e[i];if(s.from!=a.from||s.to!=a.to||s.size!=a.size)return!1}return!0}draw(t,e){return ht.replace({widget:new xM(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class xM extends Wi{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class Ub{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=jb,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Zt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(yp).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new fM(e),this.stateDeco=t.facet(Ha).filter(i=>typeof i!="function"),this.heightMap=Ye.empty().applyChanges(this.stateDeco,qt.empty,this.heightOracle.setDoc(t.doc),[new Mi(0,0,0,t.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ht.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let i=0;i<=1;i++){let s=i?e.head:e.anchor;if(!t.some(({from:a,to:o})=>s>=a&&s<=o)){let{from:a,to:o}=this.lineBlockAt(s);t.push(new _u(a,o))}}return this.viewports=t.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?jb:new xp(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(Sa(t,this.scaler))})}update(t,e=null){this.state=t.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Ha).filter(p=>typeof p!="function");let s=t.changedRanges,a=Mi.extendWithRanges(s,gM(i,this.stateDeco,t?t.changes:be.empty(this.state.doc.length))),o=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);qb(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),a),(this.heightMap.height!=o||ar)&&(t.flags|=2),c?(this.scrollAnchorPos=t.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let h=a.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<h.from||e.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,e));let d=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,t.flags|=this.updateForViewport(),(d||!t.changes.empty||t.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(dx)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,i=window.getComputedStyle(e),s=this.heightOracle,a=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Zt.RTL:Zt.LTR;let o=this.heightOracle.mustRefreshForWrapping(a),c=e.getBoundingClientRect(),h=o||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let d=0,p=0;if(c.width&&c.height){let{scaleX:P,scaleY:Q}=IS(e,c);(P>.005&&Math.abs(this.scaleX-P)>.005||Q>.005&&Math.abs(this.scaleY-Q)>.005)&&(this.scaleX=P,this.scaleY=Q,d|=16,o=h=!0)}let y=(parseInt(i.paddingTop)||0)*this.scaleY,b=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=y||this.paddingBottom!=b)&&(this.paddingTop=y,this.paddingBottom=b,d|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(s.lineWrapping&&(h=!0),this.editorWidth=t.scrollDOM.clientWidth,d|=16);let S=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=S&&(this.scrollAnchorHeight=-1,this.scrollTop=S),this.scrolledToBottom=FS(t.scrollDOM);let O=(this.printing?SM:bM)(e,this.paddingTop),w=O.top-this.pixelViewport.top,C=O.bottom-this.pixelViewport.bottom;this.pixelViewport=O;let M=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(M!=this.inView&&(this.inView=M,M&&(h=!0)),!this.inView&&!this.scrollTarget&&!vM(t.dom))return 0;let H=c.width;if((this.contentDOMWidth!=H||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=t.scrollDOM.clientHeight,d|=16),h){let P=t.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(P)&&(o=!0),o||s.lineWrapping&&Math.abs(H-this.contentDOMWidth)>s.charWidth){let{lineHeight:Q,charWidth:G,textHeight:V}=t.docView.measureTextSize();o=Q>0&&s.refresh(a,Q,G,V,Math.max(5,H/G),P),o&&(t.docView.minWidth=0,d|=16)}w>0&&C>0?p=Math.max(w,C):w<0&&C<0&&(p=Math.min(w,C)),qb();for(let Q of this.viewports){let G=Q.from==this.viewport.from?P:t.docView.measureVisibleLineHeights(Q);this.heightMap=(o?Ye.empty().applyChanges(this.stateDeco,qt.empty,this.heightOracle,[new Mi(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new hM(Q.from,G))}ar&&(d|=2)}let q=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return q&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),d|=this.updateForViewport()),(d&2||q)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let i=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),s=this.heightMap,a=this.heightOracle,{visibleTop:o,visibleBottom:c}=this,h=new _u(s.lineAt(o-i*1e3,Ft.ByHeight,a,0,0).from,s.lineAt(c+(1-i)*1e3,Ft.ByHeight,a,0,0).to);if(e){let{head:d}=e.range;if(d<h.from||d>h.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),y=s.lineAt(d,Ft.ByPos,a,0,0),b;e.y=="center"?b=(y.top+y.bottom)/2-p/2:e.y=="start"||e.y=="nearest"&&d<h.from?b=y.top:b=y.bottom-p,h=new _u(s.lineAt(b-1e3/2,Ft.ByHeight,a,0,0).from,s.lineAt(b+p+1e3/2,Ft.ByHeight,a,0,0).to)}}return h}mapViewport(t,e){let i=e.mapPos(t.from,-1),s=e.mapPos(t.to,1);return new _u(this.heightMap.lineAt(i,Ft.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,Ft.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(t,Ft.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(e,Ft.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:c}=this;return(t==0||s<=o-Math.max(10,Math.min(-i,250)))&&(e==this.state.doc.length||a>=c+Math.max(10,Math.min(i,250)))&&s>o-2*1e3&&a<c+2*1e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let i=[];for(let s of t)e.touchesRange(s.from,s.to)||i.push(new Rd(e.mapPos(s.from),e.mapPos(s.to),s.size,s.displaySize));return i}ensureLineGaps(t,e){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,a=s>>1,o=s<<1;if(this.defaultTextDirection!=Zt.LTR&&!i)return[];let c=[],h=(p,y,b,S)=>{if(y-p<a)return;let O=this.state.selection.main,w=[O.from];O.empty||w.push(O.to);for(let M of w)if(M>p&&M<y){h(p,M-10,b,S),h(M+10,y,b,S);return}let C=wM(t,M=>M.from>=b.from&&M.to<=b.to&&Math.abs(M.from-p)<a&&Math.abs(M.to-y)<a&&!w.some(H=>M.from<H&&M.to>H));if(!C){if(y<b.to&&e&&i&&e.visibleRanges.some(q=>q.from<=y&&q.to>=y)){let q=e.moveToLineBoundary(W.cursor(y),!1,!0).head;q>p&&(y=q)}let M=this.gapSize(b,p,y,S),H=i||M<2e6?M:2e6;C=new Rd(p,y,M,H)}c.push(C)},d=p=>{if(p.length<o||p.type!=_e.Text)return;let y=OM(p.from,p.to,this.stateDeco);if(y.total<o)return;let b=this.scrollTarget?this.scrollTarget.range.head:null,S,O;if(i){let w=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,C,M;if(b!=null){let H=qu(y,b),q=((this.visibleBottom-this.visibleTop)/2+w)/p.height;C=H-q,M=H+q}else C=(this.visibleTop-p.top-w)/p.height,M=(this.visibleBottom-p.top+w)/p.height;S=Hu(y,C),O=Hu(y,M)}else{let w=y.total*this.heightOracle.charWidth,C=s*this.heightOracle.charWidth,M=0;if(w>2e6)for(let G of t)G.from>=p.from&&G.from<p.to&&G.size!=G.displaySize&&G.from*this.heightOracle.charWidth+M<this.pixelViewport.left&&(M=G.size-G.displaySize);let H=this.pixelViewport.left+M,q=this.pixelViewport.right+M,P,Q;if(b!=null){let G=qu(y,b),V=((q-H)/2+C)/w;P=G-V,Q=G+V}else P=(H-C)/w,Q=(q+C)/w;S=Hu(y,P),O=Hu(y,Q)}S>p.from&&h(p.from,S,p,y),O<p.to&&h(O,p.to,p,y)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(d):d(p);return c}gapSize(t,e,i,s){let a=qu(s,i)-qu(s,e);return this.heightOracle.lineWrapping?t.height*a:s.total*this.heightOracle.charWidth*a}updateLineGaps(t){Rd.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=ht.set(t.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];Bt.spans(e,this.viewport.from,this.viewport.to,{span(a,o){i.push({from:a,to:o})},point(){}},20);let s=0;if(i.length!=this.visibleRanges.length)s=12;else for(let a=0;a<i.length&&!(s&8);a++){let o=this.visibleRanges[a],c=i[a];(o.from!=c.from||o.to!=c.to)&&(s|=4,t&&t.mapPos(o.from,-1)==c.from&&t.mapPos(o.to,1)==c.to||(s|=8))}return this.visibleRanges=i,s}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(e=>e.from<=t&&e.to>=t)||Sa(this.heightMap.lineAt(t,Ft.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(e=>e.top<=t&&e.bottom>=t)||Sa(this.heightMap.lineAt(this.scaler.fromDOM(t),Ft.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return Sa(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class _u{constructor(t,e){this.from=t,this.to=e}}function OM(l,t,e){let i=[],s=l,a=0;return Bt.spans(e,l,t,{span(){},point(o,c){o>s&&(i.push({from:s,to:o}),a+=o-s),s=c}},20),s<t&&(i.push({from:s,to:t}),a+=t-s),{total:a,ranges:i}}function Hu({total:l,ranges:t},e){if(e<=0)return t[0].from;if(e>=1)return t[t.length-1].to;let i=Math.floor(l*e);for(let s=0;;s++){let{from:a,to:o}=t[s],c=o-a;if(i<=c)return a+i;i-=c}}function qu(l,t){let e=0;for(let{from:i,to:s}of l.ranges){if(t<=s){e+=t-i;break}e+=s-i}return e/l.total}function wM(l,t){for(let e of l)if(t(e))return e}const jb={toDOM(l){return l},fromDOM(l){return l},scale:1,eq(l){return l==this}};class xp{constructor(t,e,i){let s=0,a=0,o=0;this.viewports=i.map(({from:c,to:h})=>{let d=e.lineAt(c,Ft.ByPos,t,0,0).top,p=e.lineAt(h,Ft.ByPos,t,0,0).bottom;return s+=p-d,{from:c,to:h,top:d,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(e.height-s);for(let c of this.viewports)c.domTop=o+(c.top-a)*this.scale,o=c.domBottom=c.domTop+(c.bottom-c.top),a=c.bottom}toDOM(t){for(let e=0,i=0,s=0;;e++){let a=e<this.viewports.length?this.viewports[e]:null;if(!a||t<a.top)return s+(t-i)*this.scale;if(t<=a.bottom)return a.domTop+(t-a.top);i=a.bottom,s=a.domBottom}}fromDOM(t){for(let e=0,i=0,s=0;;e++){let a=e<this.viewports.length?this.viewports[e]:null;if(!a||t<a.domTop)return i+(t-s)/this.scale;if(t<=a.domBottom)return a.top+(t-a.domTop);i=a.bottom,s=a.domBottom}}eq(t){return t instanceof xp?this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((e,i)=>e.from==t.viewports[i].from&&e.to==t.viewports[i].to):!1}}function Sa(l,t){if(t.scale==1)return l;let e=t.toDOM(l.top),i=t.toDOM(l.bottom);return new qi(l.from,l.length,e,i-e,Array.isArray(l._content)?l._content.map(s=>Sa(s,t)):l._content)}const Vu=st.define({combine:l=>l.join(" ")}),Lm=st.define({combine:l=>l.indexOf(!0)>-1}),_m=Sl.newName(),Hx=Sl.newName(),qx=Sl.newName(),Vx={"&light":"."+Hx,"&dark":"."+qx};function Hm(l,t,e){return new Sl(t,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return l;if(!e||!e[s])throw new RangeError(`Unsupported selector: ${s}`);return e[s]}):l+" "+i}})}const CM=Hm("."+_m,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Vx),kM={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Bd=rt.ie&&rt.ie_version<=11;class AM{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new nT,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(e=>{for(let i of e)this.queue.push(i);(rt.ie&&rt.ie_version<=11||rt.ios&&t.composing)&&e.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&rt.android&&t.constructor.EDIT_CONTEXT!==!1&&!(rt.chrome&&rt.chrome_version<126)&&(this.editContext=new MM(t),t.state.facet(Nn)&&(t.contentDOM.editContext=this.editContext.editContext)),Bd&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var e;((e=this.view.docView)===null||e===void 0?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(t){(t.type=="change"||!t.type)&&!t.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((e,i)=>e!=t[i]))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(Nn)?i.root.activeElement!=this.dom:!ic(this.dom,s))return;let a=s.anchorNode&&i.docView.tile.nearest(s.anchorNode);if(a&&a.isWidget()&&a.widget.ignoreEvent(t)){e||(this.selectionChanged=!1);return}(rt.ie&&rt.ie_version<=11||rt.android&&rt.chrome)&&!i.state.selection.main.empty&&s.focusNode&&Aa(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=za(t.root);if(!e)return!1;let i=rt.safari&&t.root.nodeType==11&&t.root.activeElement==this.dom&&TM(this.view,e)||e;if(!i||this.selectionRange.eq(i))return!1;let s=ic(this.dom,i);return s&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&sT(this.dom,i)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let i=this.dom;i;)if(i.nodeType==1)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==i?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=e)i.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,kM),Bd&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Bd&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var i;if(!this.delayedAndroidKey){let s=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&Zs(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,i=-1,s=!1;for(let a of t){let o=this.readMutation(a);o&&(o.typeOver&&(s=!0),e==-1?{from:e,to:i}=o:(e=Math.min(o.from,e),i=Math.max(o.to,i)))}return{from:e,to:i,typeOver:s}}readChange(){let{from:t,to:e,typeOver:i}=this.processRecords(),s=this.selectionChanged&&ic(this.dom,this.selectionRange);if(t<0&&!s)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let a=new QT(this.view,t,e,i);return this.view.docView.domChanged={newSel:a.newSel?a.newSel.main:null},a}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let i=this.view.state,s=Ax(this.view,e);return this.view.state==i&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(t){let e=this.view.docView.tile.nearest(t.target);if(!e||e.isWidget())return null;if(e.markDirty(t.type=="attributes"),t.type=="childList"){let i=Wb(e,t.previousSibling||t.target.previousSibling,-1),s=Wb(e,t.nextSibling||t.target.nextSibling,1);return{from:i?e.posAfter(i):e.posAtStart,to:s?e.posBefore(s):e.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(Nn)!=t.state.facet(Nn)&&(t.view.contentDOM.editContext=t.state.facet(Nn)?this.editContext.editContext:null))}destroy(){var t,e,i;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(e=this.gapIntersection)===null||e===void 0||e.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Wb(l,t,e){for(;t;){let i=ge.get(t);if(i&&i.parent==l)return i;let s=t.parentNode;t=s!=l.dom?s:e>0?t.nextSibling:t.previousSibling}return null}function Yb(l,t){let e=t.startContainer,i=t.startOffset,s=t.endContainer,a=t.endOffset,o=l.docView.domAtPos(l.state.selection.main.anchor,1);return Aa(o.node,o.offset,s,a)&&([e,i,s,a]=[s,a,e,i]),{anchorNode:e,anchorOffset:i,focusNode:s,focusOffset:a}}function TM(l,t){if(t.getComposedRanges){let s=t.getComposedRanges(l.root)[0];if(s)return Yb(l,s)}let e=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),e=s.getTargetRanges()[0]}return l.contentDOM.addEventListener("beforeinput",i,!0),l.dom.ownerDocument.execCommand("indent"),l.contentDOM.removeEventListener("beforeinput",i,!0),e?Yb(l,e):null}class MM{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=i=>{let s=t.state.selection.main,{anchor:a,head:o}=s,c=this.toEditorPos(i.updateRangeStart),h=this.toEditorPos(i.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:c,drifted:!1});let d=h-c>i.text.length;c==this.from&&a<this.from?c=a:h==this.to&&a>this.to&&(h=a);let p=Tx(t.state.sliceDoc(c,h),i.text,(d?s.from:s.to)-c,d?"end":null);if(!p){let b=W.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));b.main.eq(s)||t.dispatch({selection:b,userEvent:"select"});return}let y={from:p.from+c,to:p.toA+c,insert:qt.of(i.text.slice(p.from,p.toB).split(`
`))};if((rt.mac||rt.android)&&y.from==o-1&&/^\. ?$/.test(i.text)&&t.contentDOM.getAttribute("autocorrect")=="off"&&(y={from:c,to:h,insert:qt.of([i.text.replace("."," ")])}),this.pendingContextChange=y,!t.state.readOnly){let b=this.to-this.from+(y.to-y.from+y.insert.length);vp(t,y,W.single(this.toEditorPos(i.selectionStart,b),this.toEditorPos(i.selectionEnd,b)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state)),y.from<y.to&&!y.insert.length&&t.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(e.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(e.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let s=[],a=null;for(let o=this.toEditorPos(i.rangeStart),c=this.toEditorPos(i.rangeEnd);o<c;o++){let h=t.coordsForChar(o);a=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||a||new DOMRect,s.push(a)}e.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let a of i.getTextFormats()){let o=a.underlineStyle,c=a.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(c)){let h=this.toEditorPos(a.rangeStart),d=this.toEditorPos(a.rangeEnd);if(h<d){let p=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(c)?1:2}px`;s.push(ht.mark({attributes:{style:p}}).range(h,d))}}}t.dispatch({effects:px.of(ht.set(s))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(t.state)}};for(let i in this.handlers)e.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=za(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,i=!1,s=this.pendingContextChange;return t.changes.iterChanges((a,o,c,h,d)=>{if(i)return;let p=d.length-(o-a);if(s&&o>=s.to)if(s.from==a&&s.to==o&&s.insert.eq(d)){s=this.pendingContextChange=null,e+=p,this.to+=p;return}else s=null,this.revertPending(t.state);if(a+=e,o+=e,o<=this.from)this.from+=p,this.to+=p;else if(a<this.to){if(a<this.from||o>this.to||this.to-this.from+d.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(a),this.toContextPos(o),d.toString()),this.to+=p}e+=p}),s&&!i&&this.revertPending(t.state),!i}update(t){let e=this.pendingContextChange,i=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(i.from,i.to)&&t.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):!this.applyEdits(t)||!this.rangeIsValid(t.state)?(this.pendingContextChange=null,this.reset(t.state)):(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),s=this.toContextPos(e.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>1e4*3)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let i=this.composing;return i&&i.drifted?i.editorBase+(t-i.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class Z{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:i}=t;this.dispatchTransactions=t.dispatchTransactions||i&&(s=>s.forEach(a=>i(a,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=t.root||lT(t.parent)||document,this.viewState=new Ub(t.state||Lt.create(t)),t.scrollTo&&t.scrollTo.is(Nu)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Qs).map(s=>new Ad(s));for(let s of this.plugins)s.update(this);this.observer=new AM(this),this.inputState=new KT(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Ab(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((e=document.fonts)===null||e===void 0)&&e.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...t){let e=t.length==1&&t[0]instanceof pe?t:t.length==1&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e=!1,i=!1,s,a=this.state;for(let b of t){if(b.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=b.state}if(this.destroyed){this.viewState.state=a;return}let o=this.hasFocus,c=0,h=null;t.some(b=>b.annotation(Nx))?(this.inputState.notifiedFocused=o,c=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,h=zx(a,o),h||(c=1));let d=this.observer.delayedAndroidKey,p=null;if(d?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(p=null)):this.observer.clear(),a.facet(Lt.phrases)!=this.state.facet(Lt.phrases))return this.setState(a);s=gc.create(this,a,t),s.flags|=c;let y=this.viewState.scrollTarget;try{this.updateState=2;for(let b of t){if(y&&(y=y.map(b.changes)),b.scrollIntoView){let{main:S}=b.state.selection;y=new Fs(S.empty?S:W.cursor(S.head,S.head>S.anchor?-1:1))}for(let S of b.effects)S.is(Nu)&&(y=S.value.clip(this.state))}this.viewState.update(s,y),this.bidiCache=Sc.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),e=this.docView.update(s),this.state.facet(ba)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(e,t.some(b=>b.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Vu)!=s.state.facet(Vu)&&(this.viewState.mustMeasureContent=!0),(e||i||y||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),e&&this.docViewUpdate(),!s.empty)for(let b of this.state.facet(Dm))try{b(s)}catch(S){ii(this.state,S,"update listener")}(h||p)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),p&&!Ax(this,p)&&d.force&&Zs(this.contentDOM,d.key,d.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let e=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Ub(t),this.plugins=t.facet(Qs).map(i=>new Ad(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Ab(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(Qs),i=t.state.facet(Qs);if(e!=i){let s=[];for(let a of i){let o=e.indexOf(a);if(o<0)s.push(new Ad(a));else{let c=this.plugins[o];c.mustUpdate=t,s.push(c)}}for(let a of this.plugins)a.mustUpdate!=t&&a.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=t;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);e!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(i){ii(this.state,i,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:a,scrollAnchorHeight:o}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(o<0)if(FS(i))a=-1,o=this.viewState.heightMap.height;else{let S=this.viewState.scrollAnchorAt(s);a=S.from,o=S.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];h&4||([this.measureRequests,d]=[d,this.measureRequests]);let p=d.map(S=>{try{return S.read(this)}catch(O){return ii(this.state,O),Xb}}),y=gc.create(this,this.state,[]),b=!1;y.flags|=h,e?e.flags|=h:e=y,this.updateState=2,y.empty||(this.updatePlugins(y),this.inputState.update(y),this.updateAttrs(),b=this.docView.update(y),b&&this.docViewUpdate());for(let S=0;S<d.length;S++)if(p[S]!=Xb)try{let O=d[S];O.write&&O.write(p[S],this)}catch(O){ii(this.state,O)}if(b&&this.docView.updateSelection(!0),!y.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let O=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-o;if(O>1||O<-1){s=s+O,i.scrollTop=s/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let c of this.state.facet(Dm))c(e)}get themeClasses(){return _m+" "+(this.state.facet(Lm)?qx:Hx)+" "+this.state.facet(Vu)}updateAttrs(){let t=Qb(this,gx,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Nn)?"true":"false",class:"cm-content",style:`${rt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),Qb(this,yp,e);let i=this.observer.ignore(()=>{let s=Sb(this.contentDOM,this.contentAttrs,e),a=Sb(this.dom,this.editorAttrs,t);return s||a});return this.editorAttrs=t,this.contentAttrs=e,i}showAnnouncements(t){let e=!0;for(let i of t)for(let s of i.effects)if(s.is(Z.announce)){e&&(this.announceDOM.textContent=""),e=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(ba);let t=this.state.facet(Z.cspNonce);Sl.mount(this.root,this.styleModules.concat(CM).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key){this.measureRequests[e]=t;return}}this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(e===void 0||e&&e.plugin!=t)&&this.pluginMap.set(t,e=this.plugins.find(i=>i.plugin==t)||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,i){return Dd(this,t,Tb(this,t,e,i))}moveByGroup(t,e){return Dd(this,t,Tb(this,t,e,i=>UT(this,t.head,i)))}visualLineSide(t,e){let i=this.bidiSpans(t),s=this.textDirectionAt(t.from),a=i[e?i.length-1:0];return W.cursor(a.side(e,s)+t.from,a.forward(!e,s)?1:-1)}moveToLineBoundary(t,e,i=!0){return VT(this,t,e,i)}moveVertically(t,e,i){return Dd(this,t,jT(this,t,e,i))}domAtPos(t,e=1){return this.docView.domAtPos(t,e)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){this.readMeasured();let i=Nm(this,t,e);return i&&i.pos}posAndSideAtCoords(t,e=!0){return this.readMeasured(),Nm(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let i=this.docView.coordsAt(t,e);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(t),a=this.bidiSpans(s),o=a[zn.find(a,t-s.from,-1,e)];return La(i,o.dir==Zt.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(hx)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>EM)return lx(t.length);let e=this.textDirectionAt(t.from),i;for(let a of this.bidiCache)if(a.from==t.from&&a.dir==e&&(a.fresh||nx(a.isolates,i=wb(this,t))))return a.order;i||(i=wb(this,t));let s=hT(t.text,e,i);return this.bidiCache.push(new Sc(t.from,t.to,e,i,!0,s)),s}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||rt.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{ZS(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return Nu.of(new Fs(typeof t=="number"?W.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,i=this.viewState.scrollAnchorAt(t);return Nu.of(new Fs(W.cursor(i.from),"start","start",i.top-t,e,!0))}setTabFocusMode(t){t==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof t=="boolean"?this.inputState.tabFocusMode=t?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return ce.define(()=>({}),{eventHandlers:t})}static domEventObservers(t){return ce.define(()=>({}),{eventObservers:t})}static theme(t,e){let i=Sl.newName(),s=[Vu.of(i),ba.of(Hm(`.${i}`,t))];return e&&e.dark&&s.push(Lm.of(!0)),s}static baseTheme(t){return Al.lowest(ba.of(Hm("."+_m,t,Vx)))}static findFromDOM(t){var e;let i=t.querySelector(".cm-content"),s=i&&ge.get(i)||ge.get(t);return((e=s?.root)===null||e===void 0?void 0:e.view)||null}}Z.styleModule=ba;Z.inputHandler=cx;Z.clipboardInputFilter=pp;Z.clipboardOutputFilter=gp;Z.scrollHandler=mx;Z.focusChangeEffect=fx;Z.perLineTextDirection=hx;Z.exceptionSink=ux;Z.updateListener=Dm;Z.editable=Nn;Z.mouseSelectionStyle=ox;Z.dragMovesSelection=ax;Z.clickAddsSelectionRange=rx;Z.decorations=Ha;Z.blockWrappers=yx;Z.outerDecorations=bx;Z.atomicRanges=eo;Z.bidiIsolatedRanges=vx;Z.scrollMargins=Sx;Z.darkTheme=Lm;Z.cspNonce=st.define({combine:l=>l.length?l[0]:""});Z.contentAttributes=yp;Z.editorAttributes=gx;Z.lineWrapping=Z.contentAttributes.of({class:"cm-lineWrapping"});Z.announce=xt.define();const EM=4096,Xb={};class Sc{constructor(t,e,i,s,a,o){this.from=t,this.to=e,this.dir=i,this.isolates=s,this.fresh=a,this.order=o}static update(t,e){if(e.empty&&!t.some(a=>a.fresh))return t;let i=[],s=t.length?t[t.length-1].dir:Zt.LTR;for(let a=Math.max(0,t.length-10);a<t.length;a++){let o=t[a];o.dir==s&&!e.touchesRange(o.from,o.to)&&i.push(new Sc(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function Qb(l,t,e){for(let i=l.state.facet(t),s=i.length-1;s>=0;s--){let a=i[s],o=typeof a=="function"?a(l):a;o&&hp(o,e)}return e}const DM=rt.mac?"mac":rt.windows?"win":rt.linux?"linux":"key";function RM(l,t){const e=l.split(/-(?!$)/);let i=e[e.length-1];i=="Space"&&(i=" ");let s,a,o,c;for(let h=0;h<e.length-1;++h){const d=e[h];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))t=="mac"?c=!0:a=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(i="Alt-"+i),a&&(i="Ctrl-"+i),c&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Uu(l,t,e){return t.altKey&&(l="Alt-"+l),t.ctrlKey&&(l="Ctrl-"+l),t.metaKey&&(l="Meta-"+l),e!==!1&&t.shiftKey&&(l="Shift-"+l),l}const BM=Al.default(Z.domEventHandlers({keydown(l,t){return jx(Ux(t.state),l,t,"editor")}})),io=st.define({enables:BM}),Gb=new WeakMap;function Ux(l){let t=l.facet(io),e=Gb.get(t);return e||Gb.set(t,e=LM(t.reduce((i,s)=>i.concat(s),[]))),e}function NM(l,t,e){return jx(Ux(l.state),t,l,e)}let pl=null;const zM=4e3;function LM(l,t=DM){let e=Object.create(null),i=Object.create(null),s=(o,c)=>{let h=i[o];if(h==null)i[o]=c;else if(h!=c)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},a=(o,c,h,d,p)=>{var y,b;let S=e[o]||(e[o]=Object.create(null)),O=c.split(/ (?!$)/).map(M=>RM(M,t));for(let M=1;M<O.length;M++){let H=O.slice(0,M).join(" ");s(H,!0),S[H]||(S[H]={preventDefault:!0,stopPropagation:!1,run:[q=>{let P=pl={view:q,prefix:H,scope:o};return setTimeout(()=>{pl==P&&(pl=null)},zM),!0}]})}let w=O.join(" ");s(w,!1);let C=S[w]||(S[w]={preventDefault:!1,stopPropagation:!1,run:((b=(y=S._any)===null||y===void 0?void 0:y.run)===null||b===void 0?void 0:b.slice())||[]});h&&C.run.push(h),d&&(C.preventDefault=!0),p&&(C.stopPropagation=!0)};for(let o of l){let c=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let d of c){let p=e[d]||(e[d]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:y}=o;for(let b in p)p[b].run.push(S=>y(S,qm))}let h=o[t]||o.key;if(h)for(let d of c)a(d,h,o.run,o.preventDefault,o.stopPropagation),o.shift&&a(d,"Shift-"+h,o.shift,o.preventDefault,o.stopPropagation)}return e}let qm=null;function jx(l,t,e,i){qm=t;let s=KA(t),a=Je(s,0),o=tn(a)==s.length&&s!=" ",c="",h=!1,d=!1,p=!1;pl&&pl.view==e&&pl.scope==i&&(c=pl.prefix+" ",Ex.indexOf(t.keyCode)<0&&(d=!0,pl=null));let y=new Set,b=C=>{if(C){for(let M of C.run)if(!y.has(M)&&(y.add(M),M(e)))return C.stopPropagation&&(p=!0),!0;C.preventDefault&&(C.stopPropagation&&(p=!0),d=!0)}return!1},S=l[i],O,w;return S&&(b(S[c+Uu(s,t,!o)])?h=!0:o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(rt.windows&&t.ctrlKey&&t.altKey)&&!(rt.mac&&t.altKey&&!(t.ctrlKey||t.metaKey))&&(O=xl[t.keyCode])&&O!=s?(b(S[c+Uu(O,t,!0)])||t.shiftKey&&(w=Ba[t.keyCode])!=s&&w!=O&&b(S[c+Uu(w,t,!1)]))&&(h=!0):o&&t.shiftKey&&b(S[c+Uu(s,t,!0)])&&(h=!0),!h&&b(S._any)&&(h=!0)),d&&(h=!0),h&&p&&t.stopPropagation(),qm=null,h}class no{constructor(t,e,i,s,a){this.className=t,this.left=e,this.top=i,this.width=s,this.height=a}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,i){if(i.empty){let s=t.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let a=Wx(t);return[new no(e,s.left-a.left,s.top-a.top,null,s.bottom-s.top)]}else return _M(t,e,i)}}function Wx(l){let t=l.scrollDOM.getBoundingClientRect();return{left:(l.textDirection==Zt.LTR?t.left:t.right-l.scrollDOM.clientWidth*l.scaleX)-l.scrollDOM.scrollLeft*l.scaleX,top:t.top-l.scrollDOM.scrollTop*l.scaleY}}function Pb(l,t,e,i){let s=l.coordsAtPos(t,e*2);if(!s)return i;let a=l.dom.getBoundingClientRect(),o=(s.top+s.bottom)/2,c=l.posAtCoords({x:a.left+1,y:o}),h=l.posAtCoords({x:a.right-1,y:o});return c==null||h==null?i:{from:Math.max(i.from,Math.min(c,h)),to:Math.min(i.to,Math.max(c,h))}}function _M(l,t,e){if(e.to<=l.viewport.from||e.from>=l.viewport.to)return[];let i=Math.max(e.from,l.viewport.from),s=Math.min(e.to,l.viewport.to),a=l.textDirection==Zt.LTR,o=l.contentDOM,c=o.getBoundingClientRect(),h=Wx(l),d=o.querySelector(".cm-line"),p=d&&window.getComputedStyle(d),y=c.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),b=c.right-(p?parseInt(p.paddingRight):0),S=Bm(l,i,1),O=Bm(l,s,-1),w=S.type==_e.Text?S:null,C=O.type==_e.Text?O:null;if(w&&(l.lineWrapping||S.widgetLineBreaks)&&(w=Pb(l,i,1,w)),C&&(l.lineWrapping||O.widgetLineBreaks)&&(C=Pb(l,s,-1,C)),w&&C&&w.from==C.from&&w.to==C.to)return H(q(e.from,e.to,w));{let Q=w?q(e.from,null,w):P(S,!1),G=C?q(null,e.to,C):P(O,!0),V=[];return(w||S).to<(C||O).from-(w&&C?1:0)||S.widgetLineBreaks>1&&Q.bottom+l.defaultLineHeight/2<G.top?V.push(M(y,Q.bottom,b,G.top)):Q.bottom<G.top&&l.elementAtHeight((Q.bottom+G.top)/2).type==_e.Text&&(Q.bottom=G.top=(Q.bottom+G.top)/2),H(Q).concat(V).concat(H(G))}function M(Q,G,V,ut){return new no(t,Q-h.left,G-h.top,V-Q,ut-G)}function H({top:Q,bottom:G,horizontal:V}){let ut=[];for(let nt=0;nt<V.length;nt+=2)ut.push(M(V[nt],Q,V[nt+1],G));return ut}function q(Q,G,V){let ut=1e9,nt=-1e9,gt=[];function ft(mt,St,B,K,tt){let at=l.coordsAtPos(mt,mt==V.to?-2:2),vt=l.coordsAtPos(B,B==V.from?2:-2);!at||!vt||(ut=Math.min(at.top,vt.top,ut),nt=Math.max(at.bottom,vt.bottom,nt),tt==Zt.LTR?gt.push(a&&St?y:at.left,a&&K?b:vt.right):gt.push(!a&&K?y:vt.left,!a&&St?b:at.right))}let et=Q??V.from,pt=G??V.to;for(let mt of l.visibleRanges)if(mt.to>et&&mt.from<pt)for(let St=Math.max(mt.from,et),B=Math.min(mt.to,pt);;){let K=l.state.doc.lineAt(St);for(let tt of l.bidiSpans(K)){let at=tt.from+K.from,vt=tt.to+K.from;if(at>=B)break;vt>St&&ft(Math.max(at,St),Q==null&&at<=et,Math.min(vt,B),G==null&&vt>=pt,tt.dir)}if(St=K.to+1,St>=B)break}return gt.length==0&&ft(et,Q==null,pt,G==null,l.textDirection),{top:ut,bottom:nt,horizontal:gt}}function P(Q,G){let V=c.top+(G?Q.top:Q.bottom);return{top:V,bottom:V,horizontal:[]}}}function HM(l,t){return l.constructor==t.constructor&&l.eq(t)}class qM{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(lc)!=t.state.facet(lc)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}docViewUpdate(t){this.layer.updateOnDocViewUpdate!==!1&&t.requestMeasure(this.measureReq)}setOrder(t){let e=0,i=t.facet(lc);for(;e<i.length&&i[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:e}=this.view;(t!=this.scaleX||e!=this.scaleY)&&(this.scaleX=t,this.scaleY=e,this.dom.style.transform=`scale(${1/t}, ${1/e})`)}draw(t){if(t.length!=this.drawn.length||t.some((e,i)=>!HM(e,this.drawn[i]))){let e=this.dom.firstChild,i=0;for(let s of t)s.update&&e&&s.constructor&&this.drawn[i].constructor&&s.update(e,this.drawn[i])?(e=e.nextSibling,i++):this.dom.insertBefore(s.draw(),e);for(;e;){let s=e.nextSibling;e.remove(),e=s}this.drawn=t,rt.safari&&rt.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const lc=st.define();function Yx(l){return[ce.define(t=>new qM(t,l)),lc.of(l)]}const qa=st.define({combine(l){return un(l,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})}});function VM(l={}){return[qa.of(l),UM,jM,WM,dx.of(!0)]}function Xx(l){return l.startState.facet(qa)!=l.state.facet(qa)}const UM=Yx({above:!0,markers(l){let{state:t}=l,e=t.facet(qa),i=[];for(let s of t.selection.ranges){let a=s==t.selection.main;if(s.empty||e.drawRangeCursor){let o=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=s.empty?s:W.cursor(s.head,s.head>s.anchor?-1:1);for(let h of no.forRange(l,o,c))i.push(h)}}return i},update(l,t){l.transactions.some(i=>i.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let e=Xx(l);return e&&$b(l.state,t),l.docChanged||l.selectionSet||e},mount(l,t){$b(t.state,l)},class:"cm-cursorLayer"});function $b(l,t){t.style.animationDuration=l.facet(qa).cursorBlinkRate+"ms"}const jM=Yx({above:!1,markers(l){return l.state.selection.ranges.map(t=>t.empty?[]:no.forRange(l,"cm-selectionBackground",t)).reduce((t,e)=>t.concat(e))},update(l,t){return l.docChanged||l.selectionSet||l.viewportChanged||Xx(l)},class:"cm-selectionLayer"}),WM=Al.highest(Z.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Qx=xt.define({map(l,t){return l==null?null:t.mapPos(l)}}),xa=ke.define({create(){return null},update(l,t){return l!=null&&(l=t.changes.mapPos(l)),t.effects.reduce((e,i)=>i.is(Qx)?i.value:e,l)}}),YM=ce.fromClass(class{constructor(l){this.view=l,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(l){var t;let e=l.state.field(xa);e==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(l.startState.field(xa)!=e||l.docChanged||l.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:l}=this,t=l.state.field(xa),e=t!=null&&l.coordsAtPos(t);if(!e)return null;let i=l.scrollDOM.getBoundingClientRect();return{left:e.left-i.left+l.scrollDOM.scrollLeft*l.scaleX,top:e.top-i.top+l.scrollDOM.scrollTop*l.scaleY,height:e.bottom-e.top}}drawCursor(l){if(this.cursor){let{scaleX:t,scaleY:e}=this.view;l?(this.cursor.style.left=l.left/t+"px",this.cursor.style.top=l.top/e+"px",this.cursor.style.height=l.height/e+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(l){this.view.state.field(xa)!=l&&this.view.dispatch({effects:Qx.of(l)})}},{eventObservers:{dragover(l){this.setDropPos(this.view.posAtCoords({x:l.clientX,y:l.clientY}))},dragleave(l){(l.target==this.view.contentDOM||!this.view.contentDOM.contains(l.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function XM(){return[xa,YM]}function Kb(l,t,e,i,s){t.lastIndex=0;for(let a=l.iterRange(e,i),o=e,c;!a.next().done;o+=a.value.length)if(!a.lineBreak)for(;c=t.exec(a.value);)s(o+c.index,c)}function QM(l,t){let e=l.visibleRanges;if(e.length==1&&e[0].from==l.viewport.from&&e[0].to==l.viewport.to)return e;let i=[];for(let{from:s,to:a}of e)s=Math.max(l.state.doc.lineAt(s).from,s-t),a=Math.min(l.state.doc.lineAt(a).to,a+t),i.length&&i[i.length-1].to>=s?i[i.length-1].to=a:i.push({from:s,to:a});return i}class GM{constructor(t){const{regexp:e,decoration:i,decorate:s,boundary:a,maxLength:o=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,s)this.addMatch=(c,h,d,p)=>s(p,d,d+c[0].length,c,h);else if(typeof i=="function")this.addMatch=(c,h,d,p)=>{let y=i(c,h,d);y&&p(d,d+c[0].length,y)};else if(i)this.addMatch=(c,h,d,p)=>p(d,d+c[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=o}createDeco(t){let e=new Hn,i=e.add.bind(e);for(let{from:s,to:a}of QM(t,this.maxLength))Kb(t.state.doc,this.regexp,s,a,(o,c)=>this.addMatch(c,t,o,i));return e.finish()}updateDeco(t,e){let i=1e9,s=-1;return t.docChanged&&t.changes.iterChanges((a,o,c,h)=>{h>=t.view.viewport.from&&c<=t.view.viewport.to&&(i=Math.min(c,i),s=Math.max(h,s))}),t.viewportMoved||s-i>1e3?this.createDeco(t.view):s>-1?this.updateRange(t.view,e.map(t.changes),i,s):e}updateRange(t,e,i,s){for(let a of t.visibleRanges){let o=Math.max(a.from,i),c=Math.min(a.to,s);if(c>=o){let h=t.state.doc.lineAt(o),d=h.to<c?t.state.doc.lineAt(c):h,p=Math.max(a.from,h.from),y=Math.min(a.to,d.to);if(this.boundary){for(;o>h.from;o--)if(this.boundary.test(h.text[o-1-h.from])){p=o;break}for(;c<d.to;c++)if(this.boundary.test(d.text[c-d.from])){y=c;break}}let b=[],S,O=(w,C,M)=>b.push(M.range(w,C));if(h==d)for(this.regexp.lastIndex=p-h.from;(S=this.regexp.exec(h.text))&&S.index<y-h.from;)this.addMatch(S,t,S.index+h.from,O);else Kb(t.state.doc,this.regexp,p,y,(w,C)=>this.addMatch(C,t,w,O));e=e.update({filterFrom:p,filterTo:y,filter:(w,C)=>w<p||C>y,add:b})}}return e}}const Vm=/x/.unicode!=null?"gu":"g",PM=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Vm),$M={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Nd=null;function KM(){var l;if(Nd==null&&typeof document<"u"&&document.body){let t=document.body.style;Nd=((l=t.tabSize)!==null&&l!==void 0?l:t.MozTabSize)!=null}return Nd||!1}const sc=st.define({combine(l){let t=un(l,{render:null,specialChars:PM,addSpecialChars:null});return(t.replaceTabs=!KM())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,Vm)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Vm)),t}});function IM(l={}){return[sc.of(l),ZM()]}let Ib=null;function ZM(){return Ib||(Ib=ce.fromClass(class{constructor(l){this.view=l,this.decorations=ht.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(l.state.facet(sc)),this.decorations=this.decorator.createDeco(l)}makeDecorator(l){return new GM({regexp:l.specialChars,decoration:(t,e,i)=>{let{doc:s}=e.state,a=Je(t[0],0);if(a==9){let o=s.lineAt(i),c=e.state.tabSize,h=fr(o.text,c,i-o.from);return ht.replace({widget:new eE((c-h%c)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[a]||(this.decorationCache[a]=ht.replace({widget:new tE(l,a)}))},boundary:l.replaceTabs?void 0:/[^]/})}update(l){let t=l.state.facet(sc);l.startState.facet(sc)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(l.view)):this.decorations=this.decorator.updateDeco(l,this.decorations)}},{decorations:l=>l.decorations}))}const FM="";function JM(l){return l>=32?FM:l==10?"":String.fromCharCode(9216+l)}class tE extends Wi{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=JM(this.code),i=t.state.phrase("Control character")+" "+($M[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,e);if(s)return s;let a=document.createElement("span");return a.textContent=e,a.title=i,a.setAttribute("aria-label",i),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class eE extends Wi{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function iE(){return lE}const nE=ht.line({class:"cm-activeLine"}),lE=ce.fromClass(class{constructor(l){this.decorations=this.getDeco(l)}update(l){(l.docChanged||l.selectionSet)&&(this.decorations=this.getDeco(l.view))}getDeco(l){let t=-1,e=[];for(let i of l.state.selection.ranges){let s=l.lineBlockAt(i.head);s.from>t&&(e.push(nE.range(s.from)),t=s.from)}return ht.set(e)}},{decorations:l=>l.decorations});class sE extends Wi{constructor(t){super(),this.content=t}toDOM(t){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(t):this.content.cloneNode(!0)),e.setAttribute("aria-hidden","true"),e}coordsAt(t){let e=t.firstChild?ka(t.firstChild):[];if(!e.length)return null;let i=window.getComputedStyle(t.parentNode),s=La(e[0],i.direction!="rtl"),a=parseInt(i.lineHeight);return s.bottom-s.top>a*1.5?{left:s.left,right:s.right,top:s.top,bottom:s.top+a}:s}ignoreEvent(){return!1}}function rE(l){let t=ce.fromClass(class{constructor(e){this.view=e,this.placeholder=l?ht.set([ht.widget({widget:new sE(l),side:1}).range(0)]):ht.none}get decorations(){return this.view.state.doc.length?ht.none:this.placeholder}},{decorations:e=>e.decorations});return typeof l=="string"?[t,Z.contentAttributes.of({"aria-placeholder":l})]:t}const Um=2e3;function aE(l,t,e){let i=Math.min(t.line,e.line),s=Math.max(t.line,e.line),a=[];if(t.off>Um||e.off>Um||t.col<0||e.col<0){let o=Math.min(t.off,e.off),c=Math.max(t.off,e.off);for(let h=i;h<=s;h++){let d=l.doc.line(h);d.length<=c&&a.push(W.range(d.from+o,d.to+c))}}else{let o=Math.min(t.col,e.col),c=Math.max(t.col,e.col);for(let h=i;h<=s;h++){let d=l.doc.line(h),p=vm(d.text,o,l.tabSize,!0);if(p<0)a.push(W.cursor(d.to));else{let y=vm(d.text,c,l.tabSize);a.push(W.range(d.from+p,d.from+y))}}}return a}function oE(l,t){let e=l.coordsAtPos(l.viewport.from);return e?Math.round(Math.abs((e.left-t)/l.defaultCharacterWidth)):-1}function Zb(l,t){let e=l.posAtCoords({x:t.clientX,y:t.clientY},!1),i=l.state.doc.lineAt(e),s=e-i.from,a=s>Um?-1:s==i.length?oE(l,t.clientX):fr(i.text,l.state.tabSize,e-i.from);return{line:i.number,col:a,off:s}}function uE(l,t){let e=Zb(l,t),i=l.state.selection;return e?{update(s){if(s.docChanged){let a=s.changes.mapPos(s.startState.doc.line(e.line).from),o=s.state.doc.lineAt(a);e={line:o.number,col:e.col,off:Math.min(e.off,o.length)},i=i.map(s.changes)}},get(s,a,o){let c=Zb(l,s);if(!c)return i;let h=aE(l.state,e,c);return h.length?o?W.create(h.concat(i.ranges)):W.create(h):i}}:null}function cE(l){let t=(e=>e.altKey&&e.button==0);return Z.mouseSelectionStyle.of((e,i)=>t(i)?uE(e,i):null)}const fE={Alt:[18,l=>!!l.altKey],Control:[17,l=>!!l.ctrlKey],Shift:[16,l=>!!l.shiftKey],Meta:[91,l=>!!l.metaKey]},hE={style:"cursor: crosshair"};function dE(l={}){let[t,e]=fE[l.key||"Alt"],i=ce.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==t||e(s))},keyup(s){(s.keyCode==t||!e(s))&&this.set(!1)},mousemove(s){this.set(e(s))}}});return[i,Z.contentAttributes.of(s=>{var a;return!((a=s.plugin(i))===null||a===void 0)&&a.isDown?hE:null})]}const ju="-10000px";class Gx{constructor(t,e,i,s){this.facet=e,this.createTooltipView=i,this.removeTooltipView=s,this.input=t.state.facet(e),this.tooltips=this.input.filter(o=>o);let a=null;this.tooltipViews=this.tooltips.map(o=>a=i(o,a))}update(t,e){var i;let s=t.state.facet(this.facet),a=s.filter(h=>h);if(s===this.input){for(let h of this.tooltipViews)h.update&&h.update(t);return!1}let o=[],c=e?[]:null;for(let h=0;h<a.length;h++){let d=a[h],p=-1;if(d){for(let y=0;y<this.tooltips.length;y++){let b=this.tooltips[y];b&&b.create==d.create&&(p=y)}if(p<0)o[h]=this.createTooltipView(d,h?o[h-1]:null),c&&(c[h]=!!d.above);else{let y=o[h]=this.tooltipViews[p];c&&(c[h]=e[p]),y.update&&y.update(t)}}}for(let h of this.tooltipViews)o.indexOf(h)<0&&(this.removeTooltipView(h),(i=h.destroy)===null||i===void 0||i.call(h));return e&&(c.forEach((h,d)=>e[d]=h),e.length=c.length),this.input=s,this.tooltips=a,this.tooltipViews=o,!0}}function mE(l){let t=l.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const zd=st.define({combine:l=>{var t,e,i;return{position:rt.ios?"absolute":((t=l.find(s=>s.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((e=l.find(s=>s.parent))===null||e===void 0?void 0:e.parent)||null,tooltipSpace:((i=l.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||mE}}}),Fb=new WeakMap,Op=ce.fromClass(class{constructor(l){this.view=l,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=l.state.facet(zd);this.position=t.position,this.parent=t.parent,this.classes=l.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Gx(l,wp,(e,i)=>this.createTooltip(e,i),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),l.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let l of this.manager.tooltipViews)this.intersectionObserver.observe(l.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(l){l.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(l,this.above);t&&this.observeIntersection();let e=t||l.geometryChanged,i=l.state.facet(zd);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;e=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);e=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);e&&this.maybeMeasure()}createTooltip(l,t){let e=l.create(this.view),i=t?t.dom:null;if(e.dom.classList.add("cm-tooltip"),l.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",e.dom.appendChild(s)}return e.dom.style.position=this.position,e.dom.style.top=ju,e.dom.style.left="0px",this.container.insertBefore(e.dom,i),e.mount&&e.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(e.dom),e}destroy(){var l,t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(l=i.destroy)===null||l===void 0||l.call(i);this.parent&&this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let l=1,t=1,e=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:a}=this.manager.tooltipViews[0];if(rt.safari){let o=a.getBoundingClientRect();e=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}else e=!!a.offsetParent&&a.offsetParent!=this.container.ownerDocument.body}if(e||this.position=="absolute")if(this.parent){let a=this.parent.getBoundingClientRect();a.width&&a.height&&(l=a.width/this.parent.offsetWidth,t=a.height/this.parent.offsetHeight)}else({scaleX:l,scaleY:t}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),s=bp(this.view);return{visible:{left:i.left+s.left,top:i.top+s.top,right:i.right-s.right,bottom:i.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((a,o)=>{let c=this.manager.tooltipViews[o];return c.getCoords?c.getCoords(a.pos):this.view.coordsAtPos(a.pos)}),size:this.manager.tooltipViews.map(({dom:a})=>a.getBoundingClientRect()),space:this.view.state.facet(zd).tooltipSpace(this.view),scaleX:l,scaleY:t,makeAbsolute:e}}writeMeasure(l){var t;if(l.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let c of this.manager.tooltipViews)c.dom.style.position="absolute"}let{visible:e,space:i,scaleX:s,scaleY:a}=l,o=[];for(let c=0;c<this.manager.tooltips.length;c++){let h=this.manager.tooltips[c],d=this.manager.tooltipViews[c],{dom:p}=d,y=l.pos[c],b=l.size[c];if(!y||h.clip!==!1&&(y.bottom<=Math.max(e.top,i.top)||y.top>=Math.min(e.bottom,i.bottom)||y.right<Math.max(e.left,i.left)-.1||y.left>Math.min(e.right,i.right)+.1)){p.style.top=ju;continue}let S=h.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,O=S?7:0,w=b.right-b.left,C=(t=Fb.get(d))!==null&&t!==void 0?t:b.bottom-b.top,M=d.offset||gE,H=this.view.textDirection==Zt.LTR,q=b.width>i.right-i.left?H?i.left:i.right-b.width:H?Math.max(i.left,Math.min(y.left-(S?14:0)+M.x,i.right-w)):Math.min(Math.max(i.left,y.left-w+(S?14:0)-M.x),i.right-w),P=this.above[c];!h.strictSide&&(P?y.top-C-O-M.y<i.top:y.bottom+C+O+M.y>i.bottom)&&P==i.bottom-y.bottom>y.top-i.top&&(P=this.above[c]=!P);let Q=(P?y.top-i.top:i.bottom-y.bottom)-O;if(Q<C&&d.resize!==!1){if(Q<this.view.defaultLineHeight){p.style.top=ju;continue}Fb.set(d,C),p.style.height=(C=Q)/a+"px"}else p.style.height&&(p.style.height="");let G=P?y.top-C-O-M.y:y.bottom+O+M.y,V=q+w;if(d.overlap!==!0)for(let ut of o)ut.left<V&&ut.right>q&&ut.top<G+C&&ut.bottom>G&&(G=P?ut.top-C-2-O:ut.bottom+O+2);if(this.position=="absolute"?(p.style.top=(G-l.parent.top)/a+"px",Jb(p,(q-l.parent.left)/s)):(p.style.top=G/a+"px",Jb(p,q/s)),S){let ut=y.left+(H?M.x:-M.x)-(q+14-7);S.style.left=ut/s+"px"}d.overlap!==!0&&o.push({left:q,top:G,right:V,bottom:G+C}),p.classList.toggle("cm-tooltip-above",P),p.classList.toggle("cm-tooltip-below",!P),d.positioned&&d.positioned(l.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let l of this.manager.tooltipViews)l.dom.style.top=ju}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Jb(l,t){let e=parseInt(l.style.left,10);(isNaN(e)||Math.abs(t-e)>1)&&(l.style.left=t+"px")}const pE=Z.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),gE={x:0,y:0},wp=st.define({enables:[Op,pE]}),xc=st.define({combine:l=>l.reduce((t,e)=>t.concat(e),[])});class Qc{static create(t){return new Qc(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Gx(t,xc,(e,i)=>this.createHostedView(e,i),e=>e.dom.remove())}createHostedView(t,e){let i=t.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,e?e.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let e of this.manager.tooltipViews)(t=e.destroy)===null||t===void 0||t.call(e)}passProp(t){let e;for(let i of this.manager.tooltipViews){let s=i[t];if(s!==void 0){if(e===void 0)e=s;else if(e!==s)return}}return e}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const yE=wp.compute([xc],l=>{let t=l.facet(xc);return t.length===0?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var i;return(i=e.end)!==null&&i!==void 0?i:e.pos})),create:Qc.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class bE{constructor(t,e,i,s,a){this.view=t,this.source=e,this.field=i,this.setHover=s,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:e}=this,i=t.docView.tile.nearest(e.target);if(!i)return;let s,a=1;if(i.isWidget())s=i.posAtStart;else{if(s=t.posAtCoords(e),s==null)return;let c=t.coordsAtPos(s);if(!c||e.y<c.top||e.y>c.bottom||e.x<c.left-t.defaultCharacterWidth||e.x>c.right+t.defaultCharacterWidth)return;let h=t.bidiSpans(t.state.doc.lineAt(s)).find(p=>p.from<=s&&p.to>=s),d=h&&h.dir==Zt.RTL?-1:1;a=e.x<c.left?-d:d}let o=this.source(t,s,a);if(o?.then){let c=this.pending={pos:s};o.then(h=>{this.pending==c&&(this.pending=null,h&&!(Array.isArray(h)&&!h.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(h)?h:[h])}))},h=>ii(t.state,h,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let t=this.view.plugin(Op),e=t?t.manager.tooltips.findIndex(i=>i.create==Qc.create):-1;return e>-1?t.manager.tooltipViews[e]:null}mousemove(t){var e,i;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:a}=this;if(s.length&&a&&!vE(a.dom,t)||this.pending){let{pos:o}=s[0]||this.pending,c=(i=(e=s[0])===null||e===void 0?void 0:e.end)!==null&&i!==void 0?i:o;(o==c?this.view.posAtCoords(this.lastMove)!=o:!SE(this.view,o,c,t.clientX,t.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:e}=this;if(e.length){let{tooltip:i}=this;i&&i.dom.contains(t.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(t){let e=i=>{t.removeEventListener("mouseleave",e),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};t.addEventListener("mouseleave",e)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Wu=4;function vE(l,t){let{left:e,right:i,top:s,bottom:a}=l.getBoundingClientRect(),o;if(o=l.querySelector(".cm-tooltip-arrow")){let c=o.getBoundingClientRect();s=Math.min(c.top,s),a=Math.max(c.bottom,a)}return t.clientX>=e-Wu&&t.clientX<=i+Wu&&t.clientY>=s-Wu&&t.clientY<=a+Wu}function SE(l,t,e,i,s,a){let o=l.scrollDOM.getBoundingClientRect(),c=l.documentTop+l.documentPadding.top+l.contentHeight;if(o.left>i||o.right<i||o.top>s||Math.min(o.bottom,c)<s)return!1;let h=l.posAtCoords({x:i,y:s},!1);return h>=t&&h<=e}function xE(l,t={}){let e=xt.define(),i=ke.define({create(){return[]},update(s,a){if(s.length&&(t.hideOnChange&&(a.docChanged||a.selection)?s=[]:t.hideOn&&(s=s.filter(o=>!t.hideOn(a,o))),a.docChanged)){let o=[];for(let c of s){let h=a.changes.mapPos(c.pos,-1,Le.TrackDel);if(h!=null){let d=Object.assign(Object.create(null),c);d.pos=h,d.end!=null&&(d.end=a.changes.mapPos(d.end)),o.push(d)}}s=o}for(let o of a.effects)o.is(e)&&(s=o.value),o.is(OE)&&(s=[]);return s},provide:s=>xc.from(s)});return{active:i,extension:[i,ce.define(s=>new bE(s,l,i,e,t.hoverTime||300)),yE]}}function Px(l,t){let e=l.plugin(Op);if(!e)return null;let i=e.manager.tooltips.indexOf(t);return i<0?null:e.manager.tooltipViews[i]}const OE=xt.define(),tv=st.define({combine(l){let t,e;for(let i of l)t=t||i.topContainer,e=e||i.bottomContainer;return{topContainer:t,bottomContainer:e}}});function Va(l,t){let e=l.plugin($x),i=e?e.specs.indexOf(t):-1;return i>-1?e.panels[i]:null}const $x=ce.fromClass(class{constructor(l){this.input=l.state.facet(Ua),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(e=>e(l));let t=l.state.facet(tv);this.top=new Yu(l,!0,t.topContainer),this.bottom=new Yu(l,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(l){let t=l.state.facet(tv);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Yu(l.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Yu(l.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let e=l.state.facet(Ua);if(e!=this.input){let i=e.filter(h=>h),s=[],a=[],o=[],c=[];for(let h of i){let d=this.specs.indexOf(h),p;d<0?(p=h(l.view),c.push(p)):(p=this.panels[d],p.update&&p.update(l)),s.push(p),(p.top?a:o).push(p)}this.specs=i,this.panels=s,this.top.sync(a),this.bottom.sync(o);for(let h of c)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let i of this.panels)i.update&&i.update(l)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:l=>Z.scrollMargins.of(t=>{let e=t.plugin(l);return e&&{top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()}})});class Yu{constructor(t,e,i){this.view=t,this.top=e,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=ev(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=ev(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function ev(l){let t=l.nextSibling;return l.remove(),t}const Ua=st.define({enables:$x});class Vn extends vl{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}Vn.prototype.elementClass="";Vn.prototype.toDOM=void 0;Vn.prototype.mapMode=Le.TrackBefore;Vn.prototype.startSide=Vn.prototype.endSide=-1;Vn.prototype.point=!0;const rc=st.define(),wE=st.define(),CE={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Bt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Ma=st.define();function kE(l){return[Kx(),Ma.of({...CE,...l})]}const iv=st.define({combine:l=>l.some(t=>t)});function Kx(l){return[AE]}const AE=ce.fromClass(class{constructor(l){this.view=l,this.domAfter=null,this.prevViewport=l.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=l.state.facet(Ma).map(t=>new lv(l,t)),this.fixed=!l.state.facet(iv);for(let t of this.gutters)t.config.side=="after"?this.getDOMAfter().appendChild(t.dom):this.dom.appendChild(t.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),l.scrollDOM.insertBefore(this.dom,l.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(l){if(this.updateGutters(l)){let t=this.prevViewport,e=l.view.viewport,i=Math.min(t.to,e.to)-Math.max(t.from,e.from);this.syncGutters(i<(e.to-e.from)*.8)}if(l.geometryChanged){let t=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=t,this.domAfter&&(this.domAfter.style.minHeight=t)}this.view.state.facet(iv)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=l.view.viewport}syncGutters(l){let t=this.dom.nextSibling;l&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let e=Bt.iter(this.view.state.facet(rc),this.view.viewport.from),i=[],s=this.gutters.map(a=>new TE(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(a.type)){let o=!0;for(let c of a.type)if(c.type==_e.Text&&o){jm(e,i,c.from);for(let h of s)h.line(this.view,c,i);o=!1}else if(c.widget)for(let h of s)h.widget(this.view,c)}else if(a.type==_e.Text){jm(e,i,a.from);for(let o of s)o.line(this.view,a,i)}else if(a.widget)for(let o of s)o.widget(this.view,a);for(let a of s)a.finish();l&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(l){let t=l.startState.facet(Ma),e=l.state.facet(Ma),i=l.docChanged||l.heightChanged||l.viewportChanged||!Bt.eq(l.startState.facet(rc),l.state.facet(rc),l.view.viewport.from,l.view.viewport.to);if(t==e)for(let s of this.gutters)s.update(l)&&(i=!0);else{i=!0;let s=[];for(let a of e){let o=t.indexOf(a);o<0?s.push(new lv(this.view,a)):(this.gutters[o].update(l),s.push(this.gutters[o]))}for(let a of this.gutters)a.dom.remove(),s.indexOf(a)<0&&a.destroy();for(let a of s)a.config.side=="after"?this.getDOMAfter().appendChild(a.dom):this.dom.appendChild(a.dom);this.gutters=s}return i}destroy(){for(let l of this.gutters)l.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:l=>Z.scrollMargins.of(t=>{let e=t.plugin(l);if(!e||e.gutters.length==0||!e.fixed)return null;let i=e.dom.offsetWidth*t.scaleX,s=e.domAfter?e.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==Zt.LTR?{left:i,right:s}:{right:i,left:s}})});function nv(l){return Array.isArray(l)?l:[l]}function jm(l,t,e){for(;l.value&&l.from<=e;)l.from==e&&t.push(l.value),l.next()}class TE{constructor(t,e,i){this.gutter=t,this.height=i,this.i=0,this.cursor=Bt.iter(t.markers,e.from)}addElement(t,e,i){let{gutter:s}=this,a=(e.top-this.height)/t.scaleY,o=e.height/t.scaleY;if(this.i==s.elements.length){let c=new Ix(t,o,a,i);s.elements.push(c),s.dom.appendChild(c.dom)}else s.elements[this.i].update(t,o,a,i);this.height=e.bottom,this.i++}line(t,e,i){let s=[];jm(this.cursor,s,e.from),i.length&&(s=s.concat(i));let a=this.gutter.config.lineMarker(t,e,s);a&&s.unshift(a);let o=this.gutter;s.length==0&&!o.config.renderEmptyElements||this.addElement(t,e,s)}widget(t,e){let i=this.gutter.config.widgetMarker(t,e.widget,e),s=i?[i]:null;for(let a of t.state.facet(wE)){let o=a(t,e.widget,e);o&&(s||(s=[])).push(o)}s&&this.addElement(t,e,s)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class lv{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in e.domEventHandlers)this.dom.addEventListener(i,s=>{let a=s.target,o;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let h=a.getBoundingClientRect();o=(h.top+h.bottom)/2}else o=s.clientY;let c=t.lineBlockAtHeight(o-t.documentTop);e.domEventHandlers[i](t,c,s)&&s.preventDefault()});this.markers=nv(e.markers(t)),e.initialSpacer&&(this.spacer=new Ix(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=nv(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],t);s!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[s])}let i=t.view.viewport;return!Bt.eq(this.markers,e,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class Ix{constructor(t,e,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,i,s)}update(t,e,i,s){this.height!=e&&(this.height=e,this.dom.style.height=e+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),ME(this.markers,s)||this.setMarkers(t,s)}setMarkers(t,e){let i="cm-gutterElement",s=this.dom.firstChild;for(let a=0,o=0;;){let c=o,h=a<e.length?e[a++]:null,d=!1;if(h){let p=h.elementClass;p&&(i+=" "+p);for(let y=o;y<this.markers.length;y++)if(this.markers[y].compare(h)){c=y,d=!0;break}}else c=this.markers.length;for(;o<c;){let p=this.markers[o++];if(p.toDOM){p.destroy(s);let y=s.nextSibling;s.remove(),s=y}}if(!h)break;h.toDOM&&(d?s=s.nextSibling:this.dom.insertBefore(h.toDOM(t),s)),d&&o++}this.dom.className=i,this.markers=e}destroy(){this.setMarkers(null,[])}}function ME(l,t){if(l.length!=t.length)return!1;for(let e=0;e<l.length;e++)if(!l[e].compare(t[e]))return!1;return!0}const EE=st.define(),DE=st.define(),Gs=st.define({combine(l){return un(l,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let i=Object.assign({},t);for(let s in e){let a=i[s],o=e[s];i[s]=a?(c,h,d)=>a(c,h,d)||o(c,h,d):o}return i}})}});class Ld extends Vn{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function _d(l,t){return l.state.facet(Gs).formatNumber(t,l.state)}const RE=Ma.compute([Gs],l=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(EE)},lineMarker(t,e,i){return i.some(s=>s.toDOM)?null:new Ld(_d(t,t.state.doc.lineAt(e.from).number))},widgetMarker:(t,e,i)=>{for(let s of t.state.facet(DE)){let a=s(t,e,i);if(a)return a}return null},lineMarkerChange:t=>t.startState.facet(Gs)!=t.state.facet(Gs),initialSpacer(t){return new Ld(_d(t,sv(t.state.doc.lines)))},updateSpacer(t,e){let i=_d(e.view,sv(e.view.state.doc.lines));return i==t.number?t:new Ld(i)},domEventHandlers:l.facet(Gs).domEventHandlers,side:"before"}));function BE(l={}){return[Gs.of(l),Kx(),RE]}function sv(l){let t=9;for(;t<l;)t=t*10+9;return t}const NE=new class extends Vn{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},zE=rc.compute(["selection"],l=>{let t=[],e=-1;for(let i of l.selection.ranges){let s=l.doc.lineAt(i.head).from;s>e&&(e=s,t.push(NE.range(s)))}return Bt.of(t)});function LE(){return zE}const Zx=1024;let _E=0;class Ei{constructor(t,e){this.from=t,this.to=e}}class Tt{constructor(t={}){this.id=_E++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=t.combine||null}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=Xe.match(t)),e=>{let i=t(e);return i===void 0?null:[this,i]}}}Tt.closedBy=new Tt({deserialize:l=>l.split(" ")});Tt.openedBy=new Tt({deserialize:l=>l.split(" ")});Tt.group=new Tt({deserialize:l=>l.split(" ")});Tt.isolate=new Tt({deserialize:l=>{if(l&&l!="rtl"&&l!="ltr"&&l!="auto")throw new RangeError("Invalid value for isolate: "+l);return l||"auto"}});Tt.contextHash=new Tt({perNode:!0});Tt.lookAhead=new Tt({perNode:!0});Tt.mounted=new Tt({perNode:!0});class Js{constructor(t,e,i,s=!1){this.tree=t,this.overlay=e,this.parser=i,this.bracketed=s}static get(t){return t&&t.props&&t.props[Tt.mounted.id]}}const HE=Object.create(null);class Xe{constructor(t,e,i,s=0){this.name=t,this.props=e,this.id=i,this.flags=s}static define(t){let e=t.props&&t.props.length?Object.create(null):HE,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),s=new Xe(t.name||"",e,t.id,i);if(t.props){for(let a of t.props)if(Array.isArray(a)||(a=a(s)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[a[0].id]=a[1]}}return s}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let e=this.prop(Tt.group);return e?e.indexOf(t)>-1:!1}return this.id==t}static match(t){let e=Object.create(null);for(let i in t)for(let s of i.split(" "))e[s]=t[i];return i=>{for(let s=i.prop(Tt.group),a=-1;a<(s?s.length:0);a++){let o=e[a<0?i.name:s[a]];if(o)return o}}}}Xe.none=new Xe("",Object.create(null),0,8);class Cp{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let i of this.types){let s=null;for(let a of t){let o=a(i);if(o){s||(s=Object.assign({},i.props));let c=o[1],h=o[0];h.combine&&h.id in s&&(c=h.combine(s[h.id],c)),s[h.id]=c}}e.push(s?new Xe(i.name,s,i.id,i.flags):i)}return new Cp(e)}}const Xu=new WeakMap,rv=new WeakMap;var Pt;(function(l){l[l.ExcludeBuffers=1]="ExcludeBuffers",l[l.IncludeAnonymous=2]="IncludeAnonymous",l[l.IgnoreMounts=4]="IgnoreMounts",l[l.IgnoreOverlays=8]="IgnoreOverlays",l[l.EnterBracketed=16]="EnterBracketed"})(Pt||(Pt={}));class ne{constructor(t,e,i,s,a){if(this.type=t,this.children=e,this.positions=i,this.length=s,this.props=null,a&&a.length){this.props=Object.create(null);for(let[o,c]of a)this.props[typeof o=="number"?o:o.id]=c}}toString(){let t=Js.get(this);if(t&&!t.overlay)return t.tree.toString();let e="";for(let i of this.children){let s=i.toString();s&&(e&&(e+=","),e+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new Oc(this.topNode,t)}cursorAt(t,e=0,i=0){let s=Xu.get(this)||this.topNode,a=new Oc(s);return a.moveTo(t,e),Xu.set(this,a._tree),a}get topNode(){return new Ve(this,0,0,null)}resolve(t,e=0){let i=ja(Xu.get(this)||this.topNode,t,e,!1);return Xu.set(this,i),i}resolveInner(t,e=0){let i=ja(rv.get(this)||this.topNode,t,e,!0);return rv.set(this,i),i}resolveStack(t,e=0){return UE(this,t,e)}iterate(t){let{enter:e,leave:i,from:s=0,to:a=this.length}=t,o=t.mode||0,c=(o&Pt.IncludeAnonymous)>0;for(let h=this.cursor(o|Pt.IncludeAnonymous);;){let d=!1;if(h.from<=a&&h.to>=s&&(!c&&h.type.isAnonymous||e(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&i&&(c||!h.type.isAnonymous)&&i(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:Tp(Xe.none,this.children,this.positions,0,this.children.length,0,this.length,(e,i,s)=>new ne(this.type,e,i,s,this.propValues),t.makeTree||((e,i,s)=>new ne(Xe.none,e,i,s)))}static build(t){return jE(t)}}ne.empty=new ne(Xe.none,[],[],0);class kp{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new kp(this.buffer,this.index)}}class wl{constructor(t,e,i){this.buffer=t,this.length=e,this.set=i}get type(){return Xe.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],i=this.buffer[t+3],s=this.set.types[e],a=s.name;if(/\W/.test(a)&&!s.isError&&(a=JSON.stringify(a)),t+=4,i==t)return a;let o=[];for(;t<i;)o.push(this.childString(t)),t=this.buffer[t+3];return a+"("+o.join(",")+")"}findChild(t,e,i,s,a){let{buffer:o}=this,c=-1;for(let h=t;h!=e&&!(Fx(a,s,o[h+1],o[h+2])&&(c=h,i>0));h=o[h+3]);return c}slice(t,e,i){let s=this.buffer,a=new Uint16Array(e-t),o=0;for(let c=t,h=0;c<e;){a[h++]=s[c++],a[h++]=s[c++]-i;let d=a[h++]=s[c++]-i;a[h++]=s[c++]-t,o=Math.max(o,d)}return new wl(a,o,this.set)}}function Fx(l,t,e,i){switch(l){case-2:return e<t;case-1:return i>=t&&e<t;case 0:return e<t&&i>t;case 1:return e<=t&&i>t;case 2:return i>t;case 4:return!0}}function ja(l,t,e,i){for(var s;l.from==l.to||(e<1?l.from>=t:l.from>t)||(e>-1?l.to<=t:l.to<t);){let o=!i&&l instanceof Ve&&l.index<0?null:l.parent;if(!o)return l;l=o}let a=i?0:Pt.IgnoreOverlays;if(i)for(let o=l,c=o.parent;c;o=c,c=o.parent)o instanceof Ve&&o.index<0&&((s=c.enter(t,e,a))===null||s===void 0?void 0:s.from)!=o.from&&(l=c);for(;;){let o=l.enter(t,e,a);if(!o)return l;l=o}}class Jx{cursor(t=0){return new Oc(this,t)}getChild(t,e=null,i=null){let s=av(this,t,e,i);return s.length?s[0]:null}getChildren(t,e=null,i=null){return av(this,t,e,i)}resolve(t,e=0){return ja(this,t,e,!1)}resolveInner(t,e=0){return ja(this,t,e,!0)}matchContext(t){return Wm(this.parent,t)}enterUnfinishedNodesBefore(t){let e=this.childBefore(t),i=this;for(;e;){let s=e.lastChild;if(!s||s.to!=e.to)break;s.type.isError&&s.from==s.to?(i=e,e=s.prevSibling):e=s}return i}get node(){return this}get next(){return this.parent}}class Ve extends Jx{constructor(t,e,i,s){super(),this._tree=t,this.from=e,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,i,s,a=0){var o;for(let c=this;;){for(let{children:h,positions:d}=c._tree,p=e>0?h.length:-1;t!=p;t+=e){let y=h[t],b=d[t]+c.from;if(!(!(a&Pt.EnterBracketed&&y instanceof ne&&((o=Js.get(y))===null||o===void 0?void 0:o.overlay)===null&&(b>=i||b+y.length<=i))&&!Fx(s,i,b,b+y.length))){if(y instanceof wl){if(a&Pt.ExcludeBuffers)continue;let S=y.findChild(0,y.buffer.length,e,i-b,s);if(S>-1)return new ln(new qE(c,y,t,b),null,S)}else if(a&Pt.IncludeAnonymous||!y.type.isAnonymous||Ap(y)){let S;if(!(a&Pt.IgnoreMounts)&&(S=Js.get(y))&&!S.overlay)return new Ve(S.tree,b,t,c);let O=new Ve(y,b,t,c);return a&Pt.IncludeAnonymous||!O.type.isAnonymous?O:O.nextChild(e<0?y.children.length-1:0,e,i,s,a)}}}if(a&Pt.IncludeAnonymous||!c.type.isAnonymous||(c.index>=0?t=c.index+e:t=e<0?-1:c._parent._tree.children.length,c=c._parent,!c))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}prop(t){return this._tree.prop(t)}enter(t,e,i=0){let s;if(!(i&Pt.IgnoreOverlays)&&(s=Js.get(this._tree))&&s.overlay){let a=t-this.from,o=i&Pt.EnterBracketed&&s.bracketed;for(let{from:c,to:h}of s.overlay)if((e>0||o?c<=a:c<a)&&(e<0||o?h>=a:h>a))return new Ve(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,i)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function av(l,t,e,i){let s=l.cursor(),a=[];if(!s.firstChild())return a;if(e!=null){for(let o=!1;!o;)if(o=s.type.is(e),!s.nextSibling())return a}for(;;){if(i!=null&&s.type.is(i))return a;if(s.type.is(t)&&a.push(s.node),!s.nextSibling())return i==null?a:[]}}function Wm(l,t,e=t.length-1){for(let i=l;e>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[e]&&t[e]!=i.name)return!1;e--}}return!0}class qE{constructor(t,e,i,s){this.parent=t,this.buffer=e,this.index=i,this.start=s}}class ln extends Jx{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,i){super(),this.context=t,this._parent=e,this.index=i,this.type=t.buffer.set.types[t.buffer.buffer[i]]}child(t,e,i){let{buffer:s}=this.context,a=s.findChild(this.index+4,s.buffer[this.index+3],t,e-this.context.start,i);return a<0?null:new ln(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}prop(t){return this.type.prop(t)}enter(t,e,i=0){if(i&Pt.ExcludeBuffers)return null;let{buffer:s}=this.context,a=s.findChild(this.index+4,s.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return a<0?null:new ln(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new ln(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new ln(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],e=[],{buffer:i}=this.context,s=this.index+4,a=i.buffer[this.index+3];if(a>s){let o=i.buffer[this.index+1];t.push(i.slice(s,a,o)),e.push(0)}return new ne(this.type,t,e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function tO(l){if(!l.length)return null;let t=0,e=l[0];for(let a=1;a<l.length;a++){let o=l[a];(o.from>e.from||o.to<e.to)&&(e=o,t=a)}let i=e instanceof Ve&&e.index<0?null:e.parent,s=l.slice();return i?s[t]=i:s.splice(t,1),new VE(s,e)}class VE{constructor(t,e){this.heads=t,this.node=e}get next(){return tO(this.heads)}}function UE(l,t,e){let i=l.resolveInner(t,e),s=null;for(let a=i instanceof Ve?i:i.context.parent;a;a=a.parent)if(a.index<0){let o=a.parent;(s||(s=[i])).push(o.resolve(t,e)),a=o}else{let o=Js.get(a.tree);if(o&&o.overlay&&o.overlay[0].from<=t&&o.overlay[o.overlay.length-1].to>=t){let c=new Ve(o.tree,o.overlay[0].from+a.from,-1,a);(s||(s=[i])).push(ja(c,t,e,!1))}}return s?tO(s):i}class Oc{get name(){return this.type.name}constructor(t,e=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=e&~Pt.EnterBracketed,t instanceof Ve)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let i=t._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,e){this.index=t;let{start:i,buffer:s}=this.buffer;return this.type=e||s.set.types[s.buffer[t]],this.from=i+s.buffer[t+1],this.to=i+s.buffer[t+2],!0}yield(t){return t?t instanceof Ve?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,i){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,i,this.mode));let{buffer:s}=this.buffer,a=s.findChild(this.index+4,s.buffer[this.index+3],t,e-this.buffer.start,i);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,i=this.mode){return this.buffer?i&Pt.ExcludeBuffers?!1:this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Pt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Pt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:e}=this.buffer,i=this.stack.length-1;if(t<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(e.findChild(s,this.index,-1,0,4))}else{let s=e.buffer[this.index+3];if(s<(i<0?e.buffer.length:e.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,i,{buffer:s}=this;if(s){if(t>0){if(this.index<s.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(s.buffer.buffer[a+3]<this.index)return!1;({index:e,parent:i}=s)}else({index:e,_parent:i}=this._tree);for(;i;{index:e,_parent:i}=i)if(e>-1)for(let a=e+t,o=t<0?-1:i._tree.children.length;a!=o;a+=t){let c=i._tree.children[a];if(this.mode&Pt.IncludeAnonymous||c instanceof wl||!c.type.isAnonymous||Ap(c))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,i=0;if(t&&t.context==this.buffer)t:for(let s=this.index,a=this.stack.length;a>=0;){for(let o=t;o;o=o._parent)if(o.index==s){if(s==this.index)return o;e=o,i=a+1;break t}s=this.stack[--a]}for(let s=i;s<this.stack.length;s++)e=new ln(this.buffer,e,this.stack[s]);return this.bufferNode=new ln(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let i=0;;){let s=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&e&&e(this),s=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,s=!0}}}matchContext(t){if(!this.buffer)return Wm(this.node.parent,t);let{buffer:e}=this.buffer,{types:i}=e.set;for(let s=t.length-1,a=this.stack.length-1;s>=0;a--){if(a<0)return Wm(this._tree,t,s);let o=i[e.buffer[this.stack[a]]];if(!o.isAnonymous){if(t[s]&&t[s]!=o.name)return!1;s--}}return!0}}function Ap(l){return l.children.some(t=>t instanceof wl||!t.type.isAnonymous||Ap(t))}function jE(l){var t;let{buffer:e,nodeSet:i,maxBufferLength:s=Zx,reused:a=[],minRepeatType:o=i.types.length}=l,c=Array.isArray(e)?new kp(e,e.length):e,h=i.types,d=0,p=0;function y(Q,G,V,ut,nt,gt){let{id:ft,start:et,end:pt,size:mt}=c,St=p,B=d;if(mt<0)if(c.next(),mt==-1){let A=a[ft];V.push(A),ut.push(et-Q);return}else if(mt==-3){d=ft;return}else if(mt==-4){p=ft;return}else throw new RangeError(`Unrecognized record size: ${mt}`);let K=h[ft],tt,at,vt=et-Q;if(pt-et<=s&&(at=C(c.pos-G,nt))){let A=new Uint16Array(at.size-at.skip),z=c.pos-at.size,I=A.length;for(;c.pos>z;)I=M(at.start,A,I);tt=new wl(A,pt-at.start,i),vt=at.start-Q}else{let A=c.pos-mt;c.next();let z=[],I=[],lt=ft>=o?ft:-1,yt=0,Ot=pt;for(;c.pos>A;)lt>=0&&c.id==lt&&c.size>=0?(c.end<=Ot-s&&(O(z,I,et,yt,c.end,Ot,lt,St,B),yt=z.length,Ot=c.end),c.next()):gt>2500?b(et,A,z,I):y(et,A,z,I,lt,gt+1);if(lt>=0&&yt>0&&yt<z.length&&O(z,I,et,yt,et,Ot,lt,St,B),z.reverse(),I.reverse(),lt>-1&&yt>0){let Nt=S(K,B);tt=Tp(K,z,I,0,z.length,0,pt-et,Nt,Nt)}else tt=w(K,z,I,pt-et,St-pt,B)}V.push(tt),ut.push(vt)}function b(Q,G,V,ut){let nt=[],gt=0,ft=-1;for(;c.pos>G;){let{id:et,start:pt,end:mt,size:St}=c;if(St>4)c.next();else{if(ft>-1&&pt<ft)break;ft<0&&(ft=mt-s),nt.push(et,pt,mt),gt++,c.next()}}if(gt){let et=new Uint16Array(gt*4),pt=nt[nt.length-2];for(let mt=nt.length-3,St=0;mt>=0;mt-=3)et[St++]=nt[mt],et[St++]=nt[mt+1]-pt,et[St++]=nt[mt+2]-pt,et[St++]=St;V.push(new wl(et,nt[2]-pt,i)),ut.push(pt-Q)}}function S(Q,G){return(V,ut,nt)=>{let gt=0,ft=V.length-1,et,pt;if(ft>=0&&(et=V[ft])instanceof ne){if(!ft&&et.type==Q&&et.length==nt)return et;(pt=et.prop(Tt.lookAhead))&&(gt=ut[ft]+et.length+pt)}return w(Q,V,ut,nt,gt,G)}}function O(Q,G,V,ut,nt,gt,ft,et,pt){let mt=[],St=[];for(;Q.length>ut;)mt.push(Q.pop()),St.push(G.pop()+V-nt);Q.push(w(i.types[ft],mt,St,gt-nt,et-gt,pt)),G.push(nt-V)}function w(Q,G,V,ut,nt,gt,ft){if(gt){let et=[Tt.contextHash,gt];ft=ft?[et].concat(ft):[et]}if(nt>25){let et=[Tt.lookAhead,nt];ft=ft?[et].concat(ft):[et]}return new ne(Q,G,V,ut,ft)}function C(Q,G){let V=c.fork(),ut=0,nt=0,gt=0,ft=V.end-s,et={size:0,start:0,skip:0};t:for(let pt=V.pos-Q;V.pos>pt;){let mt=V.size;if(V.id==G&&mt>=0){et.size=ut,et.start=nt,et.skip=gt,gt+=4,ut+=4,V.next();continue}let St=V.pos-mt;if(mt<0||St<pt||V.start<ft)break;let B=V.id>=o?4:0,K=V.start;for(V.next();V.pos>St;){if(V.size<0)if(V.size==-3||V.size==-4)B+=4;else break t;else V.id>=o&&(B+=4);V.next()}nt=K,ut+=mt,gt+=B}return(G<0||ut==Q)&&(et.size=ut,et.start=nt,et.skip=gt),et.size>4?et:void 0}function M(Q,G,V){let{id:ut,start:nt,end:gt,size:ft}=c;if(c.next(),ft>=0&&ut<o){let et=V;if(ft>4){let pt=c.pos-(ft-4);for(;c.pos>pt;)V=M(Q,G,V)}G[--V]=et,G[--V]=gt-Q,G[--V]=nt-Q,G[--V]=ut}else ft==-3?d=ut:ft==-4&&(p=ut);return V}let H=[],q=[];for(;c.pos>0;)y(l.start||0,l.bufferStart||0,H,q,-1,0);let P=(t=l.length)!==null&&t!==void 0?t:H.length?q[0]+H[0].length:0;return new ne(h[l.topID],H.reverse(),q.reverse(),P)}const ov=new WeakMap;function ac(l,t){if(!l.isAnonymous||t instanceof wl||t.type!=l)return 1;let e=ov.get(t);if(e==null){e=1;for(let i of t.children){if(i.type!=l||!(i instanceof ne)){e=1;break}e+=ac(l,i)}ov.set(t,e)}return e}function Tp(l,t,e,i,s,a,o,c,h){let d=0;for(let O=i;O<s;O++)d+=ac(l,t[O]);let p=Math.ceil(d*1.5/8),y=[],b=[];function S(O,w,C,M,H){for(let q=C;q<M;){let P=q,Q=w[q],G=ac(l,O[q]);for(q++;q<M;q++){let V=ac(l,O[q]);if(G+V>=p)break;G+=V}if(q==P+1){if(G>p){let V=O[P];S(V.children,V.positions,0,V.children.length,w[P]+H);continue}y.push(O[P])}else{let V=w[q-1]+O[q-1].length-Q;y.push(Tp(l,O,w,P,q,Q,V,null,h))}b.push(Q+H-a)}}return S(t,e,i,s,0),(c||h)(y,b,o)}class cB{constructor(){this.map=new WeakMap}setBuffer(t,e,i){let s=this.map.get(t);s||this.map.set(t,s=new Map),s.set(e,i)}getBuffer(t,e){let i=this.map.get(t);return i&&i.get(e)}set(t,e){t instanceof ln?this.setBuffer(t.context.buffer,t.index,e):t instanceof Ve&&this.map.set(t.tree,e)}get(t){return t instanceof ln?this.getBuffer(t.context.buffer,t.index):t instanceof Ve?this.map.get(t.tree):void 0}cursorSet(t,e){t.buffer?this.setBuffer(t.buffer.buffer,t.index,e):this.map.set(t.tree,e)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class Ln{constructor(t,e,i,s,a=!1,o=!1){this.from=t,this.to=e,this.tree=i,this.offset=s,this.open=(a?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,e=[],i=!1){let s=[new Ln(0,t.length,t,0,!1,i)];for(let a of e)a.to>t.length&&s.push(a);return s}static applyChanges(t,e,i=128){if(!e.length)return t;let s=[],a=1,o=t.length?t[0]:null;for(let c=0,h=0,d=0;;c++){let p=c<e.length?e[c]:null,y=p?p.fromA:1e9;if(y-h>=i)for(;o&&o.from<y;){let b=o;if(h>=b.from||y<=b.to||d){let S=Math.max(b.from,h)-d,O=Math.min(b.to,y)-d;b=S>=O?null:new Ln(S,O,b.tree,b.offset+d,c>0,!!p)}if(b&&s.push(b),o.to>y)break;o=a<t.length?t[a++]:null}if(!p)break;h=p.toA,d=p.toA-p.toB}return s}}class eO{startParse(t,e,i){return typeof t=="string"&&(t=new WE(t)),i=i?i.length?i.map(s=>new Ei(s.from,s.to)):[new Ei(0,0)]:[new Ei(0,t.length)],this.createParse(t,e||[],i)}parse(t,e,i){let s=this.startParse(t,e,i);for(;;){let a=s.advance();if(a)return a}}}class WE{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}function fB(l){return(t,e,i,s)=>new XE(t,l,e,i,s)}class uv{constructor(t,e,i,s,a,o){this.parser=t,this.parse=e,this.overlay=i,this.bracketed=s,this.target=a,this.from=o}}function cv(l){if(!l.length||l.some(t=>t.from>=t.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(l))}class YE{constructor(t,e,i,s,a,o,c,h){this.parser=t,this.predicate=e,this.mounts=i,this.index=s,this.start=a,this.bracketed=o,this.target=c,this.prev=h,this.depth=0,this.ranges=[]}}const Ym=new Tt({perNode:!0});class XE{constructor(t,e,i,s,a){this.nest=e,this.input=i,this.fragments=s,this.ranges=a,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=t}advance(){if(this.baseParse){let i=this.baseParse.advance();if(!i)return null;if(this.baseParse=null,this.baseTree=i,this.startInner(),this.stoppedAt!=null)for(let s of this.inner)s.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let i=this.baseTree;return this.stoppedAt!=null&&(i=new ne(i.type,i.children,i.positions,i.length,i.propValues.concat([[Ym,this.stoppedAt]]))),i}let t=this.inner[this.innerDone],e=t.parse.advance();if(e){this.innerDone++;let i=Object.assign(Object.create(null),t.target.props);i[Tt.mounted.id]=new Js(e,t.overlay,t.parser,t.bracketed),t.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let t=this.input.length;for(let e=this.innerDone;e<this.inner.length;e++)this.inner[e].from<t&&(t=Math.min(t,this.inner[e].parse.parsedPos));return t}stopAt(t){if(this.stoppedAt=t,this.baseParse)this.baseParse.stopAt(t);else for(let e=this.innerDone;e<this.inner.length;e++)this.inner[e].parse.stopAt(t)}startInner(){let t=new PE(this.fragments),e=null,i=null,s=new Oc(new Ve(this.baseTree,this.ranges[0].from,0,null),Pt.IncludeAnonymous|Pt.IgnoreMounts);t:for(let a,o;;){let c=!0,h;if(this.stoppedAt!=null&&s.from>=this.stoppedAt)c=!1;else if(t.hasNode(s)){if(e){let d=e.mounts.find(p=>p.frag.from<=s.from&&p.frag.to>=s.to&&p.mount.overlay);if(d)for(let p of d.mount.overlay){let y=p.from+d.pos,b=p.to+d.pos;y>=s.from&&b<=s.to&&!e.ranges.some(S=>S.from<b&&S.to>y)&&e.ranges.push({from:y,to:b})}}c=!1}else if(i&&(o=QE(i.ranges,s.from,s.to)))c=o!=2;else if(!s.type.isAnonymous&&(a=this.nest(s,this.input))&&(s.from<s.to||!a.overlay)){s.tree||(GE(s),e&&e.depth++,i&&i.depth++);let d=t.findMounts(s.from,a.parser);if(typeof a.overlay=="function")e=new YE(a.parser,a.overlay,d,this.inner.length,s.from,!!a.bracketed,s.tree,e);else{let p=dv(this.ranges,a.overlay||(s.from<s.to?[new Ei(s.from,s.to)]:[]));p.length&&cv(p),(p.length||!a.overlay)&&this.inner.push(new uv(a.parser,p.length?a.parser.startParse(this.input,mv(d,p),p):a.parser.startParse(""),a.overlay?a.overlay.map(y=>new Ei(y.from-s.from,y.to-s.from)):null,!!a.bracketed,s.tree,p.length?p[0].from:s.from)),a.overlay?p.length&&(i={ranges:p,depth:0,prev:i}):c=!1}}else if(e&&(h=e.predicate(s))&&(h===!0&&(h=new Ei(s.from,s.to)),h.from<h.to)){let d=e.ranges.length-1;d>=0&&e.ranges[d].to==h.from?e.ranges[d]={from:e.ranges[d].from,to:h.to}:e.ranges.push(h)}if(c&&s.firstChild())e&&e.depth++,i&&i.depth++;else for(;!s.nextSibling();){if(!s.parent())break t;if(e&&!--e.depth){let d=dv(this.ranges,e.ranges);d.length&&(cv(d),this.inner.splice(e.index,0,new uv(e.parser,e.parser.startParse(this.input,mv(e.mounts,d),d),e.ranges.map(p=>new Ei(p.from-e.start,p.to-e.start)),e.bracketed,e.target,d[0].from))),e=e.prev}i&&!--i.depth&&(i=i.prev)}}}}function QE(l,t,e){for(let i of l){if(i.from>=e)break;if(i.to>t)return i.from<=t&&i.to>=e?2:1}return 0}function fv(l,t,e,i,s,a){if(t<e){let o=l.buffer[t+1];i.push(l.slice(t,e,o)),s.push(o-a)}}function GE(l){let{node:t}=l,e=[],i=t.context.buffer;do e.push(l.index),l.parent();while(!l.tree);let s=l.tree,a=s.children.indexOf(i),o=s.children[a],c=o.buffer,h=[a];function d(p,y,b,S,O,w){let C=e[w],M=[],H=[];fv(o,p,C,M,H,S);let q=c[C+1],P=c[C+2];h.push(M.length);let Q=w?d(C+4,c[C+3],o.set.types[c[C]],q,P-q,w-1):t.toTree();return M.push(Q),H.push(q-S),fv(o,c[C+3],y,M,H,S),new ne(b,M,H,O)}s.children[a]=d(0,c.length,Xe.none,0,o.length,e.length-1);for(let p of h){let y=l.tree.children[p],b=l.tree.positions[p];l.yield(new Ve(y,b+l.from,p,l._tree))}}class hv{constructor(t,e){this.offset=e,this.done=!1,this.cursor=t.cursor(Pt.IncludeAnonymous|Pt.IgnoreMounts)}moveTo(t){let{cursor:e}=this,i=t-this.offset;for(;!this.done&&e.from<i;)e.to>=t&&e.enter(i,1,Pt.IgnoreOverlays|Pt.ExcludeBuffers)||e.next(!1)||(this.done=!0)}hasNode(t){if(this.moveTo(t.from),!this.done&&this.cursor.from+this.offset==t.from&&this.cursor.tree)for(let e=this.cursor.tree;;){if(e==t.tree)return!0;if(e.children.length&&e.positions[0]==0&&e.children[0]instanceof ne)e=e.children[0];else break}return!1}}let PE=class{constructor(t){var e;if(this.fragments=t,this.curTo=0,this.fragI=0,t.length){let i=this.curFrag=t[0];this.curTo=(e=i.tree.prop(Ym))!==null&&e!==void 0?e:i.to,this.inner=new hv(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(t){for(;this.curFrag&&t.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=t.from&&this.curTo>=t.to&&this.inner.hasNode(t)}nextFrag(){var t;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let e=this.curFrag=this.fragments[this.fragI];this.curTo=(t=e.tree.prop(Ym))!==null&&t!==void 0?t:e.to,this.inner=new hv(e.tree,-e.offset)}}findMounts(t,e){var i;let s=[];if(this.inner){this.inner.cursor.moveTo(t,1);for(let a=this.inner.cursor.node;a;a=a.parent){let o=(i=a.tree)===null||i===void 0?void 0:i.prop(Tt.mounted);if(o&&o.parser==e)for(let c=this.fragI;c<this.fragments.length;c++){let h=this.fragments[c];if(h.from>=a.to)break;h.tree==this.curFrag.tree&&s.push({frag:h,pos:a.from-h.offset,mount:o})}}}return s}};function dv(l,t){let e=null,i=t;for(let s=1,a=0;s<l.length;s++){let o=l[s-1].to,c=l[s].from;for(;a<i.length;a++){let h=i[a];if(h.from>=c)break;h.to<=o||(e||(i=e=t.slice()),h.from<o?(e[a]=new Ei(h.from,o),h.to>c&&e.splice(a+1,0,new Ei(c,h.to))):h.to>c?e[a--]=new Ei(c,h.to):e.splice(a--,1))}}return i}function $E(l,t,e,i){let s=0,a=0,o=!1,c=!1,h=-1e9,d=[];for(;;){let p=s==l.length?1e9:o?l[s].to:l[s].from,y=a==t.length?1e9:c?t[a].to:t[a].from;if(o!=c){let b=Math.max(h,e),S=Math.min(p,y,i);b<S&&d.push(new Ei(b,S))}if(h=Math.min(p,y),h==1e9)break;p==h&&(o?(o=!1,s++):o=!0),y==h&&(c?(c=!1,a++):c=!0)}return d}function mv(l,t){let e=[];for(let{pos:i,mount:s,frag:a}of l){let o=i+(s.overlay?s.overlay[0].from:0),c=o+s.tree.length,h=Math.max(a.from,o),d=Math.min(a.to,c);if(s.overlay){let p=s.overlay.map(b=>new Ei(b.from+i,b.to+i)),y=$E(t,p,h,d);for(let b=0,S=h;;b++){let O=b==y.length,w=O?d:y[b].from;if(w>S&&e.push(new Ln(S,w,s.tree,-o,a.from>=S||a.openStart,a.to<=w||a.openEnd)),O)break;S=y[b].to}}else e.push(new Ln(h,d,s.tree,-o,a.from>=o||a.openStart,a.to<=c||a.openEnd))}return e}let KE=0;class Ti{constructor(t,e,i,s){this.name=t,this.set=e,this.base=i,this.modified=s,this.id=KE++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let i=typeof t=="string"?t:"?";if(t instanceof Ti&&(e=t),e?.base)throw new Error("Can not derive from a modified tag");let s=new Ti(i,[],null,[]);if(s.set.push(s),e)for(let a of e.set)s.set.push(a);return s}static defineModifier(t){let e=new wc(t);return i=>i.modified.indexOf(e)>-1?i:wc.get(i.base||i,i.modified.concat(e).sort((s,a)=>s.id-a.id))}}let IE=0;class wc{constructor(t){this.name=t,this.instances=[],this.id=IE++}static get(t,e){if(!e.length)return t;let i=e[0].instances.find(c=>c.base==t&&ZE(e,c.modified));if(i)return i;let s=[],a=new Ti(t.name,s,t,e);for(let c of e)c.instances.push(a);let o=FE(e);for(let c of t.set)if(!c.modified.length)for(let h of o)s.push(wc.get(c,h));return a}}function ZE(l,t){return l.length==t.length&&l.every((e,i)=>e==t[i])}function FE(l){let t=[[]];for(let e=0;e<l.length;e++)for(let i=0,s=t.length;i<s;i++)t.push(t[i].concat(l[e]));return t.sort((e,i)=>i.length-e.length)}function Mp(l){let t=Object.create(null);for(let e in l){let i=l[e];Array.isArray(i)||(i=[i]);for(let s of e.split(" "))if(s){let a=[],o=2,c=s;for(let y=0;;){if(c=="..."&&y>0&&y+3==s.length){o=1;break}let b=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!b)throw new RangeError("Invalid path: "+s);if(a.push(b[0]=="*"?"":b[0][0]=='"'?JSON.parse(b[0]):b[0]),y+=b[0].length,y==s.length)break;let S=s[y++];if(y==s.length&&S=="!"){o=0;break}if(S!="/")throw new RangeError("Invalid path: "+s);c=s.slice(y)}let h=a.length-1,d=a[h];if(!d)throw new RangeError("Invalid path: "+s);let p=new Wa(i,o,h>0?a.slice(0,h):null);t[d]=p.sort(t[d])}}return iO.add(t)}const iO=new Tt({combine(l,t){let e,i,s;for(;l||t;){if(!l||t&&l.depth>=t.depth?(s=t,t=t.next):(s=l,l=l.next),e&&e.mode==s.mode&&!s.context&&!e.context)continue;let a=new Wa(s.tags,s.mode,s.context);e?e.next=a:i=a,e=a}return i}});class Wa{constructor(t,e,i,s){this.tags=t,this.mode=e,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}Wa.empty=new Wa([],2,null);function nO(l,t){let e=Object.create(null);for(let a of l)if(!Array.isArray(a.tag))e[a.tag.id]=a.class;else for(let o of a.tag)e[o.id]=a.class;let{scope:i,all:s=null}=t||{};return{style:a=>{let o=s;for(let c of a)for(let h of c.set){let d=e[h.id];if(d){o=o?o+" "+d:d;break}}return o},scope:i}}function JE(l,t){let e=null;for(let i of l){let s=i.style(t);s&&(e=e?e+" "+s:s)}return e}function tD(l,t,e,i=0,s=l.length){let a=new eD(i,Array.isArray(t)?t:[t],e);a.highlightRange(l.cursor(),i,s,"",a.highlighters),a.flush(s)}class eD{constructor(t,e,i){this.at=t,this.highlighters=e,this.span=i,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,i,s,a){let{type:o,from:c,to:h}=t;if(c>=i||h<=e)return;o.isTop&&(a=this.highlighters.filter(S=>!S.scope||S.scope(o)));let d=s,p=iD(t)||Wa.empty,y=JE(a,p.tags);if(y&&(d&&(d+=" "),d+=y,p.mode==1&&(s+=(s?" ":"")+y)),this.startSpan(Math.max(e,c),d),p.opaque)return;let b=t.tree&&t.tree.prop(Tt.mounted);if(b&&b.overlay){let S=t.node.enter(b.overlay[0].from+c,1),O=this.highlighters.filter(C=>!C.scope||C.scope(b.tree.type)),w=t.firstChild();for(let C=0,M=c;;C++){let H=C<b.overlay.length?b.overlay[C]:null,q=H?H.from+c:h,P=Math.max(e,M),Q=Math.min(i,q);if(P<Q&&w)for(;t.from<Q&&(this.highlightRange(t,P,Q,s,a),this.startSpan(Math.min(Q,t.to),d),!(t.to>=q||!t.nextSibling())););if(!H||q>i)break;M=H.to+c,M>e&&(this.highlightRange(S.cursor(),Math.max(e,H.from+c),Math.min(i,M),"",O),this.startSpan(Math.min(i,M),d))}w&&t.parent()}else if(t.firstChild()){b&&(s="");do if(!(t.to<=e)){if(t.from>=i)break;this.highlightRange(t,e,i,s,a),this.startSpan(Math.min(i,t.to),d)}while(t.nextSibling());t.parent()}}}function iD(l){let t=l.type.prop(iO);for(;t&&t.context&&!l.matchContext(t.context);)t=t.next;return t||null}const J=Ti.define,Qu=J(),hl=J(),pv=J(hl),gv=J(hl),dl=J(),Gu=J(dl),Hd=J(dl),Fi=J(),Pl=J(Fi),Ii=J(),Zi=J(),Xm=J(),pa=J(Xm),Pu=J(),L={comment:Qu,lineComment:J(Qu),blockComment:J(Qu),docComment:J(Qu),name:hl,variableName:J(hl),typeName:pv,tagName:J(pv),propertyName:gv,attributeName:J(gv),className:J(hl),labelName:J(hl),namespace:J(hl),macroName:J(hl),literal:dl,string:Gu,docString:J(Gu),character:J(Gu),attributeValue:J(Gu),number:Hd,integer:J(Hd),float:J(Hd),bool:J(dl),regexp:J(dl),escape:J(dl),color:J(dl),url:J(dl),keyword:Ii,self:J(Ii),null:J(Ii),atom:J(Ii),unit:J(Ii),modifier:J(Ii),operatorKeyword:J(Ii),controlKeyword:J(Ii),definitionKeyword:J(Ii),moduleKeyword:J(Ii),operator:Zi,derefOperator:J(Zi),arithmeticOperator:J(Zi),logicOperator:J(Zi),bitwiseOperator:J(Zi),compareOperator:J(Zi),updateOperator:J(Zi),definitionOperator:J(Zi),typeOperator:J(Zi),controlOperator:J(Zi),punctuation:Xm,separator:J(Xm),bracket:pa,angleBracket:J(pa),squareBracket:J(pa),paren:J(pa),brace:J(pa),content:Fi,heading:Pl,heading1:J(Pl),heading2:J(Pl),heading3:J(Pl),heading4:J(Pl),heading5:J(Pl),heading6:J(Pl),contentSeparator:J(Fi),list:J(Fi),quote:J(Fi),emphasis:J(Fi),strong:J(Fi),link:J(Fi),monospace:J(Fi),strikethrough:J(Fi),inserted:J(),deleted:J(),changed:J(),invalid:J(),meta:Pu,documentMeta:J(Pu),annotation:J(Pu),processingInstruction:J(Pu),definition:Ti.defineModifier("definition"),constant:Ti.defineModifier("constant"),function:Ti.defineModifier("function"),standard:Ti.defineModifier("standard"),local:Ti.defineModifier("local"),special:Ti.defineModifier("special")};for(let l in L){let t=L[l];t instanceof Ti&&(t.name=l)}nO([{tag:L.link,class:"tok-link"},{tag:L.heading,class:"tok-heading"},{tag:L.emphasis,class:"tok-emphasis"},{tag:L.strong,class:"tok-strong"},{tag:L.keyword,class:"tok-keyword"},{tag:L.atom,class:"tok-atom"},{tag:L.bool,class:"tok-bool"},{tag:L.url,class:"tok-url"},{tag:L.labelName,class:"tok-labelName"},{tag:L.inserted,class:"tok-inserted"},{tag:L.deleted,class:"tok-deleted"},{tag:L.literal,class:"tok-literal"},{tag:L.string,class:"tok-string"},{tag:L.number,class:"tok-number"},{tag:[L.regexp,L.escape,L.special(L.string)],class:"tok-string2"},{tag:L.variableName,class:"tok-variableName"},{tag:L.local(L.variableName),class:"tok-variableName tok-local"},{tag:L.definition(L.variableName),class:"tok-variableName tok-definition"},{tag:L.special(L.variableName),class:"tok-variableName2"},{tag:L.definition(L.propertyName),class:"tok-propertyName tok-definition"},{tag:L.typeName,class:"tok-typeName"},{tag:L.namespace,class:"tok-namespace"},{tag:L.className,class:"tok-className"},{tag:L.macroName,class:"tok-macroName"},{tag:L.propertyName,class:"tok-propertyName"},{tag:L.operator,class:"tok-operator"},{tag:L.comment,class:"tok-comment"},{tag:L.meta,class:"tok-meta"},{tag:L.invalid,class:"tok-invalid"},{tag:L.punctuation,class:"tok-punctuation"}]);var qd;const Ps=new Tt;function nD(l){return st.define({combine:l?t=>t.concat(l):void 0})}const lD=new Tt;class Ui{constructor(t,e,i=[],s=""){this.data=t,this.name=s,Lt.prototype.hasOwnProperty("tree")||Object.defineProperty(Lt.prototype,"tree",{get(){return Se(this)}}),this.parser=e,this.extension=[Cl.of(this),Lt.languageData.of((a,o,c)=>{let h=yv(a,o,c),d=h.type.prop(Ps);if(!d)return[];let p=a.facet(d),y=h.type.prop(lD);if(y){let b=h.resolve(o-h.from,c);for(let S of y)if(S.test(b,a)){let O=a.facet(S.facet);return S.type=="replace"?O:O.concat(p)}}return p})].concat(i)}isActiveAt(t,e,i=-1){return yv(t,e,i).type.prop(Ps)==this.data}findRegions(t){let e=t.facet(Cl);if(e?.data==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let i=[],s=(a,o)=>{if(a.prop(Ps)==this.data){i.push({from:o,to:o+a.length});return}let c=a.prop(Tt.mounted);if(c){if(c.tree.prop(Ps)==this.data){if(c.overlay)for(let h of c.overlay)i.push({from:h.from+o,to:h.to+o});else i.push({from:o,to:o+a.length});return}else if(c.overlay){let h=i.length;if(s(c.tree,c.overlay[0].from+o),i.length>h)return}}for(let h=0;h<a.children.length;h++){let d=a.children[h];d instanceof ne&&s(d,a.positions[h]+o)}};return s(Se(t),0),i}get allowsNesting(){return!0}}Ui.setState=xt.define();function yv(l,t,e){let i=l.facet(Cl),s=Se(l).topNode;if(!i||i.allowsNesting)for(let a=s;a;a=a.enter(t,e,Pt.ExcludeBuffers|Pt.EnterBracketed))a.type.isTop&&(s=a);return s}class Ya extends Ui{constructor(t,e,i){super(t,e,[],i),this.parser=e}static define(t){let e=nD(t.languageData);return new Ya(e,t.parser.configure({props:[Ps.add(i=>i.isTop?e:void 0)]}),t.name)}configure(t,e){return new Ya(this.data,this.parser.configure(t),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Se(l){let t=l.field(Ui.state,!1);return t?t.tree:ne.empty}class sD{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let i=this.cursorPos-this.string.length;return t<i||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-i,e-i)}}let ga=null;class Cc{constructor(t,e,i=[],s,a,o,c,h){this.parser=t,this.state=e,this.fragments=i,this.tree=s,this.treeLen=a,this.viewport=o,this.skipped=c,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(t,e,i){return new Cc(t,e,[],ne.empty,0,i,[],null)}startParse(){return this.parser.startParse(new sD(this.state.doc),this.fragments)}work(t,e){return e!=null&&e>=this.state.doc.length&&(e=void 0),this.tree!=ne.empty&&this.isDone(e??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof t=="number"){let s=Date.now()+t;t=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Ln.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(e??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(e=this.parse.advance()););}),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(Ln.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=ga;ga=this;try{return t()}finally{ga=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=bv(t,e.from,e.to);return t}changes(t,e){let{fragments:i,tree:s,treeLen:a,viewport:o,skipped:c}=this;if(this.takeTree(),!t.empty){let h=[];if(t.iterChangedRanges((d,p,y,b)=>h.push({fromA:d,toA:p,fromB:y,toB:b})),i=Ln.applyChanges(i,h),s=ne.empty,a=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){c=[];for(let d of this.skipped){let p=t.mapPos(d.from,1),y=t.mapPos(d.to,-1);p<y&&c.push({from:p,to:y})}}}return new Cc(this.parser,e,i,s,a,o,c,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:a}=this.skipped[i];s<t.to&&a>t.from&&(this.fragments=bv(this.fragments,s,a),this.skipped.splice(i--,1))}return this.skipped.length>=e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends eO{createParse(e,i,s){let a=s[0].from,o=s[s.length-1].to;return{parsedPos:a,advance(){let h=ga;if(h){for(let d of s)h.tempSkipped.push(d);t&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,t]):t)}return this.parsedPos=o,new ne(Xe.none,[],[],o-a)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&e[0].from==0&&e[0].to>=t}static get(){return ga}}function bv(l,t,e){return Ln.applyChanges(l,[{fromA:t,toA:e,fromB:t,toB:e}])}class or{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),i=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,i)||e.takeTree(),new or(e)}static init(t){let e=Math.min(3e3,t.doc.length),i=Cc.create(t.facet(Cl).parser,t,{from:0,to:e});return i.work(20,e)||i.takeTree(),new or(i)}}Ui.state=ke.define({create:or.init,update(l,t){for(let e of t.effects)if(e.is(Ui.setState))return e.value;return t.startState.facet(Cl)!=t.state.facet(Cl)?or.init(t.state):l.apply(t)}});let lO=l=>{let t=setTimeout(()=>l(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(lO=l=>{let t=-1,e=setTimeout(()=>{t=requestIdleCallback(l,{timeout:400})},100);return()=>t<0?clearTimeout(e):cancelIdleCallback(t)});const Vd=typeof navigator<"u"&&(!((qd=navigator.scheduling)===null||qd===void 0)&&qd.isInputPending)?()=>navigator.scheduling.isInputPending():null,rD=ce.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(Ui.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(Ui.state);(e.tree!=e.context.tree||!e.context.isDone(t.doc.length))&&(this.working=lO(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,a=i.field(Ui.state);if(a.tree==a.context.tree&&a.context.isDone(s+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!Vd?Math.max(25,t.timeRemaining()-5):1e9),c=a.context.treeLen<s&&i.doc.length>s+1e3,h=a.context.work(()=>Vd&&Vd()||Date.now()>o,s+(c?0:1e5));this.chunkBudget-=Date.now()-e,(h||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:Ui.setState.of(new or(a.context))})),this.chunkBudget>0&&!(h&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(e=>ii(this.view.state,e)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Cl=st.define({combine(l){return l.length?l[0]:null},enables:l=>[Ui.state,rD,Z.contentAttributes.compute([l],t=>{let e=t.facet(l);return e&&e.name?{"data-language":e.name}:{}})]});class sO{constructor(t,e=[]){this.language=t,this.support=e,this.extension=[t,e]}}const aD=st.define(),lo=st.define({combine:l=>{if(!l.length)return"  ";let t=l[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(l[0]));return t}});function kc(l){let t=l.facet(lo);return t.charCodeAt(0)==9?l.tabSize*t.length:t.length}function Xa(l,t){let e="",i=l.tabSize,s=l.facet(lo)[0];if(s=="	"){for(;t>=i;)e+="	",t-=i;s=" "}for(let a=0;a<t;a++)e+=s;return e}function Ep(l,t){l instanceof Lt&&(l=new Gc(l));for(let i of l.state.facet(aD)){let s=i(l,t);if(s!==void 0)return s}let e=Se(l.state);return e.length>=t?oD(l,e,t):null}class Gc{constructor(t,e={}){this.state=t,this.options=e,this.unit=kc(t)}lineAt(t,e=1){let i=this.state.doc.lineAt(t),{simulateBreak:s,simulateDoubleBreak:a}=this.options;return s!=null&&s>=i.from&&s<=i.to?a&&s==t?{text:"",from:t}:(e<0?s<t:s<=t)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(t,e);return i.slice(t-s,Math.min(i.length,t+100-s))}column(t,e=1){let{text:i,from:s}=this.lineAt(t,e),a=this.countColumn(i,t-s),o=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return o>-1&&(a+=o-this.countColumn(i,i.search(/\S|$/))),a}countColumn(t,e=t.length){return fr(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:i,from:s}=this.lineAt(t,e),a=this.options.overrideIndentation;if(a){let o=a(s);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Dp=new Tt;function oD(l,t,e){let i=t.resolveStack(e),s=t.resolveInner(e,-1).resolve(e,0).enterUnfinishedNodesBefore(e);if(s!=i.node){let a=[];for(let o=s;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)a.push(o);for(let o=a.length-1;o>=0;o--)i={node:a[o],next:i}}return rO(i,l,e)}function rO(l,t,e){for(let i=l;i;i=i.next){let s=cD(i.node);if(s)return s(Rp.create(t,e,i))}return 0}function uD(l){return l.pos==l.options.simulateBreak&&l.options.simulateDoubleBreak}function cD(l){let t=l.type.prop(Dp);if(t)return t;let e=l.firstChild,i;if(e&&(i=e.type.prop(Tt.closedBy))){let s=l.lastChild,a=s&&i.indexOf(s.name)>-1;return o=>aO(o,!0,1,void 0,a&&!uD(o)?s.from:void 0)}return l.parent==null?fD:null}function fD(){return 0}class Rp extends Gc{constructor(t,e,i){super(t.state,t.options),this.base=t,this.pos=e,this.context=i}get node(){return this.context.node}static create(t,e,i){return new Rp(t,e,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let e=this.state.doc.lineAt(t.from);for(;;){let i=t.resolve(e.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(hD(i,t))break;e=this.state.doc.lineAt(i.from)}return this.lineIndent(e.from)}continue(){return rO(this.context.next,this.base,this.pos)}}function hD(l,t){for(let e=t;e;e=e.parent)if(l==e)return!0;return!1}function dD(l){let t=l.node,e=t.childAfter(t.from),i=t.lastChild;if(!e)return null;let s=l.options.simulateBreak,a=l.state.doc.lineAt(e.from),o=s==null||s<=a.from?a.to:Math.min(a.to,s);for(let c=e.to;;){let h=t.childAfter(c);if(!h||h==i)return null;if(!h.type.isSkipped){if(h.from>=o)return null;let d=/^ */.exec(a.text.slice(e.to-a.from))[0].length;return{from:e.from,to:e.to+d}}c=h.to}}function mB({closing:l,align:t=!0,units:e=1}){return i=>aO(i,t,e,l)}function aO(l,t,e,i,s){let a=l.textAfter,o=a.match(/^\s*/)[0].length,c=i&&a.slice(o,o+i.length)==i||s==l.pos+o,h=t?dD(l):null;return h?c?l.column(h.from):l.column(h.to):l.baseIndent+(c?0:l.unit*e)}const pB=l=>l.baseIndent;function vv({except:l,units:t=1}={}){return e=>{let i=l&&l.test(e.textAfter);return e.baseIndent+(i?0:t*e.unit)}}const mD=200;function pD(){return Lt.transactionFilter.of(l=>{if(!l.docChanged||!l.isUserEvent("input.type")&&!l.isUserEvent("input.complete"))return l;let t=l.startState.languageDataAt("indentOnInput",l.startState.selection.main.head);if(!t.length)return l;let e=l.newDoc,{head:i}=l.newSelection.main,s=e.lineAt(i);if(i>s.from+mD)return l;let a=e.sliceString(s.from,i);if(!t.some(d=>d.test(a)))return l;let{state:o}=l,c=-1,h=[];for(let{head:d}of o.selection.ranges){let p=o.doc.lineAt(d);if(p.from==c)continue;c=p.from;let y=Ep(o,p.from);if(y==null)continue;let b=/^\s*/.exec(p.text)[0],S=Xa(o,y);b!=S&&h.push({from:p.from,to:p.from+b.length,insert:S})}return h.length?[l,{changes:h,sequential:!0}]:l})}const gD=st.define(),Bp=new Tt;function yD(l){let t=l.firstChild,e=l.lastChild;return t&&t.to<e.from?{from:t.to,to:e.type.isError?l.to:e.from}:null}function bD(l,t,e){let i=Se(l);if(i.length<e)return null;let s=i.resolveStack(e,1),a=null;for(let o=s;o;o=o.next){let c=o.node;if(c.to<=e||c.from>e)continue;if(a&&c.from<t)break;let h=c.type.prop(Bp);if(h&&(c.to<i.length-50||i.length==l.doc.length||!vD(c))){let d=h(c,l);d&&d.from<=e&&d.from>=t&&d.to>e&&(a=d)}}return a}function vD(l){let t=l.lastChild;return t&&t.to==l.to&&t.type.isError}function Ac(l,t,e){for(let i of l.facet(gD)){let s=i(l,t,e);if(s)return s}return bD(l,t,e)}function oO(l,t){let e=t.mapPos(l.from,1),i=t.mapPos(l.to,-1);return e>=i?void 0:{from:e,to:i}}const Pc=xt.define({map:oO}),so=xt.define({map:oO});function uO(l){let t=[];for(let{head:e}of l.state.selection.ranges)t.some(i=>i.from<=e&&i.to>=e)||t.push(l.lineBlockAt(e));return t}const ns=ke.define({create(){return ht.none},update(l,t){t.isUserEvent("delete")&&t.changes.iterChangedRanges((e,i)=>l=Sv(l,e,i)),l=l.map(t.changes);for(let e of t.effects)if(e.is(Pc)&&!SD(l,e.value.from,e.value.to)){let{preparePlaceholder:i}=t.state.facet(hO),s=i?ht.replace({widget:new TD(i(t.state,e.value))}):xv;l=l.update({add:[s.range(e.value.from,e.value.to)]})}else e.is(so)&&(l=l.update({filter:(i,s)=>e.value.from!=i||e.value.to!=s,filterFrom:e.value.from,filterTo:e.value.to}));return t.selection&&(l=Sv(l,t.selection.main.head)),l},provide:l=>Z.decorations.from(l),toJSON(l,t){let e=[];return l.between(0,t.doc.length,(i,s)=>{e.push(i,s)}),e},fromJSON(l){if(!Array.isArray(l)||l.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let e=0;e<l.length;){let i=l[e++],s=l[e++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");t.push(xv.range(i,s))}return ht.set(t,!0)}});function Sv(l,t,e=t){let i=!1;return l.between(t,e,(s,a)=>{s<e&&a>t&&(i=!0)}),i?l.update({filterFrom:t,filterTo:e,filter:(s,a)=>s>=e||a<=t}):l}function Tc(l,t,e){var i;let s=null;return(i=l.field(ns,!1))===null||i===void 0||i.between(t,e,(a,o)=>{(!s||s.from>a)&&(s={from:a,to:o})}),s}function SD(l,t,e){let i=!1;return l.between(t,t,(s,a)=>{s==t&&a==e&&(i=!0)}),i}function cO(l,t){return l.field(ns,!1)?t:t.concat(xt.appendConfig.of(dO()))}const xD=l=>{for(let t of uO(l)){let e=Ac(l.state,t.from,t.to);if(e)return l.dispatch({effects:cO(l.state,[Pc.of(e),fO(l,e)])}),!0}return!1},OD=l=>{if(!l.state.field(ns,!1))return!1;let t=[];for(let e of uO(l)){let i=Tc(l.state,e.from,e.to);i&&t.push(so.of(i),fO(l,i,!1))}return t.length&&l.dispatch({effects:t}),t.length>0};function fO(l,t,e=!0){let i=l.state.doc.lineAt(t.from).number,s=l.state.doc.lineAt(t.to).number;return Z.announce.of(`${l.state.phrase(e?"Folded lines":"Unfolded lines")} ${i} ${l.state.phrase("to")} ${s}.`)}const wD=l=>{let{state:t}=l,e=[];for(let i=0;i<t.doc.length;){let s=l.lineBlockAt(i),a=Ac(t,s.from,s.to);a&&e.push(Pc.of(a)),i=(a?l.lineBlockAt(a.to):s).to+1}return e.length&&l.dispatch({effects:cO(l.state,e)}),!!e.length},CD=l=>{let t=l.state.field(ns,!1);if(!t||!t.size)return!1;let e=[];return t.between(0,l.state.doc.length,(i,s)=>{e.push(so.of({from:i,to:s}))}),l.dispatch({effects:e}),!0},kD=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:xD},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:OD},{key:"Ctrl-Alt-[",run:wD},{key:"Ctrl-Alt-]",run:CD}],AD={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},hO=st.define({combine(l){return un(l,AD)}});function dO(l){return[ns,DD]}function mO(l,t){let{state:e}=l,i=e.facet(hO),s=o=>{let c=l.lineBlockAt(l.posAtDOM(o.target)),h=Tc(l.state,c.from,c.to);h&&l.dispatch({effects:so.of(h)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(l,s,t);let a=document.createElement("span");return a.textContent=i.placeholderText,a.setAttribute("aria-label",e.phrase("folded code")),a.title=e.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=s,a}const xv=ht.replace({widget:new class extends Wi{toDOM(l){return mO(l,null)}}});class TD extends Wi{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return mO(t,this.value)}}const MD={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ud extends Vn{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function ED(l={}){let t={...MD,...l},e=new Ud(t,!0),i=new Ud(t,!1),s=ce.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Cl)!=o.state.facet(Cl)||o.startState.field(ns,!1)!=o.state.field(ns,!1)||Se(o.startState)!=Se(o.state)||t.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let c=new Hn;for(let h of o.viewportLineBlocks){let d=Tc(o.state,h.from,h.to)?i:Ac(o.state,h.from,h.to)?e:null;d&&c.add(h.from,h.from,d)}return c.finish()}}),{domEventHandlers:a}=t;return[s,kE({class:"cm-foldGutter",markers(o){var c;return((c=o.plugin(s))===null||c===void 0?void 0:c.markers)||Bt.empty},initialSpacer(){return new Ud(t,!1)},domEventHandlers:{...a,click:(o,c,h)=>{if(a.click&&a.click(o,c,h))return!0;let d=Tc(o.state,c.from,c.to);if(d)return o.dispatch({effects:so.of(d)}),!0;let p=Ac(o.state,c.from,c.to);return p?(o.dispatch({effects:Pc.of(p)}),!0):!1}}}),dO()]}const DD=Z.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ro{constructor(t,e){this.specs=t;let i;function s(c){let h=Sl.newName();return(i||(i=Object.create(null)))["."+h]=c,h}const a=typeof e.all=="string"?e.all:e.all?s(e.all):void 0,o=e.scope;this.scope=o instanceof Ui?c=>c.prop(Ps)==o.data:o?c=>c==o:void 0,this.style=nO(t.map(c=>({tag:c.tag,class:c.class||s(Object.assign({},c,{tag:null}))})),{all:a}).style,this.module=i?new Sl(i):null,this.themeType=e.themeType}static define(t,e){return new ro(t,e||{})}}const Qm=st.define(),pO=st.define({combine(l){return l.length?[l[0]]:null}});function jd(l){let t=l.facet(Qm);return t.length?t:l.facet(pO)}function gO(l,t){let e=[BD],i;return l instanceof ro&&(l.module&&e.push(Z.styleModule.of(l.module)),i=l.themeType),t?.fallback?e.push(pO.of(l)):i?e.push(Qm.computeN([Z.darkTheme],s=>s.facet(Z.darkTheme)==(i=="dark")?[l]:[])):e.push(Qm.of(l)),e}class RD{constructor(t){this.markCache=Object.create(null),this.tree=Se(t.state),this.decorations=this.buildDeco(t,jd(t.state)),this.decoratedTo=t.viewport.to}update(t){let e=Se(t.state),i=jd(t.state),s=i!=jd(t.startState),{viewport:a}=t.view,o=t.changes.mapPos(this.decoratedTo,1);e.length<a.to&&!s&&e.type==this.tree.type&&o>=a.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=o):(e!=this.tree||t.viewportChanged||s)&&(this.tree=e,this.decorations=this.buildDeco(t.view,i),this.decoratedTo=a.to)}buildDeco(t,e){if(!e||!this.tree.length)return ht.none;let i=new Hn;for(let{from:s,to:a}of t.visibleRanges)tD(this.tree,e,(o,c,h)=>{i.add(o,c,this.markCache[h]||(this.markCache[h]=ht.mark({class:h})))},s,a);return i.finish()}}const BD=Al.high(ce.fromClass(RD,{decorations:l=>l.decorations})),ND=ro.define([{tag:L.meta,color:"#404740"},{tag:L.link,textDecoration:"underline"},{tag:L.heading,textDecoration:"underline",fontWeight:"bold"},{tag:L.emphasis,fontStyle:"italic"},{tag:L.strong,fontWeight:"bold"},{tag:L.strikethrough,textDecoration:"line-through"},{tag:L.keyword,color:"#708"},{tag:[L.atom,L.bool,L.url,L.contentSeparator,L.labelName],color:"#219"},{tag:[L.literal,L.inserted],color:"#164"},{tag:[L.string,L.deleted],color:"#a11"},{tag:[L.regexp,L.escape,L.special(L.string)],color:"#e40"},{tag:L.definition(L.variableName),color:"#00f"},{tag:L.local(L.variableName),color:"#30a"},{tag:[L.typeName,L.namespace],color:"#085"},{tag:L.className,color:"#167"},{tag:[L.special(L.variableName),L.macroName],color:"#256"},{tag:L.definition(L.propertyName),color:"#00c"},{tag:L.comment,color:"#940"},{tag:L.invalid,color:"#f00"}]),zD=Z.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),yO=1e4,bO="()[]{}",vO=st.define({combine(l){return un(l,{afterCursor:!0,brackets:bO,maxScanDistance:yO,renderMatch:HD})}}),LD=ht.mark({class:"cm-matchingBracket"}),_D=ht.mark({class:"cm-nonmatchingBracket"});function HD(l){let t=[],e=l.matched?LD:_D;return t.push(e.range(l.start.from,l.start.to)),l.end&&t.push(e.range(l.end.from,l.end.to)),t}const qD=ke.define({create(){return ht.none},update(l,t){if(!t.docChanged&&!t.selection)return l;let e=[],i=t.state.facet(vO);for(let s of t.state.selection.ranges){if(!s.empty)continue;let a=sn(t.state,s.head,-1,i)||s.head>0&&sn(t.state,s.head-1,1,i)||i.afterCursor&&(sn(t.state,s.head,1,i)||s.head<t.state.doc.length&&sn(t.state,s.head+1,-1,i));a&&(e=e.concat(i.renderMatch(a,t.state)))}return ht.set(e,!0)},provide:l=>Z.decorations.from(l)}),VD=[qD,zD];function UD(l={}){return[vO.of(l),VD]}const SO=new Tt;function Gm(l,t,e){let i=l.prop(t<0?Tt.openedBy:Tt.closedBy);if(i)return i;if(l.name.length==1){let s=e.indexOf(l.name);if(s>-1&&s%2==(t<0?1:0))return[e[s+t]]}return null}function Pm(l){let t=l.type.prop(SO);return t?t(l.node):l}function sn(l,t,e,i={}){let s=i.maxScanDistance||yO,a=i.brackets||bO,o=Se(l),c=o.resolveInner(t,e);for(let h=c;h;h=h.parent){let d=Gm(h.type,e,a);if(d&&h.from<h.to){let p=Pm(h);if(p&&(e>0?t>=p.from&&t<p.to:t>p.from&&t<=p.to))return jD(l,t,e,h,p,d,a)}}return WD(l,t,e,o,c.type,s,a)}function jD(l,t,e,i,s,a,o){let c=i.parent,h={from:s.from,to:s.to},d=0,p=c?.cursor();if(p&&(e<0?p.childBefore(i.from):p.childAfter(i.to)))do if(e<0?p.to<=i.from:p.from>=i.to){if(d==0&&a.indexOf(p.type.name)>-1&&p.from<p.to){let y=Pm(p);return{start:h,end:y?{from:y.from,to:y.to}:void 0,matched:!0}}else if(Gm(p.type,e,o))d++;else if(Gm(p.type,-e,o)){if(d==0){let y=Pm(p);return{start:h,end:y&&y.from<y.to?{from:y.from,to:y.to}:void 0,matched:!1}}d--}}while(e<0?p.prevSibling():p.nextSibling());return{start:h,matched:!1}}function WD(l,t,e,i,s,a,o){let c=e<0?l.sliceDoc(t-1,t):l.sliceDoc(t,t+1),h=o.indexOf(c);if(h<0||h%2==0!=e>0)return null;let d={from:e<0?t-1:t,to:e>0?t+1:t},p=l.doc.iterRange(t,e>0?l.doc.length:0),y=0;for(let b=0;!p.next().done&&b<=a;){let S=p.value;e<0&&(b+=S.length);let O=t+b*e;for(let w=e>0?0:S.length-1,C=e>0?S.length:-1;w!=C;w+=e){let M=o.indexOf(S[w]);if(!(M<0||i.resolveInner(O+w,1).type!=s))if(M%2==0==e>0)y++;else{if(y==1)return{start:d,end:{from:O+w,to:O+w+1},matched:M>>1==h>>1};y--}}e>0&&(b+=S.length)}return p.done?{start:d,matched:!1}:null}const YD=Object.create(null),Ov=[Xe.none],wv=[],Cv=Object.create(null),XD=Object.create(null);for(let[l,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])XD[l]=QD(YD,t);function Wd(l,t){wv.indexOf(l)>-1||(wv.push(l),console.warn(t))}function QD(l,t){let e=[];for(let c of t.split(" ")){let h=[];for(let d of c.split(".")){let p=l[d]||L[d];p?typeof p=="function"?h.length?h=h.map(p):Wd(d,`Modifier ${d} used at start of tag`):h.length?Wd(d,`Tag ${d} used as modifier`):h=Array.isArray(p)?p:[p]:Wd(d,`Unknown highlighting tag ${d}`)}for(let d of h)e.push(d)}if(!e.length)return 0;let i=t.replace(/ /g,"_"),s=i+" "+e.map(c=>c.id),a=Cv[s];if(a)return a.id;let o=Cv[s]=Xe.define({id:Ov.length,name:i,props:[Mp({[i]:e})]});return Ov.push(o),o.id}Zt.RTL,Zt.LTR;const GD=l=>{let{state:t}=l,e=t.doc.lineAt(t.selection.main.from),i=zp(l.state,e.from);return i.line?PD(l):i.block?KD(l):!1};function Np(l,t){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let s=l(t,e);return s?(i(e.update(s)),!0):!1}}const PD=Np(FD,0),$D=Np(xO,0),KD=Np((l,t)=>xO(l,t,ZD(t)),0);function zp(l,t){let e=l.languageDataAt("commentTokens",t,1);return e.length?e[0]:{}}const ya=50;function ID(l,{open:t,close:e},i,s){let a=l.sliceDoc(i-ya,i),o=l.sliceDoc(s,s+ya),c=/\s*$/.exec(a)[0].length,h=/^\s*/.exec(o)[0].length,d=a.length-c;if(a.slice(d-t.length,d)==t&&o.slice(h,h+e.length)==e)return{open:{pos:i-c,margin:c&&1},close:{pos:s+h,margin:h&&1}};let p,y;s-i<=2*ya?p=y=l.sliceDoc(i,s):(p=l.sliceDoc(i,i+ya),y=l.sliceDoc(s-ya,s));let b=/^\s*/.exec(p)[0].length,S=/\s*$/.exec(y)[0].length,O=y.length-S-e.length;return p.slice(b,b+t.length)==t&&y.slice(O,O+e.length)==e?{open:{pos:i+b+t.length,margin:/\s/.test(p.charAt(b+t.length))?1:0},close:{pos:s-S-e.length,margin:/\s/.test(y.charAt(O-1))?1:0}}:null}function ZD(l){let t=[];for(let e of l.selection.ranges){let i=l.doc.lineAt(e.from),s=e.to<=i.to?i:l.doc.lineAt(e.to);s.from>i.from&&s.from==e.to&&(s=e.to==i.to+1?i:l.doc.lineAt(e.to-1));let a=t.length-1;a>=0&&t[a].to>i.from?t[a].to=s.to:t.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return t}function xO(l,t,e=t.selection.ranges){let i=e.map(a=>zp(t,a.from).block);if(!i.every(a=>a))return null;let s=e.map((a,o)=>ID(t,i[o],a.from,a.to));if(l!=2&&!s.every(a=>a))return{changes:t.changes(e.map((a,o)=>s[o]?[]:[{from:a.from,insert:i[o].open+" "},{from:a.to,insert:" "+i[o].close}]))};if(l!=1&&s.some(a=>a)){let a=[];for(let o=0,c;o<s.length;o++)if(c=s[o]){let h=i[o],{open:d,close:p}=c;a.push({from:d.pos-h.open.length,to:d.pos+d.margin},{from:p.pos-p.margin,to:p.pos+h.close.length})}return{changes:a}}return null}function FD(l,t,e=t.selection.ranges){let i=[],s=-1;for(let{from:a,to:o}of e){let c=i.length,h=1e9,d=zp(t,a).line;if(d){for(let p=a;p<=o;){let y=t.doc.lineAt(p);if(y.from>s&&(a==o||o>y.from)){s=y.from;let b=/^\s*/.exec(y.text)[0].length,S=b==y.length,O=y.text.slice(b,b+d.length)==d?b:-1;b<y.text.length&&b<h&&(h=b),i.push({line:y,comment:O,token:d,indent:b,empty:S,single:!1})}p=y.to+1}if(h<1e9)for(let p=c;p<i.length;p++)i[p].indent<i[p].line.text.length&&(i[p].indent=h);i.length==c+1&&(i[c].single=!0)}}if(l!=2&&i.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:c,token:h,indent:d,empty:p,single:y}of i)(y||!p)&&a.push({from:c.from+d,insert:h+" "});let o=t.changes(a);return{changes:o,selection:t.selection.map(o,1)}}else if(l!=1&&i.some(a=>a.comment>=0)){let a=[];for(let{line:o,comment:c,token:h}of i)if(c>=0){let d=o.from+c,p=d+h.length;o.text[p-o.from]==" "&&p++,a.push({from:d,to:p})}return{changes:a}}return null}const $m=on.define(),JD=on.define(),t3=st.define(),OO=st.define({combine(l){return un(l,{minDepth:100,newGroupDelay:500,joinToEvent:(t,e)=>e},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,e)=>(i,s)=>t(i,s)||e(i,s)})}}),wO=ke.define({create(){return rn.empty},update(l,t){let e=t.state.facet(OO),i=t.annotation($m);if(i){let h=ni.fromTransaction(t,i.selection),d=i.side,p=d==0?l.undone:l.done;return h?p=Mc(p,p.length,e.minDepth,h):p=AO(p,t.startState.selection),new rn(d==0?i.rest:p,d==0?p:i.rest)}let s=t.annotation(JD);if((s=="full"||s=="before")&&(l=l.isolate()),t.annotation(pe.addToHistory)===!1)return t.changes.empty?l:l.addMapping(t.changes.desc);let a=ni.fromTransaction(t),o=t.annotation(pe.time),c=t.annotation(pe.userEvent);return a?l=l.addChanges(a,o,c,e,t):t.selection&&(l=l.addSelection(t.startState.selection,o,c,e.newGroupDelay)),(s=="full"||s=="after")&&(l=l.isolate()),l},toJSON(l){return{done:l.done.map(t=>t.toJSON()),undone:l.undone.map(t=>t.toJSON())}},fromJSON(l){return new rn(l.done.map(ni.fromJSON),l.undone.map(ni.fromJSON))}});function e3(l={}){return[wO,OO.of(l),Z.domEventHandlers({beforeinput(t,e){let i=t.inputType=="historyUndo"?CO:t.inputType=="historyRedo"?Km:null;return i?(t.preventDefault(),i(e)):!1}})]}function $c(l,t){return function({state:e,dispatch:i}){if(!t&&e.readOnly)return!1;let s=e.field(wO,!1);if(!s)return!1;let a=s.pop(l,e,t);return a?(i(a),!0):!1}}const CO=$c(0,!1),Km=$c(1,!1),i3=$c(0,!0),n3=$c(1,!0);class ni{constructor(t,e,i,s,a){this.changes=t,this.effects=e,this.mapped=i,this.startSelection=s,this.selectionsAfter=a}setSelAfter(t){return new ni(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,i;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(e=this.mapped)===null||e===void 0?void 0:e.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(t){return new ni(t.changes&&be.fromJSON(t.changes),[],t.mapped&&an.fromJSON(t.mapped),t.startSelection&&W.fromJSON(t.startSelection),t.selectionsAfter.map(W.fromJSON))}static fromTransaction(t,e){let i=Di;for(let s of t.startState.facet(t3)){let a=s(t);a.length&&(i=i.concat(a))}return!i.length&&t.changes.empty?null:new ni(t.changes.invert(t.startState.doc),i,void 0,e||t.startState.selection,Di)}static selection(t){return new ni(void 0,Di,void 0,void 0,t)}}function Mc(l,t,e,i){let s=t+1>e+20?t-e-1:0,a=l.slice(s,t);return a.push(i),a}function l3(l,t){let e=[],i=!1;return l.iterChangedRanges((s,a)=>e.push(s,a)),t.iterChangedRanges((s,a,o,c)=>{for(let h=0;h<e.length;){let d=e[h++],p=e[h++];c>=d&&o<=p&&(i=!0)}}),i}function s3(l,t){return l.ranges.length==t.ranges.length&&l.ranges.filter((e,i)=>e.empty!=t.ranges[i].empty).length===0}function kO(l,t){return l.length?t.length?l.concat(t):l:t}const Di=[],r3=200;function AO(l,t){if(l.length){let e=l[l.length-1],i=e.selectionsAfter.slice(Math.max(0,e.selectionsAfter.length-r3));return i.length&&i[i.length-1].eq(t)?l:(i.push(t),Mc(l,l.length-1,1e9,e.setSelAfter(i)))}else return[ni.selection([t])]}function a3(l){let t=l[l.length-1],e=l.slice();return e[l.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),e}function Yd(l,t){if(!l.length)return l;let e=l.length,i=Di;for(;e;){let s=o3(l[e-1],t,i);if(s.changes&&!s.changes.empty||s.effects.length){let a=l.slice(0,e);return a[e-1]=s,a}else t=s.mapped,e--,i=s.selectionsAfter}return i.length?[ni.selection(i)]:Di}function o3(l,t,e){let i=kO(l.selectionsAfter.length?l.selectionsAfter.map(c=>c.map(t)):Di,e);if(!l.changes)return ni.selection(i);let s=l.changes.map(t),a=t.mapDesc(l.changes,!0),o=l.mapped?l.mapped.composeDesc(a):a;return new ni(s,xt.mapEffects(l.effects,t),o,l.startSelection.map(a),i)}const u3=/^(input\.type|delete)($|\.)/;class rn{constructor(t,e,i=0,s=void 0){this.done=t,this.undone=e,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new rn(this.done,this.undone):this}addChanges(t,e,i,s,a){let o=this.done,c=o[o.length-1];return c&&c.changes&&!c.changes.empty&&t.changes&&(!i||u3.test(i))&&(!c.selectionsAfter.length&&e-this.prevTime<s.newGroupDelay&&s.joinToEvent(a,l3(c.changes,t.changes))||i=="input.type.compose")?o=Mc(o,o.length-1,s.minDepth,new ni(t.changes.compose(c.changes),kO(xt.mapEffects(t.effects,c.changes),c.effects),c.mapped,c.startSelection,Di)):o=Mc(o,o.length,s.minDepth,t),new rn(o,Di,e,i)}addSelection(t,e,i,s){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:Di;return a.length>0&&e-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&s3(a[a.length-1],t)?this:new rn(AO(this.done,t),this.undone,e,i)}addMapping(t){return new rn(Yd(this.done,t),Yd(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,i){let s=t==0?this.done:this.undone;if(s.length==0)return null;let a=s[s.length-1],o=a.selectionsAfter[0]||e.selection;if(i&&a.selectionsAfter.length)return e.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:$m.of({side:t,rest:a3(s),selection:o}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let c=s.length==1?Di:s.slice(0,s.length-1);return a.mapped&&(c=Yd(c,a.mapped)),e.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:$m.of({side:t,rest:c,selection:o}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}rn.empty=new rn(Di,Di);const c3=[{key:"Mod-z",run:CO,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Km,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Km,preventDefault:!0},{key:"Mod-u",run:i3,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:n3,preventDefault:!0}];function hr(l,t){return W.create(l.ranges.map(t),l.mainIndex)}function Yi(l,t){return l.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function Xi({state:l,dispatch:t},e){let i=hr(l.selection,e);return i.eq(l.selection,!0)?!1:(t(Yi(l,i)),!0)}function Kc(l,t){return W.cursor(t?l.to:l.from)}function TO(l,t){return Xi(l,e=>e.empty?l.moveByChar(e,t):Kc(e,t))}function Ue(l){return l.textDirectionAt(l.state.selection.main.head)==Zt.LTR}const MO=l=>TO(l,!Ue(l)),EO=l=>TO(l,Ue(l));function DO(l,t){return Xi(l,e=>e.empty?l.moveByGroup(e,t):Kc(e,t))}const f3=l=>DO(l,!Ue(l)),h3=l=>DO(l,Ue(l));function d3(l,t,e){if(t.type.prop(e))return!0;let i=t.to-t.from;return i&&(i>2||/[^\s,.;:]/.test(l.sliceDoc(t.from,t.to)))||t.firstChild}function Ic(l,t,e){let i=Se(l).resolveInner(t.head),s=e?Tt.closedBy:Tt.openedBy;for(let h=t.head;;){let d=e?i.childAfter(h):i.childBefore(h);if(!d)break;d3(l,d,s)?i=d:h=e?d.to:d.from}let a=i.type.prop(s),o,c;return a&&(o=e?sn(l,i.from,1):sn(l,i.to,-1))&&o.matched?c=e?o.end.to:o.end.from:c=e?i.to:i.from,W.cursor(c,e?-1:1)}const m3=l=>Xi(l,t=>Ic(l.state,t,!Ue(l))),p3=l=>Xi(l,t=>Ic(l.state,t,Ue(l)));function RO(l,t){return Xi(l,e=>{if(!e.empty)return Kc(e,t);let i=l.moveVertically(e,t);return i.head!=e.head?i:l.moveToLineBoundary(e,t)})}const BO=l=>RO(l,!1),NO=l=>RO(l,!0);function zO(l){let t=l.scrollDOM.clientHeight<l.scrollDOM.scrollHeight-2,e=0,i=0,s;if(t){for(let a of l.state.facet(Z.scrollMargins)){let o=a(l);o?.top&&(e=Math.max(o?.top,e)),o?.bottom&&(i=Math.max(o?.bottom,i))}s=l.scrollDOM.clientHeight-e-i}else s=(l.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:e,marginBottom:i,selfScroll:t,height:Math.max(l.defaultLineHeight,s-5)}}function LO(l,t){let e=zO(l),{state:i}=l,s=hr(i.selection,o=>o.empty?l.moveVertically(o,t,e.height):Kc(o,t));if(s.eq(i.selection))return!1;let a;if(e.selfScroll){let o=l.coordsAtPos(i.selection.main.head),c=l.scrollDOM.getBoundingClientRect(),h=c.top+e.marginTop,d=c.bottom-e.marginBottom;o&&o.top>h&&o.bottom<d&&(a=Z.scrollIntoView(s.main.head,{y:"start",yMargin:o.top-h}))}return l.dispatch(Yi(i,s),{effects:a}),!0}const kv=l=>LO(l,!1),Im=l=>LO(l,!0);function Tl(l,t,e){let i=l.lineBlockAt(t.head),s=l.moveToLineBoundary(t,e);if(s.head==t.head&&s.head!=(e?i.to:i.from)&&(s=l.moveToLineBoundary(t,e,!1)),!e&&s.head==i.from&&i.length){let a=/^\s*/.exec(l.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;a&&t.head!=i.from+a&&(s=W.cursor(i.from+a))}return s}const g3=l=>Xi(l,t=>Tl(l,t,!0)),y3=l=>Xi(l,t=>Tl(l,t,!1)),b3=l=>Xi(l,t=>Tl(l,t,!Ue(l))),v3=l=>Xi(l,t=>Tl(l,t,Ue(l))),S3=l=>Xi(l,t=>W.cursor(l.lineBlockAt(t.head).from,1)),x3=l=>Xi(l,t=>W.cursor(l.lineBlockAt(t.head).to,-1));function O3(l,t,e){let i=!1,s=hr(l.selection,a=>{let o=sn(l,a.head,-1)||sn(l,a.head,1)||a.head>0&&sn(l,a.head-1,1)||a.head<l.doc.length&&sn(l,a.head+1,-1);if(!o||!o.end)return a;i=!0;let c=o.start.from==a.head?o.end.to:o.end.from;return W.cursor(c)});return i?(t(Yi(l,s)),!0):!1}const w3=({state:l,dispatch:t})=>O3(l,t);function zi(l,t){let e=hr(l.state.selection,i=>{let s=t(i);return W.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return e.eq(l.state.selection)?!1:(l.dispatch(Yi(l.state,e)),!0)}function _O(l,t){return zi(l,e=>l.moveByChar(e,t))}const HO=l=>_O(l,!Ue(l)),qO=l=>_O(l,Ue(l));function VO(l,t){return zi(l,e=>l.moveByGroup(e,t))}const C3=l=>VO(l,!Ue(l)),k3=l=>VO(l,Ue(l)),A3=l=>zi(l,t=>Ic(l.state,t,!Ue(l))),T3=l=>zi(l,t=>Ic(l.state,t,Ue(l)));function UO(l,t){return zi(l,e=>l.moveVertically(e,t))}const jO=l=>UO(l,!1),WO=l=>UO(l,!0);function YO(l,t){return zi(l,e=>l.moveVertically(e,t,zO(l).height))}const Av=l=>YO(l,!1),Tv=l=>YO(l,!0),M3=l=>zi(l,t=>Tl(l,t,!0)),E3=l=>zi(l,t=>Tl(l,t,!1)),D3=l=>zi(l,t=>Tl(l,t,!Ue(l))),R3=l=>zi(l,t=>Tl(l,t,Ue(l))),B3=l=>zi(l,t=>W.cursor(l.lineBlockAt(t.head).from)),N3=l=>zi(l,t=>W.cursor(l.lineBlockAt(t.head).to)),Mv=({state:l,dispatch:t})=>(t(Yi(l,{anchor:0})),!0),Ev=({state:l,dispatch:t})=>(t(Yi(l,{anchor:l.doc.length})),!0),Dv=({state:l,dispatch:t})=>(t(Yi(l,{anchor:l.selection.main.anchor,head:0})),!0),Rv=({state:l,dispatch:t})=>(t(Yi(l,{anchor:l.selection.main.anchor,head:l.doc.length})),!0),z3=({state:l,dispatch:t})=>(t(l.update({selection:{anchor:0,head:l.doc.length},userEvent:"select"})),!0),L3=({state:l,dispatch:t})=>{let e=Zc(l).map(({from:i,to:s})=>W.range(i,Math.min(s+1,l.doc.length)));return t(l.update({selection:W.create(e),userEvent:"select"})),!0},_3=({state:l,dispatch:t})=>{let e=hr(l.selection,i=>{let s=Se(l),a=s.resolveStack(i.from,1);if(i.empty){let o=s.resolveStack(i.from,-1);o.node.from>=a.node.from&&o.node.to<=a.node.to&&(a=o)}for(let o=a;o;o=o.next){let{node:c}=o;if((c.from<i.from&&c.to>=i.to||c.to>i.to&&c.from<=i.from)&&o.next)return W.range(c.to,c.from)}return i});return e.eq(l.selection)?!1:(t(Yi(l,e)),!0)};function XO(l,t){let{state:e}=l,i=e.selection,s=e.selection.ranges.slice();for(let a of e.selection.ranges){let o=e.doc.lineAt(a.head);if(t?o.to<l.state.doc.length:o.from>0)for(let c=a;;){let h=l.moveVertically(c,t);if(h.head<o.from||h.head>o.to){s.some(d=>d.head==h.head)||s.push(h);break}else{if(h.head==c.head)break;c=h}}}return s.length==i.ranges.length?!1:(l.dispatch(Yi(e,W.create(s,s.length-1))),!0)}const H3=l=>XO(l,!1),q3=l=>XO(l,!0),V3=({state:l,dispatch:t})=>{let e=l.selection,i=null;return e.ranges.length>1?i=W.create([e.main]):e.main.empty||(i=W.create([W.cursor(e.main.head)])),i?(t(Yi(l,i)),!0):!1};function ao(l,t){if(l.state.readOnly)return!1;let e="delete.selection",{state:i}=l,s=i.changeByRange(a=>{let{from:o,to:c}=a;if(o==c){let h=t(a);h<o?(e="delete.backward",h=$u(l,h,!1)):h>o&&(e="delete.forward",h=$u(l,h,!0)),o=Math.min(o,h),c=Math.max(c,h)}else o=$u(l,o,!1),c=$u(l,c,!0);return o==c?{range:a}:{changes:{from:o,to:c},range:W.cursor(o,o<a.head?-1:1)}});return s.changes.empty?!1:(l.dispatch(i.update(s,{scrollIntoView:!0,userEvent:e,effects:e=="delete.selection"?Z.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function $u(l,t,e){if(l instanceof Z)for(let i of l.state.facet(Z.atomicRanges).map(s=>s(l)))i.between(t,t,(s,a)=>{s<t&&a>t&&(t=e?a:s)});return t}const QO=(l,t,e)=>ao(l,i=>{let s=i.from,{state:a}=l,o=a.doc.lineAt(s),c,h;if(e&&!t&&s>o.from&&s<o.from+200&&!/[^ \t]/.test(c=o.text.slice(0,s-o.from))){if(c[c.length-1]=="	")return s-1;let d=fr(c,a.tabSize),p=d%kc(a)||kc(a);for(let y=0;y<p&&c[c.length-1-y]==" ";y++)s--;h=s}else h=ve(o.text,s-o.from,t,t)+o.from,h==s&&o.number!=(t?a.doc.lines:1)?h+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(o.text.slice(h-o.from,s-o.from))&&(h=ve(o.text,h-o.from,!1,!1)+o.from);return h}),Zm=l=>QO(l,!1,!0),GO=l=>QO(l,!0,!1),PO=(l,t)=>ao(l,e=>{let i=e.head,{state:s}=l,a=s.doc.lineAt(i),o=s.charCategorizer(i);for(let c=null;;){if(i==(t?a.to:a.from)){i==e.head&&a.number!=(t?s.doc.lines:1)&&(i+=t?1:-1);break}let h=ve(a.text,i-a.from,t)+a.from,d=a.text.slice(Math.min(i,h)-a.from,Math.max(i,h)-a.from),p=o(d);if(c!=null&&p!=c)break;(d!=" "||i!=e.head)&&(c=p),i=h}return i}),$O=l=>PO(l,!1),U3=l=>PO(l,!0),j3=l=>ao(l,t=>{let e=l.lineBlockAt(t.head).to;return t.head<e?e:Math.min(l.state.doc.length,t.head+1)}),W3=l=>ao(l,t=>{let e=l.moveToLineBoundary(t,!1).head;return t.head>e?e:Math.max(0,t.head-1)}),Y3=l=>ao(l,t=>{let e=l.moveToLineBoundary(t,!0).head;return t.head<e?e:Math.min(l.state.doc.length,t.head+1)}),X3=({state:l,dispatch:t})=>{if(l.readOnly)return!1;let e=l.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:qt.of(["",""])},range:W.cursor(i.from)}));return t(l.update(e,{scrollIntoView:!0,userEvent:"input"})),!0},Q3=({state:l,dispatch:t})=>{if(l.readOnly)return!1;let e=l.changeByRange(i=>{if(!i.empty||i.from==0||i.from==l.doc.length)return{range:i};let s=i.from,a=l.doc.lineAt(s),o=s==a.from?s-1:ve(a.text,s-a.from,!1)+a.from,c=s==a.to?s+1:ve(a.text,s-a.from,!0)+a.from;return{changes:{from:o,to:c,insert:l.doc.slice(s,c).append(l.doc.slice(o,s))},range:W.cursor(c)}});return e.changes.empty?!1:(t(l.update(e,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Zc(l){let t=[],e=-1;for(let i of l.selection.ranges){let s=l.doc.lineAt(i.from),a=l.doc.lineAt(i.to);if(!i.empty&&i.to==a.from&&(a=l.doc.lineAt(i.to-1)),e>=s.number){let o=t[t.length-1];o.to=a.to,o.ranges.push(i)}else t.push({from:s.from,to:a.to,ranges:[i]});e=a.number+1}return t}function KO(l,t,e){if(l.readOnly)return!1;let i=[],s=[];for(let a of Zc(l)){if(e?a.to==l.doc.length:a.from==0)continue;let o=l.doc.lineAt(e?a.to+1:a.from-1),c=o.length+1;if(e){i.push({from:a.to,to:o.to},{from:a.from,insert:o.text+l.lineBreak});for(let h of a.ranges)s.push(W.range(Math.min(l.doc.length,h.anchor+c),Math.min(l.doc.length,h.head+c)))}else{i.push({from:o.from,to:a.from},{from:a.to,insert:l.lineBreak+o.text});for(let h of a.ranges)s.push(W.range(h.anchor-c,h.head-c))}}return i.length?(t(l.update({changes:i,scrollIntoView:!0,selection:W.create(s,l.selection.mainIndex),userEvent:"move.line"})),!0):!1}const G3=({state:l,dispatch:t})=>KO(l,t,!1),P3=({state:l,dispatch:t})=>KO(l,t,!0);function IO(l,t,e){if(l.readOnly)return!1;let i=[];for(let a of Zc(l))e?i.push({from:a.from,insert:l.doc.slice(a.from,a.to)+l.lineBreak}):i.push({from:a.to,insert:l.lineBreak+l.doc.slice(a.from,a.to)});let s=l.changes(i);return t(l.update({changes:s,selection:l.selection.map(s,e?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const $3=({state:l,dispatch:t})=>IO(l,t,!1),K3=({state:l,dispatch:t})=>IO(l,t,!0),I3=l=>{if(l.state.readOnly)return!1;let{state:t}=l,e=t.changes(Zc(t).map(({from:s,to:a})=>(s>0?s--:a<t.doc.length&&a++,{from:s,to:a}))),i=hr(t.selection,s=>{let a;if(l.lineWrapping){let o=l.lineBlockAt(s.head),c=l.coordsAtPos(s.head,s.assoc||1);c&&(a=o.bottom+l.documentTop-c.bottom+l.defaultLineHeight/2)}return l.moveVertically(s,!0,a)}).map(e);return l.dispatch({changes:e,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Z3(l,t){if(/\(\)|\[\]|\{\}/.test(l.sliceDoc(t-1,t+1)))return{from:t,to:t};let e=Se(l).resolveInner(t),i=e.childBefore(t),s=e.childAfter(t),a;return i&&s&&i.to<=t&&s.from>=t&&(a=i.type.prop(Tt.closedBy))&&a.indexOf(s.name)>-1&&l.doc.lineAt(i.to).from==l.doc.lineAt(s.from).from&&!/\S/.test(l.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const Bv=ZO(!1),F3=ZO(!0);function ZO(l){return({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=t.changeByRange(s=>{let{from:a,to:o}=s,c=t.doc.lineAt(a),h=!l&&a==o&&Z3(t,a);l&&(a=o=(o<=c.to?c:t.doc.lineAt(o)).to);let d=new Gc(t,{simulateBreak:a,simulateDoubleBreak:!!h}),p=Ep(d,a);for(p==null&&(p=fr(/^\s*/.exec(t.doc.lineAt(a).text)[0],t.tabSize));o<c.to&&/\s/.test(c.text[o-c.from]);)o++;h?{from:a,to:o}=h:a>c.from&&a<c.from+100&&!/\S/.test(c.text.slice(0,a))&&(a=c.from);let y=["",Xa(t,p)];return h&&y.push(Xa(t,d.lineIndent(c.from,-1))),{changes:{from:a,to:o,insert:qt.of(y)},range:W.cursor(a+1+y[1].length)}});return e(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Lp(l,t){let e=-1;return l.changeByRange(i=>{let s=[];for(let o=i.from;o<=i.to;){let c=l.doc.lineAt(o);c.number>e&&(i.empty||i.to>c.from)&&(t(c,s,i),e=c.number),o=c.to+1}let a=l.changes(s);return{changes:s,range:W.range(a.mapPos(i.anchor,1),a.mapPos(i.head,1))}})}const J3=({state:l,dispatch:t})=>{if(l.readOnly)return!1;let e=Object.create(null),i=new Gc(l,{overrideIndentation:a=>{let o=e[a];return o??-1}}),s=Lp(l,(a,o,c)=>{let h=Ep(i,a.from);if(h==null)return;/\S/.test(a.text)||(h=0);let d=/^\s*/.exec(a.text)[0],p=Xa(l,h);(d!=p||c.from<a.from+d.length)&&(e[a.from]=h,o.push({from:a.from,to:a.from+d.length,insert:p}))});return s.changes.empty||t(l.update(s,{userEvent:"indent"})),!0},FO=({state:l,dispatch:t})=>l.readOnly?!1:(t(l.update(Lp(l,(e,i)=>{i.push({from:e.from,insert:l.facet(lo)})}),{userEvent:"input.indent"})),!0),JO=({state:l,dispatch:t})=>l.readOnly?!1:(t(l.update(Lp(l,(e,i)=>{let s=/^\s*/.exec(e.text)[0];if(!s)return;let a=fr(s,l.tabSize),o=0,c=Xa(l,Math.max(0,a-kc(l)));for(;o<s.length&&o<c.length&&s.charCodeAt(o)==c.charCodeAt(o);)o++;i.push({from:e.from+o,to:e.from+s.length,insert:c.slice(o)})}),{userEvent:"delete.dedent"})),!0),t4=l=>(l.setTabFocusMode(),!0),e4=[{key:"Ctrl-b",run:MO,shift:HO,preventDefault:!0},{key:"Ctrl-f",run:EO,shift:qO},{key:"Ctrl-p",run:BO,shift:jO},{key:"Ctrl-n",run:NO,shift:WO},{key:"Ctrl-a",run:S3,shift:B3},{key:"Ctrl-e",run:x3,shift:N3},{key:"Ctrl-d",run:GO},{key:"Ctrl-h",run:Zm},{key:"Ctrl-k",run:j3},{key:"Ctrl-Alt-h",run:$O},{key:"Ctrl-o",run:X3},{key:"Ctrl-t",run:Q3},{key:"Ctrl-v",run:Im}],i4=[{key:"ArrowLeft",run:MO,shift:HO,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:f3,shift:C3,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:b3,shift:D3,preventDefault:!0},{key:"ArrowRight",run:EO,shift:qO,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:h3,shift:k3,preventDefault:!0},{mac:"Cmd-ArrowRight",run:v3,shift:R3,preventDefault:!0},{key:"ArrowUp",run:BO,shift:jO,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Mv,shift:Dv},{mac:"Ctrl-ArrowUp",run:kv,shift:Av},{key:"ArrowDown",run:NO,shift:WO,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Ev,shift:Rv},{mac:"Ctrl-ArrowDown",run:Im,shift:Tv},{key:"PageUp",run:kv,shift:Av},{key:"PageDown",run:Im,shift:Tv},{key:"Home",run:y3,shift:E3,preventDefault:!0},{key:"Mod-Home",run:Mv,shift:Dv},{key:"End",run:g3,shift:M3,preventDefault:!0},{key:"Mod-End",run:Ev,shift:Rv},{key:"Enter",run:Bv,shift:Bv},{key:"Mod-a",run:z3},{key:"Backspace",run:Zm,shift:Zm,preventDefault:!0},{key:"Delete",run:GO,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:$O,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:U3,preventDefault:!0},{mac:"Mod-Backspace",run:W3,preventDefault:!0},{mac:"Mod-Delete",run:Y3,preventDefault:!0}].concat(e4.map(l=>({mac:l.key,run:l.run,shift:l.shift}))),n4=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:m3,shift:A3},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:p3,shift:T3},{key:"Alt-ArrowUp",run:G3},{key:"Shift-Alt-ArrowUp",run:$3},{key:"Alt-ArrowDown",run:P3},{key:"Shift-Alt-ArrowDown",run:K3},{key:"Mod-Alt-ArrowUp",run:H3},{key:"Mod-Alt-ArrowDown",run:q3},{key:"Escape",run:V3},{key:"Mod-Enter",run:F3},{key:"Alt-l",mac:"Ctrl-l",run:L3},{key:"Mod-i",run:_3,preventDefault:!0},{key:"Mod-[",run:JO},{key:"Mod-]",run:FO},{key:"Mod-Alt-\\",run:J3},{key:"Shift-Mod-k",run:I3},{key:"Shift-Mod-\\",run:w3},{key:"Mod-/",run:GD},{key:"Alt-A",run:$D},{key:"Ctrl-m",mac:"Shift-Alt-m",run:t4}].concat(i4),l4={key:"Tab",run:FO,shift:JO},Nv=typeof String.prototype.normalize=="function"?l=>l.normalize("NFKD"):l=>l;class ur{constructor(t,e,i=0,s=t.length,a,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(i,s),this.bufferStart=i,this.normalize=a?c=>a(Nv(c)):Nv,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Je(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=ap(t),i=this.bufferStart+this.bufferPos;this.bufferPos+=tn(t);let s=this.normalize(e);if(s.length)for(let a=0,o=i;;a++){let c=s.charCodeAt(a),h=this.match(c,o,this.bufferPos+this.bufferStart);if(a==s.length-1){if(h)return this.value=h,this;break}o==i&&a<e.length&&e.charCodeAt(a)==c&&o++}}}match(t,e,i){let s=null;for(let a=0;a<this.matches.length;a+=2){let o=this.matches[a],c=!1;this.query.charCodeAt(o)==t&&(o==this.query.length-1?s={from:this.matches[a+1],to:i}:(this.matches[a]++,c=!0)),c||(this.matches.splice(a,2),a-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?s={from:e,to:i}:this.matches.push(1,e)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(ur.prototype[Symbol.iterator]=function(){return this});const t2={from:-1,to:-1,match:/.*/.exec("")},_p="gm"+(/x/.unicode==null?"":"u");class e2{constructor(t,e,i,s=0,a=t.length){if(this.text=t,this.to=a,this.curLine="",this.done=!1,this.value=t2,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new i2(t,e,i,s,a);this.re=new RegExp(e,_p+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=t.iter();let o=t.lineAt(s);this.curLineStart=o.from,this.matchPos=Ec(t,s),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let i=this.curLineStart+e.index,s=i+e[0].length;if(this.matchPos=Ec(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,e)))return this.value={from:i,to:s,match:e},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const Xd=new WeakMap;class tr{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,i){let s=Xd.get(t);if(!s||s.from>=i||s.to<=e){let c=new tr(e,t.sliceString(e,i));return Xd.set(t,c),c}if(s.from==e&&s.to==i)return s;let{text:a,from:o}=s;return o>e&&(a=t.sliceString(e,o)+a,o=e),s.to<i&&(a+=t.sliceString(s.to,i)),Xd.set(t,new tr(o,a)),new tr(e,a.slice(e-o,i-o))}}class i2{constructor(t,e,i,s,a){this.text=t,this.to=a,this.done=!1,this.value=t2,this.matchPos=Ec(t,s),this.re=new RegExp(e,_p+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=tr.get(t,s,this.chunkEnd(s+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let i=this.flat.from+e.index,s=i+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,e)))return this.value={from:i,to:s,match:e},this.matchPos=Ec(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=tr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(e2.prototype[Symbol.iterator]=i2.prototype[Symbol.iterator]=function(){return this});function s4(l){try{return new RegExp(l,_p),!0}catch{return!1}}function Ec(l,t){if(t>=l.length)return t;let e=l.lineAt(t),i;for(;t<e.to&&(i=e.text.charCodeAt(t-e.from))>=56320&&i<57344;)t++;return t}function Fm(l){let t=String(l.state.doc.lineAt(l.state.selection.main.head).number),e=Kt("input",{class:"cm-textfield",name:"line",value:t}),i=Kt("form",{class:"cm-gotoLine",onkeydown:a=>{a.keyCode==27?(a.preventDefault(),l.dispatch({effects:Ea.of(!1)}),l.focus()):a.keyCode==13&&(a.preventDefault(),s())},onsubmit:a=>{a.preventDefault(),s()}},Kt("label",l.state.phrase("Go to line"),": ",e)," ",Kt("button",{class:"cm-button",type:"submit"},l.state.phrase("go")),Kt("button",{name:"close",onclick:()=>{l.dispatch({effects:Ea.of(!1)}),l.focus()},"aria-label":l.state.phrase("close"),type:"button"},[""]));function s(){let a=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!a)return;let{state:o}=l,c=o.doc.lineAt(o.selection.main.head),[,h,d,p,y]=a,b=p?+p.slice(1):0,S=d?+d:c.number;if(d&&y){let C=S/100;h&&(C=C*(h=="-"?-1:1)+c.number/o.doc.lines),S=Math.round(o.doc.lines*C)}else d&&h&&(S=S*(h=="-"?-1:1)+c.number);let O=o.doc.line(Math.max(1,Math.min(o.doc.lines,S))),w=W.cursor(O.from+Math.max(0,Math.min(b,O.length)));l.dispatch({effects:[Ea.of(!1),Z.scrollIntoView(w.from,{y:"center"})],selection:w}),l.focus()}return{dom:i}}const Ea=xt.define(),zv=ke.define({create(){return!0},update(l,t){for(let e of t.effects)e.is(Ea)&&(l=e.value);return l},provide:l=>Ua.from(l,t=>t?Fm:null)}),r4=l=>{let t=Va(l,Fm);if(!t){let e=[Ea.of(!0)];l.state.field(zv,!1)==null&&e.push(xt.appendConfig.of([zv,a4])),l.dispatch({effects:e}),t=Va(l,Fm)}return t&&t.dom.querySelector("input").select(),!0},a4=Z.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),o4={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},u4=st.define({combine(l){return un(l,o4,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})}});function c4(l){return[p4,m4]}const f4=ht.mark({class:"cm-selectionMatch"}),h4=ht.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Lv(l,t,e,i){return(e==0||l(t.sliceDoc(e-1,e))!=ie.Word)&&(i==t.doc.length||l(t.sliceDoc(i,i+1))!=ie.Word)}function d4(l,t,e,i){return l(t.sliceDoc(e,e+1))==ie.Word&&l(t.sliceDoc(i-1,i))==ie.Word}const m4=ce.fromClass(class{constructor(l){this.decorations=this.getDeco(l)}update(l){(l.selectionSet||l.docChanged||l.viewportChanged)&&(this.decorations=this.getDeco(l.view))}getDeco(l){let t=l.state.facet(u4),{state:e}=l,i=e.selection;if(i.ranges.length>1)return ht.none;let s=i.main,a,o=null;if(s.empty){if(!t.highlightWordAroundCursor)return ht.none;let h=e.wordAt(s.head);if(!h)return ht.none;o=e.charCategorizer(s.head),a=e.sliceDoc(h.from,h.to)}else{let h=s.to-s.from;if(h<t.minSelectionLength||h>200)return ht.none;if(t.wholeWords){if(a=e.sliceDoc(s.from,s.to),o=e.charCategorizer(s.head),!(Lv(o,e,s.from,s.to)&&d4(o,e,s.from,s.to)))return ht.none}else if(a=e.sliceDoc(s.from,s.to),!a)return ht.none}let c=[];for(let h of l.visibleRanges){let d=new ur(e.doc,a,h.from,h.to);for(;!d.next().done;){let{from:p,to:y}=d.value;if((!o||Lv(o,e,p,y))&&(s.empty&&p<=s.from&&y>=s.to?c.push(h4.range(p,y)):(p>=s.to||y<=s.from)&&c.push(f4.range(p,y)),c.length>t.maxMatches))return ht.none}}return ht.set(c)}},{decorations:l=>l.decorations}),p4=Z.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),g4=({state:l,dispatch:t})=>{let{selection:e}=l,i=W.create(e.ranges.map(s=>l.wordAt(s.head)||W.cursor(s.head)),e.mainIndex);return i.eq(e)?!1:(t(l.update({selection:i})),!0)};function y4(l,t){let{main:e,ranges:i}=l.selection,s=l.wordAt(e.head),a=s&&s.from==e.from&&s.to==e.to;for(let o=!1,c=new ur(l.doc,t,i[i.length-1].to);;)if(c.next(),c.done){if(o)return null;c=new ur(l.doc,t,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(h=>h.from==c.value.from))continue;if(a){let h=l.wordAt(c.value.from);if(!h||h.from!=c.value.from||h.to!=c.value.to)continue}return c.value}}const b4=({state:l,dispatch:t})=>{let{ranges:e}=l.selection;if(e.some(a=>a.from===a.to))return g4({state:l,dispatch:t});let i=l.sliceDoc(e[0].from,e[0].to);if(l.selection.ranges.some(a=>l.sliceDoc(a.from,a.to)!=i))return!1;let s=y4(l,i);return s?(t(l.update({selection:l.selection.addRange(W.range(s.from,s.to),!1),effects:Z.scrollIntoView(s.to)})),!0):!1},dr=st.define({combine(l){return un(l,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new D4(t),scrollToMatch:t=>Z.scrollIntoView(t)})}});class n2{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||s4(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,(e,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new O4(this):new S4(this)}getCursor(t,e=0,i){let s=t.doc?t:Lt.create({doc:t});return i==null&&(i=s.doc.length),this.regexp?Xs(this,s,e,i):Ys(this,s,e,i)}}class l2{constructor(t){this.spec=t}}function Ys(l,t,e,i){return new ur(t.doc,l.unquoted,e,i,l.caseSensitive?void 0:s=>s.toLowerCase(),l.wholeWord?v4(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function v4(l,t){return(e,i,s,a)=>((a>e||a+s.length<i)&&(a=Math.max(0,e-2),s=l.sliceString(a,Math.min(l.length,i+2))),(t(Dc(s,e-a))!=ie.Word||t(Rc(s,e-a))!=ie.Word)&&(t(Rc(s,i-a))!=ie.Word||t(Dc(s,i-a))!=ie.Word))}class S4 extends l2{constructor(t){super(t)}nextMatch(t,e,i){let s=Ys(this.spec,t,i,t.doc.length).nextOverlapping();if(s.done){let a=Math.min(t.doc.length,e+this.spec.unquoted.length);s=Ys(this.spec,t,0,a).nextOverlapping()}return s.done||s.value.from==e&&s.value.to==i?null:s.value}prevMatchInRange(t,e,i){for(let s=i;;){let a=Math.max(e,s-1e4-this.spec.unquoted.length),o=Ys(this.spec,t,a,s),c=null;for(;!o.nextOverlapping().done;)c=o.value;if(c)return c;if(a==e)return null;s-=1e4}}prevMatch(t,e,i){let s=this.prevMatchInRange(t,0,e);return s||(s=this.prevMatchInRange(t,Math.max(0,i-this.spec.unquoted.length),t.doc.length)),s&&(s.from!=e||s.to!=i)?s:null}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,e){let i=Ys(this.spec,t,0,t.doc.length),s=[];for(;!i.next().done;){if(s.length>=e)return null;s.push(i.value)}return s}highlight(t,e,i,s){let a=Ys(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,t.doc.length));for(;!a.next().done;)s(a.value.from,a.value.to)}}function Xs(l,t,e,i){return new e2(t.doc,l.search,{ignoreCase:!l.caseSensitive,test:l.wholeWord?x4(t.charCategorizer(t.selection.main.head)):void 0},e,i)}function Dc(l,t){return l.slice(ve(l,t,!1),t)}function Rc(l,t){return l.slice(t,ve(l,t))}function x4(l){return(t,e,i)=>!i[0].length||(l(Dc(i.input,i.index))!=ie.Word||l(Rc(i.input,i.index))!=ie.Word)&&(l(Rc(i.input,i.index+i[0].length))!=ie.Word||l(Dc(i.input,i.index+i[0].length))!=ie.Word)}class O4 extends l2{nextMatch(t,e,i){let s=Xs(this.spec,t,i,t.doc.length).next();return s.done&&(s=Xs(this.spec,t,0,e).next()),s.done?null:s.value}prevMatchInRange(t,e,i){for(let s=1;;s++){let a=Math.max(e,i-s*1e4),o=Xs(this.spec,t,a,i),c=null;for(;!o.next().done;)c=o.value;if(c&&(a==e||c.from>a+10))return c;if(a==e)return null}}prevMatch(t,e,i){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,i,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(e,i)=>{if(i=="&")return t.match[0];if(i=="$")return"$";for(let s=i.length;s>0;s--){let a=+i.slice(0,s);if(a>0&&a<t.match.length)return t.match[a]+i.slice(s)}return e})}matchAll(t,e){let i=Xs(this.spec,t,0,t.doc.length),s=[];for(;!i.next().done;){if(s.length>=e)return null;s.push(i.value)}return s}highlight(t,e,i,s){let a=Xs(this.spec,t,Math.max(0,e-250),Math.min(i+250,t.doc.length));for(;!a.next().done;)s(a.value.from,a.value.to)}}const Qa=xt.define(),Hp=xt.define(),bl=ke.define({create(l){return new Qd(Jm(l).create(),null)},update(l,t){for(let e of t.effects)e.is(Qa)?l=new Qd(e.value.create(),l.panel):e.is(Hp)&&(l=new Qd(l.query,e.value?qp:null));return l},provide:l=>Ua.from(l,t=>t.panel)});class Qd{constructor(t,e){this.query=t,this.panel=e}}const w4=ht.mark({class:"cm-searchMatch"}),C4=ht.mark({class:"cm-searchMatch cm-searchMatch-selected"}),k4=ce.fromClass(class{constructor(l){this.view=l,this.decorations=this.highlight(l.state.field(bl))}update(l){let t=l.state.field(bl);(t!=l.startState.field(bl)||l.docChanged||l.selectionSet||l.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:l,panel:t}){if(!t||!l.spec.valid)return ht.none;let{view:e}=this,i=new Hn;for(let s=0,a=e.visibleRanges,o=a.length;s<o;s++){let{from:c,to:h}=a[s];for(;s<o-1&&h>a[s+1].from-500;)h=a[++s].to;l.highlight(e.state,c,h,(d,p)=>{let y=e.state.selection.ranges.some(b=>b.from==d&&b.to==p);i.add(d,p,y?C4:w4)})}return i.finish()}},{decorations:l=>l.decorations});function oo(l){return t=>{let e=t.state.field(bl,!1);return e&&e.query.spec.valid?l(t,e):a2(t)}}const Bc=oo((l,{query:t})=>{let{to:e}=l.state.selection.main,i=t.nextMatch(l.state,e,e);if(!i)return!1;let s=W.single(i.from,i.to),a=l.state.facet(dr);return l.dispatch({selection:s,effects:[Vp(l,i),a.scrollToMatch(s.main,l)],userEvent:"select.search"}),r2(l),!0}),Nc=oo((l,{query:t})=>{let{state:e}=l,{from:i}=e.selection.main,s=t.prevMatch(e,i,i);if(!s)return!1;let a=W.single(s.from,s.to),o=l.state.facet(dr);return l.dispatch({selection:a,effects:[Vp(l,s),o.scrollToMatch(a.main,l)],userEvent:"select.search"}),r2(l),!0}),A4=oo((l,{query:t})=>{let e=t.matchAll(l.state,1e3);return!e||!e.length?!1:(l.dispatch({selection:W.create(e.map(i=>W.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),T4=({state:l,dispatch:t})=>{let e=l.selection;if(e.ranges.length>1||e.main.empty)return!1;let{from:i,to:s}=e.main,a=[],o=0;for(let c=new ur(l.doc,l.sliceDoc(i,s));!c.next().done;){if(a.length>1e3)return!1;c.value.from==i&&(o=a.length),a.push(W.range(c.value.from,c.value.to))}return t(l.update({selection:W.create(a,o),userEvent:"select.search.matches"})),!0},_v=oo((l,{query:t})=>{let{state:e}=l,{from:i,to:s}=e.selection.main;if(e.readOnly)return!1;let a=t.nextMatch(e,i,i);if(!a)return!1;let o=a,c=[],h,d,p=[];o.from==i&&o.to==s&&(d=e.toText(t.getReplacement(o)),c.push({from:o.from,to:o.to,insert:d}),o=t.nextMatch(e,o.from,o.to),p.push(Z.announce.of(e.phrase("replaced match on line $",e.doc.lineAt(i).number)+".")));let y=l.state.changes(c);return o&&(h=W.single(o.from,o.to).map(y),p.push(Vp(l,o)),p.push(e.facet(dr).scrollToMatch(h.main,l))),l.dispatch({changes:y,selection:h,effects:p,userEvent:"input.replace"}),!0}),M4=oo((l,{query:t})=>{if(l.state.readOnly)return!1;let e=t.matchAll(l.state,1e9).map(s=>{let{from:a,to:o}=s;return{from:a,to:o,insert:t.getReplacement(s)}});if(!e.length)return!1;let i=l.state.phrase("replaced $ matches",e.length)+".";return l.dispatch({changes:e,effects:Z.announce.of(i),userEvent:"input.replace.all"}),!0});function qp(l){return l.state.facet(dr).createPanel(l)}function Jm(l,t){var e,i,s,a,o;let c=l.selection.main,h=c.empty||c.to>c.from+100?"":l.sliceDoc(c.from,c.to);if(t&&!h)return t;let d=l.facet(dr);return new n2({search:((e=t?.literal)!==null&&e!==void 0?e:d.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(i=t?.caseSensitive)!==null&&i!==void 0?i:d.caseSensitive,literal:(s=t?.literal)!==null&&s!==void 0?s:d.literal,regexp:(a=t?.regexp)!==null&&a!==void 0?a:d.regexp,wholeWord:(o=t?.wholeWord)!==null&&o!==void 0?o:d.wholeWord})}function s2(l){let t=Va(l,qp);return t&&t.dom.querySelector("[main-field]")}function r2(l){let t=s2(l);t&&t==l.root.activeElement&&t.select()}const a2=l=>{let t=l.state.field(bl,!1);if(t&&t.panel){let e=s2(l);if(e&&e!=l.root.activeElement){let i=Jm(l.state,t.query.spec);i.valid&&l.dispatch({effects:Qa.of(i)}),e.focus(),e.select()}}else l.dispatch({effects:[Hp.of(!0),t?Qa.of(Jm(l.state,t.query.spec)):xt.appendConfig.of(B4)]});return!0},o2=l=>{let t=l.state.field(bl,!1);if(!t||!t.panel)return!1;let e=Va(l,qp);return e&&e.dom.contains(l.root.activeElement)&&l.focus(),l.dispatch({effects:Hp.of(!1)}),!0},E4=[{key:"Mod-f",run:a2,scope:"editor search-panel"},{key:"F3",run:Bc,shift:Nc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Bc,shift:Nc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:o2,scope:"editor search-panel"},{key:"Mod-Shift-l",run:T4},{key:"Mod-Alt-g",run:r4},{key:"Mod-d",run:b4,preventDefault:!0}];class D4{constructor(t){this.view=t;let e=this.query=t.state.field(bl).query.spec;this.commit=this.commit.bind(this),this.searchField=Kt("input",{value:e.search,placeholder:di(t,"Find"),"aria-label":di(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Kt("input",{value:e.replace,placeholder:di(t,"Replace"),"aria-label":di(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Kt("input",{type:"checkbox",name:"case",form:"",checked:e.caseSensitive,onchange:this.commit}),this.reField=Kt("input",{type:"checkbox",name:"re",form:"",checked:e.regexp,onchange:this.commit}),this.wordField=Kt("input",{type:"checkbox",name:"word",form:"",checked:e.wholeWord,onchange:this.commit});function i(s,a,o){return Kt("button",{class:"cm-button",name:s,onclick:a,type:"button"},o)}this.dom=Kt("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>Bc(t),[di(t,"next")]),i("prev",()=>Nc(t),[di(t,"previous")]),i("select",()=>A4(t),[di(t,"all")]),Kt("label",null,[this.caseField,di(t,"match case")]),Kt("label",null,[this.reField,di(t,"regexp")]),Kt("label",null,[this.wordField,di(t,"by word")]),...t.state.readOnly?[]:[Kt("br"),this.replaceField,i("replace",()=>_v(t),[di(t,"replace")]),i("replaceAll",()=>M4(t),[di(t,"replace all")])],Kt("button",{name:"close",onclick:()=>o2(t),"aria-label":di(t,"close"),type:"button"},[""])])}commit(){let t=new n2({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:Qa.of(t)}))}keydown(t){NM(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Nc:Bc)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),_v(this.view))}update(t){for(let e of t.transactions)for(let i of e.effects)i.is(Qa)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(dr).top}}function di(l,t){return l.state.phrase(t)}const Ku=30,Iu=/[\s\.,:;?!]/;function Vp(l,{from:t,to:e}){let i=l.state.doc.lineAt(t),s=l.state.doc.lineAt(e).to,a=Math.max(i.from,t-Ku),o=Math.min(s,e+Ku),c=l.state.sliceDoc(a,o);if(a!=i.from){for(let h=0;h<Ku;h++)if(!Iu.test(c[h+1])&&Iu.test(c[h])){c=c.slice(h);break}}if(o!=s){for(let h=c.length-1;h>c.length-Ku;h--)if(!Iu.test(c[h-1])&&Iu.test(c[h])){c=c.slice(0,h);break}}return Z.announce.of(`${l.state.phrase("current match")}. ${c} ${l.state.phrase("on line")} ${i.number}.`)}const R4=Z.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),B4=[bl,Al.low(k4),R4];class u2{constructor(t,e,i,s){this.state=t,this.pos=e,this.explicit=i,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(t){let e=Se(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),i=Math.max(e.from,this.pos-250),s=e.text.slice(i-e.from,this.pos-e.from),a=s.search(c2(t,!1));return a<0?null:{from:i+a,to:this.pos,text:s.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(t,e,i){t=="abort"&&this.abortListeners&&(this.abortListeners.push(e),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Hv(l){let t=Object.keys(l).join(""),e=/\w/.test(t);return e&&(t=t.replace(/\w/g,"")),`[${e?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function N4(l){let t=Object.create(null),e=Object.create(null);for(let{label:s}of l){t[s[0]]=!0;for(let a=1;a<s.length;a++)e[s[a]]=!0}let i=Hv(t)+Hv(e)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function z4(l){let t=l.map(s=>typeof s=="string"?{label:s}:s),[e,i]=t.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:N4(t);return s=>{let a=s.matchBefore(i);return a||s.explicit?{from:a?a.from:s.pos,options:t,validFor:e}:null}}function gB(l,t){return e=>{for(let i=Se(e.state).resolveInner(e.pos,-1);i;i=i.parent){if(l.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return t(e)}}class qv{constructor(t,e,i,s){this.completion=t,this.source=e,this.match=i,this.score=s}}function ts(l){return l.selection.main.from}function c2(l,t){var e;let{source:i}=l,s=t&&i[0]!="^",a=i[i.length-1]!="$";return!s&&!a?l:new RegExp(`${s?"^":""}(?:${i})${a?"$":""}`,(e=l.flags)!==null&&e!==void 0?e:l.ignoreCase?"i":"")}const Up=on.define();function L4(l,t,e,i){let{main:s}=l.selection,a=e-s.from,o=i-s.from;return{...l.changeByRange(c=>{if(c!=s&&e!=i&&l.sliceDoc(c.from+a,c.from+o)!=l.sliceDoc(e,i))return{range:c};let h=l.toText(t);return{changes:{from:c.from+a,to:i==s.from?c.to:c.from+o,insert:h},range:W.cursor(c.from+a+h.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const Vv=new WeakMap;function _4(l){if(!Array.isArray(l))return l;let t=Vv.get(l);return t||Vv.set(l,t=z4(l)),t}const zc=xt.define(),Ga=xt.define();class H4{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let e=0;e<t.length;){let i=Je(t,e),s=tn(i);this.chars.push(i);let a=t.slice(e,e+s),o=a.toUpperCase();this.folded.push(Je(o==a?a.toLowerCase():o,0)),e+=s}this.astral=t.length!=this.chars.length}ret(t,e){return this.score=t,this.matched=e,this}match(t){if(this.pattern.length==0)return this.ret(-100,[]);if(t.length<this.pattern.length)return null;let{chars:e,folded:i,any:s,precise:a,byWord:o}=this;if(e.length==1){let H=Je(t,0),q=tn(H),P=q==t.length?0:-100;if(H!=e[0])if(H==i[0])P+=-200;else return null;return this.ret(P,[0,q])}let c=t.indexOf(this.pattern);if(c==0)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=e.length,d=0;if(c<0){for(let H=0,q=Math.min(t.length,200);H<q&&d<h;){let P=Je(t,H);(P==e[d]||P==i[d])&&(s[d++]=H),H+=tn(P)}if(d<h)return null}let p=0,y=0,b=!1,S=0,O=-1,w=-1,C=/[a-z]/.test(t),M=!0;for(let H=0,q=Math.min(t.length,200),P=0;H<q&&y<h;){let Q=Je(t,H);c<0&&(p<h&&Q==e[p]&&(a[p++]=H),S<h&&(Q==e[S]||Q==i[S]?(S==0&&(O=H),w=H+1,S++):S=0));let G,V=Q<255?Q>=48&&Q<=57||Q>=97&&Q<=122?2:Q>=65&&Q<=90?1:0:(G=ap(Q))!=G.toLowerCase()?1:G!=G.toUpperCase()?2:0;(!H||V==1&&C||P==0&&V!=0)&&(e[y]==Q||i[y]==Q&&(b=!0)?o[y++]=H:o.length&&(M=!1)),P=V,H+=tn(Q)}return y==h&&o[0]==0&&M?this.result(-100+(b?-200:0),o,t):S==h&&O==0?this.ret(-200-t.length+(w==t.length?0:-100),[0,w]):c>-1?this.ret(-700-t.length,[c,c+this.pattern.length]):S==h?this.ret(-900-t.length,[O,w]):y==h?this.result(-100+(b?-200:0)+-700+(M?0:-1100),o,t):e.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,t)}result(t,e,i){let s=[],a=0;for(let o of e){let c=o+(this.astral?tn(Je(i,o)):1);a&&s[a-1]==o?s[a-1]=c:(s[a++]=o,s[a++]=c)}return this.ret(t-i.length,s)}}class q4{constructor(t){this.pattern=t,this.matched=[],this.score=0,this.folded=t.toLowerCase()}match(t){if(t.length<this.pattern.length)return null;let e=t.slice(0,this.pattern.length),i=e==this.pattern?0:e.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,e.length],this.score=i+(t.length==this.pattern.length?0:-100),this)}}const Ce=st.define({combine(l){return un(l,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:V4,filterStrict:!1,compareCompletions:(t,e)=>(t.sortText||t.label).localeCompare(e.sortText||e.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,tooltipClass:(t,e)=>i=>Uv(t(i),e(i)),optionClass:(t,e)=>i=>Uv(t(i),e(i)),addToOptions:(t,e)=>t.concat(e),filterStrict:(t,e)=>t||e})}});function Uv(l,t){return l?t?l+" "+t:l:t}function V4(l,t,e,i,s,a){let o=l.textDirection==Zt.RTL,c=o,h=!1,d="top",p,y,b=t.left-s.left,S=s.right-t.right,O=i.right-i.left,w=i.bottom-i.top;if(c&&b<Math.min(O,S)?c=!1:!c&&S<Math.min(O,b)&&(c=!0),O<=(c?b:S))p=Math.max(s.top,Math.min(e.top,s.bottom-w))-t.top,y=Math.min(400,c?b:S);else{h=!0,y=Math.min(400,(o?t.right:s.right-t.left)-30);let H=s.bottom-t.bottom;H>=w||H>t.top?p=e.bottom-t.top:(d="bottom",p=t.bottom-e.top)}let C=(t.bottom-t.top)/a.offsetHeight,M=(t.right-t.left)/a.offsetWidth;return{style:`${d}: ${p/C}px; max-width: ${y/M}px`,class:"cm-completionInfo-"+(h?o?"left-narrow":"right-narrow":c?"left":"right")}}function U4(l){let t=l.addToOptions.slice();return l.icons&&t.push({render(e){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),e.type&&i.classList.add(...e.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),t.push({render(e,i,s,a){let o=document.createElement("span");o.className="cm-completionLabel";let c=e.displayLabel||e.label,h=0;for(let d=0;d<a.length;){let p=a[d++],y=a[d++];p>h&&o.appendChild(document.createTextNode(c.slice(h,p)));let b=o.appendChild(document.createElement("span"));b.appendChild(document.createTextNode(c.slice(p,y))),b.className="cm-completionMatchedText",h=y}return h<c.length&&o.appendChild(document.createTextNode(c.slice(h))),o},position:50},{render(e){if(!e.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=e.detail,i},position:80}),t.sort((e,i)=>e.position-i.position).map(e=>e.render)}function Gd(l,t,e){if(l<=e)return{from:0,to:l};if(t<0&&(t=0),t<=l>>1){let s=Math.floor(t/e);return{from:s*e,to:(s+1)*e}}let i=Math.floor((l-t)/e);return{from:l-(i+1)*e,to:l-i*e}}class j4{constructor(t,e,i){this.view=t,this.stateField=e,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let s=t.state.field(e),{options:a,selected:o}=s.open,c=t.state.facet(Ce);this.optionContent=U4(c),this.optionClass=c.optionClass,this.tooltipClass=c.tooltipClass,this.range=Gd(a.length,o,c.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",h=>{let{options:d}=t.state.field(e).open;for(let p=h.target,y;p&&p!=this.dom;p=p.parentNode)if(p.nodeName=="LI"&&(y=/-(\d+)$/.exec(p.id))&&+y[1]<d.length){this.applyCompletion(t,d[+y[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let d=t.state.field(this.stateField,!1);d&&d.tooltip&&t.state.facet(Ce).closeOnBlur&&h.relatedTarget!=t.contentDOM&&t.dispatch({effects:Ga.of(null)})}),this.showOptions(a,s.id)}mount(){this.updateSel()}showOptions(t,e){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,e,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(t){var e;let i=t.state.field(this.stateField),s=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),i!=s){let{options:a,selected:o,disabled:c}=i.open;(!s.open||s.open.options!=a)&&(this.range=Gd(a.length,o,t.state.facet(Ce).maxRenderedOptions),this.showOptions(a,i.id)),this.updateSel(),c!=((e=s.open)===null||e===void 0?void 0:e.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!c)}}updateTooltipClass(t){let e=this.tooltipClass(t);if(e!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of e.split(" "))i&&this.dom.classList.add(i);this.currentClass=e}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;(e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=Gd(e.options.length,e.selected,this.view.state.facet(Ce).maxRenderedOptions),this.showOptions(e.options,t.id));let i=this.updateSelectedOption(e.selected);if(i){this.destroyInfo();let{completion:s}=e.options[e.selected],{info:a}=s;if(!a)return;let o=typeof a=="string"?document.createTextNode(a):a(s);if(!o)return;"then"in o?o.then(c=>{c&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(c,s)}).catch(c=>ii(this.view.state,c,"completion info")):(this.addInfoPane(o,s),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(t,e){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),t.nodeType!=null)i.appendChild(t),this.infoDestroy=null;else{let{dom:s,destroy:a}=t;i.appendChild(s),this.infoDestroy=a||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let e=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)i.nodeName!="LI"||!i.id?s--:s==t?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),e=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return e&&Y4(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=t.getBoundingClientRect(),a=this.space;if(!a){let o=this.dom.ownerDocument.documentElement;a={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return s.top>Math.min(a.bottom,e.bottom)-10||s.bottom<Math.max(a.top,e.top)+10?null:this.view.state.facet(Ce).positionInfo(this.view,e,s,i,a,this.dom)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,e,i){const s=document.createElement("ul");s.id=e,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions")),s.addEventListener("mousedown",o=>{o.target==s&&o.preventDefault()});let a=null;for(let o=i.from;o<i.to;o++){let{completion:c,match:h}=t[o],{section:d}=c;if(d){let b=typeof d=="string"?d:d.name;if(b!=a&&(o>i.from||i.from==0))if(a=b,typeof d!="string"&&d.header)s.appendChild(d.header(d));else{let S=s.appendChild(document.createElement("completion-section"));S.textContent=b}}const p=s.appendChild(document.createElement("li"));p.id=e+"-"+o,p.setAttribute("role","option");let y=this.optionClass(c);y&&(p.className=y);for(let b of this.optionContent){let S=b(c,this.view.state,this.view,h);S&&p.appendChild(S)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<t.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function W4(l,t){return e=>new j4(e,l,t)}function Y4(l,t){let e=l.getBoundingClientRect(),i=t.getBoundingClientRect(),s=e.height/l.offsetHeight;i.top<e.top?l.scrollTop-=(e.top-i.top)/s:i.bottom>e.bottom&&(l.scrollTop+=(i.bottom-e.bottom)/s)}function jv(l){return(l.boost||0)*100+(l.apply?10:0)+(l.info?5:0)+(l.type?1:0)}function X4(l,t){let e=[],i=null,s=null,a=p=>{e.push(p);let{section:y}=p.completion;if(y){i||(i=[]);let b=typeof y=="string"?y:y.name;i.some(S=>S.name==b)||i.push(typeof y=="string"?{name:b}:y)}},o=t.facet(Ce);for(let p of l)if(p.hasResult()){let y=p.result.getMatch;if(p.result.filter===!1)for(let b of p.result.options)a(new qv(b,p.source,y?y(b):[],1e9-e.length));else{let b=t.sliceDoc(p.from,p.to),S,O=o.filterStrict?new q4(b):new H4(b);for(let w of p.result.options)if(S=O.match(w.label)){let C=w.displayLabel?y?y(w,S.matched):[]:S.matched,M=S.score+(w.boost||0);if(a(new qv(w,p.source,C,M)),typeof w.section=="object"&&w.section.rank==="dynamic"){let{name:H}=w.section;s||(s=Object.create(null)),s[H]=Math.max(M,s[H]||-1e9)}}}}if(i){let p=Object.create(null),y=0,b=(S,O)=>(S.rank==="dynamic"&&O.rank==="dynamic"?s[O.name]-s[S.name]:0)||(typeof S.rank=="number"?S.rank:1e9)-(typeof O.rank=="number"?O.rank:1e9)||(S.name<O.name?-1:1);for(let S of i.sort(b))y-=1e5,p[S.name]=y;for(let S of e){let{section:O}=S.completion;O&&(S.score+=p[typeof O=="string"?O:O.name])}}let c=[],h=null,d=o.compareCompletions;for(let p of e.sort((y,b)=>b.score-y.score||d(y.completion,b.completion))){let y=p.completion;!h||h.label!=y.label||h.detail!=y.detail||h.type!=null&&y.type!=null&&h.type!=y.type||h.apply!=y.apply||h.boost!=y.boost?c.push(p):jv(p.completion)>jv(h)&&(c[c.length-1]=p),h=p.completion}return c}class $s{constructor(t,e,i,s,a,o){this.options=t,this.attrs=e,this.tooltip=i,this.timestamp=s,this.selected=a,this.disabled=o}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new $s(this.options,Wv(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,i,s,a,o){if(s&&!o&&t.some(d=>d.isPending))return s.setDisabled();let c=X4(t,e);if(!c.length)return s&&t.some(d=>d.isPending)?s.setDisabled():null;let h=e.facet(Ce).selectOnOpen?0:-1;if(s&&s.selected!=h&&s.selected!=-1){let d=s.options[s.selected].completion;for(let p=0;p<c.length;p++)if(c[p].completion==d){h=p;break}}return new $s(c,Wv(i,h),{pos:t.reduce((d,p)=>p.hasResult()?Math.min(d,p.from):d,1e8),create:I4,above:a.aboveCursor},s?s.timestamp:Date.now(),h,!1)}map(t){return new $s(this.options,this.attrs,{...this.tooltip,pos:t.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new $s(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Lc{constructor(t,e,i){this.active=t,this.id=e,this.open=i}static start(){return new Lc($4,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:e}=t,i=e.facet(Ce),a=(i.override||e.languageDataAt("autocomplete",ts(e)).map(_4)).map(h=>(this.active.find(p=>p.source==h)||new Ri(h,this.active.some(p=>p.state!=0)?1:0)).update(t,i));a.length==this.active.length&&a.every((h,d)=>h==this.active[d])&&(a=this.active);let o=this.open,c=t.effects.some(h=>h.is(jp));o&&t.docChanged&&(o=o.map(t.changes)),t.selection||a.some(h=>h.hasResult()&&t.changes.touchesRange(h.from,h.to))||!Q4(a,this.active)||c?o=$s.build(a,e,this.id,o,i,c):o&&o.disabled&&!a.some(h=>h.isPending)&&(o=null),!o&&a.every(h=>!h.isPending)&&a.some(h=>h.hasResult())&&(a=a.map(h=>h.hasResult()?new Ri(h.source,0):h));for(let h of t.effects)h.is(h2)&&(o=o&&o.setSelected(h.value,this.id));return a==this.active&&o==this.open?this:new Lc(a,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?G4:P4}}function Q4(l,t){if(l==t)return!0;for(let e=0,i=0;;){for(;e<l.length&&!l[e].hasResult();)e++;for(;i<t.length&&!t[i].hasResult();)i++;let s=e==l.length,a=i==t.length;if(s||a)return s==a;if(l[e++].result!=t[i++].result)return!1}}const G4={"aria-autocomplete":"list"},P4={};function Wv(l,t){let e={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":l};return t>-1&&(e["aria-activedescendant"]=l+"-"+t),e}const $4=[];function f2(l,t){if(l.isUserEvent("input.complete")){let i=l.annotation(Up);if(i&&t.activateOnCompletion(i))return 12}let e=l.isUserEvent("input.type");return e&&t.activateOnTyping?5:e?1:l.isUserEvent("delete.backward")?2:l.selection?8:l.docChanged?16:0}class Ri{constructor(t,e,i=!1){this.source=t,this.state=e,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(t,e){let i=f2(t,e),s=this;(i&8||i&16&&this.touches(t))&&(s=new Ri(s.source,0)),i&4&&s.state==0&&(s=new Ri(this.source,1)),s=s.updateFor(t,i);for(let a of t.effects)if(a.is(zc))s=new Ri(s.source,1,a.value);else if(a.is(Ga))s=new Ri(s.source,0);else if(a.is(jp))for(let o of a.value)o.source==s.source&&(s=o);return s}updateFor(t,e){return this.map(t.changes)}map(t){return this}touches(t){return t.changes.touchesRange(ts(t.state))}}class er extends Ri{constructor(t,e,i,s,a,o){super(t,3,e),this.limit=i,this.result=s,this.from=a,this.to=o}hasResult(){return!0}updateFor(t,e){var i;if(!(e&3))return this.map(t.changes);let s=this.result;s.map&&!t.changes.empty&&(s=s.map(s,t.changes));let a=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1),c=ts(t.state);if(c>o||!s||e&2&&(ts(t.startState)==this.from||c<this.limit))return new Ri(this.source,e&4?1:0);let h=t.changes.mapPos(this.limit);return K4(s.validFor,t.state,a,o)?new er(this.source,this.explicit,h,s,a,o):s.update&&(s=s.update(s,a,o,new u2(t.state,c,!1)))?new er(this.source,this.explicit,h,s,s.from,(i=s.to)!==null&&i!==void 0?i:ts(t.state)):new Ri(this.source,1,this.explicit)}map(t){return t.empty?this:(this.result.map?this.result.map(this.result,t):this.result)?new er(this.source,this.explicit,t.mapPos(this.limit),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new Ri(this.source,0)}touches(t){return t.changes.touchesRange(this.from,this.to)}}function K4(l,t,e,i){if(!l)return!1;let s=t.sliceDoc(e,i);return typeof l=="function"?l(s,e,i,t):c2(l,!0).test(s)}const jp=xt.define({map(l,t){return l.map(e=>e.map(t))}}),h2=xt.define(),ti=ke.define({create(){return Lc.start()},update(l,t){return l.update(t)},provide:l=>[wp.from(l,t=>t.tooltip),Z.contentAttributes.from(l,t=>t.attrs)]});function Wp(l,t){const e=t.completion.apply||t.completion.label;let i=l.state.field(ti).active.find(s=>s.source==t.source);return i instanceof er?(typeof e=="string"?l.dispatch({...L4(l.state,e,i.from,i.to),annotations:Up.of(t.completion)}):e(l,t.completion,i.from,i.to),!0):!1}const I4=W4(ti,Wp);function Zu(l,t="option"){return e=>{let i=e.state.field(ti,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<e.state.facet(Ce).interactionDelay)return!1;let s=1,a;t=="page"&&(a=Px(e,i.open.tooltip))&&(s=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,c=i.open.selected>-1?i.open.selected+s*(l?1:-1):l?0:o-1;return c<0?c=t=="page"?0:o-1:c>=o&&(c=t=="page"?o-1:0),e.dispatch({effects:h2.of(c)}),!0}}const Z4=l=>{let t=l.state.field(ti,!1);return l.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<l.state.facet(Ce).interactionDelay?!1:Wp(l,t.open.options[t.open.selected])},Pd=l=>l.state.field(ti,!1)?(l.dispatch({effects:zc.of(!0)}),!0):!1,F4=l=>{let t=l.state.field(ti,!1);return!t||!t.active.some(e=>e.state!=0)?!1:(l.dispatch({effects:Ga.of(null)}),!0)};class J4{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const tR=50,eR=1e3,iR=ce.fromClass(class{constructor(l){this.view=l,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of l.state.field(ti).active)t.isPending&&this.startQuery(t)}update(l){let t=l.state.field(ti),e=l.state.facet(Ce);if(!l.selectionSet&&!l.docChanged&&l.startState.field(ti)==t)return;let i=l.transactions.some(a=>{let o=f2(a,e);return o&8||(a.selection||a.docChanged)&&!(o&3)});for(let a=0;a<this.running.length;a++){let o=this.running[a];if(i||o.context.abortOnDocChange&&l.docChanged||o.updates.length+l.transactions.length>tR&&Date.now()-o.time>eR){for(let c of o.context.abortListeners)try{c()}catch(h){ii(this.view.state,h)}o.context.abortListeners=null,this.running.splice(a--,1)}else o.updates.push(...l.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),l.transactions.some(a=>a.effects.some(o=>o.is(zc)))&&(this.pendingStart=!0);let s=this.pendingStart?50:e.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(a=>a.isPending&&!this.running.some(o=>o.active.source==a.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let a of l.transactions)a.isUserEvent("input.type")?this.composing=2:this.composing==2&&a.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:l}=this.view,t=l.field(ti);for(let e of t.active)e.isPending&&!this.running.some(i=>i.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ce).updateSyncTime))}startQuery(l){let{state:t}=this.view,e=ts(t),i=new u2(t,e,l.explicit,this.view),s=new J4(l,i);this.running.push(s),Promise.resolve(l.source(i)).then(a=>{s.context.aborted||(s.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:Ga.of(null)}),ii(this.view.state,a)})}scheduleAccept(){this.running.every(l=>l.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ce).updateSyncTime))}accept(){var l;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],e=this.view.state.facet(Ce),i=this.view.state.field(ti);for(let s=0;s<this.running.length;s++){let a=this.running[s];if(a.done===void 0)continue;if(this.running.splice(s--,1),a.done){let c=ts(a.updates.length?a.updates[0].startState:this.view.state),h=Math.min(c,a.done.from+(a.active.explicit?0:1)),d=new er(a.active.source,a.active.explicit,h,a.done,a.done.from,(l=a.done.to)!==null&&l!==void 0?l:c);for(let p of a.updates)d=d.update(p,e);if(d.hasResult()){t.push(d);continue}}let o=i.active.find(c=>c.source==a.active.source);if(o&&o.isPending)if(a.done==null){let c=new Ri(a.active.source,0);for(let h of a.updates)c=c.update(h,e);c.isPending||t.push(c)}else this.startQuery(o)}(t.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:jp.of(t)})}},{eventHandlers:{blur(l){let t=this.view.state.field(ti,!1);if(t&&t.tooltip&&this.view.state.facet(Ce).closeOnBlur){let e=t.open&&Px(this.view,t.open.tooltip);(!e||!e.dom.contains(l.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Ga.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:zc.of(!1)}),20),this.composing=0}}}),nR=typeof navigator=="object"&&/Win/.test(navigator.platform),lR=Al.highest(Z.domEventHandlers({keydown(l,t){let e=t.state.field(ti,!1);if(!e||!e.open||e.open.disabled||e.open.selected<0||l.key.length>1||l.ctrlKey&&!(nR&&l.altKey)||l.metaKey)return!1;let i=e.open.options[e.open.selected],s=e.active.find(o=>o.source==i.source),a=i.completion.commitCharacters||s.result.commitCharacters;return a&&a.indexOf(l.key)>-1&&Wp(t,i),!1}})),d2=Z.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class sR{constructor(t,e,i,s){this.field=t,this.line=e,this.from=i,this.to=s}}class Yp{constructor(t,e,i){this.field=t,this.from=e,this.to=i}map(t){let e=t.mapPos(this.from,-1,Le.TrackDel),i=t.mapPos(this.to,1,Le.TrackDel);return e==null||i==null?null:new Yp(this.field,e,i)}}class Xp{constructor(t,e){this.lines=t,this.fieldPositions=e}instantiate(t,e){let i=[],s=[e],a=t.doc.lineAt(e),o=/^\s*/.exec(a.text)[0];for(let h of this.lines){if(i.length){let d=o,p=/^\t*/.exec(h)[0].length;for(let y=0;y<p;y++)d+=t.facet(lo);s.push(e+d.length-p),h=d+h.slice(p)}i.push(h),e+=h.length+1}let c=this.fieldPositions.map(h=>new Yp(h.field,s[h.line]+h.from,s[h.line]+h.to));return{text:i,ranges:c}}static parse(t){let e=[],i=[],s=[],a;for(let o of t.split(/\r\n?|\n/)){for(;a=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let c=a[1]?+a[1]:null,h=a[2]||a[3]||"",d=-1,p=h.replace(/\\[{}]/g,y=>y[1]);for(let y=0;y<e.length;y++)(c!=null?e[y].seq==c:p&&e[y].name==p)&&(d=y);if(d<0){let y=0;for(;y<e.length&&(c==null||e[y].seq!=null&&e[y].seq<c);)y++;e.splice(y,0,{seq:c,name:p}),d=y;for(let b of s)b.field>=d&&b.field++}for(let y of s)if(y.line==i.length&&y.from>a.index){let b=a[2]?3+(a[1]||"").length:2;y.from-=b,y.to-=b}s.push(new sR(d,i.length,a.index,a.index+p.length)),o=o.slice(0,a.index)+h+o.slice(a.index+a[0].length)}o=o.replace(/\\([{}])/g,(c,h,d)=>{for(let p of s)p.line==i.length&&p.from>d&&(p.from--,p.to--);return h}),i.push(o)}return new Xp(i,s)}}let rR=ht.widget({widget:new class extends Wi{toDOM(){let l=document.createElement("span");return l.className="cm-snippetFieldPosition",l}ignoreEvent(){return!1}}}),aR=ht.mark({class:"cm-snippetField"});class mr{constructor(t,e){this.ranges=t,this.active=e,this.deco=ht.set(t.map(i=>(i.from==i.to?rR:aR).range(i.from,i.to)),!0)}map(t){let e=[];for(let i of this.ranges){let s=i.map(t);if(!s)return null;e.push(s)}return new mr(e,this.active)}selectionInsideField(t){return t.ranges.every(e=>this.ranges.some(i=>i.field==this.active&&i.from<=e.from&&i.to>=e.to))}}const uo=xt.define({map(l,t){return l&&l.map(t)}}),oR=xt.define(),Pa=ke.define({create(){return null},update(l,t){for(let e of t.effects){if(e.is(uo))return e.value;if(e.is(oR)&&l)return new mr(l.ranges,e.value)}return l&&t.docChanged&&(l=l.map(t.changes)),l&&t.selection&&!l.selectionInsideField(t.selection)&&(l=null),l},provide:l=>Z.decorations.from(l,t=>t?t.deco:ht.none)});function Qp(l,t){return W.create(l.filter(e=>e.field==t).map(e=>W.range(e.from,e.to)))}function uR(l){let t=Xp.parse(l);return(e,i,s,a)=>{let{text:o,ranges:c}=t.instantiate(e.state,s),{main:h}=e.state.selection,d={changes:{from:s,to:a==h.from?h.to:a,insert:qt.of(o)},scrollIntoView:!0,annotations:i?[Up.of(i),pe.userEvent.of("input.complete")]:void 0};if(c.length&&(d.selection=Qp(c,0)),c.some(p=>p.field>0)){let p=new mr(c,0),y=d.effects=[uo.of(p)];e.state.field(Pa,!1)===void 0&&y.push(xt.appendConfig.of([Pa,mR,pR,d2]))}e.dispatch(e.state.update(d))}}function m2(l){return({state:t,dispatch:e})=>{let i=t.field(Pa,!1);if(!i||l<0&&i.active==0)return!1;let s=i.active+l,a=l>0&&!i.ranges.some(o=>o.field==s+l);return e(t.update({selection:Qp(i.ranges,s),effects:uo.of(a?null:new mr(i.ranges,s)),scrollIntoView:!0})),!0}}const cR=({state:l,dispatch:t})=>l.field(Pa,!1)?(t(l.update({effects:uo.of(null)})),!0):!1,fR=m2(1),hR=m2(-1),dR=[{key:"Tab",run:fR,shift:hR},{key:"Escape",run:cR}],Yv=st.define({combine(l){return l.length?l[0]:dR}}),mR=Al.highest(io.compute([Yv],l=>l.facet(Yv)));function yB(l,t){return{...t,apply:uR(l)}}const pR=Z.domEventHandlers({mousedown(l,t){let e=t.state.field(Pa,!1),i;if(!e||(i=t.posAtCoords({x:l.clientX,y:l.clientY}))==null)return!1;let s=e.ranges.find(a=>a.from<=i&&a.to>=i);return!s||s.field==e.active?!1:(t.dispatch({selection:Qp(e.ranges,s.field),effects:uo.of(e.ranges.some(a=>a.field>s.field)?new mr(e.ranges,s.field):null),scrollIntoView:!0}),!0)}}),$a={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Jl=xt.define({map(l,t){let e=t.mapPos(l,-1,Le.TrackAfter);return e??void 0}}),Gp=new class extends vl{};Gp.startSide=1;Gp.endSide=-1;const p2=ke.define({create(){return Bt.empty},update(l,t){if(l=l.map(t.changes),t.selection){let e=t.state.doc.lineAt(t.selection.main.head);l=l.update({filter:i=>i>=e.from&&i<=e.to})}for(let e of t.effects)e.is(Jl)&&(l=l.update({add:[Gp.range(e.value,e.value+1)]}));return l}});function gR(){return[bR,p2]}const $d="()[]{}<>";function g2(l){for(let t=0;t<$d.length;t+=2)if($d.charCodeAt(t)==l)return $d.charAt(t+1);return ap(l<128?l:l+1)}function y2(l,t){return l.languageDataAt("closeBrackets",t)[0]||$a}const yR=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),bR=Z.inputHandler.of((l,t,e,i)=>{if((yR?l.composing:l.compositionStarted)||l.state.readOnly)return!1;let s=l.state.selection.main;if(i.length>2||i.length==2&&tn(Je(i,0))==1||t!=s.from||e!=s.to)return!1;let a=xR(l.state,i);return a?(l.dispatch(a),!0):!1}),vR=({state:l,dispatch:t})=>{if(l.readOnly)return!1;let i=y2(l,l.selection.main.head).brackets||$a.brackets,s=null,a=l.changeByRange(o=>{if(o.empty){let c=OR(l.doc,o.head);for(let h of i)if(h==c&&Fc(l.doc,o.head)==g2(Je(h,0)))return{changes:{from:o.head-h.length,to:o.head+h.length},range:W.cursor(o.head-h.length)}}return{range:s=o}});return s||t(l.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},SR=[{key:"Backspace",run:vR}];function xR(l,t){let e=y2(l,l.selection.main.head),i=e.brackets||$a.brackets;for(let s of i){let a=g2(Je(s,0));if(t==s)return a==s?kR(l,s,i.indexOf(s+s+s)>-1,e):wR(l,s,a,e.before||$a.before);if(t==a&&b2(l,l.selection.main.from))return CR(l,s,a)}return null}function b2(l,t){let e=!1;return l.field(p2).between(0,l.doc.length,i=>{i==t&&(e=!0)}),e}function Fc(l,t){let e=l.sliceString(t,t+2);return e.slice(0,tn(Je(e,0)))}function OR(l,t){let e=l.sliceString(t-2,t);return tn(Je(e,0))==e.length?e:e.slice(1)}function wR(l,t,e,i){let s=null,a=l.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:e,from:o.to}],effects:Jl.of(o.to+t.length),range:W.range(o.anchor+t.length,o.head+t.length)};let c=Fc(l.doc,o.head);return!c||/\s/.test(c)||i.indexOf(c)>-1?{changes:{insert:t+e,from:o.head},effects:Jl.of(o.head+t.length),range:W.cursor(o.head+t.length)}:{range:s=o}});return s?null:l.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function CR(l,t,e){let i=null,s=l.changeByRange(a=>a.empty&&Fc(l.doc,a.head)==e?{changes:{from:a.head,to:a.head+e.length,insert:e},range:W.cursor(a.head+e.length)}:i={range:a});return i?null:l.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function kR(l,t,e,i){let s=i.stringPrefixes||$a.stringPrefixes,a=null,o=l.changeByRange(c=>{if(!c.empty)return{changes:[{insert:t,from:c.from},{insert:t,from:c.to}],effects:Jl.of(c.to+t.length),range:W.range(c.anchor+t.length,c.head+t.length)};let h=c.head,d=Fc(l.doc,h),p;if(d==t){if(Xv(l,h))return{changes:{insert:t+t,from:h},effects:Jl.of(h+t.length),range:W.cursor(h+t.length)};if(b2(l,h)){let b=e&&l.sliceDoc(h,h+t.length*3)==t+t+t?t+t+t:t;return{changes:{from:h,to:h+b.length,insert:b},range:W.cursor(h+b.length)}}}else{if(e&&l.sliceDoc(h-2*t.length,h)==t+t&&(p=Qv(l,h-2*t.length,s))>-1&&Xv(l,p))return{changes:{insert:t+t+t+t,from:h},effects:Jl.of(h+t.length),range:W.cursor(h+t.length)};if(l.charCategorizer(h)(d)!=ie.Word&&Qv(l,h,s)>-1&&!AR(l,h,t,s))return{changes:{insert:t+t,from:h},effects:Jl.of(h+t.length),range:W.cursor(h+t.length)}}return{range:a=c}});return a?null:l.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Xv(l,t){let e=Se(l).resolveInner(t+1);return e.parent&&e.from==t}function AR(l,t,e,i){let s=Se(l).resolveInner(t,-1),a=i.reduce((o,c)=>Math.max(o,c.length),0);for(let o=0;o<5;o++){let c=l.sliceDoc(s.from,Math.min(s.to,s.from+e.length+a)),h=c.indexOf(e);if(!h||h>-1&&i.indexOf(c.slice(0,h))>-1){let p=s.firstChild;for(;p&&p.from==s.from&&p.to-p.from>e.length+h;){if(l.sliceDoc(p.to-e.length,p.to)==e)return!1;p=p.firstChild}return!0}let d=s.to==t&&s.parent;if(!d)break;s=d}return!1}function Qv(l,t,e){let i=l.charCategorizer(t);if(i(l.sliceDoc(t-1,t))!=ie.Word)return t;for(let s of e){let a=t-s.length;if(l.sliceDoc(a,t)==s&&i(l.sliceDoc(a-1,a))!=ie.Word)return a}return-1}function TR(l={}){return[lR,ti,Ce.of(l),iR,MR,d2]}const v2=[{key:"Ctrl-Space",run:Pd},{mac:"Alt-`",run:Pd},{mac:"Alt-i",run:Pd},{key:"Escape",run:F4},{key:"ArrowDown",run:Zu(!0)},{key:"ArrowUp",run:Zu(!1)},{key:"PageDown",run:Zu(!0,"page")},{key:"PageUp",run:Zu(!1,"page")},{key:"Enter",run:Z4}],MR=Al.highest(io.computeN([Ce],l=>l.facet(Ce).defaultKeymap?[v2]:[]));class Gv{constructor(t,e,i){this.from=t,this.to=e,this.diagnostic=i}}class Il{constructor(t,e,i){this.diagnostics=t,this.panel=e,this.selected=i}static init(t,e,i){let s=i.facet(Ka).markerFilter;s&&(t=s(t,i));let a=t.slice().sort((S,O)=>S.from-O.from||S.to-O.to),o=new Hn,c=[],h=0,d=i.doc.iter(),p=0,y=i.doc.length;for(let S=0;;){let O=S==a.length?null:a[S];if(!O&&!c.length)break;let w,C;if(c.length)w=h,C=c.reduce((q,P)=>Math.min(q,P.to),O&&O.from>w?O.from:1e8);else{if(w=O.from,w>y)break;C=O.to,c.push(O),S++}for(;S<a.length;){let q=a[S];if(q.from==w&&(q.to>q.from||q.to==w))c.push(q),S++,C=Math.min(q.to,C);else{C=Math.min(q.from,C);break}}C=Math.min(C,y);let M=!1;if(c.some(q=>q.from==w&&(q.to==C||C==y))&&(M=w==C,!M&&C-w<10)){let q=w-(p+d.value.length);q>0&&(d.next(q),p=w);for(let P=w;;){if(P>=C){M=!0;break}if(!d.lineBreak&&p+d.value.length>P)break;P=p+d.value.length,p+=d.value.length,d.next()}}let H=jR(c);if(M)o.add(w,w,ht.widget({widget:new HR(H),diagnostics:c.slice()}));else{let q=c.reduce((P,Q)=>Q.markClass?P+" "+Q.markClass:P,"");o.add(w,C,ht.mark({class:"cm-lintRange cm-lintRange-"+H+q,diagnostics:c.slice(),inclusiveEnd:c.some(P=>P.to>C)}))}if(h=C,h==y)break;for(let q=0;q<c.length;q++)c[q].to<=h&&c.splice(q--,1)}let b=o.finish();return new Il(b,e,cr(b))}}function cr(l,t=null,e=0){let i=null;return l.between(e,1e9,(s,a,{spec:o})=>{if(!(t&&o.diagnostics.indexOf(t)<0))if(!i)i=new Gv(s,a,t||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new Gv(i.from,a,i.diagnostic)}}),i}function ER(l,t){let e=t.pos,i=t.end||e,s=l.state.facet(Ka).hideOn(l,e,i);if(s!=null)return s;let a=l.startState.doc.lineAt(t.pos);return!!(l.effects.some(o=>o.is(S2))||l.changes.touchesRange(a.from,Math.max(a.to,i)))}function DR(l,t){return l.field(gi,!1)?t:t.concat(xt.appendConfig.of(WR))}const S2=xt.define(),Pp=xt.define(),x2=xt.define(),gi=ke.define({create(){return new Il(ht.none,null,null)},update(l,t){if(t.docChanged&&l.diagnostics.size){let e=l.diagnostics.map(t.changes),i=null,s=l.panel;if(l.selected){let a=t.changes.mapPos(l.selected.from,1);i=cr(e,l.selected.diagnostic,a)||cr(e,null,a)}!e.size&&s&&t.state.facet(Ka).autoPanel&&(s=null),l=new Il(e,s,i)}for(let e of t.effects)if(e.is(S2)){let i=t.state.facet(Ka).autoPanel?e.value.length?Ia.open:null:l.panel;l=Il.init(e.value,i,t.state)}else e.is(Pp)?l=new Il(l.diagnostics,e.value?Ia.open:null,l.selected):e.is(x2)&&(l=new Il(l.diagnostics,l.panel,e.value));return l},provide:l=>[Ua.from(l,t=>t.panel),Z.decorations.from(l,t=>t.diagnostics)]}),RR=ht.mark({class:"cm-lintRange cm-lintRange-active"});function BR(l,t,e){let{diagnostics:i}=l.state.field(gi),s,a=-1,o=-1;i.between(t-(e<0?1:0),t+(e>0?1:0),(h,d,{spec:p})=>{if(t>=h&&t<=d&&(h==d||(t>h||e>0)&&(t<d||e<0)))return s=p.diagnostics,a=h,o=d,!1});let c=l.state.facet(Ka).tooltipFilter;return s&&c&&(s=c(s,l.state)),s?{pos:a,end:o,above:l.state.doc.lineAt(a).to<o,create(){return{dom:NR(l,s)}}}:null}function NR(l,t){return Kt("ul",{class:"cm-tooltip-lint"},t.map(e=>w2(l,e,!1)))}const zR=l=>{let t=l.state.field(gi,!1);(!t||!t.panel)&&l.dispatch({effects:DR(l.state,[Pp.of(!0)])});let e=Va(l,Ia.open);return e&&e.dom.querySelector(".cm-panel-lint ul").focus(),!0},Pv=l=>{let t=l.state.field(gi,!1);return!t||!t.panel?!1:(l.dispatch({effects:Pp.of(!1)}),!0)},LR=l=>{let t=l.state.field(gi,!1);if(!t)return!1;let e=l.state.selection.main,i=t.diagnostics.iter(e.to+1);return!i.value&&(i=t.diagnostics.iter(0),!i.value||i.from==e.from&&i.to==e.to)?!1:(l.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},_R=[{key:"Mod-Shift-m",run:zR,preventDefault:!0},{key:"F8",run:LR}],Ka=st.define({combine(l){return{sources:l.map(t=>t.source).filter(t=>t!=null),...un(l.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:$v,tooltipFilter:$v,needsRefresh:(t,e)=>t?e?i=>t(i)||e(i):t:e,hideOn:(t,e)=>t?e?(i,s,a)=>t(i,s,a)||e(i,s,a):t:e,autoPanel:(t,e)=>t||e})}}});function $v(l,t){return l?t?(e,i)=>t(l(e,i),i):l:t}function O2(l){let t=[];if(l)t:for(let{name:e}of l){for(let i=0;i<e.length;i++){let s=e[i];if(/[a-zA-Z]/.test(s)&&!t.some(a=>a.toLowerCase()==s.toLowerCase())){t.push(s);continue t}}t.push("")}return t}function w2(l,t,e){var i;let s=e?O2(t.actions):[];return Kt("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Kt("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(l):t.message),(i=t.actions)===null||i===void 0?void 0:i.map((a,o)=>{let c=!1,h=S=>{if(S.preventDefault(),c)return;c=!0;let O=cr(l.state.field(gi).diagnostics,t);O&&a.apply(l,O.from,O.to)},{name:d}=a,p=s[o]?d.indexOf(s[o]):-1,y=p<0?d:[d.slice(0,p),Kt("u",d.slice(p,p+1)),d.slice(p+1)],b=a.markClass?" "+a.markClass:"";return Kt("button",{type:"button",class:"cm-diagnosticAction"+b,onclick:h,onmousedown:h,"aria-label":` Action: ${d}${p<0?"":` (access key "${s[o]})"`}.`},y)}),t.source&&Kt("div",{class:"cm-diagnosticSource"},t.source))}class HR extends Wi{constructor(t){super(),this.sev=t}eq(t){return t.sev==this.sev}toDOM(){return Kt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Kv{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=w2(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ia{constructor(t){this.view=t,this.items=[];let e=s=>{if(s.keyCode==27)Pv(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],o=O2(a.actions);for(let c=0;c<o.length;c++)if(o[c].toUpperCase().charCodeAt(0)==s.keyCode){let h=cr(this.view.state.field(gi).diagnostics,a);h&&a.actions[c].apply(t,h.from,h.to)}}else return;s.preventDefault()},i=s=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(s.target)&&this.moveSelection(a)};this.list=Kt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e,onclick:i}),this.dom=Kt("div",{class:"cm-panel-lint"},this.list,Kt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Pv(this.view)},"")),this.update()}get selectedIndex(){let t=this.view.state.field(gi).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(gi),i=0,s=!1,a=null,o=new Set;for(t.between(0,this.view.state.doc.length,(c,h,{spec:d})=>{for(let p of d.diagnostics){if(o.has(p))continue;o.add(p);let y=-1,b;for(let S=i;S<this.items.length;S++)if(this.items[S].diagnostic==p){y=S;break}y<0?(b=new Kv(this.view,p),this.items.splice(i,0,b),s=!0):(b=this.items[y],y>i&&(this.items.splice(i,y-i),s=!0)),e&&b.diagnostic==e.diagnostic?b.dom.hasAttribute("aria-selected")||(b.dom.setAttribute("aria-selected","true"),a=b):b.dom.hasAttribute("aria-selected")&&b.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new Kv(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:c,panel:h})=>{let d=h.height/this.list.offsetHeight;c.top<h.top?this.list.scrollTop-=(h.top-c.top)/d:c.bottom>h.bottom&&(this.list.scrollTop+=(c.bottom-h.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let t=this.list.firstChild;function e(){let i=t;t=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;t!=i.dom;)e();t=i.dom.nextSibling}else this.list.insertBefore(i.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=this.view.state.field(gi),i=cr(e.diagnostics,this.items[t].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:x2.of(i)})}static open(t){return new Ia(t)}}function qR(l,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(l)}</svg>')`}function Fu(l){return qR(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${l}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const VR=Z.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Fu("#d11")},".cm-lintRange-warning":{backgroundImage:Fu("orange")},".cm-lintRange-info":{backgroundImage:Fu("#999")},".cm-lintRange-hint":{backgroundImage:Fu("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function UR(l){return l=="error"?4:l=="warning"?3:l=="info"?2:1}function jR(l){let t="hint",e=1;for(let i of l){let s=UR(i.severity);s>e&&(e=s,t=i.severity)}return t}const WR=[gi,Z.decorations.compute([gi],l=>{let{selected:t,panel:e}=l.field(gi);return!t||!e||t.from==t.to?ht.none:ht.set([RR.range(t.from,t.to)])}),xE(BR,{hideOn:ER}),VR];var Iv=function(t){t===void 0&&(t={});var{crosshairCursor:e=!1}=t,i=[];t.closeBracketsKeymap!==!1&&(i=i.concat(SR)),t.defaultKeymap!==!1&&(i=i.concat(n4)),t.searchKeymap!==!1&&(i=i.concat(E4)),t.historyKeymap!==!1&&(i=i.concat(c3)),t.foldKeymap!==!1&&(i=i.concat(kD)),t.completionKeymap!==!1&&(i=i.concat(v2)),t.lintKeymap!==!1&&(i=i.concat(_R));var s=[];return t.lineNumbers!==!1&&s.push(BE()),t.highlightActiveLineGutter!==!1&&s.push(LE()),t.highlightSpecialChars!==!1&&s.push(IM()),t.history!==!1&&s.push(e3()),t.foldGutter!==!1&&s.push(ED()),t.drawSelection!==!1&&s.push(VM()),t.dropCursor!==!1&&s.push(XM()),t.allowMultipleSelections!==!1&&s.push(Lt.allowMultipleSelections.of(!0)),t.indentOnInput!==!1&&s.push(pD()),t.syntaxHighlighting!==!1&&s.push(gO(ND,{fallback:!0})),t.bracketMatching!==!1&&s.push(UD()),t.closeBrackets!==!1&&s.push(gR()),t.autocompletion!==!1&&s.push(TR()),t.rectangularSelection!==!1&&s.push(cE()),e!==!1&&s.push(dE()),t.highlightActiveLine!==!1&&s.push(iE()),t.highlightSelectionMatches!==!1&&s.push(c4()),t.tabSize&&typeof t.tabSize=="number"&&s.push(lo.of(" ".repeat(t.tabSize))),s.concat([io.of(i.flat())]).filter(Boolean)};const YR="#e5c07b",Zv="#e06c75",XR="#56b6c2",QR="#ffffff",oc="#abb2bf",tp="#7d8799",GR="#61afef",PR="#98c379",Fv="#d19a66",$R="#c678dd",KR="#21252b",Jv="#2c313a",tS="#282c34",Kd="#353a42",IR="#3E4451",eS="#528bff",ZR=Z.theme({"&":{color:oc,backgroundColor:tS},".cm-content":{caretColor:eS},".cm-cursor, .cm-dropCursor":{borderLeftColor:eS},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:IR},".cm-panels":{backgroundColor:KR,color:oc},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:tS,color:tp,border:"none"},".cm-activeLineGutter":{backgroundColor:Jv},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Kd},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Kd,borderBottomColor:Kd},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Jv,color:oc}}},{dark:!0}),FR=ro.define([{tag:L.keyword,color:$R},{tag:[L.name,L.deleted,L.character,L.propertyName,L.macroName],color:Zv},{tag:[L.function(L.variableName),L.labelName],color:GR},{tag:[L.color,L.constant(L.name),L.standard(L.name)],color:Fv},{tag:[L.definition(L.name),L.separator],color:oc},{tag:[L.typeName,L.className,L.number,L.changed,L.annotation,L.modifier,L.self,L.namespace],color:YR},{tag:[L.operator,L.operatorKeyword,L.url,L.escape,L.regexp,L.link,L.special(L.string)],color:XR},{tag:[L.meta,L.comment],color:tp},{tag:L.strong,fontWeight:"bold"},{tag:L.emphasis,fontStyle:"italic"},{tag:L.strikethrough,textDecoration:"line-through"},{tag:L.link,color:tp,textDecoration:"underline"},{tag:L.heading,fontWeight:"bold",color:Zv},{tag:[L.atom,L.bool,L.special(L.variableName)],color:Fv},{tag:[L.processingInstruction,L.string,L.inserted],color:PR},{tag:L.invalid,color:QR}]),C2=[ZR,gO(FR)];var JR=Z.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),t5=function(t){t===void 0&&(t={});var{indentWithTab:e=!0,editable:i=!0,readOnly:s=!1,theme:a="light",placeholder:o="",basicSetup:c=!0}=t,h=[];switch(e&&h.unshift(io.of([l4])),c&&(typeof c=="boolean"?h.unshift(Iv()):h.unshift(Iv(c))),o&&h.unshift(rE(o)),a){case"light":h.push(JR);break;case"dark":h.push(C2);break;case"none":break;default:h.push(a);break}return i===!1&&h.push(Z.editable.of(!1)),s&&h.push(Lt.readOnly.of(!0)),[...h]},e5=l=>({line:l.state.doc.lineAt(l.state.selection.main.from),lineCount:l.state.doc.lines,lineBreak:l.state.lineBreak,length:l.state.doc.length,readOnly:l.state.readOnly,tabSize:l.state.tabSize,selection:l.state.selection,selectionAsSingle:l.state.selection.asSingle().main,ranges:l.state.selection.ranges,selectionCode:l.state.sliceDoc(l.state.selection.main.from,l.state.selection.main.to),selections:l.state.selection.ranges.map(t=>l.state.sliceDoc(t.from,t.to)),selectedText:l.state.selection.ranges.some(t=>!t.empty)});class i5{constructor(t,e){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=e,this.timeoutMS=e,this.callbacks.push(t)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var t=this.callbacks.slice();this.callbacks.length=0,t.forEach(e=>{try{e()}catch(i){console.error("TimeoutLatch callback error:",i)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class iS{constructor(){this.interval=null,this.latches=new Set}add(t){this.latches.add(t),this.start()}remove(t){this.latches.delete(t),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(t=>{t.tick(),t.isDone&&this.remove(t)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var Id=null,n5=()=>typeof window>"u"?new iS:(Id||(Id=new iS),Id),nS=on.define(),l5=200,s5=[];function r5(l){var{value:t,selection:e,onChange:i,onStatistics:s,onCreateEditor:a,onUpdate:o,extensions:c=s5,autoFocus:h,theme:d="light",height:p=null,minHeight:y=null,maxHeight:b=null,width:S=null,minWidth:O=null,maxWidth:w=null,placeholder:C="",editable:M=!0,readOnly:H=!1,indentWithTab:q=!0,basicSetup:P=!0,root:Q,initialState:G}=l,[V,ut]=$.useState(),[nt,gt]=$.useState(),[ft,et]=$.useState(),pt=$.useState(()=>({current:null}))[0],mt=$.useState(()=>({current:null}))[0],St=Z.theme({"&":{height:p,minHeight:y,maxHeight:b,width:S,minWidth:O,maxWidth:w},"& .cm-scroller":{height:"100% !important"}}),B=Z.updateListener.of(at=>{if(at.docChanged&&typeof i=="function"&&!at.transactions.some(z=>z.annotation(nS))){pt.current?pt.current.reset():(pt.current=new i5(()=>{if(mt.current){var z=mt.current;mt.current=null,z()}pt.current=null},l5),n5().add(pt.current));var vt=at.state.doc,A=vt.toString();i(A,at)}s&&s(e5(at))}),K=t5({theme:d,editable:M,readOnly:H,placeholder:C,indentWithTab:q,basicSetup:P}),tt=[B,St,...K];return o&&typeof o=="function"&&tt.push(Z.updateListener.of(o)),tt=tt.concat(c),$.useLayoutEffect(()=>{if(V&&!ft){var at={doc:t,selection:e,extensions:tt},vt=G?Lt.fromJSON(G.json,at,G.fields):Lt.create(at);if(et(vt),!nt){var A=new Z({state:vt,parent:V,root:Q});gt(A),a&&a(A,vt)}}return()=>{nt&&(et(void 0),gt(void 0))}},[V,ft]),$.useEffect(()=>{l.container&&ut(l.container)},[l.container]),$.useEffect(()=>()=>{nt&&(nt.destroy(),gt(void 0)),pt.current&&(pt.current.cancel(),pt.current=null)},[nt]),$.useEffect(()=>{h&&nt&&nt.focus()},[h,nt]),$.useEffect(()=>{nt&&nt.dispatch({effects:xt.reconfigure.of(tt)})},[d,c,p,y,b,S,O,w,C,M,H,q,P,i,o]),$.useEffect(()=>{if(t!==void 0){var at=nt?nt.state.doc.toString():"";if(nt&&t!==at){var vt=pt.current&&!pt.current.isDone,A=()=>{nt&&t!==nt.state.doc.toString()&&nt.dispatch({changes:{from:0,to:nt.state.doc.toString().length,insert:t||""},annotations:[nS.of(!0)]})};vt?mt.current=A:A()}}},[t,nt]),{state:ft,setState:et,view:nt,setView:gt,container:V,setContainer:ut}}var a5=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],k2=$.forwardRef((l,t)=>{var{className:e,value:i="",selection:s,extensions:a=[],onChange:o,onStatistics:c,onCreateEditor:h,onUpdate:d,autoFocus:p,theme:y="light",height:b,minHeight:S,maxHeight:O,width:w,minWidth:C,maxWidth:M,basicSetup:H,placeholder:q,indentWithTab:P,editable:Q,readOnly:G,root:V,initialState:ut}=l,nt=AA(l,a5),gt=$.useRef(null),{state:ft,view:et,container:pt,setContainer:mt}=r5({root:V,value:i,autoFocus:p,theme:y,height:b,minHeight:S,maxHeight:O,width:w,minWidth:C,maxWidth:M,basicSetup:H,placeholder:q,indentWithTab:P,editable:Q,readOnly:G,selection:s,onChange:o,onStatistics:c,onCreateEditor:h,onUpdate:d,extensions:a,initialState:ut});$.useImperativeHandle(t,()=>({editor:gt.current,state:ft,view:et}),[gt,pt,ft,et]);var St=$.useCallback(K=>{gt.current=K,mt(K)},[mt]);if(typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var B=typeof y=="string"?"cm-theme-"+y:"cm-theme";return F.jsx("div",rm({ref:St,className:""+B+(e?" "+e:"")},nt))});k2.displayName="CodeMirror";var lS={};class _c{constructor(t,e,i,s,a,o,c,h,d,p=0,y){this.p=t,this.stack=e,this.state=i,this.reducePos=s,this.pos=a,this.score=o,this.buffer=c,this.bufferBase=h,this.curContext=d,this.lookAhead=p,this.parent=y}toString(){return`[${this.stack.filter((t,e)=>e%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,i=0){let s=t.parser.context;return new _c(t,[],e,i,i,0,[],0,s?new sS(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var e;let i=t>>19,s=t&65535,{parser:a}=this.p,o=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),c=a.dynamicPrecedence(s);if(c&&(this.score+=c),i==0){this.pushState(a.getGoto(this.state,s,!0),this.reducePos),s<a.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(s,this.reducePos);return}let h=this.stack.length-(i-1)*3-(t&262144?6:0),d=h?this.stack[h-2]:this.p.ranges[0].from,p=this.reducePos-d;p>=2e3&&!(!((e=this.p.parser.nodeSet.types[s])===null||e===void 0)&&e.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=p));let y=h?this.stack[h-1]:0,b=this.bufferBase+this.buffer.length-y;if(s<a.minRepeatTerm||t&131072){let S=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,d,S,b+4,!0)}if(t&262144)this.state=this.stack[h];else{let S=this.stack[h-3];this.state=a.getGoto(S,s,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(s,d)}storeNode(t,e,i,s=4,a=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,c=this.buffer.length;if(c==0&&o.parent&&(c=o.bufferBase-o.parent.bufferBase,o=o.parent),c>0&&o.buffer[c-4]==0&&o.buffer[c-1]>-1){if(e==i)return;if(o.buffer[c-2]>=e){o.buffer[c-2]=i;return}}}if(!a||this.pos==i)this.buffer.push(t,e,i,s);else{let o=this.buffer.length;if(o>0&&(this.buffer[o-4]!=0||this.buffer[o-1]<0)){let c=!1;for(let h=o;h>0&&this.buffer[h-2]>i;h-=4)if(this.buffer[h-1]>=0){c=!0;break}if(c)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,s>4&&(s-=4)}this.buffer[o]=t,this.buffer[o+1]=e,this.buffer[o+2]=i,this.buffer[o+3]=s}}shift(t,e,i,s){if(t&131072)this.pushState(t&65535,this.pos);else if((t&262144)==0){let a=t,{parser:o}=this.p;(s>this.pos||e<=o.maxNode)&&(this.pos=s,o.stateFlag(a,1)||(this.reducePos=s)),this.pushState(a,i),this.shiftContext(e,i),e<=o.maxNode&&this.buffer.push(e,i,s,4)}else this.pos=s,this.shiftContext(e,i),e<=this.p.parser.maxNode&&this.buffer.push(e,i,s,4)}apply(t,e,i,s){t&65536?this.reduce(t):this.shift(t,e,i,s)}useNode(t,e){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=t)&&(this.p.reused.push(t),i++);let s=this.pos;this.reducePos=this.pos=s+t.length,this.pushState(e,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let i=t.buffer.slice(e),s=t.bufferBase+e;for(;t&&s==t.bufferBase;)t=t.parent;return new _c(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let i=t<=this.p.parser.maxNode;i&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,i?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new o5(this);;){let i=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(i==0)return!1;if((i&65536)==0)return!0;e.reduce(i)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>8||this.stack.length>=120){let s=[];for(let a=0,o;a<e.length;a+=2)(o=e[a+1])!=this.state&&this.p.parser.hasAction(o,t)&&s.push(e[a],o);if(this.stack.length<120)for(let a=0;s.length<8&&a<e.length;a+=2){let o=e[a+1];s.some((c,h)=>h&1&&c==o)||s.push(e[a],o)}e=s}let i=[];for(let s=0;s<e.length&&i.length<4;s+=2){let a=e[s+1];if(a==this.state)continue;let o=this.split();o.pushState(a,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(e[s],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:t}=this.p,e=t.stateSlot(this.state,5);if((e&65536)==0)return!1;if(!t.validAction(this.state,e)){let i=e>>19,s=e&65535,a=this.stack.length-i*3;if(a<0||t.getGoto(this.stack[a],s,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;e=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}findForcedReduction(){let{parser:t}=this.p,e=[],i=(s,a)=>{if(!e.includes(s))return e.push(s),t.allActions(s,o=>{if(!(o&393216))if(o&65536){let c=(o>>19)-a;if(c>1){let h=o&65535,d=this.stack.length-c*3;if(d>=0&&t.getGoto(this.stack[d],h,!1)>=0)return c<<19|65536|h}}else{let c=i(o,a+1);if(c!=null)return c}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new sS(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){return t<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=t,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class sS{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}}class o5{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=t&65535,i=t>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=s}}class Hc{constructor(t,e,i){this.stack=t,this.pos=e,this.index=i,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new Hc(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Hc(this.stack,this.pos,this.index)}}function Oa(l,t=Uint16Array){if(typeof l!="string")return l;let e=null;for(let i=0,s=0;i<l.length;){let a=0;for(;;){let o=l.charCodeAt(i++),c=!1;if(o==126){a=65535;break}o>=92&&o--,o>=34&&o--;let h=o-32;if(h>=46&&(h-=46,c=!0),a+=h,c)break;a*=46}e?e[s++]=a:e=new t(a)}return e}class uc{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const rS=new uc;class u5{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=rS,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let i=this.range,s=this.rangeIndex,a=this.pos+t;for(;a<i.from;){if(!s)return null;let o=this.ranges[--s];a-=i.from-o.to,i=o}for(;e<0?a>i.to:a>=i.to;){if(s==this.ranges.length-1)return null;let o=this.ranges[++s];a+=o.from-i.to,i=o}return a}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e=this.chunkOff+t,i,s;if(e>=0&&e<this.chunk.length)i=this.pos+t,s=this.chunk.charCodeAt(e);else{let a=this.resolveOffset(t,1);if(a==null)return-1;if(i=a,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,c=this.range;for(;c.to<=i;)c=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(t,e=0){let i=e?this.resolveOffset(e,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=i}acceptTokenTo(t,e){this.token.value=t,this.token.end=e}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=rS,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let i="";for(let s of this.ranges){if(s.from>=e)break;s.to>t&&(i+=this.input.read(Math.max(s.from,t),Math.min(s.to,e)))}return i}}class ir{constructor(t,e){this.data=t,this.id=e}token(t,e){let{parser:i}=e.p;T2(this.data,t,e,this.id,i.data,i.tokenPrecTable)}}ir.prototype.contextual=ir.prototype.fallback=ir.prototype.extend=!1;class c5{constructor(t,e,i){this.precTable=e,this.elseToken=i,this.data=typeof t=="string"?Oa(t):t}token(t,e){let i=t.pos,s=0;for(;;){let a=t.next<0,o=t.resolveOffset(1,1);if(T2(this.data,t,e,0,this.data,this.precTable),t.token.value>-1)break;if(this.elseToken==null)return;if(a||s++,o==null)break;t.reset(o,t.token)}s&&(t.reset(i,t.token),t.acceptToken(this.elseToken,s))}}c5.prototype.contextual=ir.prototype.fallback=ir.prototype.extend=!1;class A2{constructor(t,e={}){this.token=t,this.contextual=!!e.contextual,this.fallback=!!e.fallback,this.extend=!!e.extend}}function T2(l,t,e,i,s,a){let o=0,c=1<<i,{dialect:h}=e.p.parser;t:for(;(c&l[o])!=0;){let d=l[o+1];for(let S=o+3;S<d;S+=2)if((l[S+1]&c)>0){let O=l[S];if(h.allows(O)&&(t.token.value==-1||t.token.value==O||f5(O,t.token.value,s,a))){t.acceptToken(O);break}}let p=t.next,y=0,b=l[o+2];if(t.next<0&&b>y&&l[d+b*3-3]==65535){o=l[d+b*3-1];continue t}for(;y<b;){let S=y+b>>1,O=d+S+(S<<1),w=l[O],C=l[O+1]||65536;if(p<w)b=S;else if(p>=C)y=S+1;else{o=l[O+2],t.advance();continue t}}break}}function aS(l,t,e){for(let i=t,s;(s=l[i])!=65535;i++)if(s==e)return i-t;return-1}function f5(l,t,e,i){let s=aS(e,i,t);return s<0||aS(e,i,l)<s}const mi=typeof process<"u"&&lS&&/\bparse\b/.test(lS.LOG);let Zd=null;function oS(l,t,e){let i=l.cursor(Pt.IncludeAnonymous);for(i.moveTo(t);;)if(!(e<0?i.childBefore(t):i.childAfter(t)))for(;;){if((e<0?i.to<t:i.from>t)&&!i.type.isError)return e<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(l.length,Math.max(i.from+1,t+25));if(e<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return e<0?0:l.length}}class h5{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?oS(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?oS(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let i=this.trees[e],s=this.index[e];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let a=i.children[s],o=this.start[e]+i.positions[s];if(o>t)return this.nextStart=o,null;if(a instanceof ne){if(o==t){if(o<this.safeFrom)return null;let c=o+a.length;if(c<=this.safeTo){let h=a.prop(Tt.lookAhead);if(!h||c+h<this.fragment.to)return a}}this.index[e]++,o+a.length>=Math.max(this.safeFrom,t)&&(this.trees.push(a),this.start.push(o),this.index.push(0))}else this.index[e]++,this.nextStart=o+a.length}}}class d5{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(i=>new uc)}getActions(t){let e=0,i=null,{parser:s}=t.p,{tokenizers:a}=s,o=s.stateSlot(t.state,3),c=t.curContext?t.curContext.hash:0,h=0;for(let d=0;d<a.length;d++){if((1<<d&o)==0)continue;let p=a[d],y=this.tokens[d];if(!(i&&!p.fallback)&&((p.contextual||y.start!=t.pos||y.mask!=o||y.context!=c)&&(this.updateCachedToken(y,p,t),y.mask=o,y.context=c),y.lookAhead>y.end+25&&(h=Math.max(y.lookAhead,h)),y.value!=0)){let b=e;if(y.extended>-1&&(e=this.addActions(t,y.extended,y.end,e)),e=this.addActions(t,y.value,y.end,e),!p.extend&&(i=y,e>b))break}}for(;this.actions.length>e;)this.actions.pop();return h&&t.setLookAhead(h),!i&&t.pos==this.stream.end&&(i=new uc,i.value=t.p.parser.eofTerm,i.start=i.end=t.pos,e=this.addActions(t,i.value,i.end,e)),this.mainToken=i,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new uc,{pos:i,p:s}=t;return e.start=i,e.end=Math.min(i+1,s.stream.end),e.value=i==s.stream.end?s.parser.eofTerm:0,e}updateCachedToken(t,e,i){let s=this.stream.clipPos(i.pos);if(e.token(this.stream.reset(s,t),i),t.value>-1){let{parser:a}=i.p;for(let o=0;o<a.specialized.length;o++)if(a.specialized[o]==t.value){let c=a.specializers[o](this.stream.read(t.start,t.end),i);if(c>=0&&i.p.parser.dialect.allows(c>>1)){(c&1)==0?t.value=c>>1:t.extended=c>>1;break}}}else t.value=0,t.end=this.stream.clipPos(s+1)}putAction(t,e,i,s){for(let a=0;a<s;a+=3)if(this.actions[a]==t)return s;return this.actions[s++]=t,this.actions[s++]=e,this.actions[s++]=i,s}addActions(t,e,i,s){let{state:a}=t,{parser:o}=t.p,{data:c}=o;for(let h=0;h<2;h++)for(let d=o.stateSlot(a,h?2:1);;d+=3){if(c[d]==65535)if(c[d+1]==1)d=Bn(c,d+2);else{s==0&&c[d+1]==2&&(s=this.putAction(Bn(c,d+2),e,i,s));break}c[d]==e&&(s=this.putAction(Bn(c,d+1),e,i,s))}return s}}class m5{constructor(t,e,i,s){this.parser=t,this.input=e,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new u5(e,s),this.tokens=new d5(t,this.stream),this.topTerm=t.top[1];let{from:a}=s[0];this.stacks=[_c.start(this,t.top[0],a)],this.fragments=i.length&&this.stream.end-a>t.bufferLength*4?new h5(i,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,e=this.minStackPos,i=this.stacks=[],s,a;if(this.bigReductionCount>300&&t.length==1){let[o]=t;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<t.length;o++){let c=t[o];for(;;){if(this.tokens.mainToken=null,c.pos>e)i.push(c);else{if(this.advanceStack(c,i,t))continue;{s||(s=[],a=[]),s.push(c);let h=this.tokens.getMainToken(c);a.push(h.value,h.end)}}break}}if(!i.length){let o=s&&y5(s);if(o)return mi&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw mi&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+e);this.recovering||(this.recovering=5)}if(this.recovering&&s){let o=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,a,i);if(o)return mi&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((c,h)=>h.score-c.score);i.length>o;)i.pop();i.some(c=>c.reducePos>e)&&this.recovering--}else if(i.length>1){t:for(let o=0;o<i.length-1;o++){let c=i[o];for(let h=o+1;h<i.length;h++){let d=i[h];if(c.sameState(d)||c.buffer.length>500&&d.buffer.length>500)if((c.score-d.score||c.buffer.length-d.buffer.length)>0)i.splice(h--,1);else{i.splice(o--,1);continue t}}}i.length>12&&(i.sort((o,c)=>c.score-o.score),i.splice(12,i.length-12))}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,i){let s=t.pos,{parser:a}=this,o=mi?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let d=t.curContext&&t.curContext.tracker.strict,p=d?t.curContext.hash:0;for(let y=this.fragments.nodeAt(s);y;){let b=this.parser.nodeSet.types[y.type.id]==y.type?a.getGoto(t.state,y.type.id):-1;if(b>-1&&y.length&&(!d||(y.prop(Tt.contextHash)||0)==p))return t.useNode(y,b),mi&&console.log(o+this.stackID(t)+` (via reuse of ${a.getName(y.type.id)})`),!0;if(!(y instanceof ne)||y.children.length==0||y.positions[0]>0)break;let S=y.children[0];if(S instanceof ne&&y.positions[0]==0)y=S;else break}}let c=a.stateSlot(t.state,4);if(c>0)return t.reduce(c),mi&&console.log(o+this.stackID(t)+` (via always-reduce ${a.getName(c&65535)})`),!0;if(t.stack.length>=8400)for(;t.stack.length>6e3&&t.forceReduce(););let h=this.tokens.getActions(t);for(let d=0;d<h.length;){let p=h[d++],y=h[d++],b=h[d++],S=d==h.length||!i,O=S?t:t.split(),w=this.tokens.mainToken;if(O.apply(p,y,w?w.start:O.pos,b),mi&&console.log(o+this.stackID(O)+` (via ${(p&65536)==0?"shift":`reduce of ${a.getName(p&65535)}`} for ${a.getName(y)} @ ${s}${O==t?"":", split"})`),S)return!0;O.pos>s?e.push(O):i.push(O)}return!1}advanceFully(t,e){let i=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>i)return uS(t,e),!0}}runRecovery(t,e,i){let s=null,a=!1;for(let o=0;o<t.length;o++){let c=t[o],h=e[o<<1],d=e[(o<<1)+1],p=mi?this.stackID(c)+" -> ":"";if(c.deadEnd&&(a||(a=!0,c.restart(),mi&&console.log(p+this.stackID(c)+" (restarted)"),this.advanceFully(c,i))))continue;let y=c.split(),b=p;for(let S=0;S<10&&y.forceReduce()&&(mi&&console.log(b+this.stackID(y)+" (via force-reduce)"),!this.advanceFully(y,i));S++)mi&&(b=this.stackID(y)+" -> ");for(let S of c.recoverByInsert(h))mi&&console.log(p+this.stackID(S)+" (via recover-insert)"),this.advanceFully(S,i);this.stream.end>c.pos?(d==c.pos&&(d++,h=0),c.recoverByDelete(h,d),mi&&console.log(p+this.stackID(c)+` (via recover-delete ${this.parser.getName(h)})`),uS(c,i)):(!s||s.score<c.score)&&(s=c)}return s}stackToTree(t){return t.close(),ne.build({buffer:Hc.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(Zd||(Zd=new WeakMap)).get(t);return e||Zd.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}}function uS(l,t){for(let e=0;e<t.length;e++){let i=t[e];if(i.pos==l.pos&&i.sameState(l)){t[e].score<l.score&&(t[e]=l);return}}t.push(l)}class p5{constructor(t,e,i){this.source=t,this.flags=e,this.disabled=i}allows(t){return!this.disabled||this.disabled[t]==0}}const Fd=l=>l;class g5{constructor(t){this.start=t.start,this.shift=t.shift||Fd,this.reduce=t.reduce||Fd,this.reuse=t.reuse||Fd,this.hash=t.hash||(()=>0),this.strict=t.strict!==!1}}class Za extends eO{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let c=0;c<t.repeatNodeCount;c++)e.push("");let i=Object.keys(t.topRules).map(c=>t.topRules[c][1]),s=[];for(let c=0;c<e.length;c++)s.push([]);function a(c,h,d){s[c].push([h,h.deserialize(String(d))])}if(t.nodeProps)for(let c of t.nodeProps){let h=c[0];typeof h=="string"&&(h=Tt[h]);for(let d=1;d<c.length;){let p=c[d++];if(p>=0)a(p,h,c[d++]);else{let y=c[d+-p];for(let b=-p;b>0;b--)a(c[d++],h,y);d++}}}this.nodeSet=new Cp(e.map((c,h)=>Xe.define({name:h>=this.minRepeatTerm?void 0:c,id:h,props:s[h],top:i.indexOf(h)>-1,error:h==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(h)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=Zx;let o=Oa(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(cS),this.states=Oa(t.states,Uint32Array),this.data=Oa(t.stateData),this.goto=Oa(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(c=>typeof c=="number"?new ir(o,c):c),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,i){let s=new m5(this,t,e,i);for(let a of this.wrappers)s=a(s,t,e,i);return s}getGoto(t,e,i=!1){let s=this.goto;if(e>=s[0])return-1;for(let a=s[e+1];;){let o=s[a++],c=o&1,h=s[a++];if(c&&i)return h;for(let d=a+(o>>1);a<d;a++)if(s[a]==t)return h;if(c)return-1}}hasAction(t,e){let i=this.data;for(let s=0;s<2;s++)for(let a=this.stateSlot(t,s?2:1),o;;a+=3){if((o=i[a])==65535)if(i[a+1]==1)o=i[a=Bn(i,a+2)];else{if(i[a+1]==2)return Bn(i,a+2);break}if(o==e||o==0)return Bn(i,a+1)}return 0}stateSlot(t,e){return this.states[t*6+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){return!!this.allActions(t,i=>i==e?!0:null)}allActions(t,e){let i=this.stateSlot(t,4),s=i?e(i):void 0;for(let a=this.stateSlot(t,1);s==null;a+=3){if(this.data[a]==65535)if(this.data[a+1]==1)a=Bn(this.data,a+2);else break;s=e(Bn(this.data,a+1))}return s}nextStates(t){let e=[];for(let i=this.stateSlot(t,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Bn(this.data,i+2);else break;if((this.data[i+2]&1)==0){let s=this.data[i+1];e.some((a,o)=>o&1&&a==s)||e.push(this.data[i],s)}}return e}configure(t){let e=Object.assign(Object.create(Za.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let i=this.topRules[t.top];if(!i)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=i}return t.tokenizers&&(e.tokenizers=this.tokenizers.map(i=>{let s=t.tokenizers.find(a=>a.from==i);return s?s.to:i})),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map((i,s)=>{let a=t.specializers.find(c=>c.from==i.external);if(!a)return i;let o=Object.assign(Object.assign({},i),{external:a.to});return e.specializers[s]=cS(o),o})),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),t.bufferLength!=null&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return e==null?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),i=e.map(()=>!1);if(t)for(let a of t.split(" ")){let o=e.indexOf(a);o>=0&&(i[o]=!0)}let s=null;for(let a=0;a<e.length;a++)if(!i[a])for(let o=this.dialects[e[a]],c;(c=this.data[o++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[c]=1;return new p5(t,i,s)}static deserialize(t){return new Za(t)}}function Bn(l,t){return l[t]|l[t+1]<<16}function y5(l){let t=null;for(let e of l){let i=e.p.stoppedAt;(e.pos==e.p.stream.end||i!=null&&e.pos>i)&&e.p.parser.stateFlag(e.state,2)&&(!t||t.score<e.score)&&(t=e)}return t}function cS(l){if(l.external){let t=l.extend?1:0;return(e,i)=>l.external(e,i)<<1|t}return l.get}const b5=Mp({String:L.string,Number:L.number,"True False":L.bool,PropertyName:L.propertyName,Null:L.null,", :":L.separator,"[ ]":L.squareBracket,"{ }":L.brace}),v5=Za.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[b5],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),S5=Ya.define({name:"json",parser:v5.configure({props:[Dp.add({Object:vv({except:/^\s*\}/}),Array:vv({except:/^\s*\]/})}),Bp.add({"Object Array":yD})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Jd(){return new sO(S5)}const ep=1,x5=2,O5=3,w5=4,C5=5,k5=36,A5=37,T5=38,M5=11,E5=13;function D5(l){return l==45||l==46||l==58||l>=65&&l<=90||l==95||l>=97&&l<=122||l>=161}function R5(l){return l==9||l==10||l==13||l==32}let fS=null,hS=null,dS=0;function ip(l,t){let e=l.pos+t;if(hS==l&&dS==e)return fS;for(;R5(l.peek(t));)t++;let i="";for(;;){let s=l.peek(t);if(!D5(s))break;i+=String.fromCharCode(s),t++}return hS=l,dS=e,fS=i||null}function mS(l,t){this.name=l,this.parent=t}const B5=new g5({start:null,shift(l,t,e,i){return t==ep?new mS(ip(i,1)||"",l):l},reduce(l,t){return t==M5&&l?l.parent:l},reuse(l,t,e,i){let s=t.type.id;return s==ep||s==E5?new mS(ip(i,1)||"",l):l},strict:!1}),N5=new A2((l,t)=>{if(l.next==60){if(l.advance(),l.next==47){l.advance();let e=ip(l,0);if(!e)return l.acceptToken(C5);if(t.context&&e==t.context.name)return l.acceptToken(x5);for(let i=t.context;i;i=i.parent)if(i.name==e)return l.acceptToken(O5,-2);l.acceptToken(w5)}else if(l.next!=33&&l.next!=63)return l.acceptToken(ep)}},{contextual:!0});function $p(l,t){return new A2(e=>{let i=0,s=t.charCodeAt(0);t:for(;!(e.next<0);e.advance(),i++)if(e.next==s){for(let a=1;a<t.length;a++)if(e.peek(a)!=t.charCodeAt(a))continue t;break}i&&e.acceptToken(l)})}const z5=$p(k5,"-->"),L5=$p(A5,"?>"),_5=$p(T5,"]]>"),H5=Mp({Text:L.content,"StartTag StartCloseTag EndTag SelfCloseEndTag":L.angleBracket,TagName:L.tagName,"MismatchedCloseTag/TagName":[L.tagName,L.invalid],AttributeName:L.attributeName,AttributeValue:L.attributeValue,Is:L.definitionOperator,"EntityReference CharacterReference":L.character,Comment:L.blockComment,ProcessingInst:L.processingInstruction,DoctypeDecl:L.documentMeta,Cdata:L.special(L.string)}),q5=Za.deserialize({version:14,states:",lOQOaOOOrOxO'#CfOzOpO'#CiO!tOaO'#CgOOOP'#Cg'#CgO!{OrO'#CrO#TOtO'#CsO#]OpO'#CtOOOP'#DT'#DTOOOP'#Cv'#CvQQOaOOOOOW'#Cw'#CwO#eOxO,59QOOOP,59Q,59QOOOO'#Cx'#CxO#mOpO,59TO#uO!bO,59TOOOP'#C|'#C|O$TOaO,59RO$[OpO'#CoOOOP,59R,59ROOOQ'#C}'#C}O$dOrO,59^OOOP,59^,59^OOOS'#DO'#DOO$lOtO,59_OOOP,59_,59_O$tOpO,59`O$|OpO,59`OOOP-E6t-E6tOOOW-E6u-E6uOOOP1G.l1G.lOOOO-E6v-E6vO%UO!bO1G.oO%UO!bO1G.oO%dOpO'#CkO%lO!bO'#CyO%zO!bO1G.oOOOP1G.o1G.oOOOP1G.w1G.wOOOP-E6z-E6zOOOP1G.m1G.mO&VOpO,59ZO&_OpO,59ZOOOQ-E6{-E6{OOOP1G.x1G.xOOOS-E6|-E6|OOOP1G.y1G.yO&gOpO1G.zO&gOpO1G.zOOOP1G.z1G.zO&oO!bO7+$ZO&}O!bO7+$ZOOOP7+$Z7+$ZOOOP7+$c7+$cO'YOpO,59VO'bOpO,59VO'mO!bO,59eOOOO-E6w-E6wO'{OpO1G.uO'{OpO1G.uOOOP1G.u1G.uO(TOpO7+$fOOOP7+$f7+$fO(]O!bO<<GuOOOP<<Gu<<GuOOOP<<G}<<G}O'bOpO1G.qO'bOpO1G.qO(hO#tO'#CnO(vO&jO'#CnOOOO1G.q1G.qO)UOpO7+$aOOOP7+$a7+$aOOOP<<HQ<<HQOOOPAN=aAN=aOOOPAN=iAN=iO'bOpO7+$]OOOO7+$]7+$]OOOO'#Cz'#CzO)^O#tO,59YOOOO,59Y,59YOOOO'#C{'#C{O)lO&jO,59YOOOP<<G{<<G{OOOO<<Gw<<GwOOOO-E6x-E6xOOOO1G.t1G.tOOOO-E6y-E6y",stateData:")z~OPQOSVOTWOVWOWWOXWOiXOyPO!QTO!SUO~OvZOx]O~O^`Oz^O~OPQOQcOSVOTWOVWOWWOXWOyPO!QTO!SUO~ORdO~P!SOteO!PgO~OuhO!RjO~O^lOz^O~OvZOxoO~O^qOz^O~O[vO`sOdwOz^O~ORyO~P!SO^{Oz^O~OteO!P}O~OuhO!R!PO~O^!QOz^O~O[!SOz^O~O[!VO`sOd!WOz^O~Oa!YOz^O~Oz^O[mX`mXdmX~O[!VO`sOd!WO~O^!]Oz^O~O[!_Oz^O~O[!aOz^O~O[!cO`sOd!dOz^O~O[!cO`sOd!dO~Oa!eOz^O~Oz^O{!gO}!hO~Oz^O[ma`madma~O[!kOz^O~O[!lOz^O~O[!mO`sOd!nO~OW!qOX!qO{!sO|!qO~OW!tOX!tO}!sO!O!tO~O[!vOz^O~OW!qOX!qO{!yO|!qO~OW!tOX!tO}!yO!O!tO~O",goto:"%cxPPPPPPPPPPyyP!PP!VPP!`!jP!pyyyP!v!|#S$[$k$q$w$}%TPPPP%ZXWORYbXRORYb_t`qru!T!U!bQ!i!YS!p!e!fR!w!oQdRRybXSORYbQYORmYQ[PRn[Q_QQkVjp_krz!R!T!X!Z!^!`!f!j!oQr`QzcQ!RlQ!TqQ!XsQ!ZtQ!^{Q!`!QQ!f!YQ!j!]R!o!eQu`S!UqrU![u!U!bR!b!TQ!r!gR!x!rQ!u!hR!z!uQbRRxbQfTR|fQiUR!OiSXOYTaRb",nodeNames:" StartTag StartCloseTag MissingCloseTag StartCloseTag StartCloseTag Document Text EntityReference CharacterReference Cdata Element EndTag OpenTag TagName Attribute AttributeName Is AttributeValue CloseTag SelfCloseEndTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag DoctypeDecl",maxTerm:50,context:B5,nodeProps:[["closedBy",1,"SelfCloseEndTag EndTag",13,"CloseTag MissingCloseTag"],["openedBy",12,"StartTag StartCloseTag",19,"OpenTag",20,"StartTag"],["isolate",-6,13,18,19,21,22,24,""]],propSources:[H5],skippedNodes:[0],repeatNodeCount:9,tokenData:"!)v~R!YOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs*vsv$qvw+fwx/ix}$q}!O0[!O!P$q!P!Q2z!Q![$q![!]4n!]!^$q!^!_8U!_!`!#t!`!a!$l!a!b!%d!b!c$q!c!}4n!}#P$q#P#Q!'W#Q#R$q#R#S4n#S#T$q#T#o4n#o%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U$q4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qi$zXVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qa%nVVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%gP&YTVPOv&Tw!^&T!_;'S&T;'S;=`&i<%lO&TP&lP;=`<%l&T`&tS!O`Ov&ox;'S&o;'S;=`'Q<%lO&o`'TP;=`<%l&oa'ZP;=`<%l%gX'eWVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^W(ST|WOr'}sv'}w;'S'};'S;=`(c<%lO'}W(fP;=`<%l'}X(lP;=`<%l'^h(vV|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oh)`P;=`<%l(oi)fP;=`<%l$qo)t`VP|W!O`zUOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk+PV{YVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%g~+iast,n![!]-r!c!}-r#R#S-r#T#o-r%W%o-r%p&a-r&b1p-r4U4d-r4e$IS-r$I`$Ib-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~,qQ!Q![,w#l#m-V~,zQ!Q![,w!]!^-Q~-VOX~~-YR!Q![-c!c!i-c#T#Z-c~-fS!Q![-c!]!^-Q!c!i-c#T#Z-c~-ug}!O-r!O!P-r!Q![-r![!]-r!]!^/^!c!}-r#R#S-r#T#o-r$}%O-r%W%o-r%p&a-r&b1p-r1p4U-r4U4d-r4e$IS-r$I`$Ib-r$Je$Jg-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~/cOW~~/fP;=`<%l-rk/rW}bVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^k0eZVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O1W!O!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk1aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a2S!a;'S$q;'S;=`)c<%lO$qk2_X!PQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qm3TZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a3v!a;'S$q;'S;=`)c<%lO$qm4RXdSVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo4{!P`S^QVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O4n!O!P4n!P!Q$q!Q![4n![!]4n!]!^$q!^!_(o!_!c$q!c!}4n!}#R$q#R#S4n#S#T$q#T#o4n#o$}$q$}%O4n%O%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U4n4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Je$q$Je$Jg4n$Jg$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qo8RP;=`<%l4ni8]Y|W!O`Oq(oqr8{rs&osv(owx'}x!a(o!a!b!#U!b;'S(o;'S;=`)]<%lO(oi9S_|W!O`Or(ors&osv(owx'}x}(o}!O:R!O!f(o!f!g;e!g!}(o!}#ODh#O#W(o#W#XLp#X;'S(o;'S;=`)]<%lO(oi:YX|W!O`Or(ors&osv(owx'}x}(o}!O:u!O;'S(o;'S;=`)]<%lO(oi;OV!QP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oi;lX|W!O`Or(ors&osv(owx'}x!q(o!q!r<X!r;'S(o;'S;=`)]<%lO(oi<`X|W!O`Or(ors&osv(owx'}x!e(o!e!f<{!f;'S(o;'S;=`)]<%lO(oi=SX|W!O`Or(ors&osv(owx'}x!v(o!v!w=o!w;'S(o;'S;=`)]<%lO(oi=vX|W!O`Or(ors&osv(owx'}x!{(o!{!|>c!|;'S(o;'S;=`)]<%lO(oi>jX|W!O`Or(ors&osv(owx'}x!r(o!r!s?V!s;'S(o;'S;=`)]<%lO(oi?^X|W!O`Or(ors&osv(owx'}x!g(o!g!h?y!h;'S(o;'S;=`)]<%lO(oi@QY|W!O`Or?yrs@psv?yvwA[wxBdx!`?y!`!aCr!a;'S?y;'S;=`Db<%lO?ya@uV!O`Ov@pvxA[x!`@p!`!aAy!a;'S@p;'S;=`B^<%lO@pPA_TO!`A[!`!aAn!a;'SA[;'S;=`As<%lOA[PAsOiPPAvP;=`<%lA[aBQSiP!O`Ov&ox;'S&o;'S;=`'Q<%lO&oaBaP;=`<%l@pXBiX|WOrBdrsA[svBdvwA[w!`Bd!`!aCU!a;'SBd;'S;=`Cl<%lOBdXC]TiP|WOr'}sv'}w;'S'};'S;=`(c<%lO'}XCoP;=`<%lBdiC{ViP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiDeP;=`<%l?yiDoZ|W!O`Or(ors&osv(owx'}x!e(o!e!fEb!f#V(o#V#WIr#W;'S(o;'S;=`)]<%lO(oiEiX|W!O`Or(ors&osv(owx'}x!f(o!f!gFU!g;'S(o;'S;=`)]<%lO(oiF]X|W!O`Or(ors&osv(owx'}x!c(o!c!dFx!d;'S(o;'S;=`)]<%lO(oiGPX|W!O`Or(ors&osv(owx'}x!v(o!v!wGl!w;'S(o;'S;=`)]<%lO(oiGsX|W!O`Or(ors&osv(owx'}x!c(o!c!dH`!d;'S(o;'S;=`)]<%lO(oiHgX|W!O`Or(ors&osv(owx'}x!}(o!}#OIS#O;'S(o;'S;=`)]<%lO(oiI]V|W!O`yPOr(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiIyX|W!O`Or(ors&osv(owx'}x#W(o#W#XJf#X;'S(o;'S;=`)]<%lO(oiJmX|W!O`Or(ors&osv(owx'}x#T(o#T#UKY#U;'S(o;'S;=`)]<%lO(oiKaX|W!O`Or(ors&osv(owx'}x#h(o#h#iK|#i;'S(o;'S;=`)]<%lO(oiLTX|W!O`Or(ors&osv(owx'}x#T(o#T#UH`#U;'S(o;'S;=`)]<%lO(oiLwX|W!O`Or(ors&osv(owx'}x#c(o#c#dMd#d;'S(o;'S;=`)]<%lO(oiMkX|W!O`Or(ors&osv(owx'}x#V(o#V#WNW#W;'S(o;'S;=`)]<%lO(oiN_X|W!O`Or(ors&osv(owx'}x#h(o#h#iNz#i;'S(o;'S;=`)]<%lO(oi! RX|W!O`Or(ors&osv(owx'}x#m(o#m#n! n#n;'S(o;'S;=`)]<%lO(oi! uX|W!O`Or(ors&osv(owx'}x#d(o#d#e!!b#e;'S(o;'S;=`)]<%lO(oi!!iX|W!O`Or(ors&osv(owx'}x#X(o#X#Y?y#Y;'S(o;'S;=`)]<%lO(oi!#_V!SP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(ok!$PXaQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo!$wX[UVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!%mZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!&`!a;'S$q;'S;=`)c<%lO$qk!&kX!RQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!'aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_#P$q#P#Q!(S#Q;'S$q;'S;=`)c<%lO$qk!(]ZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!)O!a;'S$q;'S;=`)c<%lO$qk!)ZXxQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$q",tokenizers:[N5,z5,L5,_5,0,1,2,3,4],topRules:{Document:[0,6]},tokenPrec:0});function cc(l,t){let e=t&&t.getChild("TagName");return e?l.sliceString(e.from,e.to):""}function tm(l,t){let e=t&&t.firstChild;return!e||e.name!="OpenTag"?"":cc(l,e)}function V5(l,t,e){let i=t&&t.getChildren("Attribute").find(a=>a.from<=e&&a.to>=e),s=i&&i.getChild("AttributeName");return s?l.sliceString(s.from,s.to):""}function em(l){for(let t=l&&l.parent;t;t=t.parent)if(t.name=="Element")return t;return null}function U5(l,t){var e;let i=Se(l).resolveInner(t,-1),s=null;for(let a=i;!s&&a.parent;a=a.parent)(a.name=="OpenTag"||a.name=="CloseTag"||a.name=="SelfClosingTag"||a.name=="MismatchedCloseTag")&&(s=a);if(s&&(s.to>t||s.lastChild.type.isError)){let a=s.parent;if(i.name=="TagName")return s.name=="CloseTag"||s.name=="MismatchedCloseTag"?{type:"closeTag",from:i.from,context:a}:{type:"openTag",from:i.from,context:em(a)};if(i.name=="AttributeName")return{type:"attrName",from:i.from,context:s};if(i.name=="AttributeValue")return{type:"attrValue",from:i.from,context:s};let o=i==s||i.name=="Attribute"?i.childBefore(t):i;return o?.name=="StartTag"?{type:"openTag",from:t,context:em(a)}:o?.name=="StartCloseTag"&&o.to<=t?{type:"closeTag",from:t,context:a}:o?.name=="Is"?{type:"attrValue",from:t,context:s}:o?{type:"attrName",from:t,context:s}:null}else if(i.name=="StartCloseTag")return{type:"closeTag",from:t,context:i.parent};for(;i.parent&&i.to==t&&!(!((e=i.lastChild)===null||e===void 0)&&e.type.isError);)i=i.parent;return i.name=="Element"||i.name=="Text"||i.name=="Document"?{type:"tag",from:t,context:i.name=="Element"?i:em(i)}:null}class j5{constructor(t,e,i){this.attrs=e,this.attrValues=i,this.children=[],this.name=t.name,this.completion=Object.assign(Object.assign({type:"type"},t.completion||{}),{label:this.name}),this.openCompletion=Object.assign(Object.assign({},this.completion),{label:"<"+this.name}),this.closeCompletion=Object.assign(Object.assign({},this.completion),{label:"</"+this.name+">",boost:2}),this.closeNameCompletion=Object.assign(Object.assign({},this.completion),{label:this.name+">"}),this.text=t.textContent?t.textContent.map(s=>({label:s,type:"text"})):[]}}const im=/^[:\-\.\w\u00b7-\uffff]*$/;function pS(l){return Object.assign(Object.assign({type:"property"},l.completion||{}),{label:l.name})}function gS(l){return typeof l=="string"?{label:`"${l}"`,type:"constant"}:/^"/.test(l.label)?l:Object.assign(Object.assign({},l),{label:`"${l.label}"`})}function W5(l,t){let e=[],i=[],s=Object.create(null);for(let h of t){let d=pS(h);e.push(d),h.global&&i.push(d),h.values&&(s[h.name]=h.values.map(gS))}let a=[],o=[],c=Object.create(null);for(let h of l){let d=i,p=s;h.attributes&&(d=d.concat(h.attributes.map(b=>typeof b=="string"?e.find(S=>S.label==b)||{label:b,type:"property"}:(b.values&&(p==s&&(p=Object.create(p)),p[b.name]=b.values.map(gS)),pS(b)))));let y=new j5(h,d,p);c[y.name]=y,a.push(y),h.top&&o.push(y)}o.length||(o=a);for(let h=0;h<a.length;h++){let d=l[h],p=a[h];if(d.children)for(let y of d.children)c[y]&&p.children.push(c[y]);else p.children=a}return h=>{var d;let{doc:p}=h.state,y=U5(h.state,h.pos);if(!y||y.type=="tag"&&!h.explicit)return null;let{type:b,from:S,context:O}=y;if(b=="openTag"){let w=o,C=tm(p,O);if(C){let M=c[C];w=M?.children||a}return{from:S,options:w.map(M=>M.completion),validFor:im}}else if(b=="closeTag"){let w=tm(p,O);return w?{from:S,to:h.pos+(p.sliceString(h.pos,h.pos+1)==">"?1:0),options:[((d=c[w])===null||d===void 0?void 0:d.closeNameCompletion)||{label:w+">",type:"type"}],validFor:im}:null}else if(b=="attrName"){let w=c[cc(p,O)];return{from:S,options:w?.attrs||i,validFor:im}}else if(b=="attrValue"){let w=V5(p,O,S);if(!w)return null;let C=c[cc(p,O)],M=(C?.attrValues||s)[w];return!M||!M.length?null:{from:S,to:h.pos+(p.sliceString(h.pos,h.pos+1)=='"'?1:0),options:M,validFor:/^"[^"]*"?$/}}else if(b=="tag"){let w=tm(p,O),C=c[w],M=[],H=O&&O.lastChild;w&&(!H||H.name!="CloseTag"||cc(p,H)!=w)&&M.push(C?C.closeCompletion:{label:"</"+w+">",type:"type",boost:2});let q=M.concat((C?.children||(O?a:o)).map(P=>P.openCompletion));if(O&&C?.text.length){let P=O.firstChild;P.to>h.pos-20&&!/\S/.test(h.state.sliceDoc(P.to,h.pos))&&(q=q.concat(C.text))}return{from:S,options:q,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}else return null}}const np=Ya.define({name:"xml",parser:q5.configure({props:[Dp.add({Element(l){let t=/^\s*<\//.test(l.textAfter);return l.lineIndent(l.node.from)+(t?0:l.unit)},"OpenTag CloseTag SelfClosingTag"(l){return l.column(l.node.from)+l.unit}}),Bp.add({Element(l){let t=l.firstChild,e=l.lastChild;return!t||t.name!="OpenTag"?null:{from:t.to,to:e.name=="CloseTag"?e.from:l.to}}}),SO.add({"OpenTag CloseTag":l=>l.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/$/}});function Y5(l={}){let t=[np.data.of({autocomplete:W5(l.elements||[],l.attributes||[])})];return l.autoCloseTags!==!1&&t.push(X5),new sO(np,t)}function yS(l,t,e=l.length){if(!t)return"";let i=t.firstChild,s=i&&i.getChild("TagName");return s?l.sliceString(s.from,Math.min(s.to,e)):""}const X5=Z.inputHandler.of((l,t,e,i,s)=>{if(l.composing||l.state.readOnly||t!=e||i!=">"&&i!="/"||!np.isActiveAt(l.state,t,-1))return!1;let a=s(),{state:o}=a,c=o.changeByRange(h=>{var d,p,y;let{head:b}=h,S=o.doc.sliceString(b-1,b)==i,O=Se(o).resolveInner(b,-1),w;if(S&&i==">"&&O.name=="EndTag"){let C=O.parent;if(((p=(d=C.parent)===null||d===void 0?void 0:d.lastChild)===null||p===void 0?void 0:p.name)!="CloseTag"&&(w=yS(o.doc,C.parent,b))){let M=b+(o.doc.sliceString(b,b+1)===">"?1:0),H=`</${w}>`;return{range:h,changes:{from:b,to:M,insert:H}}}}else if(S&&i=="/"&&O.name=="StartCloseTag"){let C=O.parent;if(O.from==b-2&&((y=C.lastChild)===null||y===void 0?void 0:y.name)!="CloseTag"&&(w=yS(o.doc,C,b))){let M=b+(o.doc.sliceString(b,b+1)===">"?1:0),H=`${w}>`;return{range:W.cursor(b+H.length,-1),changes:{from:b,to:M,insert:H}}}}return{range:h}});return c.changes.empty?!1:(l.dispatch([a,o.update(c,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),Q5=({value:l,language:t,onChange:e,onPaste:i,matches:s,currentMatchIndex:a,isDarkMode:o,fontSize:c,wordWrap:h})=>{const d=Fe.useRef(null),p=Fe.useRef(null),[y,b]=Fe.useState("100%"),[S,O]=Fe.useState(()=>Jd());Fe.useEffect(()=>{const C=()=>{if(p.current){const H=p.current.getBoundingClientRect();b(`${H.height}px`)}};C();const M=new ResizeObserver(C);return p.current&&M.observe(p.current),()=>M.disconnect()},[]),Fe.useEffect(()=>{switch(t){case"json":O(Jd());break;case"xml":O(Y5());break;case"html":we(()=>import("./index-Bax6huS3.js"),__vite__mapDeps([0,1,2])).then(C=>{O(C.html())});break;case"css":we(()=>import("./index-CYDUsY1D.js"),[]).then(C=>{O(C.css())});break;case"yaml":we(()=>import("./index-xuTWpXBg.js"),[]).then(C=>{O(C.javascript())});break;default:O(Jd())}},[t]);const w=$.useMemo(()=>{const C=Z.domEventHandlers({paste(M){const H=M.clipboardData?.getData("text");return H&&i(H),!1}});return[S,C,Z.theme({"&":{fontSize:`${c}px`},".cm-content":{fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, "source-code-pro", monospace'},".cm-search-match":{backgroundColor:o?"rgba(251, 191, 36, 0.25)":"rgba(251, 191, 36, 0.15)",outline:`2px solid ${o?"rgba(251, 191, 36, 0.6)":"rgba(217, 119, 6, 0.8)"}`,borderRadius:"2px",padding:"1px 2px"},".cm-search-match-active":{backgroundColor:o?"rgba(251, 191, 36, 0.5)":"rgba(251, 191, 36, 0.35)",outline:`3px solid ${o?"rgb(251, 191, 36)":"rgb(217, 119, 6)"}`,borderRadius:"2px",padding:"1px 2px",fontWeight:"600"}}),h?Z.lineWrapping:[]]},[S,i,o,c,h]);return Fe.useEffect(()=>{if(!d.current||s.length===0)return;const C=s[a];C&&d.current.dispatch({selection:{anchor:C.from,head:C.to},scrollIntoView:!0,effects:Z.scrollIntoView(C.from,{y:"center"})})},[a,s]),F.jsx("div",{ref:p,className:"flex-1 min-h-0 overflow-hidden",children:F.jsx(k2,{value:l,height:y,theme:o?C2:void 0,extensions:w,onChange:e,onCreateEditor:C=>{d.current=C},basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightSpecialChars:!0,foldGutter:!0,drawSelection:!0,dropCursor:!0,allowMultipleSelections:!0,indentOnInput:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,rectangularSelection:!0,crosshairCursor:!0,highlightActiveLine:!0,highlightSelectionMatches:!0,closeBracketsKeymap:!0,searchKeymap:!0,foldKeymap:!0,completionKeymap:!0,lintKeymap:!0}})})},G5=({characterCount:l,lineCount:t,wordCount:e,language:i})=>F.jsxs("div",{className:"flex items-center justify-between px-6 py-2 bg-slate-900 dark:bg-slate-900 bg-gray-50 border-t border-slate-800 dark:border-slate-800 border-gray-200 text-sm",children:[F.jsxs("div",{className:"flex items-center gap-4",children:[F.jsxs("div",{className:"text-slate-400 dark:text-slate-400 text-gray-600",children:["Characters: ",F.jsx("span",{className:"text-slate-200 dark:text-slate-200 text-gray-900 font-medium",children:l.toLocaleString()})]}),F.jsxs("div",{className:"text-slate-400 dark:text-slate-400 text-gray-600",children:["Words: ",F.jsx("span",{className:"text-slate-200 dark:text-slate-200 text-gray-900 font-medium",children:e.toLocaleString()})]}),F.jsxs("div",{className:"text-slate-400 dark:text-slate-400 text-gray-600",children:["Lines: ",F.jsx("span",{className:"text-slate-200 dark:text-slate-200 text-gray-900 font-medium",children:t.toLocaleString()})]})]}),F.jsxs("div",{className:"text-slate-400 dark:text-slate-400 text-gray-600",children:["Language: ",F.jsx("span",{className:"text-slate-200 dark:text-slate-200 text-gray-900 font-medium uppercase",children:i})]})]});function P5(l,t){const e=l.message,i=e.match(/line (\d+)|position (\d+)|at position (\d+)/i);if(i){const a=parseInt(i[1]||i[2]||i[3]||"0"),o=t.substring(0,a).split(`
`);return{message:e.replace(/at line \d+|at position \d+|position \d+/gi,"").trim()||e,line:o.length}}const s=e.match(/Unexpected token.*?at position (\d+)/i);if(s){const a=parseInt(s[1]),o=t.substring(0,a).split(`
`);return{message:e,line:o.length}}return{message:e}}function bS(l,t){const e=l.message,i=e.match(/line (\d+)|at line (\d+)/i);if(i){const s=parseInt(i[1]||i[2]||"0");return{message:e.replace(/at line \d+|line \d+/gi,"").trim()||e,line:s}}return{message:e}}function lp(l,t=2){try{const e=JSON.parse(l);return JSON.stringify(e,null,t)}catch(e){const i=P5(e,l),s=i.line?`Invalid JSON at line ${i.line}: ${i.message}`:`Invalid JSON: ${i.message}`;throw new Error(s)}}function Kp(l,t="  "){try{const s=new DOMParser().parseFromString(l,"text/xml").querySelector("parsererror");if(s){const d=s.textContent||"Invalid XML",p=bS(new Error(d),l),y=p.line?`Invalid XML at line ${p.line}: ${p.message}`:`Invalid XML: ${p.message}`;throw new Error(y)}let a=l;a=a.replace(/>\s*</g,"><");let o=0;const c=[],h=a.split(/(<[^>]+>)/g);for(let d=0;d<h.length;d++){const p=h[d];if(!(!p||p.trim()===""))if(p.startsWith("<"))p.startsWith("</")?(o=Math.max(0,o-1),c.push(t.repeat(o)+p)):p.endsWith("/>")||p.match(/<\w+[^>]*\/>/)?c.push(t.repeat(o)+p):p.startsWith("<?")?c.push(p):p.startsWith("<!")?c.push(t.repeat(o)+p):(c.push(t.repeat(o)+p),o++);else{const y=p.trim();y&&c.push(t.repeat(o)+y)}}return c.join(`
`)}catch(e){const i=bS(e),s=i.line?`Invalid XML at line ${i.line}: ${i.message}`:`Invalid XML: ${i.message}`;throw new Error(s)}}function $5(l){try{const t=JSON.parse(l);return JSON.stringify(t)}catch(t){throw new Error("Invalid JSON: "+t.message)}}function M2(l){try{if(new DOMParser().parseFromString(l,"text/xml").querySelector("parsererror"))throw new Error("Invalid XML");return l.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+</g,"><").replace(/\s+/g," ").replace(/>\s/g,">").replace(/\s</g,"<").trim()}catch(t){throw new Error("Invalid XML: "+t.message)}}function K5(l,t="  "){try{return Kp(l,t)}catch(e){throw new Error("Invalid HTML: "+e.message)}}function I5(l,t="  "){try{let e=l,i=0;const s=[];e=e.replace(/\s*{\s*/g," { ").replace(/\s*}\s*/g," } ").replace(/\s*;\s*/g,"; ");const a=e.split(/([{};])/);for(const o of a){const c=o.trim();if(c)if(c==="{")s.push(t.repeat(i)+c),i++;else if(c==="}")i=Math.max(0,i-1),s.push(t.repeat(i)+c);else if(c===";"){const h=s[s.length-1];h&&!h.endsWith(";")&&!h.endsWith("{")&&!h.endsWith("}")&&(s[s.length-1]=h+";")}else s.push(t.repeat(i)+c)}return s.join(`
`)}catch(e){throw new Error("Invalid CSS: "+e.message)}}async function Z5(l,t=2){try{const e=await we(()=>import("./js-yaml-37NdyH6G.js"),[]),i=e.load(l);return e.dump(i,{indent:t,lineWidth:-1})}catch(e){throw new Error("Invalid YAML: "+e.message)}}function F5(l){return M2(l)}function J5(l){return l.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s+/g," ").replace(/\s*{\s*/g,"{").replace(/\s*}\s*/g,"}").replace(/\s*;\s*/g,";").replace(/\s*:\s*/g,":").trim()}async function tB(l){try{const t=await we(()=>import("./js-yaml-37NdyH6G.js"),[]),e=t.load(l);return t.dump(e,{indent:0,lineWidth:-1,noRefs:!0})}catch(t){throw new Error("Invalid YAML: "+t.message)}}const Rn=Object.freeze(Object.defineProperty({__proto__:null,formatCSS:I5,formatHTML:K5,formatJSON:lp,formatXML:Kp,formatYAML:Z5,minifyCSS:J5,minifyHTML:F5,minifyJSON:$5,minifyXML:M2,minifyYAML:tB},Symbol.toStringTag,{value:"Module"}));function nm(l,t,e=!1,i=!1){if(!t)return[];const s=[];let a;try{if(i)a=new RegExp(t,e?"g":"gi");else{const c=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");a=new RegExp(c,e?"g":"gi")}let o;for(;(o=a.exec(l))!==null;)s.push({from:o.index,to:o.index+o[0].length})}catch{return[]}return s}function eB(l,t,e,i=!1,s=!1){if(!t)return l;try{let a;if(s)a=new RegExp(t,i?"g":"gi");else{const o=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");a=new RegExp(o,i?"g":"gi")}return l.replace(a,e)}catch(a){return console.error("Replace error:",a),l}}function vS(l,t,e,i,s){if(!t||i<0||i>=s.length)return{content:l,newIndex:i};const a=s[i],o=l.substring(0,a.from),c=l.substring(a.to),h=o+e+c,d=e.length-(a.to-a.from),p=s.map((b,S)=>S<=i?b:{from:b.from+d,to:b.to+d}),y=i<p.length-1?i:Math.max(0,i-1);return{content:h,newIndex:y}}function iB(l){$.useEffect(()=>{const t=e=>{const s=navigator.platform.toUpperCase().indexOf("MAC")>=0?e.metaKey:e.ctrlKey;s&&e.key==="f"&&(e.preventDefault(),l.onToggleSearch()),s&&e.key==="b"&&(e.preventDefault(),l.onFormat()),s&&e.key==="z"&&!e.shiftKey&&(e.preventDefault(),l.onUndo?.()),(s&&e.shiftKey&&e.key==="z"||s&&e.key==="y")&&(e.preventDefault(),l.onRedo?.()),e.key==="Escape"&&l.onClearSearch(),e.key==="?"&&!s&&!e.shiftKey&&l.onToggleHelp?.()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[l])}const nB=$.lazy(()=>we(()=>import("./SearchWidget-Cw6TJjHu.js"),__vite__mapDeps([3,4])).then(l=>({default:l.SearchWidget}))),lB=$.lazy(()=>we(()=>import("./LoadingSpinner-KIK2Dgv3.js"),[]).then(l=>({default:l.LoadingSpinner}))),sB=$.lazy(()=>we(()=>import("./KeyboardShortcutsModal-DX7o-4R-.js"),__vite__mapDeps([5,4])).then(l=>({default:l.KeyboardShortcutsModal}))),rB=$.lazy(()=>we(()=>import("./SettingsPanel-D5NtXRiW.js"),__vite__mapDeps([6,4])).then(l=>({default:l.SettingsPanel})));function aB(){const[l,t]=$.useState(""),[e,i]=$.useState("json"),[s,a]=$.useState(!1),[o,c]=$.useState(!1),[h,d]=$.useState(2),[p,y]=$.useState(""),[b,S]=$.useState(""),[O,w]=$.useState(!1),[C,M]=$.useState(!1),[H,q]=$.useState(!1),[P,Q]=$.useState(!1),[G,V]=$.useState(0),[ut,nt]=$.useState(!1),[gt,ft]=$.useState(!0),[et,pt]=$.useState(14),[mt,St]=$.useState(!1),[B,K]=$.useState([""]),[tt,at]=$.useState(0);Fe.useEffect(()=>{const X=localStorage.getItem("markup-beautifier-content"),it=localStorage.getItem("markup-beautifier-language"),_t=localStorage.getItem("markup-beautifier-indent"),Ht=localStorage.getItem("markup-beautifier-theme"),Te=localStorage.getItem("markup-beautifier-fontSize"),nf=localStorage.getItem("markup-beautifier-wordWrap");X&&(t(X),K([X])),it&&i(it),_t&&d(_t),Ht==="light"&&ft(!1),Te&&pt(Number(Te)),nf==="true"&&St(!0)},[]),Fe.useEffect(()=>{const X=document.documentElement;gt?(X.classList.add("dark"),X.setAttribute("data-theme","dark")):(X.classList.remove("dark"),X.setAttribute("data-theme","light"))},[gt]),Fe.useEffect(()=>{l&&localStorage.setItem("markup-beautifier-content",l),localStorage.setItem("markup-beautifier-language",e),localStorage.setItem("markup-beautifier-indent",String(h)),localStorage.setItem("markup-beautifier-theme",gt?"dark":"light"),localStorage.setItem("markup-beautifier-fontSize",String(et)),localStorage.setItem("markup-beautifier-wordWrap",String(mt))},[l,e,h,gt,et,mt]);const vt=$.useMemo(()=>l?l.split(`
`).length:0,[l]),A=$.useMemo(()=>l.trim()?l.trim().split(/\s+/).filter(X=>X.length>0).length:0,[l]),z=$.useMemo(()=>nm(l,p,H,P),[l,p,H,P]),I=$.useCallback(X=>{t(X);const it=B.slice(0,tt+1);it.push(X),K(it),at(it.length-1)},[B,tt]);Fe.useEffect(()=>{z.length>0&&G>=z.length&&V(0)},[z.length,G]);const lt=$.useCallback(()=>h==="tab"?"	":h===2?2:4,[h]),yt=$.useCallback(async()=>{if(!l.trim()){Ct.error("Nothing to format");return}nt(!0);try{const X=lt();let it;switch(e){case"json":it=lp(l,X);break;case"xml":it=Kp(l,typeof X=="number"?" ".repeat(X):X);break;case"html":{const{formatHTML:_t}=await we(async()=>{const{formatHTML:Ht}=await Promise.resolve().then(()=>Rn);return{formatHTML:Ht}},void 0);it=_t(l,typeof X=="number"?" ".repeat(X):X);break}case"css":{const{formatCSS:_t}=await we(async()=>{const{formatCSS:Ht}=await Promise.resolve().then(()=>Rn);return{formatCSS:Ht}},void 0);it=_t(l,typeof X=="number"?" ".repeat(X):X);break}case"yaml":{const{formatYAML:_t}=await we(async()=>{const{formatYAML:Ht}=await Promise.resolve().then(()=>Rn);return{formatYAML:Ht}},void 0);it=await _t(l,typeof X=="number"?X:2);break}default:it=lp(l,X)}I(it),Ct.success(`${e.toUpperCase()} formatted successfully!`)}catch(X){Ct.error(X.message,{duration:5e3})}finally{nt(!1)}},[l,e,lt,I]),Ot=$.useCallback(async()=>{if(!l.trim()){Ct.error("Nothing to minify");return}nt(!0);try{let X;switch(e){case"json":{const{minifyJSON:it}=await we(async()=>{const{minifyJSON:_t}=await Promise.resolve().then(()=>Rn);return{minifyJSON:_t}},void 0);X=it(l);break}case"xml":{const{minifyXML:it}=await we(async()=>{const{minifyXML:_t}=await Promise.resolve().then(()=>Rn);return{minifyXML:_t}},void 0);X=it(l);break}case"html":{const{minifyHTML:it}=await we(async()=>{const{minifyHTML:_t}=await Promise.resolve().then(()=>Rn);return{minifyHTML:_t}},void 0);X=it(l);break}case"css":{const{minifyCSS:it}=await we(async()=>{const{minifyCSS:_t}=await Promise.resolve().then(()=>Rn);return{minifyCSS:_t}},void 0);X=it(l);break}case"yaml":{const{minifyYAML:it}=await we(async()=>{const{minifyYAML:_t}=await Promise.resolve().then(()=>Rn);return{minifyYAML:_t}},void 0);X=await it(l);break}default:{const{minifyJSON:it}=await we(async()=>{const{minifyJSON:_t}=await Promise.resolve().then(()=>Rn);return{minifyJSON:_t}},void 0);X=it(l)}}I(X),Ct.success(`${e.toUpperCase()} minified successfully!`)}catch(X){Ct.error(X.message,{duration:5e3})}finally{nt(!1)}},[l,e,I]),Nt=$.useCallback(()=>{if(tt>0){const X=tt-1;at(X),t(B[X])}},[B,tt]),Ae=$.useCallback(()=>{if(tt<B.length-1){const X=tt+1;at(X),t(B[X])}},[B,tt]),le=$.useCallback(()=>{I(""),y(""),S(""),V(0),Ct.success("Editor cleared")},[I]),Un=$.useCallback(()=>{w(X=>!X),O||(y(""),S(""),M(!1))},[O]),ls=$.useCallback(()=>{y(""),S(""),V(0)},[]),cn=Fe.useRef(null);Fe.useEffect(()=>{try{return cn.current=new Worker(new URL("/markup/assets/format.worker-BFFel-mJ.js",import.meta.url),{type:"module"}),cn.current.onmessage=X=>{const{type:it,content:_t,language:Ht}=X.data;it==="success"&&(I(_t),Ct.success(`${Ht.toUpperCase()} formatted!`))},()=>{cn.current?.terminate()}}catch(X){console.error("Failed to initialize worker:",X),Ct.error("Worker initialization failed. Some features may be disabled.")}},[]);const co=$.useCallback(X=>{const it=X.trim();if(it.length>1e6){it.startsWith("{")||it.startsWith("[")?(i("json"),Ct("Large JSON detected. Click Beautify to format.",{icon:""})):it.startsWith("<")&&(i("xml"),Ct("Large XML detected. Click Beautify to format.",{icon:""}));return}let Ht=null;it.startsWith("{")||it.startsWith("[")?(Ht="json",i("json")):it.startsWith("<?xml")||it.startsWith("<")&&it.includes("</")?(Ht="xml",i("xml")):it.startsWith("<!DOCTYPE")||it.startsWith("<html")||it.startsWith("<div")?(Ht="html",i("html")):it.includes("{")&&it.includes("}")&&it.includes(":")?it.match(/[a-zA-Z-]+\s*\{/)?(Ht="css",i("css")):(Ht="json",i("json")):it.includes(":")&&!it.includes("{")&&!it.includes("<")&&(Ht="yaml",i("yaml")),(Ht==="json"||Ht==="xml")&&cn.current&&(cn.current.postMessage({type:"format",content:X,language:Ht,indent:h,id:Date.now()}),Ct("Formatting...",{icon:"",duration:1e3}))},[]),fn=$.useCallback(()=>{z.length>0&&V(X=>(X+1)%z.length)},[z.length]),pr=$.useCallback(()=>{z.length>0&&V(X=>(X-1+z.length)%z.length)},[z.length]),gr=$.useCallback(()=>{if(!p||z.length===0)return;const X=vS(l,p,b,G,z);I(X.content);const it=nm(X.content,p,H,P);V(Math.min(G,it.length-1)),it.length===0?(Ct.success("Replaced (no more matches)"),y(""),S("")):Ct.success(`Replaced (${it.length} remaining)`)},[l,p,b,G,z,H,P,I]),Jc=$.useCallback(()=>{if(!p||z.length===0)return;const X=vS(l,p,b,G,z);I(X.content);const it=nm(X.content,p,H,P);V(Math.min(X.newIndex,it.length-1)),it.length===0?(Ct.success("Replaced (no more matches)"),y(""),S("")):Ct.success(`Replaced (${it.length} remaining)`)},[l,p,b,G,z,H,P,I]),fo=$.useCallback(()=>{if(!p)return;const X=eB(l,p,b,H,P);I(X);const it=z.length;Ct.success(`Replaced ${it} occurrence${it!==1?"s":""}`),y(""),S("")},[l,p,b,H,P,z.length,I]),Ml=$.useCallback(async X=>{const it=new FileReader;it.onload=_t=>{const Ht=_t.target?.result;if(Ht){I(Ht);const Te=Ht.trim();Te.startsWith("{")||Te.startsWith("[")?i("json"):Te.startsWith("<")&&i("xml"),Ct.success("File loaded successfully!")}},it.onerror=()=>{Ct.error("Failed to read file")},it.readAsText(X)},[I]),yr=$.useCallback(X=>{X.preventDefault(),X.stopPropagation()},[]),br=$.useCallback(X=>{X.preventDefault(),X.stopPropagation();const _t=Array.from(X.dataTransfer.files).find(Ht=>Ht.name.endsWith(".json")||Ht.name.endsWith(".xml")||Ht.name.endsWith(".txt"));_t?Ml(_t):Ct.error("Please drop a JSON or XML file")},[Ml]),tf=$.useCallback(async()=>{if(!l.trim()){Ct.error("Nothing to copy");return}try{await navigator.clipboard.writeText(l),Ct.success("Copied to clipboard!")}catch{Ct.error("Failed to copy to clipboard")}},[l]),ef=$.useCallback(()=>{if(!l.trim()){Ct.error("Nothing to download");return}try{const X=e==="json"?"json":"xml",it=e==="json"?"application/json":"application/xml",_t=new Blob([l],{type:it}),Ht=URL.createObjectURL(_t),Te=document.createElement("a");Te.href=Ht,Te.download=`formatted.${X}`,document.body.appendChild(Te),Te.click(),document.body.removeChild(Te),URL.revokeObjectURL(Ht),Ct.success("File downloaded!")}catch{Ct.error("Failed to download file")}},[l,e]);return Fe.useEffect(()=>{if(l!==B[tt]&&tt===B.length-1){const X=[...B,l];K(X),at(X.length-1),X.length>50&&(K(X.slice(-50)),at(49))}},[l]),iB({onFormat:yt,onToggleSearch:Un,onClearSearch:ls,onUndo:Nt,onRedo:Ae,onToggleHelp:()=>a(X=>!X)}),console.log("App version: 2025-12-29 15:08"),F.jsxs("div",{className:`h-screen w-screen flex flex-col ${gt?"bg-slate-900":"bg-gray-50"}`,onDragOver:yr,onDrop:br,children:[F.jsx(Pk,{position:"top-right",toastOptions:{style:{background:"#1e293b",color:"#fff",border:"1px solid #334155"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}),F.jsx(kA,{language:e,indent:h,isDarkMode:gt,onLanguageChange:i,onIndentChange:d,onFormat:yt,onMinify:Ot,onClear:le,onToggleSearch:Un,onCopy:tf,onDownload:ef,onFileUpload:Ml,onToggleTheme:()=>ft(X=>!X),onOpenSettings:()=>c(!0),isSearchVisible:O,hasContent:!!l.trim()}),O&&F.jsx("div",{className:"relative",children:F.jsx($.Suspense,{fallback:F.jsx("div",{className:"bg-slate-800 px-4 py-3 border-b border-slate-700",children:"Loading search..."}),children:F.jsx(nB,{searchTerm:p,replaceTerm:b,isReplaceVisible:C,caseSensitive:H,useRegex:P,currentMatch:G,totalMatches:z.length,onSearchChange:y,onReplaceChange:S,onToggleReplace:()=>M(X=>!X),onToggleCaseSensitive:()=>q(X=>!X),onToggleRegex:()=>Q(X=>!X),onNext:fn,onPrevious:pr,onReplaceOne:gr,onReplaceOneAndNext:Jc,onReplaceAll:fo,onClose:()=>w(!1)})})}),F.jsx(Q5,{value:l,language:e,isDarkMode:gt,fontSize:et,wordWrap:mt,onChange:X=>{if(t(X),tt===B.length-1){const it=[...B,X];K(it),at(it.length-1),it.length>50&&(K(it.slice(-50)),at(49))}},onPaste:co,matches:z,currentMatchIndex:G}),F.jsx(G5,{characterCount:l.length,lineCount:vt,wordCount:A,language:e}),F.jsx($.Suspense,{fallback:null,children:F.jsx(lB,{isLoading:ut})}),F.jsx($.Suspense,{fallback:null,children:F.jsx(sB,{isOpen:s,onClose:()=>a(!1)})}),F.jsx($.Suspense,{fallback:null,children:F.jsx(rB,{isOpen:o,onClose:()=>c(!1),language:e,indent:h,isDarkMode:gt,onLanguageChange:i,onIndentChange:d,onThemeChange:ft,fontSize:et,wordWrap:mt,onFontSizeChange:pt,onWordWrapChange:St})})]})}class oB extends $.Component{state={hasError:!1,error:null};static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,e){console.error("Uncaught error:",t,e)}render(){return this.state.hasError?F.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white p-4",children:F.jsxs("div",{className:"max-w-lg w-full bg-slate-800 rounded-lg p-6 shadow-xl border border-red-500/50",children:[F.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-4",children:"Something went wrong"}),F.jsx("p",{className:"text-slate-300 mb-4",children:"An error occurred while rendering the application."}),F.jsx("div",{className:"bg-slate-950 p-4 rounded overflow-auto max-h-60 mb-6",children:F.jsx("code",{className:"text-sm font-mono text-red-400",children:this.state.error?.toString()})}),F.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded transition-colors",children:"Reload Application"})]})}):this.props.children}}nk.createRoot(document.getElementById("root")).render(F.jsx($.StrictMode,{children:F.jsx(oB,{children:F.jsx(aB,{})})}));export{g5 as C,A2 as E,Pt as I,Za as L,cB as N,Fe as R,hA as S,mA as a,Z as b,Ni as c,Ya as d,Se as e,W as f,sO as g,Bp as h,Dp as i,F as j,SO as k,c5 as l,vv as m,yD as n,yB as o,fB as p,gB as q,z4 as r,Mp as s,L as t,mB as u,pB as v,lD as w,nD as x};
